{"version":3,"sources":["_23035.app.js","_23035.controller.js","_23035.factory.index.js","_23035.factory.create.js","_23035.factory.create.fator.js","_23035.factory.create.formacao.js","_23035.factory.create.resumo.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"_23035.js","sourcesContent":["/**\n * App do objeto _23035 - Cadastro de modelo de avaliação de desempenho.\n */\n\n'use strict';\n\nangular\n\t.module('app', [\n\t\t'vs-repeat', \n        'gc-find',\n\t\t'gc-ajax',\n\t\t'gc-transform',\n\t\t'gc-form'\n\t])\n;","/**\r\n * Controller do objeto _23035 - Cadastro de modelo de avaliação de desempenho.\r\n */\r\n\r\nangular\r\n\t.module('app')\r\n\t.value('gScope', {})\r\n\t.controller('Ctrl', Ctrl);\r\n\r\nCtrl.$inject = [\r\n\t'$scope',\r\n\t'gScope',\r\n\t'Historico',\r\n\t'Index',\r\n\t'Create',\r\n\t'CreateFator',\r\n\t'CreateFormacao',\r\n\t'CreateResumo'\r\n];\r\n\r\nfunction Ctrl( \r\n\t$scope,\r\n\tgScope,\r\n\tHistorico,\r\n\tIndex,\r\n\tCreate,\r\n\tCreateFator,\r\n\tCreateFormacao,\r\n\tCreateResumo\r\n) {\r\n\r\n\t// Public instance.\r\n\tgScope.Ctrl = this;\r\n\r\n\t// Local instance.\r\n\tvar $ctrl = this;\r\n\r\n\t// Global variables.\r\n\t$ctrl.tipoTela      = 'listar';\r\n\t$ctrl.permissaoMenu = {};\r\n\t$ctrl.Historico     = new Historico('$ctrl.Historico', $scope);\r\n\r\n\t// Objects.\r\n\t$ctrl.Index \t\t\t= new Index();\r\n\t$ctrl.Create \t\t\t= new Create();\r\n\t$ctrl.CreateFator \t\t= new CreateFator();\r\n\t$ctrl.CreateFormacao\t= new CreateFormacao();\r\n\t$ctrl.CreateResumo\t\t= new CreateResumo();\r\n}","/**\r\n * Factory index do objeto _23035 - Cadastro de modelo de avaliação de desempenho.\r\n */\r\n\r\nangular\r\n\t.module('app')\r\n\t.factory('Index', Index);    \r\n\r\nIndex.$inject = [\r\n\t'$ajax',\r\n\t'gScope'\r\n];\r\n\r\nfunction Index($ajax, gScope) {\r\n\r\n\t// Private variables.\r\n\tvar obj = null;\r\n\r\n\t/**\r\n\t * Constructor, with class name.\r\n\t */\r\n\tfunction Index() {\r\n\r\n\t\tobj = this;\r\n\r\n\t\t// Public variables\r\n\t\tthis.listaModelo        = [];\r\n\t\tthis.listaModeloFator   = [];\r\n\r\n\t\t// Public methods\r\n\t\tthis.filtrar                = filtrar;\r\n\t\tthis.consultarModeloFator   = consultarModeloFator;\r\n\t\tthis.habilitarIncluir       = habilitarIncluir;\r\n\t\tthis.exibir                 = exibir;\r\n\r\n\t\t// Init methods.\r\n\t\tthis.filtrar();\r\n\t}\r\n\t\r\n\r\n\tfunction filtrar() {\r\n\r\n\t\t$ajax\r\n\t\t\t.post('/_23035/consultarModelo')\r\n\t\t\t.then(function(response) {\r\n\r\n\t\t\t\tobj.listaModelo = response;\r\n\t\t\t});\r\n\t}\r\n\r\n\tfunction consultarModeloFator() {\r\n\r\n\t\t$ajax\r\n\t\t\t.post('/_23035/consultarModeloFator')\r\n\t\t\t.then(function(response) {\r\n\r\n\t\t\t\tobj.listaModeloFator = response;\r\n\t\t\t});\r\n\t}\r\n\r\n\tfunction habilitarIncluir() {\r\n\r\n\t\tgScope.Ctrl.tipoTela = 'incluir';\r\n\r\n\t\tsetTimeout(function() { \r\n\t\t\t$('.js-input-descricao').focus(); \r\n\t\t}, 500);\r\n\t}\r\n\r\n\tfunction exibir(modelo) {\r\n\r\n\t\tvar create = gScope.Ctrl.Create;\r\n\t\tgScope.Ctrl.tipoTela = 'exibir';\r\n\r\n\t\t$ajax\r\n\t\t\t.post('/_23035/consultarModeloItem', modelo)\r\n\t\t\t.then(function(response) {\r\n\r\n\t\t\t\tcreate.modelo           = modelo;\r\n\t\t\t\tcreate.modelo.FATOR     = response.FATOR;\r\n\t\t\t\tcreate.modelo.FORMACAO  = response.FORMACAO;\r\n\t\t\t\tcreate.modelo.RESUMO    = response.RESUMO;\r\n\t\t\t\t\r\n\t\t\t\tangular.copy(create.modelo, create.modeloBkp);\r\n\r\n\t\t\t\tgScope.Ctrl.CreateResumo.somarPeso();\r\n\r\n\t\t\t\tcreate.exibirModal();\r\n\t\t\t});\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Return the constructor function\r\n\t */\r\n\treturn Index;\r\n};","/**\r\n * Factory create do objeto _23035 - Cadastro de modelo de avaliação de desempenho.\r\n */\r\n\r\nangular\r\n\t.module('app')\r\n\t.factory('Create', Create);    \r\n\r\nCreate.$inject = [\r\n\t'$ajax',\r\n\t'gScope'\r\n];\r\n\r\nfunction Create($ajax, gScope) {\r\n\r\n\t// Private variables.\r\n\tvar obj = null;\r\n\r\n\t/**\r\n\t * Constructor, with class name.\r\n\t */\r\n\tfunction Create() {\r\n\r\n\t\tobj = this;\r\n\r\n\t\t// Public variables.\r\n\t\tthis.modelo         = {};\r\n\t\tthis.modeloBkp      = {};\r\n\r\n\t\t// Public methods.\r\n\t\tthis.init \t\t\t\t= init;\r\n\t\tthis.gravar             = gravar;\r\n\t\tthis.excluir            = excluir;\r\n\t\tthis.limparCampo        = limparCampo;\r\n\t\tthis.habilitarAlteracao = habilitarAlteracao;\r\n\t\tthis.cancelarAlteracao  = cancelarAlteracao;\r\n\t\tthis.exibirModal        = exibirModal;\r\n\t\tthis.fecharModal        = fecharModal;\r\n\r\n\t\t// Init methods.\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tfunction init() {\r\n\r\n\t\tobj.modelo.META_MEDIA_GERAL = 80;\r\n\t}\r\n\r\n\tfunction gravar() {\r\n\r\n\t\t$ajax\r\n\t\t\t.post('/_23035/gravar', obj.modelo)\r\n\t\t\t.then(function(response) {\r\n\r\n\t\t\t\tshowSuccess('Gravado com sucesso.');\r\n\t\t\t\tgScope.Ctrl.Index.filtrar();\r\n\t\t\t\tfecharModal();\r\n\t\t\t});\r\n\t}\r\n\r\n\tfunction excluir() {\r\n\r\n\t\tconfirmar();\r\n\r\n\t\tfunction confirmar() {\r\n\r\n\t\t\taddConfirme(\r\n\t\t\t\t'<h4>Confirmação</h4>',\r\n\t\t\t\t'Confirma a exclusão?',\r\n\t\t\t\t[obtn_sim, obtn_nao],\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tret: 1,\r\n\t\t\t\t\t\tfunc: function() {\r\n\r\n\t\t\t\t\t\t\tefetivar();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tret: 2,\r\n\t\t\t\t\t\tfunc: function() {}\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tfunction efetivar() {\r\n\r\n\t\t\t$ajax\r\n\t\t\t\t.post('/_23035/excluir', obj.modelo)\r\n\t\t\t\t.then(function(response){\r\n\r\n\t\t\t\t\tshowSuccess('Excluído com sucesso.');\r\n\t\t\t\t\tgScope.Ctrl.Index.filtrar();\r\n\t\t\t\t\tfecharModal();\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction limparCampo() {\r\n\r\n\t\tobj.modelo \t\t\t= {};\r\n\t\tobj.modelo.FATOR \t= [];\r\n\t\tobj.modelo.FORMACAO = [];\r\n\t\tobj.modelo.RESUMO \t= [];\r\n\r\n\t\tobj.modelo.META_MEDIA_GERAL = 80;\r\n\t\tgScope.Ctrl.CreateFator.addFator();\r\n\t\tgScope.Ctrl.CreateFormacao.addAllFormacao();\r\n\t\tgScope.Ctrl.CreateResumo.addResumo();\r\n\t\tgScope.Ctrl.CreateResumo.pesoFinal = 0;\r\n\t}\r\n\r\n\tfunction habilitarAlteracao() {\r\n\r\n\t\tgScope.Ctrl.tipoTela = 'alterar';\r\n\t}\r\n\r\n\tfunction cancelarAlteracao() {\r\n\r\n\t\tangular.copy(obj.modeloBkp, obj.modelo);\r\n\t\tgScope.Ctrl.CreateResumo.somarPeso();\r\n\t\tgScope.Ctrl.tipoTela = 'exibir';\r\n\t}\r\n\r\n\tfunction exibirModal() {\r\n\r\n\t\t$('#modal-create').modal('show');\r\n\t}\r\n\r\n\tfunction fecharModal() {\r\n\r\n\t\t$('#modal-create')\r\n\t\t\t.modal('hide')\r\n\t\t\t.find('.modal-body')\r\n\t\t\t.animate({ scrollTop: 0 }, 'fast');\r\n\r\n\t\tobj.limparCampo();\t\t\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Return the constructor function.\r\n\t */\r\n\treturn Create;\r\n};","/**\r\n * Factory create (fator) do objeto _23035 - Cadastro de modelo de avaliação de desempenho.\r\n */\r\n\r\nangular\r\n\t.module('app')\r\n\t.factory('CreateFator', CreateFator);    \r\n\r\nCreateFator.$inject = [\r\n\t'$ajax',\r\n\t'gScope'\r\n];\r\n\r\nfunction CreateFator($ajax, gScope) {\r\n\r\n\t// Private variables.\r\n\tvar obj = null;\r\n\r\n\t/**\r\n\t * Constructor, with class name.\r\n\t */\r\n\tfunction CreateFator() {\r\n\r\n\t\tobj = this;\r\n\r\n\t\t// Public variables.\r\n\t\tthis.create \t\t\t = gScope.Ctrl.Create;\r\n\t\tthis.create.modelo.FATOR = [];\r\n\t\tthis.fatorPadrao\t\t = {\r\n\t\t\tTIPO_ID\t\t: 0,\r\n\t\t\tTIPO_TITULO\t: '',\r\n\t\t\tTITULO\t\t: '',\r\n\t\t\tDESCRICAO \t: ''\r\n\t\t};\r\n\t\tthis.listaFator \t\t = [];\r\n\r\n\t\t// Public methods.\r\n\t\tthis.init \t\t\t\t= init;\r\n\t\tthis.consultarFator \t= consultarFator;\r\n\t\tthis.selecionarFator \t= selecionarFator;\r\n\t\tthis.addFator \t\t\t= addFator;\r\n\t\tthis.excluirFator \t\t= excluirFator;\r\n\r\n\t\t// Init methods.\r\n\t\tthis.init();\r\n\t}\r\n\t\r\n\tfunction init() {\r\n\r\n\t\tconsultarFator();\r\n\t\taddFator();\r\n\t}\r\n\r\n\tfunction consultarFator() {\r\n\r\n        $ajax\r\n            .post('/_23032/consultarFator')\r\n            .then(function(response) {\r\n\r\n                obj.listaFator = response;\r\n            });\r\n    }\r\n\r\n    function selecionarFator(fator) {\r\n\r\n    \tvar ftr = {};\r\n\r\n    \tfor (var i in obj.listaFator) {\r\n\r\n    \t\tftr = obj.listaFator[i];\r\n\r\n    \t\tif (ftr.ID == fator.AVALIACAO_DES_FATOR_ID) {\r\n\t    \t\r\n\t    \t\tfator.TIPO_ID \t\t= ftr.TIPO_ID;\r\n\t\t\t\tfator.TIPO_TITULO \t= ftr.TIPO_TITULO;\r\n\t\t\t\tfator.TITULO \t\t= ftr.TITULO;\r\n\t\t\t\tfator.DESCRICAO \t= ftr.DESCRICAO;\r\n\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n    \t}\r\n    }\r\n\r\n\tfunction addFator() {\r\n\r\n\t\tvar fatorNovo = {};\r\n        angular.copy(obj.fatorPadrao, fatorNovo);\r\n        obj.create.modelo.FATOR.push(fatorNovo);\r\n\t}\r\n\r\n\tfunction excluirFator(fator) {\r\n\r\n\t\tif (fator.ID > 0)\r\n            fator.STATUSEXCLUSAO = '1';\r\n        else\r\n            obj.create.modelo.FATOR.splice(obj.create.modelo.FATOR.indexOf(fator), 1);\r\n\r\n        // Adicionar fator quando não houver nenhum.\r\n        if (obj.create.modelo.FATOR.length == 0)\r\n            addFator();\r\n        else {\r\n\r\n            var ftr  = {},\r\n                resta = false;\r\n\r\n            // Verificar se tem algum fator que não tenha sido marcado para excluir.\r\n            for (var i in obj.create.modelo.FATOR) {\r\n                \r\n                ftr = obj.create.modelo.FATOR[i];\r\n\r\n                if (ftr.STATUSEXCLUSAO != '1') {\r\n\r\n                    resta = true;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (resta == false)\r\n                addFator();\r\n        }\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Return the constructor function.\r\n\t */\r\n\treturn CreateFator;\r\n};","/**\r\n * Factory create (formação) do objeto _23035 - Cadastro de modelo de avaliação de desempenho.\r\n */\r\n\r\nangular\r\n\t.module('app')\r\n\t.factory('CreateFormacao', CreateFormacao);    \r\n\r\nCreateFormacao.$inject = [\r\n\t'$ajax',\r\n\t'gScope',\r\n\t'$q'\r\n];\r\n\r\nfunction CreateFormacao($ajax, gScope, $q) {\r\n\r\n\t// Private variables.\r\n\tvar obj = null;\r\n\r\n\t/**\r\n\t * Constructor, with class name.\r\n\t */\r\n\tfunction CreateFormacao() {\r\n\r\n\t\tobj = this;\r\n\r\n\t\t// Public variables.\r\n\t\tthis.create \t\t\t \t= gScope.Ctrl.Create;\r\n\t\tthis.create.modelo.FORMACAO = [];\r\n\t\tthis.formacaoPadrao\t\t \t= {\r\n\t\t\tDESCRICAO \t: '',\r\n\t\t\tPONTO \t\t: 0\r\n\t\t};\r\n\t\tthis.listaFormacao \t\t = [];\r\n\r\n\t\t// Public methods.\r\n\t\tthis.init \t\t\t\t= init;\r\n\t\tthis.consultarFormacao \t= consultarFormacao;\r\n\t\tthis.selecionarFormacao = selecionarFormacao;\r\n\t\tthis.addAllFormacao \t= addAllFormacao;\r\n\t\tthis.addFormacao \t\t= addFormacao;\r\n\t\tthis.excluirFormacao \t= excluirFormacao;\r\n\r\n\t\t// Init methods.\r\n\t\tthis.init();\r\n\t}\r\n\t\r\n\tfunction init() {\r\n\r\n\t\tconsultarFormacao().then(function() {\r\n\t\t\taddAllFormacao();\r\n\t\t});\r\n\t}\r\n\r\n\tfunction consultarFormacao() {\r\n\r\n\t\treturn $q(function(resolve, error) {\r\n\t\t\t\r\n\t\t\t$ajax\r\n\t\t\t\t.post('/_23033/consultarFormacao')\r\n\t\t\t\t.then(function(response) {\r\n\r\n\t\t\t\t\tobj.listaFormacao = response;\r\n\t\t\t\t\tresolve(true);\r\n\t\t\t\t\r\n\t\t\t\t}, function(error) {\r\n\t\t\t\t\treject(error);\r\n\t\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tfunction selecionarFormacao(formacao) {\r\n\r\n\t\tvar frm = {};\r\n\r\n\t\tfor (var i in obj.listaFormacao) {\r\n\r\n\t\t\tfrm = obj.listaFormacao[i];\r\n\r\n\t\t\tif (frm.ID == formacao.AVALIACAO_DES_FORMACAO_ID) {\r\n\t\t\t\r\n\t\t\t\tformacao.DESCRICAO \t= frm.DESCRICAO;\r\n\t\t\t\tformacao.PONTO \t\t= frm.PONTO;\r\n\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction addAllFormacao() {\r\n\r\n\t\tvar formacao = {};\r\n\r\n\t\tangular.copy(obj.listaFormacao, obj.create.modelo.FORMACAO);\r\n\r\n\t\tfor (var i in obj.create.modelo.FORMACAO) {\r\n\r\n\t\t\tformacao = obj.create.modelo.FORMACAO[i];\r\n\t\t\tformacao.AVALIACAO_DES_FORMACAO_ID = formacao.ID;\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\tfunction addFormacao() {\r\n\r\n\t\tvar formacaoNovo = {};\r\n\t\tangular.copy(obj.formacaoPadrao, formacaoNovo);\r\n\t\tobj.create.modelo.FORMACAO.push(formacaoNovo);\r\n\t}\r\n\r\n\tfunction excluirFormacao(formacao) {\r\n\r\n\t\tif (formacao.ID > 0)\r\n\t\t\tformacao.STATUSEXCLUSAO = '1';\r\n\t\telse\r\n\t\t\tobj.create.modelo.FORMACAO.splice(obj.create.modelo.FORMACAO.indexOf(formacao), 1);\r\n\r\n\t\t// Adicionar formacao quando não houver nenhum.\r\n\t\tif (obj.create.modelo.FORMACAO.length == 0)\r\n\t\t\taddFormacao();\r\n\t\telse {\r\n\r\n\t\t\tvar frm  = {},\r\n\t\t\t\tresta = false;\r\n\r\n\t\t\t// Verificar se tem algum formacao que não tenha sido marcado para excluir.\r\n\t\t\tfor (var i in obj.create.modelo.FORMACAO) {\r\n\t\t\t\t\r\n\t\t\t\tfrm = obj.create.modelo.FORMACAO[i];\r\n\r\n\t\t\t\tif (frm.STATUSEXCLUSAO != '1') {\r\n\r\n\t\t\t\t\tresta = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (resta == false)\r\n\t\t\t\taddFormacao();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Return the constructor function.\r\n\t */\r\n\treturn CreateFormacao;\r\n};","/**\r\n * Factory create (resumo) do objeto _23035 - Cadastro de modelo de avaliação de desempenho.\r\n */\r\n\r\nangular\r\n\t.module('app')\r\n\t.factory('CreateResumo', CreateResumo);    \r\n\r\nCreateResumo.$inject = [\r\n\t'$ajax',\r\n\t'gScope'\r\n];\r\n\r\nfunction CreateResumo($ajax, gScope) {\r\n\r\n\t// Private variables.\r\n\tvar obj = null;\r\n\r\n\t/**\r\n\t * Constructor, with class name.\r\n\t */\r\n\tfunction CreateResumo() {\r\n\r\n\t\tobj = this;\r\n\r\n\t\t// Public variables.\r\n\t\tthis.create \t\t\t \t= gScope.Ctrl.Create;\r\n\t\tthis.create.modelo.RESUMO \t= [];\r\n\t\tthis.resumoPadrao\t\t \t= {\r\n\t\t\tDESCRICAO: '',\r\n\t\t\tPONTO \t : 0\r\n\t\t};\r\n\t\tthis.listaResumo \t\t = [];\r\n\t\tthis.pesoFinal \t \t\t = 0;\r\n\r\n\t\t// Public methods.\r\n\t\tthis.init \t\t\t\t\t= init;\r\n\t\tthis.consultarResumo \t\t= consultarResumo;\r\n\t\tthis.selecionarResumo \t\t= selecionarResumo;\r\n\t\tthis.somarPeso \t\t\t\t= somarPeso;\r\n\t\tthis.addResumo \t\t\t\t= addResumo;\r\n\t\tthis.excluirResumo \t\t\t= excluirResumo;\r\n\r\n\t\t// Init methods.\r\n\t\tthis.init();\r\n\t}\r\n\t\r\n\tfunction init() {\r\n\r\n\t\tconsultarResumo();\r\n\t\taddResumo();\r\n\t}\r\n\r\n\tfunction consultarResumo() {\r\n\r\n        $ajax\r\n            .post('/_23034/consultarResumo')\r\n            .then(function(response) {\r\n\r\n                obj.listaResumo = response.RESUMO;\r\n            });\r\n    }\r\n\r\n    function selecionarResumo(resumo) {\r\n\r\n    \tvar rsm = {};\r\n\r\n    \tfor (var i in obj.listaResumo) {\r\n\r\n    \t\trsm = obj.listaResumo[i];\r\n\r\n    \t\tif (rsm.ID == resumo.AVALIACAO_DES_RESUMO_ID) {\r\n\t    \t\r\n\t    \t\tresumo.DESCRICAO = rsm.DESCRICAO;\r\n\t\t\t\tresumo.PESO \t = rsm.PESO;\r\n\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n    \t}\r\n\r\n\t\tsomarPeso();\r\n    }\r\n\r\n    function somarPeso() {\r\n\r\n    \tvar resumo = {};\r\n    \tobj.pesoFinal = 0;\r\n\r\n    \tfor (var i in obj.create.modelo.RESUMO) {\r\n\r\n    \t\tresumo = obj.create.modelo.RESUMO[i];\r\n    \t\t\r\n    \t\tif (resumo.STATUSEXCLUSAO != '1')\r\n    \t\t\tobj.pesoFinal += resumo.PESO;\r\n    \t}\r\n    }\r\n\r\n\tfunction addResumo() {\r\n\r\n\t\tvar resumoNovo = {};\r\n        angular.copy(obj.resumoPadrao, resumoNovo);\r\n        obj.create.modelo.RESUMO.push(resumoNovo);\r\n\t}\r\n\r\n\tfunction excluirResumo(resumo) {\r\n\r\n\t\tif (resumo.ID > 0)\r\n            resumo.STATUSEXCLUSAO = '1';\r\n        else\r\n            obj.create.modelo.RESUMO.splice(obj.create.modelo.RESUMO.indexOf(resumo), 1);\r\n\r\n        // Adicionar resumo quando não houver nenhum.\r\n        if (obj.create.modelo.RESUMO.length == 0)\r\n            addResumo();\r\n        else {\r\n\r\n            var rsm  = {},\r\n                resta = false;\r\n\r\n            // Verificar se tem algum resumo que não tenha sido marcado para excluir.\r\n            for (var i in obj.create.modelo.RESUMO) {\r\n                \r\n                rsm = obj.create.modelo.RESUMO[i];\r\n\r\n                if (rsm.STATUSEXCLUSAO != '1') {\r\n\r\n                    resta = true;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (resta == false)\r\n                addResumo();\r\n        }\r\n\r\n        somarPeso();\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Return the constructor function.\r\n\t */\r\n\treturn CreateResumo;\r\n};"]}