{"version":3,"sources":["relogio.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"relogio.js","sourcesContent":["/* global moment */\n\n(function($) {\n    \n    \n    Clock = {\n        DATETIME_SERVER : null,\n        DATETIME_FERER : null,\n        DATETIME_FERRER_SERVER : null,\n        PC_HORA_INICIO : null,\n        PC_HORA_ATUAL : null,\n        PC_DIFERENCA : null,\n        NOW : null,\n        Init : function() {\n//            this.Increment();\n            this.Refresh();\n            this.SetTimeServer();\n        },    \n        SetTimeServer : function() {\n            var that = this;\n            setInterval(function() {\n                $.get( \"/current-time-server\", function( data ) {\n                    that.DATETIME_FERER = data;\n                });\n            },300000);\n        },\n        Refresh : function() {\n            var that = this;\n            setInterval(function() {\n                that.Increment();\n            }, 1000);            \n        },\n        Increment : function() {\n            \n            var cur = new Date();\n            var startTime = moment(Clock.PC_HORA_INICIO).format();\n            var endTime   = moment(cur).format();\n\n            var duration     = moment.duration(moment(endTime).diff(startTime));            \n            Clock.PC_DIFERENCA = duration.asSeconds();            \n            \n\t\t\ttime_server = moment(Clock.DATETIME_FERRER_SERVER).add(Clock.PC_DIFERENCA, 's');\n            this.DATETIME_SERVER = moment(time_server).format(\"YYYY-MM-DD HH:mm:ss\"); \n            document.getElementById(\"_hora-servidor\").value = this.DATETIME_SERVER;\n            document.querySelector('#relogio #data').innerHTML = moment(time_server).format(\"DD/MM/YYYY\");\n            document.querySelector('#relogio #hora').innerHTML = moment(time_server).format(\"HH:mm:ss\");\n        }\n        \n    };\n\n    Clock.watch('DATETIME_FERER', function (id, oldval, newval) {\n        that = Clock;\n        that.PC_HORA_INICIO = new Date();\n        that.DATETIME_SERVER = newval;\n        that.DATETIME_FERRER_SERVER = newval;\n      });\n\t\n\t$(function() {\t\n\t\tif( $(window).width() > 768 && window.name == '') {\n            Clock.Init();\n        }\n\t\t\t\n\t\t\n\t});\n\t\n})(jQuery);"]}