{"version":3,"sources":["_23037.app.js","_23037.controller.js","_23037.factory.index.js","_23037.factory.create.js","_23037.factory.create.colaborador.js","_23037.factory.create.fator.js","_23037.factory.create.formacao.js","_23037.factory.create.resumo.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"_23037.js","sourcesContent":["/**\n * App do objeto _23037 - Avaliação de desempenho.\n */\n\n'use strict';\n\nangular\n\t.module('app', [\n\t\t'vs-repeat', \n        'gc-find',\n\t\t'gc-ajax',\n\t\t'gc-transform',\n\t\t'gc-form'\n\t])\n;","/**\r\n * Controller do objeto _23037 - Avaliação de desempenho.\r\n */\r\n\r\nangular\r\n\t.module('app')\r\n\t.value('gScope', {})\r\n\t.controller('Ctrl', Ctrl);\r\n\r\nCtrl.$inject = [\r\n\t'$scope',\r\n\t'gScope',\r\n\t'Historico',\r\n\t'Index',\r\n\t'Create',\r\n\t'CreateColaborador',\r\n\t'CreateFator',\r\n\t'CreateFormacao',\r\n\t'CreateResumo'\r\n];\r\n\r\nfunction Ctrl( \r\n\t$scope,\r\n\tgScope,\r\n\tHistorico,\r\n\tIndex,\r\n\tCreate,\r\n\tCreateColaborador,\r\n\tCreateFator,\r\n\tCreateFormacao,\r\n\tCreateResumo\r\n) {\r\n\r\n\t// Public instance.\r\n\tgScope.Ctrl = this;\r\n\r\n\t// Local instance.\r\n\tvar $ctrl = this;\r\n\r\n\t// Global variables.\r\n\t$ctrl.tipoTela      = 'listar';\r\n\t$ctrl.permissaoMenu = {};\r\n\t$ctrl.Historico     = new Historico('$ctrl.Historico', $scope);\r\n\t$ctrl.tipoFuncao    = 'base'; \t// resposta ou base\r\n\r\n\t// Objects.\r\n\t$ctrl.Index \t\t\t= new Index();\r\n\t$ctrl.Create \t\t \t= new Create();\r\n\t$ctrl.CreateColaborador = new CreateColaborador();\r\n\t$ctrl.CreateFator \t \t= new CreateFator();\r\n\t$ctrl.CreateFormacao \t= new CreateFormacao();\r\n\t$ctrl.CreateResumo \t \t= new CreateResumo();\r\n}","/**\r\n * Factory index do objeto _23037 - Avaliação de desempenho.\r\n */\r\n\r\nangular\r\n\t.module('app')\r\n\t.factory('Index', Index);    \r\n\r\nIndex.$inject = [\r\n\t'$ajax',\r\n\t'gScope',\r\n\t'$timeout'\r\n];\r\n\r\nfunction Index($ajax, gScope, $timeout) {\r\n\r\n\t// Private variables.\r\n\tvar obj = null;\r\n\r\n\t/**\r\n\t * Constructor, with class name.\r\n\t */\r\n\tfunction Index() {\r\n\r\n\t\tobj = this;\r\n\r\n\t\t// Public variables\r\n\t\tthis.filtroBase \t\t\t\t= {};\r\n\t\tthis.filtroResposta\t\t\t\t= {};\r\n\t\tthis.listaBase \t\t\t\t\t= [];\r\n\t\tthis.listaResposta \t\t\t\t= [];\r\n\r\n\t\t// Public methods\r\n\t\tthis.init \t\t\t\t\t\t= init;\r\n\t\tthis.filtrarBase \t  \t \t\t= filtrarBase;\r\n\t\tthis.filtrarResposta  \t \t\t= filtrarResposta;\r\n\t\tthis.exibirAvaliacao  \t \t\t= exibirAvaliacao;\r\n\t\tthis.verListaResposta \t \t\t= verListaResposta;\r\n\t\tthis.exibirModalListaResposta \t= exibirModalListaResposta;\r\n\t\tthis.fecharModalListaResposta \t= fecharModalListaResposta;\r\n\t\tthis.fixVsRepeatListaResposta \t= fixVsRepeatListaResposta;\r\n\t\tthis.exibirResposta   \t \t\t= exibirResposta;\r\n\r\n\t\t// Init methods.\r\n\t\tthis.init();\r\n\t}\r\n\t\r\n\tfunction init() {\r\n\t\t\r\n\t\tthis.filtroBase.STATUS\t\t\t= '1';\r\n\t\tthis.filtroBase.TODOS_CCUSTO\t= 0;\r\n\t\tthis.filtroBase.DATA_INI_INPUT \t= moment().subtract(1, \"month\").toDate();\r\n\t\tthis.filtroBase.DATA_FIM_INPUT \t= moment().toDate();\r\n\r\n\t\tthis.filtroResposta.TODOS_CCUSTO\t= 0;\r\n\t\tthis.filtroResposta.DATA_INI_INPUT \t= moment().subtract(1, \"month\").toDate();\r\n\t\tthis.filtroResposta.DATA_FIM_INPUT \t= moment().toDate();\r\n\t}\r\n\r\n\tfunction filtrarBase() {\r\n\r\n\t\tobj.filtroBase.DATA_INI = moment(obj.filtroBase.DATA_INI_INPUT).format('YYYY-MM-DD');\r\n\t\tobj.filtroBase.DATA_FIM = moment(obj.filtroBase.DATA_FIM_INPUT).format('YYYY-MM-DD');\r\n\r\n\t\t$ajax\r\n\t\t\t.post('/_23037/consultarBase', obj.filtroBase)\r\n\t\t\t.then(function(response) {\r\n\r\n\t\t\t\tobj.listaBase = response;\r\n\r\n\t\t\t\tformatarCampo();\r\n\t\t\t});\r\n\r\n\t\tfunction formatarCampo() {\r\n\r\n\t\t\tvar base = {};\r\n\r\n\t\t\tfor (var i in obj.listaBase) {\r\n\r\n\t\t\t\tbase = obj.listaBase[i];\r\n\r\n\t\t\t\tbase.DATA_AVALIACAO_HUMANIZE = moment(base.DATA_AVALIACAO).format('MMM YYYY');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction filtrarResposta() {\r\n\r\n\t\tobj.filtroResposta.DATA_INI = moment(obj.filtroResposta.DATA_INI_INPUT).format('YYYY-MM-DD');\r\n\t\tobj.filtroResposta.DATA_FIM = moment(obj.filtroResposta.DATA_FIM_INPUT).format('YYYY-MM-DD');\r\n\r\n\t\t$ajax\r\n\t\t\t.post('/_23037/consultarAvaliacao', obj.filtroResposta)\r\n\t\t\t.then(function(response) {\r\n\r\n\t\t\t\tobj.listaResposta = response;\r\n\r\n\t\t\t\tformatarCampo();\r\n\t\t\t});\r\n\r\n\t\tfunction formatarCampo() {\r\n\r\n\t\t\tvar resp = {};\r\n\r\n\t\t\tfor (var i in obj.listaResposta) {\r\n\r\n\t\t\t\tresp = obj.listaResposta[i];\r\n\r\n\t\t\t\tresp.DATA_AVALIACAO_HUMANIZE  = moment(resp.DATA_AVALIACAO).format('MMM YYYY');\r\n\t\t\t\tresp.DATAHORA_INSERT_HUMANIZE = moment(resp.DATAHORA_INSERT).format('DD/MM/YYYY HH:mm:ss');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction exibirAvaliacao(base) {\r\n\r\n\t\tvar create = gScope.Ctrl.Create;\r\n\t\tgScope.Ctrl.tipoTela = 'exibir';\r\n\r\n\t\t$ajax\r\n\t\t\t.post('/_23037/consultarModeloItem', base)\r\n\t\t\t.then(function(response) {\r\n\r\n\t\t\t\tcreate.avaliacao.AVALIACAO_DES_RESP_BASE_ID\t= base.ID;\r\n\t\t\t\tcreate.avaliacao.TITULO \t\t\t\t\t= base.TITULO;\r\n\t\t\t\tcreate.avaliacao.INSTRUCAO_INICIAL \t\t\t= base.INSTRUCAO_INICIAL;\r\n\t\t\t\tcreate.avaliacao.STATUS \t\t\t\t\t= base.STATUS;\r\n\t\t\t\tcreate.avaliacao.META_MEDIA_GERAL \t\t\t= parseFloat(base.META_MEDIA_GERAL);\r\n\t\t\t\tcreate.avaliacao.DATA_AVALIACAO \t\t\t= base.DATA_AVALIACAO;\r\n\t\t\t\tcreate.avaliacao.DATA_AVALIACAO_INPUT \t\t= moment(base.DATA_AVALIACAO).toDate();\r\n\r\n\t\t\t\tcreate.avaliacao.FATOR \t\t = response.FATOR;\r\n\t\t\t\tcreate.avaliacao.FATOR_TIPO  = response.FATOR_TIPO;\r\n\t\t\t\tcreate.avaliacao.FATOR_NIVEL = response.FATOR_NIVEL;\r\n\t\t\t\tcreate.avaliacao.FORMACAO \t = response.FORMACAO;\r\n\t\t\t\tcreate.avaliacao.RESUMO \t = response.RESUMO;\r\n\r\n\t\t\t\tgScope.Ctrl.CreateResumo.calcularPesoFinal();\r\n\r\n\t\t\t\tangular.copy(create.avaliacao, create.avaliacaoBkp);\r\n\r\n\t\t\t\tgScope.Ctrl.tipoFuncao = 'base';\r\n\t\t\t\tcreate.exibirModalAvaliacao();\r\n\t\t\t});\r\n\t}\r\n\r\n\tfunction verListaResposta(modalAberto) {\r\n\r\n\t\tmodalAberto = (typeof modalAberto == 'undefined') ? false : modalAberto;\r\n\r\n\t\tgScope.Ctrl.tipoTela = 'listar';\r\n\r\n\t\tif (!modalAberto)\r\n\t\t\tobj.exibirModalListaResposta();\r\n\t}\r\n\r\n\tfunction exibirModalListaResposta() {\r\n\r\n\t\t$('#modal-resposta').modal('show');\r\n\t\tobj.fixVsRepeatListaResposta();\r\n\t}\r\n\r\n\tfunction fecharModalListaResposta() {\r\n\r\n\t\t$('#modal-resposta')\r\n\t\t\t.modal('hide')\r\n\t\t\t.find('.modal-body')\r\n\t\t\t.animate({ scrollTop: 0 }, 'fast');\t\t\r\n\t}\r\n\r\n\t/**\r\n     * Fix para vs-repeat: exibir a tabela completa.\r\n     */\r\n    function fixVsRepeatListaResposta() {\r\n\r\n        $timeout(function(){\r\n            $('#modal-resposta .table-resposta').scrollTop(0);\r\n        }, 200);\r\n    }\r\n\r\n\tfunction exibirResposta(avaliacao) {\r\n\r\n\t\tvar create = gScope.Ctrl.Create;\r\n\t\tgScope.Ctrl.tipoTela = 'exibir';\r\n\r\n\t\t$ajax\r\n\t\t\t.post('/_23037/consultarAvaliacaoItem', avaliacao)\r\n\t\t\t.then(function(response) {\r\n\r\n\t\t\t\tcreate.avaliacao           \t\t= avaliacao;\r\n\t\t\t\tcreate.avaliacao.FATOR     \t\t= response.FATOR;\r\n\t\t\t\tcreate.avaliacao.FATOR_TIPO     = response.FATOR_TIPO;\r\n\t\t\t\tcreate.avaliacao.FATOR_NIVEL    = response.FATOR_NIVEL;\r\n\t\t\t\tcreate.avaliacao.FORMACAO  \t\t= response.FORMACAO;\r\n\t\t\t\tcreate.avaliacao.RESUMO    \t\t= response.RESUMO;\r\n\t\t\t\tcreate.avaliacao.GESTOR \t\t= angular.copy(gScope.Ctrl.CreateColaborador.gestorPadrao);\r\n\r\n\t\t\t\tcarregarColaborador();\r\n\t\t\t\tformatarCampo();\r\n\t\t\t\tgScope.Ctrl.CreateResumo.calcularPesoFinal();\r\n\r\n\t\t\t\tangular.copy(create.avaliacao, create.avaliacaoBkp);\r\n\t\t\t\tgScope.Ctrl.tipoFuncao = 'resposta';\r\n\t\t\t\tcreate.exibirModalAvaliacao();\r\n\t\t\t});\r\n\r\n\r\n\t\tfunction carregarColaborador() {\r\n\r\n\t\t\tcreate.avaliacao.COLABORADOR = {\r\n\t\t\t\tCODIGO \t\t\t\t\t\t\t: create.avaliacao.COLABORADOR_ID,\r\n\t\t\t\tPESSOAL_NOME \t\t\t\t\t: create.avaliacao.COLABORADOR_NOME,\r\n\t\t\t\tCARGO_CODIGO \t\t\t\t\t: create.avaliacao.COLABORADOR_CARGO_ID,\r\n\t\t\t\tCARGO_DESCRICAO \t\t\t\t: create.avaliacao.COLABORADOR_CARGO,\r\n\t\t\t\tGESTOR_ID\t\t\t\t\t\t: create.avaliacao.COLABORADOR_GESTOR_ID,\r\n\t\t\t\tGESTOR \t\t\t\t\t\t\t: create.avaliacao.COLABORADOR_GESTOR,\r\n\t\t\t\tCENTRO_DE_CUSTO_CODIGO\t\t\t: create.avaliacao.COLABORADOR_CCUSTO_CODIGO,\r\n\t\t\t\tCENTRO_DE_CUSTO_DESCRICAO\t\t: create.avaliacao.COLABORADOR_CCUSTO_DESCRICAO,\r\n\t\t\t\tDATA_ADMISSAO \t\t\t\t\t: create.avaliacao.COLABORADOR_ADMISSAO,\r\n\t\t\t\tPESSOAL_ESCOLARIDADE \t\t\t: create.avaliacao.COLABORADOR_ESCOLARIDADE_ID,\r\n\t\t\t\tPESSOAL_ESCOLARIDADE_DESCRICAO \t: create.avaliacao.COLABORADOR_ESCOLARIDADE_DESC\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tfunction formatarCampo() {\r\n\r\n\t\t\tcreate.avaliacao.DATA_AVALIACAO_INPUT \t\t\t\t= moment(create.avaliacao.DATA_AVALIACAO).toDate();\r\n\t\t\tcreate.avaliacao.DATA_AVALIACAO_HUMANIZE_LONG \t\t= moment(create.avaliacao.DATA_AVALIACAO).format('MMMM YYYY');\r\n\t\t\tcreate.avaliacao.DATAHORA_INSERT_INPUT \t\t\t\t= moment(create.avaliacao.DATAHORA_INSERT).toDate();\r\n\t\t\tcreate.avaliacao.DATAHORA_INSERT_HUMANIZE\t\t\t= moment(create.avaliacao.DATAHORA_INSERT).format('DD/MM/YYYY HH:mm:ss');\r\n\t\t\tcreate.avaliacao.COLABORADOR.DATA_ADMISSAO_INPUT \t= moment(create.avaliacao.COLABORADOR.DATA_ADMISSAO).toDate();\r\n\t\t\tcreate.avaliacao.COLABORADOR.DATA_ADMISSAO_HUMANIZE = moment(create.avaliacao.COLABORADOR.DATA_ADMISSAO).format('DD/MM/YYYY');\r\n\t\t\tcreate.avaliacao.META_MEDIA_GERAL \t\t\t\t\t= parseFloat(create.avaliacao.META_MEDIA_GERAL);\r\n\r\n\t\t\tfor (var i in create.avaliacao.FATOR)\r\n\t\t\t\tcreate.avaliacao.FATOR[i].PONTO = parseFloat(create.avaliacao.FATOR[i].PONTO);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Return the constructor function\r\n\t */\r\n\treturn Index;\r\n};","/**\r\n * Factory create do objeto _23037 - Avaliação de desempenho.\r\n */\r\n\r\nangular\r\n\t.module('app')\r\n\t.factory('Create', Create);    \r\n\r\nCreate.$inject = [\r\n\t'$ajax',\r\n\t'gScope'\r\n];\r\n\r\nfunction Create($ajax, gScope) {\r\n\r\n\t// Private variables.\r\n\tvar obj = null;\r\n\r\n\t/**\r\n\t * Constructor, with class name.\r\n\t */\r\n\tfunction Create() {\r\n\r\n\t\tobj = this;\r\n\r\n\t\t// Public variables\r\n\t\tthis.avaliacao \t\t= {};\r\n\t\tthis.avaliacaoBkp \t= {};\r\n\r\n\t\t// Public methods\r\n\t\tthis.init \t            \t\t = init;\r\n\t\tthis.formatarCampo \t\t\t\t = formatarCampo;\r\n\t\tthis.gravarAvaliacao    \t\t = gravarAvaliacao;\r\n\t\tthis.excluirAvaliacao   \t\t = excluirAvaliacao;\r\n\t\tthis.limparCampo        \t\t = limparCampo;\r\n\t\tthis.habilitarResponder \t\t = habilitarResponder;\r\n\t\tthis.cancelarAlteracaoAvaliacao  = cancelarAlteracaoAvaliacao;\r\n\t\tthis.exibirModalAvaliacao \t\t = exibirModalAvaliacao;\r\n\t\tthis.fecharModalAvaliacao \t\t = fecharModalAvaliacao;\r\n\t\tthis.imprimirAvaliacao \t\t \t = imprimirAvaliacao;\r\n\r\n\t\t// Init methods.\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tfunction init() {\r\n\r\n\t\tobj.formatarCampo();\r\n\t}\r\n\r\n\tfunction formatarCampo() {\r\n\r\n\t\tobj.avaliacao.DATA_AVALIACAO_INPUT = moment().toDate();\r\n\t}\r\n\r\n\tfunction gravarAvaliacao() {\r\n\r\n\t\tobj.avaliacao.DATA_AVALIACAO = moment(obj.avaliacao.DATA_AVALIACAO_INPUT).format('YYYY-MM-DD');\r\n\t\t\r\n\t\t$ajax\r\n\t\t\t.post('/_23037/gravarAvaliacao', obj.avaliacao)\r\n\t\t\t.then(function(response) {\r\n\r\n\t\t\t\tshowSuccess('Gravado com sucesso.');\r\n\t\t\t\tgScope.Ctrl.Index.verListaResposta(true);\r\n\t\t\t\tobj.fecharModalAvaliacao();\r\n\t\t\t});\r\n\t}\r\n\r\n\tfunction excluirAvaliacao() {\r\n\r\n\t\tconfirmar();\r\n\r\n\t\tfunction confirmar() {\r\n\r\n\t\t\taddConfirme(\r\n\t\t\t\t'<h4>Confirmação</h4>',\r\n\t\t\t\t'Confirma a exclusão?',\r\n\t\t\t\t[obtn_sim, obtn_nao],\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tret: 1,\r\n\t\t\t\t\t\tfunc: function() {\r\n\r\n\t\t\t\t\t\t\tefetivar();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tret: 2,\r\n\t\t\t\t\t\tfunc: function() {}\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tfunction efetivar() {\r\n\r\n\t\t\t$ajax\r\n\t\t\t\t.post('/_23037/excluirAvaliacao', obj.avaliacao)\r\n\t\t\t\t.then(function(response) {\r\n\r\n\t\t\t\t\tshowSuccess('Excluído com sucesso.');\r\n\t\t\t\t\tgScope.Ctrl.Index.verListaResposta(true);\r\n\t\t\t\t\tgScope.Ctrl.Index.filtrarResposta();\r\n\t\t\t\t\tfecharModalAvaliacao();\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction limparCampo() {\r\n\r\n\t\tobj.avaliacao \t\t\t\t= {};\r\n\t\tobj.avaliacao.COLABORADOR\t= {};\r\n\t\tobj.avaliacao.FATOR     \t= [];\r\n\t\tobj.avaliacao.FATOR_TIPO\t= [];\r\n\t\tobj.avaliacao.FATOR_NIVEL\t= [];\r\n\t\tobj.avaliacao.FORMACAO  \t= [];\r\n\t\tobj.avaliacao.RESUMO \t\t= [];\r\n\t\tobj.avaliacao.GESTOR \t\t= angular.copy(gScope.Ctrl.CreateColaborador.gestorPadrao);\r\n\r\n\t\tobj.formatarCampo();\r\n\t}\r\n\r\n\tfunction habilitarResponder() {\r\n\r\n\t\tgScope.Ctrl.tipoTela = 'responder';\r\n\t}\r\n\r\n\tfunction cancelarAlteracaoAvaliacao() {\r\n\r\n\t\tangular.copy(obj.avaliacaoBkp, obj.avaliacao);\r\n\t\tgScope.Ctrl.tipoTela = 'exibir';\r\n\t}\r\n\r\n\tfunction exibirModalAvaliacao() {\r\n\r\n\t\t$('#modal-avaliacao').modal('show');\r\n\t}\r\n\r\n\tfunction fecharModalAvaliacao() {\r\n\r\n\t\t$('#modal-avaliacao')\r\n\t\t\t.modal('hide')\r\n\t\t\t.find('.modal-body')\r\n\t\t\t.animate({ scrollTop: 0 }, 'fast');\r\n\r\n\t\tobj.limparCampo();\t\t\r\n\t}\r\n\r\n\tfunction imprimirAvaliacao() {\r\n\r\n\t\tpreparar();\r\n\r\n\t\tsetTimeout(function() {\r\n\r\n\t\t\tprintHtml(\r\n\t\t\t\t'print-avaliacao-desempenho', \r\n\t\t\t\t'Relatório de avaliação de desempenho', \r\n\t\t\t\t'', \r\n\t\t\t\t$('#usuario-descricao').val(), \r\n\t\t\t\t'1.0', \r\n\t\t\t\t2, \r\n\t\t\t\t'/assets/css/23037-print.css'\r\n\t\t\t);\r\n\t\t\t\r\n\t\t}, 500);\r\n\r\n\t\tfunction preparar() {\r\n\r\n\t\t\tvar fator = {}, \r\n\t\t\t\tnivel = {};\r\n\r\n\t\t\tfor (var i in obj.avaliacao.FATOR) {\r\n\r\n\t\t\t\tfator = obj.avaliacao.FATOR[i];\r\n\r\n\t\t\t\tfor (var j in obj.avaliacao.FATOR_NIVEL) {\r\n\r\n\t\t\t\t\tnivel = obj.avaliacao.FATOR_NIVEL[j];\r\n\r\n\t\t\t\t\tif ((nivel.FATOR_ID == fator.FATOR_ID) \r\n\t\t\t\t\t\t&& ((fator.PONTO >= nivel.FAIXA_INICIAL) && (fator.PONTO <= nivel.FAIXA_FINAL))\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tfator.NIVEL_PRINT = nivel;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Return the constructor function\r\n\t */\r\n\treturn Create;\r\n};","/**\r\n * Factory create (colaborador) do objeto _23037 - Avaliação de desempenho.\r\n */\r\n\r\nangular\r\n\t.module('app')\r\n\t.factory('CreateColaborador', CreateColaborador);    \r\n\r\nCreateColaborador.$inject = [\r\n\t'$ajax',\r\n\t'gScope',\r\n\t'$timeout'\r\n];\r\n\r\nfunction CreateColaborador($ajax, gScope, $timeout) {\r\n\r\n\t// Private variables.\r\n\tvar obj = null;\r\n\r\n\t/**\r\n\t * Constructor, with class name.\r\n\t */\r\n\tfunction CreateColaborador() {\r\n\r\n\t\tobj = this;\r\n\r\n\t\t// Public variables\r\n\t\tthis.create \t\t\t \t \t\t= gScope.Ctrl.Create;\r\n\t\tthis.create.avaliacao.COLABORADOR \t= {};\r\n\t\tthis.listaColaborador\t\t \t\t= [];\r\n\t\tthis.gestorPadrao \t\t\t\t\t= {};\r\n\r\n\t\t// Public methods\r\n\t\tthis.definirGestor \t\t\t\t\t = definirGestor;\r\n\t\tthis.consultarColaborador \t\t\t = consultarColaborador;\r\n\t\tthis.selecionarColaborador \t\t\t = selecionarColaborador;\r\n\t\tthis.consultarColaboradorIndicador \t = consultarColaboradorIndicador;\r\n\t\tthis.calcularIndicador \t\t\t\t = calcularIndicador;\r\n\t\tthis.fixVsRepeatPesqColaborador \t = fixVsRepeatPesqColaborador;\r\n\t\tthis.exibirModal \t\t\t\t\t = exibirModal;\r\n\t\tthis.fecharModal \t\t\t\t\t = fecharModal;\r\n\r\n\t\t// Init methods.\r\n\t\tthis.definirGestor();\r\n\t}\r\n\r\n\tfunction definirGestor() {\r\n\r\n\t\tobj.gestorPadrao = {\r\n\t\t\tID \t\t : document.getElementById('usuario-id').value,\r\n\t\t\tDESCRICAO: document.getElementById('usuario-descricao').value\r\n\t\t};\r\n\r\n\t\tobj.create.avaliacao.GESTOR = angular.copy(obj.gestorPadrao);\r\n\t}\r\n\t\r\n\tfunction consultarColaborador() {\r\n\r\n\t\t$ajax\r\n\t\t\t.post('/_23037/consultarColaborador')\r\n\t\t\t.then(function(response) {\r\n\r\n\t\t\t\tobj.listaColaborador = response;\r\n\t\t\t});\r\n\t}\r\n\r\n\tfunction selecionarColaborador(colaborador) {\r\n\r\n\t\tcolaborador.DATA_ADMISSAO_INPUT\t = moment(colaborador.DATA_ADMISSAO).toDate();\r\n\t\tobj.create.avaliacao.COLABORADOR = colaborador;\r\n\r\n\t\tobj.consultarColaboradorIndicador(colaborador);\r\n\t\tgScope.Ctrl.CreateFormacao.selecionarFormacao(colaborador);\r\n\t\tobj.fecharModal();\r\n\t}\r\n\r\n\tfunction consultarColaboradorIndicador(colaborador) {\r\n\r\n\t\tvar param = {\r\n\t\t\tCOLABORADOR : colaborador,\r\n\t\t\tDATA_INI \t: moment().subtract(1, 'years').format('YYYY-MM-DD'),\r\n\t\t\tDATA_FIM\t: moment().format('YYYY-MM-DD')\r\n\t\t};\r\n\r\n\t\t$ajax\r\n\t\t\t.post('/_23037/consultarColaboradorIndicador', param)\r\n\t\t\t.then(function(response) {\r\n\r\n\t\t\t\tobj.calcularIndicador(response.ABSENTEISMO[0].ABSENTEISMO, true);\r\n\t\t\t\t\r\n\t\t\t\tfor (var i in response.INDICADOR)\r\n\t\t\t\t\tobj.calcularIndicador(response.INDICADOR[i].PERC_INDICADOR, false, response.INDICADOR[i].INDICADOR_ID);\r\n\t\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Calcular indicador de absenteísmo a partir da porcentagem de absenteísmo do colaborador.\r\n\t * A porcentagem é inversamente proporcional ao indicador.\r\n\t * Ex.: Indicador = 46 à 65\r\n\t *\t\tPorcentagem = 2.99 à 2.75\r\n\t */\r\n\tfunction calcularIndicador(percentualIndicador, ehAbsenteismo, indicadorId) {\r\n\t\t\r\n\t\tvar fator = {};\r\n\r\n\t\tpercentualIndicador = parseFloat(percentualIndicador);\r\n\t\tehAbsenteismo \t\t= (typeof ehAbsenteismo == 'undefined') ? false : ehAbsenteismo;\r\n\t\tindicadorId \t\t= (typeof indicadorId   == 'undefined') ? 0 \t: indicadorId;\r\n\r\n\t\tfor (var i in obj.create.avaliacao.FATOR) {\r\n\t\t\t\r\n\t\t\tfator = obj.create.avaliacao.FATOR[i];\r\n\r\n\t\t\t// Quando for absenteísmo, calcula e define somente ele.\r\n\t\t\tif (ehAbsenteismo && fator.TITULO.match(/absente/i)) {\r\n\r\n\t\t\t\tefetuar();\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\telse if (indicadorId == fator.FATOR_ID) {\r\n\t\t\t\t\r\n\t\t\t\tefetuar();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tfunction efetuar() {\r\n\r\n\t\t\tvar indicador1 \t\t\t\t = 0,\r\n\t\t\t\tindicador2 \t\t\t\t = 0,\r\n\t\t\t\tperc1 \t\t\t\t\t = 0,\r\n\t\t\t\tperc2 \t\t\t\t\t = 0,\r\n\t\t\t\tdiferencaIndicador \t\t = 0,\r\n\t\t\t\tmenorIndicador \t\t\t = 0,\r\n\t\t\t\tmaiorIndicador \t\t\t = 0,\r\n\t\t\t\tdiferencaPercentualFaixa = 0,\r\n\t\t\t\tmenorPercentual \t\t = 0,\r\n\t\t\t\tmaiorPercentual \t\t = 0,\r\n\t\t\t\tdiferencaPercentualAbs \t = 0,\r\n\t\t\t\tresultado \t\t\t\t = 0,\r\n\t\t\t\tnivel \t\t\t\t\t = {};\r\n\r\n\t\t\tfor (var j in obj.create.avaliacao.FATOR_NIVEL) {\r\n\t\t\r\n\t\t\t\tnivel = obj.create.avaliacao.FATOR_NIVEL[j];\r\n\r\n\t\t\t\tif (nivel.FATOR_ID == fator.FATOR_ID) {\r\n\r\n\t\t\t\t\t// Converter number (string) para float.\r\n\t\t\t\t\tnivel.DESCRITIVO_FAIXA_INICIAL \t= nivel.DESCRITIVO_FAIXA_INICIAL == null ? 0 : parseFloat(nivel.DESCRITIVO_FAIXA_INICIAL);\r\n\t\t\t\t\tnivel.DESCRITIVO_FAIXA_FINAL \t= nivel.DESCRITIVO_FAIXA_FINAL\t == null ? 0 : parseFloat(nivel.DESCRITIVO_FAIXA_FINAL);\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Indicadores.\r\n\t\t\t\t\tindicador1 = nivel.FAIXA_INICIAL;\r\n\t\t\t\t\tindicador2 = nivel.FAIXA_FINAL;\r\n\r\n\t\t\t\t\tif (percentualIndicador >= nivel.DESCRITIVO_FAIXA_INICIAL && percentualIndicador <= nivel.DESCRITIVO_FAIXA_FINAL) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tperc1 = nivel.DESCRITIVO_FAIXA_INICIAL;\r\n\t\t\t\t\t\tperc2 = nivel.DESCRITIVO_FAIXA_FINAL;\r\n\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tmenorIndicador \t\t \t = (indicador1 > indicador2) ? indicador2 : indicador1;\r\n\t\t\tmaiorIndicador \t\t \t = (indicador1 < indicador2) ? indicador2 : indicador1;\r\n\t\t\tdiferencaIndicador \t\t = maiorIndicador - menorIndicador;\r\n\r\n\t\t\tmenorPercentual \t\t = (perc1 > perc2) ? perc2 : perc1;\r\n\t\t\tmaiorPercentual \t\t = (perc1 < perc2) ? perc2 : perc1;\r\n\t\t\tdiferencaPercentualFaixa = maiorPercentual - menorPercentual;\r\n\r\n\t\t\t// Se a ordem da faixa do descritivo do fator for decrescente.\r\n\t\t\tif (fator.ORDEM_PERC_NIVEL == '1')\r\n\t\t\t\tdiferencaPercentualAbs = maiorPercentual - percentualIndicador;\r\n\t\t\telse\r\n\t\t\t\tdiferencaPercentualAbs = percentualIndicador - menorPercentual;\r\n\r\n\t\t\tresultado = (diferencaPercentualFaixa == 0) \r\n\t\t\t\t\t\t\t? 0 : (diferencaIndicador * diferencaPercentualAbs) / diferencaPercentualFaixa;\r\n\r\n\t\t\tresultado = resultado + menorIndicador;\r\n\r\n\t\t\tfator.PONTO = (resultado < 0) ? 0 : parseFloat(resultado.toFixed(2));\r\n\t\t\tfator.jaCalculado = true;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n     * Fix para vs-repeat: exibir a tabela completa.\r\n     */\r\n    function fixVsRepeatPesqColaborador() {\r\n\r\n        $timeout(function(){\r\n            $('#modal-pesq-colaborador .table-colaborador').scrollTop(0);\r\n        }, 200);\r\n\r\n    }\r\n\r\n\tfunction exibirModal() {\r\n\r\n\t\tif (obj.listaColaborador.length == 0)\r\n\t\t\tobj.consultarColaborador();\r\n\r\n\t\t$('#modal-pesq-colaborador').modal('show');\r\n\r\n\t\tsetTimeout(function() {\r\n\t\t\t$('.js-input-filtrar-colaborador').focus();\r\n\t\t}, 500);\r\n\r\n\t\tobj.fixVsRepeatPesqColaborador();\r\n\t}\r\n\r\n\tfunction fecharModal() {\r\n\r\n\t\t$('#modal-pesq-colaborador')\r\n\t\t\t.modal('hide')\r\n\t\t\t.find('.modal-body')\r\n\t\t\t.animate({ scrollTop: 0 }, 'fast');\r\n\r\n\t\tobj.filtrarColaborador = \"\";\r\n\t}\r\n\r\n\t/**\r\n\t * Return the constructor function\r\n\t */\r\n\treturn CreateColaborador;\r\n};","/**\r\n * Factory create (fator) do objeto _23037 - Avaliação de desempenho.\r\n */\r\n\r\nangular\r\n\t.module('app')\r\n\t.factory('CreateFator', CreateFator);    \r\n\r\nCreateFator.$inject = [\r\n\t'$ajax',\r\n\t'gScope'\r\n];\r\n\r\nfunction CreateFator($ajax, gScope) {\r\n\r\n\t// Private variables.\r\n\tvar obj = null;\r\n\r\n\t/**\r\n\t * Constructor, with class name.\r\n\t */\r\n\tfunction CreateFator() {\r\n\r\n\t\tobj = this;\r\n\r\n\t\t// Public variables\r\n\t\tthis.create \t\t\t \t \t\t= gScope.Ctrl.Create;\r\n\t\tthis.create.avaliacao.FATOR  \t\t= [];\r\n\t\tthis.create.avaliacao.FATOR_NIVEL \t= [];\r\n\r\n\t\t// Public methods\r\n\t\tthis.exibirDescritivo \t\t\t= exibirDescritivo;\r\n\t\tthis.calcularPontuacao \t\t\t= calcularPontuacao;\r\n\t\tthis.calcularPontuacaoPorTipo \t= calcularPontuacaoPorTipo;\r\n\t\tthis.calcularPontuacaoResumo \t= calcularPontuacaoResumo;\r\n\r\n\t\t// Init methods.\r\n\t}\r\n\t\r\n\tfunction exibirDescritivo(fator) {\r\n\r\n\t\tvar descritivoContainer \t\t = document.getElementById('descritivo-container-'+fator.ID);\r\n\r\n\t\tfator.exibeDescritivo \t\t\t = !fator.exibeDescritivo;\r\n\t\tdescritivoContainer.style.height = fator.exibeDescritivo ? descritivoContainer.scrollHeight+10+'px' : 0;\r\n\t}\r\n\r\n\tfunction calcularPontuacao() {\r\n\r\n\t\tvar avaliacao = obj.create.avaliacao;\r\n\r\n\t\tavaliacao.PONTUACAO_TOTAL_FATOR = 0;\r\n\r\n\t\tfor (var i in avaliacao.FATOR)\r\n\t\t\tavaliacao.PONTUACAO_TOTAL_FATOR += parseFloat(avaliacao.FATOR[i].PONTO) || 0;\r\n\r\n\t\tavaliacao.PONTUACAO_MEDIA_FATOR = avaliacao.PONTUACAO_TOTAL_FATOR / avaliacao.FATOR.length;\r\n\r\n\t\tcalcularPontuacaoPorTipo();\r\n\t\tcalcularPontuacaoResumo();\r\n\t}\r\n\r\n\tfunction calcularPontuacaoPorTipo() {\r\n\r\n\t\tvar avaliacao \t= obj.create.avaliacao,\r\n\t\t\ttipo \t\t= {},\r\n\t\t\tqtdTipo \t= 0,\r\n\t\t\tfator \t\t= {};\t\t\r\n\r\n\t\tfor (var i in avaliacao.FATOR_TIPO) {\r\n\r\n\t\t\ttipo = avaliacao.FATOR_TIPO[i];\r\n\r\n\t\t\tqtdTipo = 0;\r\n\t\t\ttipo.PONTUACAO_TOTAL = 0;\r\n\r\n\t\t\tfor (var j in avaliacao.FATOR) {\r\n\r\n\t\t\t\tfator = avaliacao.FATOR[j];\r\n\r\n\t\t\t\tif (fator.TIPO_ID == tipo.AVALIACAO_DES_FATOR_TIPO) {\r\n\t\t\t\t\t\r\n\t\t\t\t\ttipo.PONTUACAO_TOTAL += parseFloat(fator.PONTO) || 0;\r\n\t\t\t\t\tqtdTipo += 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\ttipo.PONTUACAO_MEDIA = tipo.PONTUACAO_TOTAL / qtdTipo;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction calcularPontuacaoResumo() {\r\n\r\n\t\tvar avaliacao \t\t\t= obj.create.avaliacao,\r\n\t\t\tresumo \t\t\t\t= {},\r\n\t\t\tfator \t\t\t\t= {},\r\n\t\t\tpontuacaoTotalFator = 0,\r\n\t\t\tqtdFator \t\t\t= 0;\r\n\r\n\t\tfor (var j in avaliacao.RESUMO) {\r\n\r\n\t\t\tresumo \t\t\t\t= avaliacao.RESUMO[j];\r\n\t\t\tqtdFator \t\t\t= 0;\r\n\t\t\tpontuacaoTotalFator = 0;\r\n\r\n\t\t\tfor (var i in avaliacao.FATOR) {\r\n\r\n\t\t\t\tfator = avaliacao.FATOR[i];\t\r\n\r\n\t\t\t\tif (resumo.FATOR_TIPO_ID && resumo.FATOR_TIPO_ID.includes(fator.TIPO_ID)) {\r\n\r\n\t\t\t\t\tpontuacaoTotalFator += parseFloat(fator.PONTO) || 0;\r\n\t\t\t\t\tqtdFator++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Se houver algum tipo de fator definido para o item resumo.\r\n\t\t\tif (resumo.FATOR_TIPO_ID != '0' && resumo.FATOR_TIPO_ID != null && resumo.FATOR_TIPO_ID != '')\r\n\t\t\t\tresumo.PONTUACAO_GERAL = pontuacaoTotalFator / qtdFator;\r\n\r\n\t\t\tgScope.Ctrl.CreateResumo.calcularResultadoParcial(resumo);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Return the constructor function\r\n\t */\r\n\treturn CreateFator;\r\n};","/**\r\n * Factory create (formação) do objeto _23037 - Avaliação de desempenho.\r\n */\r\n\r\nangular\r\n\t.module('app')\r\n\t.factory('CreateFormacao', CreateFormacao);\r\n\r\nCreateFormacao.$inject = [\r\n\t'$ajax',\r\n\t'gScope'\r\n];\r\n\r\nfunction CreateFormacao($ajax, gScope) {\r\n\r\n\t// Private variables.\r\n\tvar obj = null;\r\n\r\n\t/**\r\n\t * Constructor, with class name.\r\n\t */\r\n\tfunction CreateFormacao() {\r\n\r\n\t\tobj = this;\r\n\r\n\t\t// Public variables\r\n\t\tthis.create \t\t\t \t\t= gScope.Ctrl.Create;\r\n\t\tthis.create.avaliacao.FORMACAO \t= [];\r\n\r\n\t\t// Public methods\r\n\t\tthis.selecionarFormacao = selecionarFormacao;\r\n\t\tthis.alterarFormacao \t= alterarFormacao;\r\n\r\n\t\t// Init methods.\r\n\t}\r\n\r\n\t/**\r\n\t * Selecionar formação ao escolher colaborador.\r\n\t */\r\n\tfunction selecionarFormacao(colaborador) {\r\n\r\n\t\tvar escolaridadeColab \t = parseInt(colaborador.PESSOAL_ESCOLARIDADE),\r\n\t\t\tescolaridadeEsperada = parseInt(colaborador.CARGO_ESCOLARIDADE),\r\n\t\t\tformacao \t\t\t = {};\r\n\r\n\t\t// Está estudando.\r\n\t\tif (escolaridadeColab == 8 && escolaridadeEsperada == 9) {\r\n\t\t\tobj.create.avaliacao.FORMACAO_ESCOLHIDA_ID = 3;\r\n\t\t}\r\n\t\t// Tem a formação esperada.\r\n\t\telse if (escolaridadeColab >= escolaridadeEsperada) {\r\n\t\t\tobj.create.avaliacao.FORMACAO_ESCOLHIDA_ID = 4;\r\n\t\t}\r\n\t\t// Não tem a formação esperada.\r\n\t\telse if (escolaridadeColab < escolaridadeEsperada) {\r\n\t\t\tobj.create.avaliacao.FORMACAO_ESCOLHIDA_ID = 1;\r\n\t\t}\r\n\r\n\t\tfor (var i in obj.create.avaliacao.FORMACAO) {\r\n\r\n\t\t\tformacao = obj.create.avaliacao.FORMACAO[i];\r\n\r\n\t\t\tif (formacao.ID == obj.create.avaliacao.FORMACAO_ESCOLHIDA_ID) {\r\n\r\n\t\t\t\tobj.alterarFormacao(formacao);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Alterações no resumo ao alterar formação.\r\n\t */\r\n\tfunction alterarFormacao(formacao) {\r\n\r\n\t\tvar resumo = {};\r\n\r\n\t\tfor (var i in obj.create.avaliacao.RESUMO) {\r\n\r\n\t\t\tresumo = obj.create.avaliacao.RESUMO[i];\r\n\t\t\t\r\n\t\t\t// Se não houver algum tipo de fator definido para o item resumo.\r\n\t\t\tif (resumo.FATOR_TIPO_ID == '0' || resumo.FATOR_TIPO_ID == null || resumo.FATOR_TIPO_ID == '') {\r\n\t\t\t\t\r\n\t\t\t\tresumo.PONTUACAO_GERAL = formacao.PONTO;\r\n\t\t\t\tgScope.Ctrl.CreateResumo.calcularResultadoParcial(resumo);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Return the constructor function\r\n\t */\r\n\treturn CreateFormacao;\r\n};","/**\r\n * Factory create (resumo) do objeto _23037 - Avaliação de desempenho.\r\n */\r\n\r\nangular\r\n\t.module('app')\r\n\t.factory('CreateResumo', CreateResumo);    \r\n\r\nCreateResumo.$inject = [\r\n\t'$ajax',\r\n\t'gScope'\r\n];\r\n\r\nfunction CreateResumo($ajax, gScope) {\r\n\r\n\t// Private variables.\r\n\tvar obj = null;\r\n\r\n\t/**\r\n\t * Constructor, with class name.\r\n\t */\r\n\tfunction CreateResumo() {\r\n\r\n\t\tobj = this;\r\n\r\n\t\t// Public variables\r\n\t\tthis.create \t\t\t \t = gScope.Ctrl.Create;\r\n\t\tthis.create.avaliacao.RESUMO = [];\r\n\r\n\t\t// Public methods\r\n\t\tthis.calcularPesoFinal \t\t\t= calcularPesoFinal;\r\n\t\tthis.calcularResultadoParcial \t= calcularResultadoParcial;\r\n\t\tthis.calcularResultadoFinal \t= calcularResultadoFinal;\r\n\r\n\t\t// Init methods.\r\n\t}\r\n\r\n\tfunction calcularPesoFinal() {\r\n\r\n\t\tvar avaliacao = obj.create.avaliacao;\r\n\r\n\t\tavaliacao.PESO_FINAL_RESUMO = 0;\r\n\t\t\r\n\t\tfor (var i in avaliacao.RESUMO)\r\n\t\t\tavaliacao.PESO_FINAL_RESUMO += parseFloat(avaliacao.RESUMO[i].PESO) || 0;\r\n\t}\r\n\r\n\tfunction calcularResultadoParcial(resumo) {\r\n\r\n\t\tvar pontuacaoGeral = parseFloat(resumo.PONTUACAO_GERAL);\r\n\r\n\t\tresumo.RESULTADO = (pontuacaoGeral == 0) ? 0 : pontuacaoGeral * (parseFloat(resumo.PESO) / 100);\r\n\r\n\t\tcalcularResultadoFinal();\r\n\t}\r\n\r\n\tfunction calcularResultadoFinal() {\r\n\r\n\t\tvar avaliacao = obj.create.avaliacao;\r\n\r\n\t\tavaliacao.RESULTADO_FINAL_RESUMO = 0;\r\n\r\n\t\tfor (var i in avaliacao.RESUMO)\r\n\t\t\tavaliacao.RESULTADO_FINAL_RESUMO += parseFloat(avaliacao.RESUMO[i].RESULTADO) || 0;\r\n\r\n\t\t// Definir se alcançou a meta.\r\n\t\tavaliacao.ALCANCOU_META_MEDIA_GERAL = (avaliacao.RESULTADO_FINAL_RESUMO >= parseFloat(avaliacao.META_MEDIA_GERAL)) ? '1' : '0';\r\n\t}\r\n\r\n\t/**\r\n\t * Return the constructor function\r\n\t */\r\n\treturn CreateResumo;\r\n};"]}