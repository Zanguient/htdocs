{"version":3,"sources":["_23034.app.js","_23034.controller.js","_23034.factory.index.js","_23034.factory.create.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"_23034.js","sourcesContent":["/**\n * App do objeto _23034 - Cadastro de resumo para avaliação de desempenho.\n */\n\n'use strict';\n\nangular\n\t.module('app', [\n\t\t'vs-repeat', \n        'gc-find',\n\t\t'gc-ajax',\n\t\t'gc-transform',\n\t\t'gc-form'\n\t])\n;","/**\r\n * Controller do objeto _23034 - Cadastro de resumo para avaliacao de desempenho.\r\n */\r\n\r\nangular\r\n\t.module('app')\r\n\t.value('gScope', {})\r\n\t.controller('Ctrl', Ctrl);\r\n\r\nCtrl.$inject = [\r\n\t'$scope',\r\n\t'gScope',\r\n\t'Historico',\r\n\t'Index',\r\n\t'Create'\r\n];\r\n\r\nfunction Ctrl( \r\n\t$scope,\r\n\tgScope,\r\n\tHistorico,\r\n\tIndex,\r\n\tCreate\r\n) {\r\n\r\n\t// Public instance.\r\n\tgScope.Ctrl = this;\r\n\r\n\t// Local instance.\r\n\tvar $ctrl = this;\r\n\r\n\t// Global variables.\r\n\t$ctrl.tipoTela      = 'listar';\r\n\t$ctrl.permissaoMenu = {};\r\n\t$ctrl.Historico     = new Historico('$ctrl.Historico', $scope);\r\n\r\n\t// Objects.\r\n\t$ctrl.Index  = new Index();\r\n\t$ctrl.Create = new Create();\r\n}","/**\r\n * Factory index do objeto _23034 - Cadastro de resumo para avaliação de desempenho.\r\n */\r\n\r\nangular\r\n\t.module('app')\r\n\t.factory('Index', Index);    \r\n\r\nIndex.$inject = [\r\n\t'$ajax',\r\n\t'gScope'\r\n];\r\n\r\nfunction Index($ajax, gScope) {\r\n\r\n\t// Private variables.\r\n\tvar obj = null;\r\n\r\n\t/**\r\n\t * Constructor, with class name.\r\n\t */\r\n\tfunction Index() {\r\n\r\n\t\tobj = this;\r\n\r\n\t\t// Public variables\r\n\t\tthis.listaResumo    = [];\r\n\t\tthis.listaFatorTipo = [];\r\n\r\n\t\t// Public methods\r\n\t\tthis.filtrar          = filtrar;\r\n\t\tthis.habilitarIncluir = habilitarIncluir;\r\n\t\tthis.exibir           = exibir;\r\n\r\n\t\t// Init methods.\r\n\t\tthis.filtrar();\r\n\t}\r\n\t\r\n\r\n\tfunction filtrar() {\r\n\r\n\t\t$ajax\r\n\t\t\t.post('/_23034/consultarResumo')\r\n\t\t\t.then(function(response){\r\n\r\n\t\t\t\tobj.listaResumo     = response.RESUMO;\r\n\t\t\t\tobj.listaFatorTipo  = response.FATOR_TIPO;\r\n\r\n\t\t\t\tcarregarResumoFatorTipo(response.RESUMO_FATOR_TIPO);\r\n\t\t\t});\r\n\r\n\t\tfunction carregarResumoFatorTipo(resumoFatorTipo) {\r\n\r\n\t\t\tvar rsm = {},\r\n\t\t\t\tftr = {};\r\n\r\n\t\t\tfor (var i in obj.listaResumo) {\r\n\r\n\t\t\t\trsm = obj.listaResumo[i];\r\n\r\n\t\t\t\tfor (var j in resumoFatorTipo) {\r\n\r\n\t\t\t\t\tftr = resumoFatorTipo[j];\r\n\r\n\t\t\t\t\trsm.FATOR_TIPO = rsm.FATOR_TIPO ? rsm.FATOR_TIPO : [];\r\n\r\n\t\t\t\t\tif (rsm.ID == ftr.AVALIACAO_DES_RESUMO_ID)\r\n\t\t\t\t\t\trsm.FATOR_TIPO.push(ftr);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction habilitarIncluir() {\r\n\r\n\t\tgScope.Ctrl.tipoTela = 'incluir';\r\n\r\n\t\tsetTimeout(function() { \r\n\t\t\t$('.js-input-descricao').focus(); \r\n\t\t}, 500);\r\n\t}\r\n\r\n\tfunction exibir(resumo) {\r\n\r\n\t\tgScope.Ctrl.tipoTela = 'exibir';\r\n\t\tgScope.Ctrl.Create.exibir(resumo);\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Return the constructor function\r\n\t */\r\n\treturn Index;\r\n};","/**\r\n * Factory create do objeto _23034 - Cadastro de resumo para avaliação de desempenho.\r\n */\r\n\r\nangular\r\n\t.module('app')\r\n\t.factory('Create', Create);    \r\n\r\nCreate.$inject = [\r\n\t'$ajax',\r\n\t'gScope'\r\n];\r\n\r\nfunction Create($ajax, gScope) {\r\n\r\n\t// Private variables.\r\n\tvar obj = null;\r\n\r\n\t/**\r\n\t * Constructor, with class name.\r\n\t */\r\n\tfunction Create() {\r\n\r\n\t\tobj = this;\r\n\r\n\t\t// Public variables.\r\n\t\tthis.resumo             = {};\r\n\t\tthis.resumo.FATOR_TIPO  = [];\r\n\t\tthis.resumoBkp          = {};\r\n\t\tthis.fatorTipoPadrao    = { FATOR_TIPO_ID: 0 };\r\n\r\n\t\t// Public methods.\r\n\t\tthis.addFatorTipo       = addFatorTipo;\r\n\t\tthis.excluirFatorTipo   = excluirFatorTipo;\r\n\t\tthis.gravar             = gravar;\r\n\t\tthis.excluir            = excluir;\r\n\t\tthis.limparCampo        = limparCampo;\r\n\t\tthis.exibir             = exibir;\r\n\t\tthis.habilitarAlteracao = habilitarAlteracao;\r\n\t\tthis.cancelarAlteracao  = cancelarAlteracao;\r\n\t\tthis.exibirModal        = exibirModal;\r\n\t\tthis.fecharModal        = fecharModal;\r\n\r\n\t\t// Init methods.\r\n\t\tthis.addFatorTipo();\r\n\t}\r\n\r\n\tfunction addFatorTipo() {\r\n\r\n\t\tvar tipoNovo = angular.copy(obj.fatorTipoPadrao);\r\n\t\tobj.resumo.FATOR_TIPO.push(tipoNovo);\r\n\t}\r\n\r\n\tfunction excluirFatorTipo(tipo) {\r\n\r\n\t\tif (tipo.ID > 0)\r\n            tipo.STATUSEXCLUSAO = '1';\r\n        else\r\n            obj.resumo.FATOR_TIPO.splice(obj.resumo.FATOR_TIPO.indexOf(tipo), 1);\r\n\r\n        // Adicionar tipo quando não houver nenhum.\r\n        if (obj.resumo.FATOR_TIPO.length == 0)\r\n            addFatorTipo();\r\n        else {\r\n\r\n            var tp    = {},\r\n                resta = false;\r\n\r\n            // Verificar se tem algum tipo que não tenha sido marcado para excluir.\r\n            for (var i in obj.resumo.FATOR_TIPO) {\r\n                \r\n                tp = obj.resumo.FATOR_TIPO[i];\r\n\r\n                if (tp.STATUSEXCLUSAO != '1') {\r\n\r\n                    resta = true;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (resta == false)\r\n                addFatorTipo();\r\n        }\r\n\t}\r\n\r\n\tfunction gravar() {\r\n\r\n\t\t$ajax\r\n\t\t\t.post('/_23034/gravar', obj.resumo)\r\n\t\t\t.then(function(response) {\r\n\r\n\t\t\t\tshowSuccess('Gravado com sucesso.');\r\n\t\t\t\tgScope.Ctrl.Index.filtrar();\r\n\t\t\t\tfecharModal();\r\n\t\t\t});\r\n\t}\r\n\r\n\tfunction excluir() {\r\n\r\n\t\tconfirmar();\r\n\r\n\t\tfunction confirmar() {\r\n\r\n\t\t\taddConfirme(\r\n\t\t\t\t'<h4>Confirmação</h4>',\r\n\t\t\t\t'Confirma a exclusão?',\r\n\t\t\t\t[obtn_sim, obtn_nao],\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tret: 1,\r\n\t\t\t\t\t\tfunc: function() {\r\n\r\n\t\t\t\t\t\t\tefetivar();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tret: 2,\r\n\t\t\t\t\t\tfunc: function() {}\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tfunction efetivar() {\r\n\r\n\t\t\t$ajax\r\n\t\t\t\t.post('/_23034/excluir', obj.resumo)\r\n\t\t\t\t.then(function(response){\r\n\r\n\t\t\t\t\tshowSuccess('Excluído com sucesso.');\r\n\t\t\t\t\tgScope.Ctrl.Index.filtrar();\r\n\t\t\t\t\tfecharModal();\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction limparCampo() {\r\n\r\n\t\tobj.resumo              = {};\r\n\t\tobj.resumo.FATOR_TIPO   = [];\r\n\r\n\t\taddFatorTipo();\r\n\t}\r\n\r\n\tfunction exibir(resumo) {\r\n\r\n\t\tobj.resumo    = resumo;\r\n\t\tobj.resumoBkp = angular.copy(resumo);\r\n\r\n\t\tif (obj.resumo.FATOR_TIPO.length == 0)\r\n\t\t\tobj.addFatorTipo();\r\n\r\n\t\tobj.exibirModal();\r\n\t}\r\n\r\n\tfunction habilitarAlteracao() {\r\n\r\n\t\tgScope.Ctrl.tipoTela = 'alterar';\r\n\t\t\r\n\t\tsetTimeout(function() { \r\n\t\t\t$('.js-input-descricao').focus(); \r\n\t\t}, 100);\r\n\t}\r\n\r\n\tfunction cancelarAlteracao() {\r\n\r\n\t\tangular.extend(obj.resumo, obj.resumoBkp);\r\n\t\tgScope.Ctrl.tipoTela = 'exibir';\r\n\t}\r\n\r\n\tfunction exibirModal() {\r\n\r\n\t\t$('#modal-create').modal('show');\r\n\t}\r\n\r\n\tfunction fecharModal() {\r\n\r\n\t\t$('#modal-create')\r\n\t\t\t.modal('hide')\r\n\t\t\t.find('.modal-body')\r\n\t\t\t.animate({ scrollTop: 0 }, 'fast');\r\n\r\n\t\tobj.limparCampo();\r\n\t\t\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Return the constructor function.\r\n\t */\r\n\treturn Create;\r\n};"]}