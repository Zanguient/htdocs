{"version":3,"sources":["_22040-create.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"_22040-create.js","sourcesContent":["/**\n * Script com funções do obj _22040\n */\n\nif(window.name === 'remessa-componente') {\n\n    $('.navbar-toggle').remove();\n    $('.navbar-left').text('Geração de Remessa de Componente');\n    $('.navbar-right').remove();\n    $('.navbar-brand' ).attr('href','javascript:void(0);');\n    $('.duplicar-tela-mobile').remove();\n    $('.go-fullscreen-mobile').remove();\n        \n}\n\n\n\n(function($) {\n    \n    var objGerarManual = new gerarManual();\n    var objGerarAuto = new gerarAuto();\n\t\n\t//Utilizada para informar se a verificação de atualização da página é necessária.\n\t//Ex.: ao clicar em 'Gravar', não é necessário.\n\tvar verif_atualizar = true;\n\t\n\t//Utilizada para definir as casas decimais para a qtd\n\tvar decimal = 4;\n\t\n\t//Input para ser clonado :)\t\t\t\t\t\n\tvar input_clone = $('.input-clone').clone().removeAttr('class');\n    \n    var verificacao_perfil = true;\n    \n\t/**\n \t * Destruir objeto dataTable.\n \t */\n\tfunction destruirDataTable() {\n\n\t\t$('.dataTables_scrollBody').each(function() {\n\t\t\n\t\t\t$(this)\n\t\t\t\t.find('table')\n\t\t\t\t.dataTable()\n\t\t\t\t.fnDestroy();\n\t\t\n\t\t});\n\n\t}\n\n\t/**\n\t * Ativar Datatable na tabela principal.\n\t */\n\tfunction ativarDatatable() {\n\t\t\n\t\tvar data_table = $.extend({}, table_default);\n\t\t\tdata_table.scrollY = '23vh';\n\n\t\t$('.table-22040').DataTable(data_table);\n\t\t\n\t}\n\t\n\t/**\n\t * Ativar Datatable nas tabelas menores.\n\t */\n\tfunction ativarDatatableMenor() {\n\t\t\n\t\tvar data_table\t\t\t= $.extend({}, table_default);\n\t\t\tdata_table.scrollY  = '197px';\n\t\t\tdata_table.language = {emptyTable : \"Escolha itens da tabela acima\"};\n\n\t\t$('.conteudo-filtro .estacao-bloco .table').DataTable(data_table);\n\t\t\n\t}\n\t\n\t/**\n\t * Verificações e ações ao limpar campos.\n\t */\n\tfunction limpar() {\n\t\t\n\t\t//Necessário para a verificação quando o GP for apagado.\n\t\t//Guardará os valores antigos para o uso caso não seja confirmada a ação de apagar o GP.\n\t\t$('.consulta_gp_grup .consulta-descricao')\n\t\t\t.change(function() {\n\t\t\t\t\n\t\t\t\tvar cons_inputs\t\t=\t$(this)\n\t\t\t\t\t\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t\t\t\t\t\t.siblings('._consulta_imputs')\n\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\t\t\n\t\t\t\tvar gp_valor\t\t=\t$(this)\n\t\t\t\t\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\t\t\n\t\t\t\tvar gp_id\t\t\t=\t$(cons_inputs)\n\t\t\t\t\t\t\t\t\t\t\t.find('._gp_id')\n\t\t\t\t\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t\t\t\t\t;\n\t\t\n\t\t\t\tvar gp_desc\t\t\t=\t$(cons_inputs)\n\t\t\t\t\t\t\t\t\t\t\t.find('._gp_descricao')\n\t\t\t\t\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\t\t\n\t\t\t\tvar familia_id\t\t=\t$('#familia')\n\t\t\t\t\t\t\t\t\t\t\t.siblings('._familia-id')\n\t\t\t\t\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\tvar familia_desc\t=\t$('#familia')\n\t\t\t\t\t\t\t\t\t\t\t.siblings('._familia-descricao')\n\t\t\t\t\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\tvar perfil\t\t\t=\t$('._perfil-valor')\n\t\t\t\t\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\n\t\t\t\t$(this)\n\t\t\t\t\t.data({\n\t\t\t\t\t\t'old-gp-valor'\t\t\t: gp_valor,\n\t\t\t\t\t\t'old-gp-id'\t\t\t\t: gp_id,\n\t\t\t\t\t\t'old-gp-descricao'\t\t: gp_desc,\n\t\t\t\t\t\t'old-familia-id'\t\t: familia_id,\n\t\t\t\t\t\t'old-familia-descricao'\t: familia_desc,\n\t\t\t\t\t\t'old-perfil'\t\t\t: perfil\n\t\t\t\t\t})\n\t\t\t\t;\n\t\t\t\t\n\t\t\t})\n\t\t;\n\t\t\n\t\t//Ação ao apagar GP\n\t\t$('.consulta_gp_grup .btn-apagar-filtro')\n\t\t\t.click(function() {\n\t\t\t\t\n\t\t\t\tvar input\t\t\t\t=\t$(this)\n\t\t\t\t\t\t\t\t\t\t\t\t.siblings('input')\n\t\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\tvar gp_val_old\t\t\t=\t$(input)\n\t\t\t\t\t\t\t\t\t\t\t\t.data('old-gp-valor')\n\t\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\t\n\t\t\t\tvar gp_id_old\t\t\t=\t$(input)\n\t\t\t\t\t\t\t\t\t\t\t\t.data('old-gp-id')\n\t\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\n\t\t\t\tvar gp_desc_old\t\t\t=\t$(input)\n\t\t\t\t\t\t\t\t\t\t\t\t.data('old-gp-descricao')\n\t\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\t\t\n\t\t\t\tvar familia_id_old\t\t=\t$(input)\n\t\t\t\t\t\t\t\t\t\t\t\t.data('old-familia-id')\n\t\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\tvar familia_desc_old\t=\t$(input)\n\t\t\t\t\t\t\t\t\t\t\t\t.data('old-familia-descricao')\n\t\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\tvar perfil_old\t\t\t=\t$(input)\n\t\t\t\t\t\t\t\t\t\t\t\t.data('old-perfil')\n\t\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t//Evitar que seja acionado ao selecionar a remessa.\n\t\t\t\t//Isso porque ao selecionar a remessa, este botão é acionado.\n\t\t\t\tif ( (typeof gp_val_old !== 'undefined') ) {\n\t\t\t\t\n\t\t\t\t\t//confirmar antes de limpar\n\t\t\t\t\tif ( !confirm('Se continuar, todas as alterações NÃO gravadas serão perdidas.') ) {\n\t\t\t\t\t\t\n\t\t\t\t\t\t//repor os valores do GP de acordo com os valores anteriores\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar cons_desc\t=\t$('.consulta_gp_grup .consulta-descricao');\n\t\t\t\t\t\t\tvar cons_inputs\t=\t$(cons_desc)\n\t\t\t\t\t\t\t\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t\t\t\t\t\t\t\t.siblings('._consulta_imputs')\n\t\t\t\t\t\t\t\t\t\t\t\t;\n\n\t\t\t\t\t\t\t//repor id oculto do GP\n\t\t\t\t\t\t\t$(cons_inputs)\n\t\t\t\t\t\t\t\t.find('._gp_id')\n\t\t\t\t\t\t\t\t.val(gp_id_old)\n\t\t\t\t\t\t\t;\n\n\t\t\t\t\t\t\t//repor descrição oculta do GP\n\t\t\t\t\t\t\t$(cons_inputs)\n\t\t\t\t\t\t\t\t.find('._gp_descricao')\n\t\t\t\t\t\t\t\t.val(gp_desc_old)\n\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t//definir que o campo está selecionado\n\t\t\t\t\t\t\t$(cons_inputs)\n\t\t\t\t\t\t\t\t.siblings('._consulta_parametros')\n\t\t\t\t\t\t\t\t.find('._valor_selecionado_consulta')\n\t\t\t\t\t\t\t\t.val('1')\n\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t//repor descrição do GP, desabilitar campo e esconder/exibir botões\n\t\t\t\t\t\t\t$(cons_desc)\n\t\t\t\t\t\t\t\t.val(gp_val_old)\n\t\t\t\t\t\t\t\t.attr('readonly', true)\n\t\t\t\t\t\t\t\t.siblings('.btn-filtro-consulta')\n\t\t\t\t\t\t\t\t.hide()\n\t\t\t\t\t\t\t\t.siblings('.btn-apagar-filtro')\n\t\t\t\t\t\t\t\t.show()\n\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t//repor família\n\t\t\t\t\t\t\t$('#familia')\n\t\t\t\t\t\t\t\t.siblings('._familia-id')\n\t\t\t\t\t\t\t\t.val(familia_id_old)\n\t\t\t\t\t\t\t\t.siblings('._familia-descricao')\n\t\t\t\t\t\t\t\t.val(familia_desc_old)\n\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t$('._perfil-valor')\n\t\t\t\t\t\t\t\t.val(perfil_old)\n\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t//habilitar botão 'filtrar'\n\t\t\t\t\t\t\t$('#btn-table-filter')\n\t\t\t\t\t\t\t\t.removeAttr('disabled')\n\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\thabilitarBtnAcao(true);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}, 500);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t//limpar família\n\t\t\t\t$('#familia')\n\t\t\t\t\t.val('')\n\t\t\t\t\t.siblings('input')\n\t\t\t\t\t.val('')\n\t\t\t\t;\n\t\t\t\t\n\t\t\t\t//limpar tabelas\n\t\t\t\t$('.table-22040 tbody, .up-container')\n\t\t\t\t\t.empty()\n\t\t\t\t;\n\n\t\t\t})\n\t\t;\n\t\t\n\t\t//Habilitar botões ao alterar o GP\n\t\t$('._gp_id')\n\t\t\t.change(function() {\n\t\t\t\t\n\t\t\t\tif ( $(this).val() !== '' ) {\n\t\t\t\t\t\n\t\t\t\t\t$('#btn-table-filter')\n\t\t\t\t\t\t.removeAttr('disabled')\n\t\t\t\t\t;\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t\n\t\t\t\t\t$('#btn-table-filter')\n\t\t\t\t\t\t.attr('disabled', true)\n\t\t\t\t\t;\n\t\t\t\t\t\n\t\t\t\t\thabilitarBtnAcao(false);\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t})\n\t\t;\n\t\t\n\t\t//Ações ao limpar Remessa\n\t\t$('#limpar-remessa')\n\t\t\t.click(function() {\n\t\t\t\t\n\t\t\t\t//confirmar antes de limpar\n\t\t\t\tif ( !confirm('Se continuar, todas as alterações NÃO gravadas serão perdidas.') ) {\n\t\t\t\t\treturn false;\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//remover 'data' com valores que seriam recuperados caso não seja confirmada a limpeza.\n\t\t\t\t$('.consulta_gp_grup .consulta-descricao')\n\t\t\t\t\t.removeData();\n\t\t\t\t\n\t\t\t\t$('._consulta_filtro[objcampo=\"FAMILIA\"]')\n\t\t\t\t\t.val('')\n\t\t\t\t;\n\t\t\t\t\n\t\t\t\t$('.consulta_gp_grup .btn-apagar-filtro')\n\t\t\t\t\t.click()\n\t\t\t\t;\n\t\t\t\t\n\t\t\t\t$('#estab')\n\t\t\t\t\t.val('')\n\t\t\t\t\t.siblings('input')\n\t\t\t\t\t.val('')\n\t\t\t\t;\n\t\t\t\t\n\t\t\t\t$('#remessa')\n\t\t\t\t\t.val('')\n\t\t\t\t\t.removeClass('selecionado')\n\t\t\t\t\t.removeAttr('readonly')\n\t\t\t\t\t.focus()\n\t\t\t\t\t.next('._remessa-id')\n\t\t\t\t\t.val('')\n\t\t\t\t\t.next('._requisicao')\n\t\t\t\t\t.val('')\n\t\t\t\t;\n\t\t\t\t\n\t\t\t\thabilitarBtnAcao(false);\n\t\t\t\n\t\t\t})\n\t\t;\n\t\t\n\t\t//Data\n\t\tvar data_input\t\t\t= $('#data-prod'),\n\t\t\tlimpar_data_input\t= $('#limpar-data');\n\t\t\n\t\t//ações ao mudar data\n\t\t$(data_input)\n\t\t\t.change(function() {\n\t\t\n\t\t\t\t$(limpar_data_input).removeProp('disabled');\n\t\t\n\t\t\t})\n\t\t;\n\t\t\n\t\t//limpar data\n\t\t$(limpar_data_input)\n\t\t\t.click(function() {\n\t\t\t\t\n\t\t\t\t//confirmar antes de limpar\n\t\t\t\tif ( confirm('Se continuar, todas as alterações NÃO gravadas serão perdidas.') ) {\n\n\t\t\t\t\t$(data_input).val('');\n\t\t\t\t\t$(this).prop('disabled', true);\n\t\t\t\t\t\n\t\t\t\t\t//limpar tabelas\n\t\t\t\t\t$('.table-22040 tbody, .up-container')\n\t\t\t\t\t\t.empty()\n\t\t\t\t\t;\n\n\t\t\t\t}\n\t\t\t\t\n\t\t\t})\n\t\t;\n\t\t\n\t}\n\t\n\t/**\n\t * Pesquisar remessa.\n\t */\n\tfunction pesqFamiliaRemessa() {\t\t\t\n\t\n\t\t$('#selec-remessa')\n\t\t\t.click(function() {\n\t\t\t\t\n\t\t\t\tif ( $('#remessa').val() === '' )\n\t\t\t\t\treturn false;\n\t\t\t\t\n\t\t\t\tvar url\t= '/_22040/pesqRemessa';\n\t\t\n\t\t\t\tvar dados = {\n\t\t\t\t\tremessa\t\t: $('#remessa').val(),\n\t\t\t\t\tdetalhe\t\t: ['FAMILIA']\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tsuccess = function(resposta) {\n\t\t\t\t\tif (!(resposta.FAMILIA.length > 0)) {\n                        showAlert('Remessa/Pedido/Requisições inexistente ou sem consumo/família definida.');\n                        return;\n                    }\n                    \n\t\t\t\t\t$('#remessa')\n\t\t\t\t\t\t.attr('readonly', true)\n\t\t\t\t\t\t.addClass('selecionado');\n\t\t\t\t\t\n\t\t\t\t\tvar str = '';\n\t\t\t\t\t\n\t\t\t\t\tfor(i = 0; i < resposta.FAMILIA.length; i++) {\n\t\t\t\t\t\t\n\t\t\t\t\t\tstr = ( i == 0 )\n\t\t\t\t\t\t\t\t? resposta.FAMILIA[i].FAMILIA_ID \n\t\t\t\t\t\t\t\t: str + ', ' + resposta.FAMILIA[i].FAMILIA_ID;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t$('._consulta_filtro[objcampo=\"FAMILIA\"]')\n\t\t\t\t\t\t.val(str);\n\t\t\t\t\t\n\t\t\t\t\t$('.consulta_gp_grup .btn-apagar-filtro')\n\t\t\t\t\t\t.click();\n\t\t\t\t\n\t\t\t\t\t$('.consulta_gp_grup .btn-filtro-consulta')\n\t\t\t\t\t\t.click();\n\t\t\t\t\n\t\t\t\t\t$('#remessa')\n\t\t\t\t\t\t.next('._remessa-id')\n\t\t\t\t\t\t.val(resposta.FAMILIA[0].REMESSA_ID)\n\t\t\t\t\t;\n\t\t\t\t\t\n\t\t\t\t\t//se a remessa digitada for igual a 'REQ', o campo que indica que a remessa é de requisição deve ser setado com 1\n\t\t\t\t\tif( $('#remessa').val() == 'REQ' ) {\n\t\t\t\t\t\t\n\t\t\t\t\t\t$('#remessa')\n\t\t\t\t\t\t\t.nextAll('._requisicao')\n\t\t\t\t\t\t\t.val('1')\n\t\t\t\t\t\t;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t\n\t\t\t\t\t\t$('#remessa')\n\t\t\t\t\t\t\t.nextAll('._requisicao')\n\t\t\t\t\t\t\t.val(resposta.FAMILIA[0].REQUISICAO.trim())\n\t\t\t\t\t\t;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t$('#estab')\n\t\t\t\t\t\t.val(resposta.FAMILIA[0].ESTABELECIMENTO_ID +' - '+resposta.FAMILIA[0].ESTABELECIMENTO_DESCRICAO)\n\t\t\t\t\t\t.siblings('._estab-id')\n\t\t\t\t\t\t.val(parseInt(resposta.FAMILIA[0].ESTABELECIMENTO_ID))\n\t\t\t\t\t\t.siblings('._estab-descricao')\n\t\t\t\t\t\t.val(resposta.FAMILIA[0].ESTABELECIMENTO_DESCRICAO)\n\t\t\t\t\t;\n\t\t\t\t\n\t\t\t\t};\n\n\t\t\t\texecAjax1(\n\t\t\t\t\t'POST', \n\t\t\t\t\turl,\n\t\t\t\t\tdados,\n\t\t\t\t\tsuccess\n\t\t\t\t);\n\t\t\t\t\n\t\t\t})\n\t\t;\t\t\n\t\t\n\t\t$('#remessa')\n\t\t\t.on('keydown', function(e) {\n\n\t\t\t\t//Enter\n\t\t\t\tif ( (e.keyCode === 13) ) { \n\t\t\t\t\t\n\t\t\t\t\tif ( $('#selec-remessa').is(':visible') )\n\t\t\t\t\t\t$('#selec-remessa').click();\n\t\t\t\t}\n\t\t\n\t\t\t\t//Deletar teclando 'Backspace' ou 'Delete'\n\t\t\t\tif ( (e.keyCode === 8) || (e.keyCode === 46) ) {\n\t\t\t\t\t\n\t\t\t\t\tif ( $('#limpar-remessa').is(':visible') )\n\t\t\t\t\t\t$('#limpar-remessa').click();\n\t\t\t\t\n\t\t\t\t}\n\n\t\t\t})\n\t\t;\n\t\n\t}\n\t\n\t/**\n\t * Ao selecionar um GP, a família é setada em campos 'hidden'.\n\t * Essa função passar a família para o campo 'text'.\n\t */\n\tfunction familiaHiddenParaText() {\n\t\t\n\t\tvar familia = $('#familia');\n\t\t\n\t\t$(familia)\n\t\t\t.siblings('._familia-descricao')\n\t\t\t.change(function() {\n\t\t\t\t\n\t\t\t\t$(familia)\n\t\t\t\t\t.val( \n\t\t\t\t\t\t$(this).siblings('._familia-id').val() +\n\t\t\t\t\t\t' - '+ \n\t\t\t\t\t\t$(this).val() \n\t\t\t\t\t)\n\t\t\t\t;\n\t\t\t\t\n\t\t\t})\n\t\t;\n\t\t\n\t}\n\t\n\t/**\n\t * Editar quantidade à programar na tabela de itens da remessa.\n\t */\n\tfunction editarQtd() {\n\t\t\n\t\t/**\n\t\t * Passar valor do input hidden para o td correspondente (tabela principal).\n\t\t */\n\t\t$.fn.inputToTdGp = function() {\t\t\n\n\t\t\tvar classe\t=\t$(this)\n\t\t\t\t\t\t\t\t .prop('class')\n\t\t\t\t\t\t\t\t .replace('_', '')\n\t\t\t\t\t\t\t ;\n\n\t\t\tvar valor\t=\t$(this)\n\t\t\t\t\t\t\t\t .val()\n\t\t\t\t\t\t\t ;\n\n\t\t\t$(this)\n\t\t\t\t.siblings('.'+classe)\n\t\t\t\t.children('span')\n\t\t\t\t.text(formataPadraoBr(valor));\n\n\t\t\t//setar quantidade no 'input text'\n\t\t\tif ( classe === 'qtd-prog' ) {\n\t\t\t\t\n\t\t\t\t$(this)\n\t\t\t\t\t.siblings('.'+classe)\n\t\t\t\t\t.children('.editar-qtd')\n\t\t\t\t\t.val(valor)\n\t\t\t\t;\n\t\t\t\t\n\t\t\t}\n\n\t\t\treturn $(this);\n\n\t\t};\n\t\t\n\t\t$(document)\n\t\t\t.on('click', '.btn-editar-qtd', function() {\n\t\t\t\t\n\t\t\t\t$(this)\n\t\t\t\t\t.hide()\n\t\t\t\t\t.siblings('.editar-qtd')\n\t\t\t\t\t.show()\n\t\t\t\t\t.select()\n\t\t\t\t\t.siblings('.btn-confirmar-editar-qtd')\n\t\t\t\t\t.removeAttr('disabled')\n\t\t\t\t\t.show()\n\t\t\t\t\t.siblings('.btn-cancelar-editar-qtd')\n\t\t\t\t\t.removeAttr('disabled')\n\t\t\t\t\t.show()\n\t\t\t\t\t.parent('td')\n\t\t\t\t\t.addClass('esconder-texto')\n\t\t\t\t;\n\t\t\t\t\n\t\t\t})\n\t\t\t.on('click', '.btn-cancelar-editar-qtd', function() {\n\t\t\t\t\n\t\t\t\t$(this)\n\t\t\t\t\t.attr('disabled', true)\n\t\t\t\t\t.hide()\n\t\t\t\t\t.siblings('.editar-qtd')\n\t\t\t\t\t.hide()\n\t\t\t\t\t.siblings('.btn-confirmar-editar-qtd')\n\t\t\t\t\t.attr('disabled', true)\n\t\t\t\t\t.data('valor-valido', true)\n\t\t\t\t\t.hide()\n\t\t\t\t\t.siblings('.btn-editar-qtd')\n\t\t\t\t\t.show()\n\t\t\t\t\t.parent('td')\n\t\t\t\t\t.removeClass('esconder-texto')\n\t\t\t\t;\n\t\t\t\t\n\t\t\t})\n\t\t\t.on('click', '.btn-confirmar-editar-qtd', function() {\n\n\t\t\t\tvar valor_novo_str\t=\t$(this)\n\t\t\t\t\t\t\t\t\t\t\t.siblings('.editar-qtd')\n\t\t\t\t\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\tvar valor_novo_num\t=\tparseFloat(valor_novo_str);\n\t\t\t\t\t\t\t\t\t\n\t\t\t\tvar valor_ant_str\t=\t$(this)\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t.parent('td')\n\t\t\t\t\t\t\t\t\t\t\t.siblings('._qtd-prog')\n\t\t\t\t\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\n\t\t\t\tvar valor_ant_num\t=\tparseFloat(valor_ant_str);\t\t\t\t\n\t\t\t\t\n\t\t\t\tif ( (valor_novo_num <= 0) || (valor_novo_num > valor_ant_num) || (typeof valor_novo_num === 'undefined') ) {\n\t\t\t\t\t\n\t\t\t\t\tshowAlert('A quantidade deve ser maior do que 0 e menor do que '+ formataPadraoBr(valor_ant_str) +'.');\n\t\t\t\t\t\n\t\t\t\t\t//indica se o valor é válido\n\t\t\t\t\t$(this)\n\t\t\t\t\t\t.data('valor-valido', false)\n\t\t\t\t\t;\n\t\t\t\t\t\n\t\t\t\t\treturn false;\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t\n\t\t\t\t\t$(this)\n\t\t\t\t\t\t.data('valor-valido', true)\t//indica se o valor é válido\n\t\t\t\t\t\t.attr('disabled', true)\n\t\t\t\t\t\t.hide()\n\t\t\t\t\t\t.siblings('.editar-qtd')\n\t\t\t\t\t\t.hide()\n\t\t\t\t\t\t.siblings('.btn-cancelar-editar-qtd')\n\t\t\t\t\t\t.attr('disabled', true)\n\t\t\t\t\t\t.hide()\n\t\t\t\t\t\t.siblings('.btn-editar-qtd')\n\t\t\t\t\t\t.show()\n\t\t\t\t\t\t.parent('td')\n\t\t\t\t\t\t.removeClass('esconder-texto')\n\t\t\t\t\t\t.siblings('._qtd-prog')\n\t\t\t\t\t\t.val( valor_novo_num.toFixed(decimal) )\n\t\t\t\t\t\t.inputToTdGp()\n\t\t\t\t\t;\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t})\n\t\t\t.on('keydown', '.editar-qtd', 'return', function() {\n\t\t\t\t\n\t\t\t\t$('.btn-confirmar-editar-qtd')\n\t\t\t\t\t.click();\n\t\t\t\t\n\t\t\t})\n\t\t\t.on('keydown', '.editar-qtd', 'esc', function() {\n\t\t\t\t\n\t\t\t\t$('.btn-cancelar-editar-qtd')\n\t\t\t\t\t.click();\n\t\t\t\t\n\t\t\t})\n\t\t\t.on('keydown', '.editar-qtd', function(e) {\n\t\t\n\t\t\t\tvar keycode = e.keyCode || e.which;\n\t\t\n\t\t\t\tif ( !((keycode === 13) || (keycode === 8) || (keycode === 46) || (keycode === 27) || (keycode === 188 || keycode === 110) || (keycode >= 48 && keycode <= 57) || (keycode >= 96 && keycode <= 105)) ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t})\n\t\t;\n\t\t\t\t\n\t}\n\t\n\t/**\n\t * Editar quantidade de talões na tabela de itens da remessa.\n\t */\n\tfunction editarQtdTaloes() {\n\t\t\n\t\t/**\n\t\t * Passar valor do input hidden para o td correspondente (tabela principal).\n\t\t */\n\t\t$.fn.inputToTdQtdTaloes = function() {\t\t\n\n\t\t\tvar classe\t=\t$(this)\n\t\t\t\t\t\t\t\t .prop('class')\n\t\t\t\t\t\t\t\t .replace('_', '')\n\t\t\t\t\t\t\t ;\n\n\t\t\tvar valor\t=\t$(this)\n\t\t\t\t\t\t\t\t .val()\n\t\t\t\t\t\t\t ;\n\n\t\t\t$(this)\n\t\t\t\t.siblings('.'+classe)\n\t\t\t\t.children('span')\n\t\t\t\t.text(formataPadraoBr(valor));\n\n\t\t\t//setar quantidade no 'input text'\n\t\t\tif ( classe === 'qtd-taloes' ) {\n\t\t\t\t\n\t\t\t\t$(this)\n\t\t\t\t\t.siblings('.'+classe)\n\t\t\t\t\t.children('.editar-qtd-taloes')\n\t\t\t\t\t.val(valor)\n\t\t\t\t;\n\t\t\t\t\n\t\t\t}\n\n\t\t\treturn $(this);\n\n\t\t};\n\t\t\n\t\t/**\n\t\t * Passar valor do input hidden para o td correspondente (tabela principal).\n\t\t */\n\t\t$.fn.inputToTdQtdProg = function() {\t\t\n\n\t\t\tvar classe\t=\t$(this)\n\t\t\t\t\t\t\t\t .prop('class')\n\t\t\t\t\t\t\t\t .replace('_', '')\n\t\t\t\t\t\t\t ;\n\n\t\t\tvar valor\t=\t$(this)\n\t\t\t\t\t\t\t\t .val()\n\t\t\t\t\t\t\t ;\n\n\t\t\t$(this)\n\t\t\t\t.siblings('.'+classe)\n\t\t\t\t.children('span')\n\t\t\t\t.text(number_format(valor, decimal, ',', '.'));\n\n\t\t\t//setar quantidade no 'input text'\n\t\t\tif ( classe === 'qtd-prog' ) {\n\t\t\t\t\n\t\t\t\t$(this)\n\t\t\t\t\t.siblings('.'+classe)\n\t\t\t\t\t.children('.editar-qtd')\n\t\t\t\t\t.val(valor)\n\t\t\t\t;\n\t\t\t\t\n\t\t\t}\n\n\t\t\treturn $(this);\n\n\t\t};\n\t\t\n\t\t$(document)\n\t\t\t.on('click', '.btn-editar-qtd-taloes', function() {\n\t\t\t\t\n                var qtd_taloes =\n                    $(this)\n                        .closest('tr')\n                        .find('._qtd-taloes')\n                        .val()\n                    ;\n                \n\t\t\t\t$(this)\n\t\t\t\t\t.hide()\n\t\t\t\t\t.siblings('.editar-qtd-taloes')\n                    .val(parseInt(qtd_taloes))\n\t\t\t\t\t.show()\n\t\t\t\t\t.select()\n\t\t\t\t\t.siblings('.btn-confirmar-editar-qtd-taloes')\n\t\t\t\t\t.removeAttr('disabled')\n\t\t\t\t\t.show()\n\t\t\t\t\t.siblings('.btn-cancelar-editar-qtd-taloes')\n\t\t\t\t\t.removeAttr('disabled')\n\t\t\t\t\t.show()\n\t\t\t\t\t.parent('td')\n\t\t\t\t\t.addClass('esconder-texto')\n\t\t\t\t;\n\t\t\t\t\n\t\t\t})\n\t\t\t.on('click', '.btn-cancelar-editar-qtd-taloes', function() {\n\t\t\t\t\n\t\t\t\t$(this)\n\t\t\t\t\t.attr('disabled', true)\n\t\t\t\t\t.hide()\n\t\t\t\t\t.siblings('.editar-qtd-taloes')\n\t\t\t\t\t.hide()\n\t\t\t\t\t.siblings('.btn-confirmar-editar-qtd-taloes')\n\t\t\t\t\t.attr('disabled', true)\n\t\t\t\t\t.data('valor-valido', true)\n\t\t\t\t\t.hide()\n\t\t\t\t\t.siblings('.btn-editar-qtd-taloes')\n\t\t\t\t\t.show()\n\t\t\t\t\t.parent('td')\n\t\t\t\t\t.removeClass('esconder-texto')\n\t\t\t\t;\n\t\t\t\t\n\t\t\t})\n\t\t\t.on('click', '.btn-confirmar-editar-qtd-taloes', function() {\n\n\t\t\t\tvar valor_novo_str\t\t\t\t=\t$(this)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.siblings('.editar-qtd-taloes')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\tvar valor_novo_num\t\t\t\t=\tparseFloat(valor_novo_str);\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\tvar valor_fator_divisao\t\t\t=\t$(this)\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.parent('td')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.siblings('._fator-divisao')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\tvar qtd_prog\t\t\t\t\t=\t$(this)\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.parent('td')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.siblings('._qtd-prog')\n\t\t\t\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\n\t\t\t\tvar valor_qtd_taloes_max =\t$(this)\t\t\t\t\t\n                                                    .parent('td')\n                                                    .siblings('._qtd-taloes-max')\n                                                    .val()\n                                                ;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\tvar valor_qtd_taloes_saldo_num\t=\tnumber_format(valor_qtd_taloes_max, 0, ',', '.');\n\t\t\t\t\n\t\t\t\t//verifica se o valor digitado é decimal\n\t\t\t\tif ( valor_novo_num % 1 != 0 && !isNaN(valor_novo_num % 1) ) {\n\t\t\t\t\t\n\t\t\t\t\tshowAlert('O valor deve ser inteiro.');\n\t\t\t\t\t\n\t\t\t\t\t//indica se o valor é válido\n\t\t\t\t\t$(this)\n\t\t\t\t\t\t.data('valor-valido', false)\n\t\t\t\t\t;\n\t\t\t\t\t\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\telse if ( (valor_novo_num < 0) || (valor_novo_num > valor_qtd_taloes_max) || (typeof valor_novo_num === 'undefined') ) {\n\t\t\t\t\t\n\t\t\t\t\tshowAlert('A quantidade informada deve estar entre 0 e '+ valor_qtd_taloes_saldo_num +'.');\n\t\t\t\t\t\n\t\t\t\t\t//indica se o valor é válido\n\t\t\t\t\t$(this)\n\t\t\t\t\t\t.data('valor-valido', false)\n\t\t\t\t\t;\n\t\t\t\t\t\n\t\t\t\t\treturn false;\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t\n\t\t\t\t\t$(this)\n\t\t\t\t\t\t.data('valor-valido', true)\t//indica se o valor é válido\n\t\t\t\t\t\t.attr('disabled', true)\n\t\t\t\t\t\t.hide()\n\t\t\t\t\t\t.siblings('.editar-qtd-taloes')\n\t\t\t\t\t\t.hide()\n\t\t\t\t\t\t.siblings('.btn-cancelar-editar-qtd-taloes')\n\t\t\t\t\t\t.attr('disabled', true)\n\t\t\t\t\t\t.hide()\n\t\t\t\t\t\t.siblings('.btn-editar-qtd-taloes')\n\t\t\t\t\t\t.show()\n\t\t\t\t\t\t.parent('td')\n\t\t\t\t\t\t.removeClass('esconder-texto')\n\t\t\t\t\t\t.siblings('._qtd-taloes')\n\t\t\t\t\t\t.val( valor_novo_num )\n\t\t\t\t\t\t.inputToTdQtdTaloes()\n\t\t\t\t\t;\n\t\t\t\t\t\n\t\t\t\t\tvar res = valor_fator_divisao * valor_novo_num;\n\t\t\t\t\tres.toFixed(decimal);\n\t\t\t\t\t\n\t\t\t\t\t$(qtd_prog)\n\t\t\t\t\t\t.val( valor_fator_divisao * valor_novo_num )\n\t\t\t\t\t\t.inputToTdQtdProg()\n\t\t\t\t\t;\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t})\n\t\t\t.on('keydown', '.editar-qtd-taloes', 'return', function() {\n\t\t\t\t\n\t\t\t\t$('.btn-confirmar-editar-qtd-taloes')\n\t\t\t\t\t.click();\n\t\t\t\t\n\t\t\t})\n\t\t\t.on('keydown', '.editar-qtd-taloes', 'esc', function() {\n\t\t\t\t\n\t\t\t\t$('.btn-cancelar-editar-qtd-taloes')\n\t\t\t\t\t.click();\n\t\t\t\t\n\t\t\t})\n\t\t\t.on('keydown', '.editar-qtd-taloes', function(e) {\n\t\t\n\t\t\t\tvar keycode = e.keyCode || e.which;\n\t\t\n\t\t\t\tif ( !((keycode === 13) || (keycode === 8) || (keycode === 46) || (keycode === 27) || (keycode === 188 || keycode === 110) || (keycode >= 48 && keycode <= 57) || (keycode >= 96 && keycode <= 105)) ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t})\n\t\t;\n\t\t\t\t\n\t}\n\t\n\t\n\t/**\n\t * Editar quantidade de talões na tabela de itens da remessa.\n\t */\n\tfunction editarQtdCota() {\n\n        var tr;\n\n        function alterar() {\n\n            function clickAlterar() {\n                $(document)\n                    .on('click', '.table-22040 .btn-alterar',\n                        function() {\n                            tr = $(this).closest('tr');\n\n                            var focus = true;\n                            $(tr)\n                                .find('td[field-js=alterar-input]')\n                                .each(function(){\n                                    \n                                    var span = $(this).children('.span');\n                                    var input = $(this).children('.input');\n                                    \n                                    span.hide();\n                                    input.css('display', 'inline-block');\n                                    \n                                    if ( focus ) {\n                                        input.select();\n                                        focus = false;\n                                    }\n                                })\n                            ;\n\n                            $(tr).find('.btn-alterar').hide();\n                            $(tr).find('.btn-confirm').css('display', 'inline-block');\n\n                            $(tr).find('.btn-excluir').hide();\n                            $(tr).find('.btn-cancel').css('display', 'inline-block');\n                        }\n                    )\n                ;  \n            }\n\n            function clickCancelar() {\n                $(document)\n                    .on('click', '.table-22040 .btn-cancel',\n                        function() {    \n                            tr = $(this).closest('tr');\n\n                            $(tr)\n                                .find('td[field-js=alterar-input]')\n                                .each(function(){\n                                    \n                                    var span = $(this).children('.span');\n                                    var input = $(this).children('.input');\n                                    \n                                    input.val(span.text());\n                                    span.css('display', 'inline-block');\n                                    input.hide();\n                                })\n                            ;\n\n                            $(tr).find('.btn-alterar').css('display', 'inline-block');\n                            $(tr).find('.btn-confirm').hide();\n\n                            $(tr).find('.btn-excluir').css('display', 'inline-block');\n                            $(tr).find('.btn-cancel').hide();\n                        }\n                    )\n                ;\n            }\n\n            function clickConfirmar() {\n                var param = {};\n                var input_estab;\n                var input_mes;\n                var input_ano;\n                var input_valor;\n\n                $(document)\n                    .on('click', '.table-22040 .btn-confirm',\n                        function() {    \n                            var btn = $(this);\n                            tr = $(this).closest('tr'); \n\n                            var param = {\n                                modelo_id       : tr.find('._modelo-id' ).val(),\n                                cliente_id      : tr.find('._cliente-id').val(),\n                                quantidade_cota : tr.find('.editar-qtd-cota').val()\n                            };\n\n\n                            execAjax1('POST','/_22040/atualizarCotaCliente',param,function(data) {\n\n                                $(btn)\n                                    .closest('table')\n                                    .find('tr')\n                                    .each(function(){\n                                        if ( \n                                            param.modelo_id  == $(this).find('._modelo-id'  ).val()  &&\n                                            param.cliente_id == $(this).find('._cliente-id' ).val()\n                                        ) {\n\n                                            $(this)\n                                                .find('td[field-js=alterar-input]')\n                                                .each(function(){\n                                                    \n                                                    var span = $(this).children('.span');\n                                                    var input = $(this).children('.input');\n\n                                                    span.css('display', 'inline-block');\n                                                    input.hide();\n\n                                                    input.val(param.quantidade_cota);\n                                                    span.text(input.val());\n                                                    input.TrTo2Hidden(0);\n                                                })\n                                            ;\n                                    \n                                            $(this).find('.btn-alterar').css('display', 'inline-block');\n                                            $(this).find('.btn-confirm').hide();\n\n                                            $(this).find('.btn-excluir').css('display', 'inline-block');\n                                            $(this).find('.btn-cancel').hide();    \n                                        }\n                                    })\n                                ; \n                                showSuccess('Cota de talão do modelo por cliente definida com sucesso!');\n                            });\n                        }\n                    )\n                    .on('keydown', '.table-22040 .input', 'return', function() {\n\n                        $(this)\n                            .closest('tr')\n                            .find('.btn-confirm')\n                            .click();\n\n                    })\n                    .on('keydown', '.table-22040 .input', 'esc', function() {\n\n                        $(this)\n                            .closest('tr')\n                            .find('.btn-cancel')\n                            .click();\n\n                    })\n                ;\n            }\n\n            clickAlterar();\n            clickConfirmar();\n            clickCancelar();\n        }\n\n        alterar();    \n    }\n\t\n\t/**\n\t * Habilitar/desabilitar os botões de ações principais.\n\t * \n\t * @param {boolean} habilitar\n\t */\n\tfunction habilitarBtnAcao(habilitar) {\n\n\t\tif ( habilitar ) {\n\n\t\t\t$('#btn-processar')\n\t\t\t\t.removeAttr('disabled')\n\t\t\t;\n\t\t}\n\t\telse {\n\n\t\t\t$('#btn-processar')\n\t\t\t\t.attr('disabled', true)\n\t\t\t;\n\t\t}\n\t}\n\t\n\t/**\n\t * Filtrar itens de consumo.\n\t */\n\tfunction filtrar() {\n\t\t\n\t\t/**\n\t\t * Verificações ao filtrar.\n\t\t * \n\t\t * @returns {Boolean}\n\t\t */\n\t\tfunction verificar() {\n\t\t\t\n\t\t\tvar ret = true;\n\t\t\t\n\t\t\t//verificar se há registros na tabela\n\t\t\tif ( $('.table-22040 tbody tr').length > 1 ) {\n\n\t\t\t\t//confirmar antes de reiniciar o processo\n\t\t\t\tif( !confirm('Se continuar, todas as alterações NÃO gravadas serão perdidas.') ) {\n\t\t\t\t\t\n\t\t\t\t\tret = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t//verificar se existe família definida no GP\n\t\t\tif ( $('#familia').siblings('._familia-id').val() === '' ) {\n\t\t\t\t\t\t\n\t\t\t\tshowAlert('Grupo de Produção sem Família definida.');\n\t\t\t\tret = false;\n\t\t\t}\n\t\t\t\n\t\t\t//verificar se existe perfil definido no GP\n\t\t\telse if ( $('._perfil-valor').val() === '' ) {\n\n\t\t\t\tshowAlert('Grupo de Produção sem Perfil definido.');\n\t\t\t\tret = false;\n\t\t\t}\n\t\t\t\n\t\t\treturn ret;\n\t\t}\n\t\t\n\t\t/**\n\t\t * Verifica se a remessa a ser gerada já existe.\n\t\t * @returns {Promise}\n\t\t */\n\t\tfunction verificarRemessaExiste() {\n\t\t\t\n\t\t\treturn new Promise(function(resolve, reject) {\n\t\t\t\t\n\t\t\t\tvar type\t= 'POST',\n\t\t\t\t\turl\t\t= '/_22040/verificarRemessaExiste',\n\t\t\t\t\tdata\t= {\n\t\t\t\t\t\tremessa\t: $('#remessa').val(),\n\t\t\t\t\t\tgp_id\t: $('._gp_id').val()\n\t\t\t\t\t},\n\t\t\t\t\tsuccess\t= function() {\t\t\t\t\t\t\n\t\t\t\t\t\tresolve(true);\t\t\t\t\t\t\n\t\t\t\t\t},\n\t\t\t\t\terror\t= function() {\n\t\t\t\t\t\treject(false);\n\t\t\t\t\t}\n\t\t\t\t;\n\t\t\t\t\n\t\t\t\texecAjax1(type, url, data, success, error);\n\t\t\t\t\n\t\t\t});\n\t\t\t\n\t\t}\n\t\t\n        $('.form-filtrar').submit(function(e)\n        {\n            e.preventDefault();\n            \n            if ( !verificar() ) return false;\n            \n            $('.conteudo-filtro').empty();\n            \n            verificarRemessaExiste()\n                .then(function() {\n                    \n                    if ( $('#remessa').val() == 'REP' ) {\n                        $('._controle-talao').val('A'); // Acumula projeção\n                    }\n\n                    var url\t= '/_22040/showNecessidade';\n\n                    var dados = {\n                        estabelecimento_id : $('._estab-id').val(),\n                        remessa            : $('#remessa').val(),\n                        remessa_id         : $('#remessa').next('._remessa-id').val(),\n                        requisicao         : $('#remessa').nextAll('._requisicao').val(),\n                        familia\t\t\t   : $('#familia').siblings('._familia-id').val(),\n                        estab\t\t\t   : $('#estab').siblings('._estab-id').val(),\n                        gp\t\t\t\t   : $('._gp_id').val(),\n                        data_producao\t   : $('#data-prod').val(),\n                        detalhe\t\t\t   : ['NECESSIDADE', 'UP'],\n                        CONTROLE_TALAO     : $('._controle-talao').val().trim(),\n                        um_alternativa     : $('._familia-um-alternativa').val()\n                    };\n\n                    success = function(resposta) {\n\n                        $('.conteudo-filtro')\n                            .html(resposta);\n\n                        $('#btn-distribuir-auto').prop('disabled', false);\n                        //Verificar se há itens na projeção de consumo sem perfil\n                        $('.table-22040 tr')\n                            .each(function(){\n                                var perfil_sku = $(this)\n                                    .find('._perfil-sku')\n                                    .val()\n                                ;\n\n                                if (perfil_sku == '') {\n                                    $('#btn-distribuir-auto').prop('disabled', true);\n                                    showAlert('Há itens da projeção de consumo sem PERFIL DE SKU definido.<br/><b>A programação automática não poderá ser utilizada</b>');\n                                    return;\n                                }\n                            })\n                        ;\n\n                        ativarDatatable();\n                        ativarDatatableMenor();\n                        //dragAndDrop();\n                        habilitarBtnAcao(true);\n                        ativarSelecLinhaRadio();\n                        manipularConsumo();\n\n                        var controller   = function(){return $('#main').find('[ng-controller]');};\n\n                        var scope = controller().scope();\n\n                        var vm = scope.vm;\n\n                        vm.gScope.DADOS = dados;\n\n                        angular.element($('#main')).injector().invoke(['$compile','$timeout',function($compile,$timeout) {\n                            \n                            $timeout(function(){\n                                var html = $('.conteudo-filtro');\n                                $compile(html.contents())(scope);\n                            });\n                        }]);\n//                        angular.element(controller).injector().invoke(function($compile){\n//                        });\n                    };\n\n                    execAjax1(\n                        'POST', \n                        url,\n                        dados,\n                        success\n                    );\n                })\n                .catch(function() {\n\n                })\n            ;\t\n        });\n        \t\n\t}\n\t\n\n\t/**\n\t * Passar valor do input hidden para o td correspondente.\n\t */\n\t$.fn.TrTo2Hidden\t= function(decimal) {\t\n        \n        decimal = isNaN(decimal) ? 4 : decimal;\n\n\t\tvar element_hidden\t= $(this).data('input-hidden');\n        \n\t\tvar valor = $(this).val();\t\t\t\t\t\t\t\n\n\t\t$(this)\n            .closest('tr')\n            .find(element_hidden)\n\t\t\t.val(number_format(valor, decimal, '.', ','));\n\n\t\treturn $(this);\n\n\t};\n\n\t/**\n\t * Passar valor do input hidden para o td correspondente.\n\t */\n\t$.fn.inputToTd\t= function(decimal) {\t\n        \n        decimal = isNaN(decimal) ? 4 : decimal;\n\n\t\tvar classe\t= $(this)\n\t\t\t\t\t\t.prop('class')\n\t\t\t\t\t\t.replace('_', '');\n\t\tvar valor\t= $(this)\n\t\t\t\t\t\t.val();\t\t\t\t\t\t\t\n\n\t\t$(this)\n\t\t\t.siblings('.'+classe)\n\t\t\t.children('span')\n\t\t\t.text(number_format(valor, decimal, ',', '.'));\n\n\t\treturn $(this);\n\n\t};\n\t\n\t/**\n\t * Adicionar 'tr' que identifica o bloco (talão acumulado).\n\t * \n\t * @param {element} tr_item_estacao\n\t * @param {element} tr_novo\n\t */\n\tfunction addTrBloco(tr_item_estacao, tr_novo) {\n\t\t\n\t\tvar bloco_modelo = false;\n\t\t\n\t\t//Para o primeiro da lista: \n\t\t//verifica se já existe a classe 'bloco-modelo' em algum dos 'tr',\n\t\t//pois isso configura que já tem o identificador do bloco.\n\t\tif ( !$(tr_item_estacao).parent().find('tr').hasClass('bloco-modelo') ) {\n\t\t\tbloco_modelo = true;\n\t\t}\n\t\t//mudança de bloco: 'tr' atual com a classe 'bloco-novo'\n\t\telse if ( $(tr_item_estacao).hasClass('bloco-novo') && !$(tr_item_estacao).parent().find('tr').last().hasClass('bloco-novo') ) {\n\t\t\tbloco_modelo = true;\n\t\t}\n\t\t//mudança de bloco: 'tr' atual sem a classe 'bloco-novo'\n\t\telse if ( !$(tr_item_estacao).hasClass('bloco-novo') && $(tr_item_estacao).parent().find('tr').last().hasClass('bloco-novo') ) {\n\t\t\tbloco_modelo = true;\n\t\t}\n\t\telse {\n\t\t\tbloco_modelo = false;\n\t\t}\n\t\t\n\t\t//se o bloco for diferente\n\t\tif ( bloco_modelo ) {\n\t\t\t\n\t\t\tvar tr_bloco_modelo = $(tr_novo).clone(true);\n\t\t\t\n\t\t\t$(tr_bloco_modelo)\n\t\t\t\t.addClass('bloco-modelo')\n\t\t\t;\n\t\t\t\n\t\t\t$(tr_bloco_modelo)\n\t\t\t\t.find('input')\n\t\t\t\t.remove()\n\t\t\t;\n\t\t\t\n\t\t\t$(tr_bloco_modelo)\n\t\t\t\t.find('.cor')\n\t\t\t\t.remove()\n\t\t\t;\n\t\t\t\n\t\t\t$(tr_bloco_modelo)\n\t\t\t\t.find('.tamanho')\n\t\t\t\t.remove()\n\t\t\t;\n\t\t\t\n\t\t\t$(tr_bloco_modelo)\n\t\t\t\t.find('.qtd-prog')\n\t\t\t\t.children('span')\n\t\t\t\t.text('')\n\t\t\t;\n\t\t\t\n\t\t\t$(tr_bloco_modelo)\n\t\t\t\t.find('.tempo')\n\t\t\t\t.text('-')\n\t\t\t;\n\t\t\t\n\t\t\t$(tr_bloco_modelo)\n\t\t\t\t.find('.modelo')\n\t\t\t\t.attr('colspan', '3')\n\t\t\t;\n\t\t\t\n\t\t\t$(tr_item_estacao)\n\t\t\t\t.parent()\n\t\t\t\t.append( tr_bloco_modelo )\n\t\t\t;\n\t\t\t\n\t\t}\n\t\t\n\t}\n    \n    function addTrDetalhe(tr_estacao,valor) {\n        \n        var saldo            = valor;\n        var talao_quantidade = 0;\n        var vinculos = [];\n        \n        function processarSaldo() {\n            \n            var cota_detalhe_val = $(tr_estacao).find('._cota-detalhe').val();\n            \n            var cota_detalhe = (parseFloat(cota_detalhe_val) > 0) ? parseFloat(cota_detalhe_val) : 99999999;\n            \n            switch(true) {\n\n                case (saldo <= cota_detalhe) : \n                    talao_quantidade = saldo;\n                    saldo = 0;\n                break;\n\n                case (saldo > cota_detalhe) : \n                    talao_quantidade = cota_detalhe; \n                    saldo = saldo - cota_detalhe;\n                break;\n            }\n        }\n        \n        \n        do {\n            processarSaldo();\n                        \n            var tr_novo = $(tr_estacao).removeClass('selected').clone(true);\n            \n            $(tr_novo)\n                .find('._qtd-prog')\n                .val(talao_quantidade.toFixed(decimal))\n                .inputToTd()\n                .parent()\n            ;\n\n            //Adiciona o tr que identifica o bloco\n            addTrBloco(tr_estacao, tr_novo);\n\n            //Insere o novo tr no body da estação \n            $(tr_novo)\t\t\n                .appendTo( \n                    $(tr_estacao)\n                        .parent()\n                )\n            ;\n                                   \n            var total    = 0;\n            var qtd_prog = $(tr_novo).find('._qtd-prog').val();\n            $(tr_novo)\n                .find('._consumo-qtd')\n                .each(function(){\n\n                    var id_atual    = $(this).prevAll('._consumo-id').first().val();\n                    var consumo_original = $(tr_estacao).find('[value='+id_atual+']');\n                    var valor_atual = parseFloat($(this).val());\n\n                    //Verifica se o total incrementado com o valor atual utrapassa a quantidade do talão\n                    if ( ( total + valor_atual ) >= qtd_prog ) {\n\n                        //Calcula o quanto será necessário para compor o restante da quantidade do talão\n                        var restante = (qtd_prog - total);\n\n                        //Aplica o valor restante\n                        $(this).val( restante.toFixed(decimal) );\n\n                        //Remove todos os itens de consumo a frente (já que a quantidade total já foi alcançada\n                        $(this).nextAll('._consumo-id'   ).remove();\n                        $(this).nextAll('._consumo-talao').remove();\n                        $(this).nextAll('._consumo-ref'  ).remove();\n                        $(this).nextAll('._consumo-qtd'  ).remove();\n\n                        //Aplica o saldo restante para ser usado para o proximo laço\n                        $(consumo_original).nextAll('._consumo-qtd').first().val((valor_atual - restante).toFixed(decimal));\n\n                    } else {\n                        //Remove o item já utilizado\n                        $(consumo_original).nextAll('._consumo-talao').first().remove();\n                        $(consumo_original).nextAll('._consumo-ref'  ).first().remove();\n                        $(consumo_original).nextAll('._consumo-qtd'  ).first().remove();\n                        $(consumo_original).remove();\n                    }\n\n                    //Incrementa o total com o valor atual para o próximo laço\n                    total = total + valor_atual;\n                })\n            ;\n        }\n        while ( saldo > 0 );\n    }\n\t\n\t\n\t/**\n\t * Clonar 'tr' na Estação após o item ser dividido em blocos.\n\t * \n\t * @param {object} tr_item_estacao\n\t * @param {string} valor\n\t */\n\tfunction addTrEstacao(tr_item_estacao, valor) {\n\t\t\n        addTrDetalhe(tr_item_estacao, valor);\n        \n\t\tvar densidade = $(tr_item_estacao)\n\t\t\t\t\t\t\t.find('._densidade')\n\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t;\n\t\n\t\tvar espessura = $(tr_item_estacao)\n\t\t\t\t\t\t\t.find('._espessura')\n\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t;\t\n                        \n\t\tvar modelo = $(tr_item_estacao)\n\t\t\t\t\t\t\t.find('._modelo-id')\n\t\t\t\t\t\t\t.val();\n                        \n\t\tvar tamanho = $(tr_item_estacao)\n\t\t\t\t\t\t\t.find('._tamanho')\n\t\t\t\t\t\t\t.val();\n\t\t\t\t\t\t;\n                        \n\t\tvar cor = $(tr_item_estacao)\n\t\t\t\t\t\t\t.find('._cor-id')\n\t\t\t\t\t\t\t.val();\n\t\t\t\t\t\t;\n                        \n\t\tvar perfil = $(tr_item_estacao)\n\t\t\t\t\t\t\t.find('._perfil-sku')\n\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t;\n\n\t\tvar bloco\t  = $(tr_item_estacao)\n\t\t\t\t\t\t\t.hasClass('bloco-novo')\n\t\t\t\t\t\t;\n\t\t\t\t\t\t\n\t\t$(tr_item_estacao)\n\t\t\t.closest('.estacao-bloco')\n\t\t\t.find('._densidade-ultimo')\n\t\t\t.val(densidade);\n\t  \t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t$(tr_item_estacao)\n\t\t\t.closest('.estacao-bloco')\n\t\t\t.find('._espessura-ultimo')\n\t\t\t.val(espessura);\n\t\t\t\t\t\t\n\t\t$(tr_item_estacao)\n\t\t\t.closest('.estacao-bloco')\n\t\t\t.find('._modelo-ultimo')\n\t\t\t.val(modelo);\n\t\t\t\t\t\t\n\t\t$(tr_item_estacao)\n\t\t\t.closest('.estacao-bloco')\n\t\t\t.find('._tamanho-ultimo')\n\t\t\t.val(tamanho);\n\t\t\t\t\t\t\n\t\t$(tr_item_estacao)\n\t\t\t.closest('.estacao-bloco')\n\t\t\t.find('._cor-ultimo')\n\t\t\t.val(cor);\n    \n\t\t$(tr_item_estacao)\n\t\t\t.closest('.estacao-bloco')\n\t\t\t.find('._perfil-ultimo')\n\t\t\t.val(perfil);\n\t\n\t\t$(tr_item_estacao)\n\t\t\t.closest('.estacao-bloco')\n\t\t\t.find('._bloco-ultimo')\n\t\t\t.val(bloco);        \n\n\t}\n\t\n\t/**\n\t * Regras para quebra de talões.\n\t * @param {object} tr_item_estacao\n\t * @param {int} restante\n\t * @param {float} qtd_total\n\t * @param {int} fator_divisao\n\t */\n\tfunction dividirItemConsumo(tr_item_estacao, restante, qtd_total, fator_divisao) {\n\n\t\tvar restante\t\t= (restante > 0) ? restante : fator_divisao;\n\t\tvar rest\t\t\t= qtd_total;\n\t\tvar bloco_novo\t\t= false;\n\n\t\tvar bloco_ant\t    = $(tr_item_estacao).closest('.estacao-bloco').find('._bloco-ultimo').val();\n\t\tvar densidade_ant\t= $(tr_item_estacao).closest('.estacao-bloco').find('._densidade-ultimo').val();\n\t\tvar espessura_ant\t= $(tr_item_estacao).closest('.estacao-bloco').find('._espessura-ultimo').val();\n\t\tvar modelo_ant\t    = $(tr_item_estacao).closest('.estacao-bloco').find('._modelo-ultimo'   ).val();\n\t\tvar tamanho_ant\t    = $(tr_item_estacao).closest('.estacao-bloco').find('._tamanho-ultimo'  ).val();\n\t\tvar cor_ant \t    = $(tr_item_estacao).closest('.estacao-bloco').find('._cor-ultimo'      ).val();\n\t\tvar perfil_ant\t    = $(tr_item_estacao).closest('.estacao-bloco').find('._perfil-ultimo'   ).val();\n\n\t\tvar densidade\t\t= $(tr_item_estacao).find('._densidade').val();         \n\t\tvar espessura\t\t= $(tr_item_estacao).find('._espessura').val();\n\t\tvar modelo   \t\t= $(tr_item_estacao).find('._modelo-id').val();\n\t\tvar tamanho   \t\t= $(tr_item_estacao).find('._tamanho').val();\n\t\tvar cor        \t\t= $(tr_item_estacao).find('._cor-id').val();\n\t\tvar perfil   \t\t= $(tr_item_estacao).find('._perfil-sku').val();\n        \n        var quebra_sku      = $('._quebra-talao-sku').val();\n \n        if (bloco_ant == 'true') {\n            $(tr_item_estacao).addClass('bloco-novo'); \n        } else {\n            $(tr_item_estacao).removeClass('bloco-novo'); \n        }\n\n        //Verifica se a densidade e espessura estão diferentes\n\t\tif (    (\n                    (densidade_ant !== densidade) || \n                    (espessura_ant !== espessura) || \n                    (modelo_ant    !== modelo   ) ||\n                    ((tamanho_ant   !== tamanho || cor_ant !== cor)  && (quebra_sku.trim() == '1')) ||\n                    (perfil_ant    !== perfil   ) \n                ) \n                    && \n                parseFloat(densidade_ant) > 0 ) {  \n            \n\t\t\tbloco_novo = true;          \n\t\t}\n\t\t//utilizar o resto de um bloco no novo bloco\n\t\telse if ( qtd_total > restante ) {\n        \n\t\t\tbloco_novo = true;          \n\t\t\taddTrEstacao(tr_item_estacao, restante);\n\t\t\trest -= restante;   \t\t\t\n\t\t}         \n\n\t\t//partes inteiras do talão\n\t\tfor (var i = 0; rest >= fator_divisao; i++) {\n\t\t\t\n\t\t\t$(tr_item_estacao).toggleClass('bloco-novo');            \n\n\t\t\taddTrEstacao(tr_item_estacao, fator_divisao);   \n\t\t\trest -= fator_divisao;\n\t\t}\n  \n\t\t//parte fracionada do talão\n\t\tif ( rest > 0 ) {\n\t\t\tif ((i > 0) || bloco_novo) {\n                $(tr_item_estacao).toggleClass('bloco-novo');\n            }\n\t\t\taddTrEstacao(tr_item_estacao, rest);\n\t\t}\n\n\t\t//Definir restante.\n\t\t//verifica se é um novo bloco\n\t\tif ( bloco_novo ) {\n\t\t\t\n\t\t\trest = fator_divisao - rest; \n\t\t}\n\t\telse {\n\t\t\t\n\t\t\t//se o restante da qtd total atual é menor do que o restante do bloco antigo\n\t\t\tif ( rest < restante ) {\n\t\t\t\trest = restante - rest; // ex.: 100 - 30 = 70 (ainda restaria 70 do bloco antigo)\n\t\t\t}\n\t\t\telse {                \n\t\t\t\trest = fator_divisao + restante - rest; // ex.: 150 + 30 - 100 = 80 (qtd restante para o novo bloco)\n\t\t\t}\n\t\t}\n  \n\t\t//aplicar restante no input '._qtd-restante'\n\t\t$(tr_item_estacao)\n\t\t\t.closest('.estacao-bloco')\n\t\t\t.find('._qtd-restante')\n\t\t\t.val(rest)\n\t\t\t.inputToTd()\n\t\t;\n\n\t\t//remover tr já utilizado para os cálculos\n\t\t$(tr_item_estacao)\n\t\t\t.first()\n\t\t\t.remove()\n\t\t;\n\n\t}\n\n/*\n\tfunction dividirItem(tr_item_estacao, restante, qtd_total, fator_divisao) {\n\t\t\n\n\t\t//pegar as qtds\n\t\tvar qtd_prog = [];\n\n\t\tqtd_prog =\t[\n\t\t\t\t\t\t44.3282 ,\n\t\t\t\t\t\t2.728   ,\n\t\t\t\t\t\t52.0593 ,\n\t\t\t\t\t\t89.1161 ,\n\t\t\t\t\t\t5.8031  ,\n\t\t\t\t\t\t39.3542 ,\n\t\t\t\t\t\t47.9778 ,\n\t\t\t\t\t\t14.1258 ,\n\t\t\t\t\t\t19.8962 ,\n\t\t\t\t\t\t69.0379 ,\n\t\t\t\t\t\t17.804  ,\n\t\t\t\t\t\t24.9805 ,\n\t\t\t\t\t\t27.356  ,\n\t\t\t\t\t\t93.291  ,\n\t\t\t\t\t\t0.6858  ,\n\t\t\t\t\t\t81.0621 ,\n\t\t\t\t\t\t34.0714 ,\n\t\t\t\t\t\t72.5391 ,\n\t\t\t\t\t\t19.4572 ,\n\t\t\t\t\t\t46.1838 ,\n\t\t\t\t\t\t50.795  ,\n\t\t\t\t\t\t54.1198 \n\t\t\t\t\t];\n\t\t\t\n\t\tqtd_prog.sort(function(a, b){return b-a;});\n\t\tvar cota = 150;\n\t\tvar bloco = null;\n\t\tvar bloco_atual = null;\n\n\t\t//Laço formador de bloco\n\t\tfor (var i = 0; i < qtd_prog.length; i++) {\n\n\t\t\t//Se é um bloco novo ou é o início do laço\n\t\t\tif ( bloco_atual === null || bloco === bloco_atual ) {\n\n\t\t\t\t//Reinicializa um bloco \n\t\t\t\tbloco_atual\t= qtd_prog[0];\n\t\t\t\t//Remove o talão utilizado\n\t\t\t\tqtd_prog.splice(0,1);\n\n\t\t\t}\n\n\t\t\t//Laço de varredura de talões restantes para composição do bloco\n\t\t\tfor (var k = 0; k < qtd_prog.length; k++) {\n\n\t\t\t\t//Pega o proximo talão a compor o bloco\n\t\t\t\tvar talao_prox\t= qtd_prog[k];\n\n\t\t\t\t//Soma o proximo talão ao bloco atual\n\t\t\t\tvar soma = bloco_atual + talao_prox;\n\n\t\t\t\t//Verifica se a soma excede a cota\n\t\t\t\tif ( soma > cota ) continue;\n\n\t\t\t\t//Aplica o valor da soma ao bloco atual\n\t\t\t\tbloco_atual = soma;\n\n\t\t\t\t//Remove do array o talão utlizado\n\t\t\t\tqtd_prog.splice(k,1);\n\n\t\t\t\t//Verifica se foi feito a varredura em todos os talões\n\n\t\t\t\tbloco = bloco_atual;\n\n\n\t\t\t}\n\n\n\t\t}\n\t\t\n\t}\n*/\n\n\tfunction calcularQtd(id_item) {\n\t\t\t\n        var qtd_taloes             = false;\n\t\tvar qtd_taloes_prog        = 0;\n\t\tvar qtd_taloes_saldo_final = 0;\n\t\tvar qtd_taloes_total       = 0;\n\t\tvar qtd_prog\t\t= 0;\n\t\tvar qtd_saldo_final = 0;\n\t\tvar qtd_total       = 0;\n        \n        if ( $('._qtd-taloes').length > 0 ) {\n            qtd_taloes = true;\n        }\n\n\t\t$('.conteudo-filtro .up-container')\n\t\t\t.find('[data-item-consumo=\"'+id_item+'\"]')\n\t\t\t.each(function() {\n\n                if ( qtd_taloes ) {\n                    //qtd programada\n                    qtd_taloes_prog +=\tparseFloat(\n                                    $(this)\n                                        .find('._qtd-taloes')\n                                        .val()\n                                );\n                }\n                    \n\t\t\t\t//qtd programada\n\t\t\t\tqtd_prog +=\tparseFloat(\n\t\t\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t\t\t.find('._qtd-prog')\n\t\t\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t\t);\n\n\t\t\t})\n\t\t;\n\n\t\t$('.table-22040')\n\t\t\t.find('[data-item-consumo=\"'+id_item+'\"]')\n\t\t\t.each(function() {\n\n                if ( qtd_taloes ) {\n                    qtd_taloes_total = parseFloat(\n                                    $(this)\n                                        .find('._qtd-taloes-total')\n                                        .val()\n                                );\n\n                    //qtd à programar restante\n                    qtd_taloes_saldo_final = (qtd_taloes_total - qtd_taloes_prog).toFixed(decimal);\n\n                    $(this)\n                        .find('._qtd-taloes')\n                        .val(qtd_taloes_saldo_final)\n                        .inputToTd(0)\t\t\t\t\n                    ;                \n\n                    $(this)\n                        .find('._qtd-taloes-max')\n                        .val(qtd_taloes_saldo_final)\n                    ;      \n                }\n\n\t\t\t\tqtd_total = parseFloat(\n\t\t\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t\t\t.find('._qtd-total')\n\t\t\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t\t);\n\n\t\t\t\t//qtd à programar restante\n\t\t\t\tqtd_saldo_final = (qtd_total - qtd_prog).toFixed(decimal);\n\n\t\t\t\t$(this)\n\t\t\t\t\t.find('._qtd-prog')\n\t\t\t\t\t.val(qtd_saldo_final)\n\t\t\t\t\t.inputToTd()\t\t\t\t\n\t\t\t\t;\n\t\t\t\t\n\t\t\t\t//desabilitar o 'tr' caso a qtd seja 0.\n\t\t\t\tif ( qtd_saldo_final == 0 ) {\n\t\t\t\t\t\n\t\t\t\t\t$(this)\n\t\t\t\t\t\t.attr('disabled', true)\n\t\t\t\t\t\t.prop('disabled', true)\n\t\t\t\t\t\t.find('button')\n\t\t\t\t\t\t.attr('disabled', true)\n\t\t\t\t\t;\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t\n\t\t\t\t\t$(this)\n\t\t\t\t\t\t.removeAttr('disabled')\n\t\t\t\t\t\t.prop('disabled', false)\n\t\t\t\t\t\t.find('button')\n\t\t\t\t\t\t.removeAttr('disabled')\n\t\t\t\t\t;\n\t\t\t\t\t\n\t\t\t\t}\n\n\t\t\t})\n\t\t;\n\t\t\t\n\t}\n\t\t\n\n\tfunction gravarRemessaProcessada() {\n\t\t\n\t\t/**\n\t\t * Verificar se algum item foi escolhido.\n\t\t */\n\t\tfunction verificarGravar() {\n\t\t\t\n\t\t\tvar existe_item = false;\n\n\t\t\t$('.popup button.js-gravar')\n\t\t\t\t.click(function() {\n\t\t\t\t\t\n\t\t\t\t\t$('.popup .up-container table tbody')\n\t\t\t\t\t\t.each(function() {\n\n\t\t\t\t\t\t\tif ( $(this).find('tr').length > 1 ) {\t//acima de 1 devido à msg de vazio\n\n\t\t\t\t\t\t\t\texiste_item = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t})\n\t\t\t\t\t;\n\n\t\t\t\t\tif ( !existe_item ) {\n\n\t\t\t\t\t\tshowAlert('Escolha algum item da remessa.');\n\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t\n\t\t\t\t\t\tverif_atualizar = false;\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t//verifica se houve erro ao gravar\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\n\t\t\t\t\t\tif ( $('.alert').is(':visible') ) {\n\t\t\t\t\t\t\tverif_atualizar = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}, 1000);\n\n\t\t\t\t})\n\t\t\t;\n\t\t\t\n\t\t}\n\t\t\n\t\tverificarGravar();\n\t\t\n\t}\n\n\tfunction gerarManual() {\n\t\t\n        var self = this;\n        this.events                     = events;\n        this.processar                  = processar;\n        this.processarRemessaAcumulada  = processarRemessaAcumulada;\n        this.processarRemessaDetalhada  = processarRemessaDetalhada;\n        this.addTrBlocoDetalhado        = addTrBlocoDetalhado;\n        this.calcularFluxo              = calcularFluxo;\n        this.valoresHidden              = valoresHidden;\n        this.identifBlocos              = identifBlocos;\n       \n\t\t/**\n\t\t * Processar remessa acumulada\n\t\t * \n\t\t * @param {object} rem_proc\n\t\t */\n        function processarRemessaAcumulada(rem_proc) {\n        \n            $(rem_proc)\n                .find('.up-bloco')\n                .each(function() {\n\n                    $(this)\n                        .find('.estacao-bloco')\n                        .each(function() {\n\n                            //LINHA POR LINHA DE CADA ESTAÇÃO\t\t\t\t\t\t\n                            $(this)\n                                .find('tbody tr')\n                                .each(function() {\n\n                                    if ( $(this).children().hasClass('dataTables_empty') ) {\n                                        return;\n                                    }\n\n                                    var tr_item_estacao = $(this);\n\n                                    var restante\t\t= parseFloat(\n                                                            $(this)\n                                                                .closest('.estacao-bloco')\n                                                                .find('._qtd-restante')\n                                                                .val()\n                                                          );\n\n                                    var qtd_total\t\t= parseFloat(\n                                                            $(this)\n                                                                .find('._qtd-prog')\n                                                                .val()\n                                                          );\n\n                                    var fator_divisao\t= parseFloat(\n                                                            $(this)\n                                                                .find('._fator-divisao')\n                                                                .val()\n                                                          );\n\n                                    if ( fator_divisao < 1 ) {\n                                        var modelo\t= $(this).find('.modelo').text();\n                                        throw new Error('Ocorreu uma falha. O modelo ' + modelo + ' está sem cota de talão configurada.');\n                                    }\n\n                                    dividirItemConsumo( tr_item_estacao, restante, qtd_total, fator_divisao );\t\t\t\t\t\t\t\t\n                                })\n                            ;\n\n                        })\n                    ;\n\n                })\n            ;\n\t\t}\n        \n        /**\n         * Verifica se os itens da projeção de consumo possuem fluxo produtivo\n         * @param {type} itens_dist Itens da projeção de consumo distribuidos\n         * @param {function} callback Função a ser executada caso haja sucesso\n         * @returns {bool}\n         */\n        function calcularFluxo(itens_dist,callback)\n        {\n            //var erros\t\t\t= \"Os seguintes produtos estão sem fluxo produtivo alimentado ou configurado:<br/>\\n\";\n            //var exibe_erro\t\t= false;\n            var deferreds\t\t= [];\n\t\t\tvar identif_bloco\t= 0;\n\t\t\t\n\t\t\tvar bloco\t\t\t= [];\n\t\t\tvar modelo\t\t\t= [];\n\t\t\tvar modelo_desc\t\t= [];\n\t\t\tvar cor\t\t\t\t= [];\n\t\t\tvar tamanho\t\t\t= [];\n\t\t\tvar qtd\t\t\t\t= [];\n\t\t\tvar up_id\t\t\t= [];\n\t\t\tvar tamanho_desc\t= [];\n\t\t\tvar up_desc\t\t\t= [];\n\t\t\t\t\t\t\n\t\t\t$(itens_dist)\n                .find('tbody tr')\n\t\t\t\t.each(function() {\n\t\t\t\t\t\n\t\t\t\t\t//Será avaliado bloco por bloco, por isso essa verificação\n\t\t\t\t\t//de identificador do bloco\n\t\t\t\t\tif ( !$(this).hasClass('bloco-modelo') ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvar possui_siblings = true;\n\t\t\t\t\tvar tr_prox\t\t\t= $(this);\n\n\t\t\t\t\t//loop dentro dos itens do bloco\n\t\t\t\t\twhile( possui_siblings ) {\n\t\t\t\t\t\t\n\t\t\t\t\t\ttr_prox = $(tr_prox).next();\n\n\t\t\t\t\t\t//último 'tr'\n\t\t\t\t\t\tif ( $(tr_prox).is(':last-child') ) {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tpossui_siblings = false;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t//identificador do bloco\n\t\t\t\t\t\tif ( $(tr_prox).hasClass('bloco-modelo') ) {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tpossui_siblings = false;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//soma as qtd dentro do bloco\n\t\t\t\t\t\telse {\n\n\t\t\t\t\t\t\tbloco\t\t.push( identif_bloco );\n\t\t\t\t\t\t\tmodelo\t\t.push( $(tr_prox).find('._modelo-id'\t).val()  );\n\t\t\t\t\t\t\tmodelo_desc .push( $(tr_prox).find('.modelo'\t\t).text()  );\n\t\t\t\t\t\t\tcor\t\t\t.push( $(tr_prox).find('._cor-id'\t\t).val()  );\n\t\t\t\t\t\t\ttamanho\t\t.push( $(tr_prox).find('._tamanho'\t\t).val()  );\n\t\t\t\t\t\t\tqtd\t\t\t.push( $(tr_prox).find('._qtd-prog'\t\t).val()  );\n\t\t\t\t\t\t\tup_id\t\t.push( $(tr_prox).find('._up'\t\t\t).val()  );\n\t\t\t\t\t\t\ttamanho_desc.push( $(tr_prox).find('.tamanho'\t\t).text() );\n\t\t\t\t\t\t\tup_desc\t\t.push( $(tr_prox).closest('.up-bloco').children('label').text()  );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tidentif_bloco++;\n\n\t\t\t\t})\n\t\t\t;\n\t\t\t\n\t\t\tvar dados = {\n\t\t\t\tbloco\t\t: bloco,\n\t\t\t\t_modelo\t\t: modelo,\n\t\t\t\tmodelo_desc\t: modelo_desc,\n\t\t\t\t_cor\t\t: cor,\n\t\t\t\t_tamanho    : tamanho,\n\t\t\t\t_qtd_prog\t: qtd,\n\t\t\t\t_up\t\t\t: up_id,\n\t\t\t\tup_desc\t\t: up_desc\n\t\t\t};\n\n\t\t\tvar success = function(resposta) {\n\n\t\t\t\tvar i = 0;\n\t\t\t\t$(itens_dist)\n\t\t\t\t\t.find('tbody tr.bloco-modelo')\n\t\t\t\t\t.each(function() {\n\t\t\t\t\n\t\t\t\t\t\tvar tempo_total\t\t= parseFloat(resposta[i].TOTAL);\n\t\t\t\t\t\t/*\n\t\t\t\t\t\tvar modelo\t\t\t= [];\n\t\t\t\t\t\tvar up_desc\t\t\t= [];\n\n\t\t\t\t\t\t//Verifica se o produto está com algum tempo alimentado\n\t\t\t\t\t\tif ( tempo_total <= 0 ) {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tmodelo\t\t.push( $(this).find('.modelo'\t).text()  );\n\t\t\t\t\t\t\tup_desc\t\t.push( $(this).closest('.up-bloco').children('label').text() );\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t\texibe_erro = true;\n\t\t\t\t\t\t\terros = erros + \n\t\t\t\t\t\t\t\t\"Modelo: \"\t+  modelo  + \" - \"\n\t\t\t\t\t\t\t\t\t\t\t+  up_desc + \"<br/>\";\n\t\t\t\t\t\t\t;\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\t*/\n\n\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t$(input_clone)\n\t\t\t\t\t\t\t\t\t.clone()\n\t\t\t\t\t\t\t\t\t.attr('name','_tempo_total[]')\n\t\t\t\t\t\t\t\t\t.val( tempo_total )\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t;\n\n\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t.find('.tempo')\n\t\t\t\t\t\t\t.text( formataPadraoBr(''+tempo_total) )\n\t\t\t\t\t\t;\n\t\t\t\t\t\t\n\t\t\t\t\t\ti++;\n\t\t\t\t\t\t\n\t\t\t\t\t})\n\t\t\t\t;\n\n\t\t\t};\n\n\t\t\tdeferreds.push(\n\t\t\t\texecAjax1(\n\t\t\t\t\t'POST', \n\t\t\t\t\t'/_22040/tempo',\n\t\t\t\t\tdados,\n\t\t\t\t\tsuccess\n\t\t\t\t)\n\t\t\t);\n\t\t\t\n\t\t\t//Verifica se houve algum produto sem fluxo produtivo \n\t\t\t$.when\n\t\t\t\t.apply(null, deferreds)\n\t\t\t\t.done(function() {\n\t\t\t\t\tcallback();\n\t\t\t\t\t/*if ( exibe_erro ) {\n\t\t\t\t\t\tshowAlert(erros);\n\t\t\t\t\t} \n\t\t\t\t\telse {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}*/\n\t\t\t\t})\n\t\t\t;\n        }\n\t\t\n\t\t\n\t\t/**\n\t\t * Adicionar 'tr' que identifica o bloco (talão acumulado do detalhado).\n\t\t * \n\t\t * @param {element} rem_proc\n\t\t */\n\t\tfunction addTrBlocoDetalhado(rem_proc) {\n\t\t\t\n\t\t\tfunction addTalao(tr_atual) {\n\n\t\t\t\tvar tr_bloco\t=\t$(tr_atual)\n\t\t\t\t\t\t\t\t\t\t.clone()\n\t\t\t\t\t\t\t\t\t\t.addClass('bloco-modelo')\n\t\t\t\t\t\t\t\t\t;\n\n\t\t\t\t$(tr_bloco)\n\t\t\t\t\t.find('input')\n\t\t\t\t\t.remove()\n\t\t\t\t;\n\n\t\t\t\t$(tr_bloco)\n\t\t\t\t\t.find('.cor')\n\t\t\t\t\t.remove()\n\t\t\t\t;\n\n\t\t\t\t$(tr_bloco)\n\t\t\t\t\t.find('.tamanho')\n\t\t\t\t\t.remove()\n\t\t\t\t;\n\n\t\t\t\t$(tr_bloco)\n\t\t\t\t\t.find('.modelo')\n\t\t\t\t\t.attr('colspan', 3)\n\t\t\t\t;\n\n\t\t\t\t$(tr_bloco)\n\t\t\t\t\t.insertBefore( $(tr_atual) )\n\t\t\t\t;\n\t\t\t}\n \n\t\t\t$(rem_proc)\n\t\t\t\t.find('.up-bloco')\n\t\t\t\t.each(function() {\n\n\t\t\t\t\t$(this)\n\t\t\t\t\t\t.find('.estacao-bloco')\n\t\t\t\t\t\t.each(function() {\n\n\t\t\t\t\t\t\t//LINHA POR LINHA DE CADA ESTAÇÃO\t\t\t\t\t\t\n\t\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t\t.find('tbody tr')\n\t\t\t\t\t\t\t\t.each(function() {\n\n\t\t\t\t\t\t\t\t\t//Guarda o id do talão atual\n\t\t\t\t\t\t\t\t\tvar talao_atual\t\t=\t$(this)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.find('._remessa-talao-id')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\t\t//Guarda o id do talão anterior\n\t\t\t\t\t\t\t\t\tvar talao_anterior\t=\t$(this)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.prev()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.find('._remessa-talao-id')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t;\n\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif ( $(this).children().hasClass('dataTables_empty') ) {\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif ( typeof talao_anterior === 'undefined') {\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\taddTalao($(this));\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t//Se o talão anterior for diferente do atual, deverá trocar a cor\n\t\t\t\t\t\t\t\t\tif ( talao_anterior !== talao_atual ) {\n\n\t\t\t\t\t\t\t\t\t\taddTalao($(this));\n\t\t\t\t\t\t\t\t\t} \t\t\t\t\t\n\t\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t;\n\t\t\t\t\t\t})\n\t\t\t\t\t;\n\t\t\t\t})\n\t\t\t;\n\t\t\t\n\t\t}\n\t\t\n        /**\n         * Processar remessa detalhada\n         * @param {object} rem_proc\n         * @returns {void}\n         */\n        function processarRemessaDetalhada(rem_proc)\n        {\n\n\t\t\t$(rem_proc)\n\t\t\t\t.find('.up-bloco')\n\t\t\t\t.each(function() {\n\n\t\t\t\t\t$(this)\n\t\t\t\t\t\t.find('.estacao-bloco')\n\t\t\t\t\t\t.each(function() {\n\n\t\t\t\t\t\t\t//LINHA POR LINHA DE CADA ESTAÇÃO\t\t\t\t\t\t\n\t\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t\t.find('tbody tr')\n\t\t\t\t\t\t\t\t.each(function() {\t\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif ( $(this).children().hasClass('dataTables_empty') ) {\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t//Guarda o id do talão atual\n\t\t\t\t\t\t\t\t\tvar talao_atual\t\t=\t$(this)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.find('._remessa-talao-id')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\t\t//Guarda o id do talão anterior\n\t\t\t\t\t\t\t\t\tvar talao_anterior\t=\t$(this)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.prev()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.find('._remessa-talao-id')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t//Se for indefinido, é porque o item atual é o primeiro da lista. Então deverá ser amarelo.\n\t\t\t\t\t\t\t\t\tif ( typeof talao_anterior === 'undefined') return;\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t//Se o talão anterior for diferente do atual, deverá trocar a cor\n\t\t\t\t\t\t\t\t\tif ( talao_anterior !== talao_atual ) {\n\n\t\t\t\t\t\t\t\t\t\t//Verifica se o talão anterior possui a class de bloco novo\n\t\t\t\t\t\t\t\t\t\tif ( $(this).prev().hasClass('bloco-novo') ) {\n\n\t\t\t\t\t\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t\t\t\t\t\t.removeClass('bloco-novo')\n\t\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t\t\t\t\t\t.addClass('bloco-novo')\n\t\t\t\t\t\t\t\t\t\t\t;\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\tif ( $(this).prev().hasClass('bloco-novo') ) {\n\n\t\t\t\t\t\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t\t\t\t\t\t.addClass('bloco-novo')\n\t\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t\t\t\t\t\t.removeClass('bloco-novo')\n\t\t\t\t\t\t\t\t\t\t\t;\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\n                                })\n                            ;\n\t\t\t\t\t\t})\n\t\t\t\t\t;\n\t\t\t\t})\n\t\t\t;\n        }\n        \n\t\t/**\n\t\t * Alterar a quantidade do 'tr' que identifica o bloco (talão acumulado).\n\t\t * \n\t\t * @param {element} tr_corrente\n\t\t */\n\t\tfunction definirQtdTrBloco(tr_corrente) {\n\t\t\t\n\t\t\tvar soma_qtd_prog\t\t\t= 0;\n\t\t\tvar soma_qtd_alternativa\t= 0;\n\t\t\tvar possui_siblings\t\t\t= true;\n\t\t\tvar tr_prox\t\t\t\t\t= $(tr_corrente);\n\t\t\t\n\t\t\twhile( possui_siblings ) {\n\t\t\t\t\n\t\t\t\ttr_prox = $(tr_prox).next();\n\t\t\t\t\n\t\t\t\t//último 'tr'\n\t\t\t\tif ( $(tr_prox).is(':last-child') ) {\n\n\t\t\t\t\tpossui_siblings = false;\n\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//identificador do bloco\n\t\t\t\tif ( $(tr_prox).hasClass('bloco-modelo') ) {\n\n\t\t\t\t\tpossui_siblings = false;\n\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//soma as qtd dentro do bloco\n\t\t\t\telse {\n\n\t\t\t\t\tsoma_qtd_prog\t\t\t= soma_qtd_prog + parseFloat( $(tr_prox).find('._qtd-prog').val() );\n\t\t\t\t\tsoma_qtd_alternativa\t= soma_qtd_alternativa + parseFloat( $(tr_prox).find('._qtd-alternativa').val() );\n\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif ( isNaN(soma_qtd_prog) ) {\n\t\t\t\t\t\n\t\t\t\t\tpossui_siblings = false;\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\t$(tr_corrente)\n\t\t\t\t.find('.qtd-prog')\n\t\t\t\t.children('span')\n\t\t\t\t.text( formataPadraoBr(soma_qtd_prog.toFixed(decimal)) )\n\t\t\t;\n\t\t\t\n\t\t\t$(tr_corrente)\n\t\t\t\t.find('.qtd-alternativa')\n\t\t\t\t.text( formataPadraoBr(soma_qtd_alternativa.toFixed(decimal)) )\n\t\t\t;\n\t\t\t\n\t\t}\n\t\t\n\t\t/**\n\t\t * Adicionar identificador para blocos.\n\t\t * \n\t\t * @param {object} rem_proc\n\t\t */\n\t\tfunction identifBlocos(rem_proc) {\n\t\t\t\n\t\t\tvar i = 0;\n            var y = 0;\n\t\t\t\n\t\t\t$(rem_proc)\n\t\t\t\t.find('.up-bloco')\n\t\t\t\t.each(function() {\n\n\t\t\t\t\t$(this)\n\t\t\t\t\t\t.find('.estacao-bloco')\n\t\t\t\t\t\t.each(function() {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ti++;\n\n\t\t\t\t\t\t\t//LINHA POR LINHA DE CADA ESTAÇÃO\t\t\t\t\t\t\n\t\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t\t.find('tbody tr')\n\t\t\t\t\t\t\t\t.each(function() {\n\n\t\t\t\t\t\t\t\t\tif ( $(this).children().hasClass('dataTables_empty') ) {\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tvar classe\t\t= $(this).hasClass('bloco-novo');\n\t\t\t\t\t\t\t\t\tvar classe_ant\t= $(this).prev().hasClass('bloco-novo');\n\n\t\t\t\t\t\t\t\t\tif ( classe !== classe_ant ) {\n\n\t\t\t\t\t\t\t\t\t\ti++;\n\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif ( $(this).hasClass('bloco-modelo') ) {\n\t\t\t\t\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t\t\t\t\tinput_clone.clone().attr('name','_tempo_talao[]').val(i)\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t\t\t\t.children('._bloco-divisor')\n\t\t\t\t\t\t\t\t\t\t.val(i)\n\t\t\t\t\t\t\t\t\t;\n                                    \n\t\t\t\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t\t\t\t.children('._consumo-ref')\n\t\t\t\t\t\t\t\t\t\t.val(i)\n\t\t\t\t\t\t\t\t\t;\n                                    \n                                    y++;\n                                    \n\t\t\t\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t\t\t\t.children('._talao-divisor')\n\t\t\t\t\t\t\t\t\t\t.val(y)\n\t\t\t\t\t\t\t\t\t;\n                                    \n\t\t\t\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t\t\t\t.children('._consumo-talao')\n\t\t\t\t\t\t\t\t\t\t.val(y)\n\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif ( $(this).hasClass('bloco-modelo') ) {\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\tdefinirQtdTrBloco( $(this) );\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t;\n\t\t\t\t\t\t})\n\t\t\t\t\t;\n\t\t\t\t})\n\t\t\t;\n\n\t\t}\n\t\t\n\t\t/**\n\t\t * Adicionar valores aos input hidden no popup.\n\t\t */\n\t\tfunction valoresHidden() {\n\t\t\t\n\t\t\tvar remessa\t\t=\t$('#remessa')\n\t\t\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\n\t\t\tvar requisicao\t=\t$('#remessa')\n\t\t\t\t\t\t\t\t\t.nextAll('._requisicao')\n\t\t\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t\t\t;\n\n\t\t\tvar estab\t\t=\t$('#estab')\n\t\t\t\t\t\t\t\t\t.siblings('._estab-id')\n\t\t\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t\t\t;\n\t\n\t\t\tvar familia\t\t=\t$('#familia')\n\t\t\t\t\t\t\t\t\t.siblings('._familia-id')\n\t\t\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t\t\t;\n\t\n\t\t\tvar gp\t\t\t=\t$('.consulta_gp_grup')\n\t\t\t\t\t\t\t\t\t.siblings('._consulta_imputs')\n\t\t\t\t\t\t\t\t\t.children('._gp_id')\n\t\t\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t\t\t;\n\t\n\t\t\tvar data_producao =\t$('#data-prod')\n\t\t\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t\t\t;\n\t\t\t\t\n\t\t\tvar perfil\t\t=\t$('._perfil-valor')\n\t\t\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t\t\t;\n\n\t\t\t$('.remessa-processada-container')\n\t\t\t\t.find('.up-container')\n\t\t\t\t.find('._remessa')\n\t\t\t\t.val( remessa )\n\t\t\t\t.siblings('._requisicao')\n\t\t\t\t.val( requisicao )\n\t\t\t\t.siblings('._estab')\n\t\t\t\t.val( estab )\n\t\t\t\t.siblings('._familia')\n\t\t\t\t.val( familia.replace(/^0+/, '') ) //remover 0 à esquerda\n\t\t\t\t.siblings('._gp')\n\t\t\t\t.val( gp.replace(/^0+/, '') ) //remover 0 à esquerda\n\t\t\t\t.siblings('._data-producao')\n\t\t\t\t.val( data_producao )\n\t\t\t\t.siblings('._perfil')\n\t\t\t\t.val( perfil.trim() )\n\t\t\t;\t\t\t\n\t\t\t\n\t\t}\n\t\t\n\t\t/**\n\t\t * Verifica se existe algum item que não tenha sido programado.\n\t\t * @return {boolean}\n\t\t */\n\t\tfunction verificarItensProg() {\n\t\t\t\n\t\t\tvar ret = true;\n            \n            if ( $('#remessa').val() == 'REP' || $('#remessa').val() == 'REQ' ) {\n                ret = true;\n            } else\n\t\t\tif ( $('.table-22040 tbody tr').length === 0 ) {\n\n\t\t\t\tret = false;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t\n\t\t\t\t$('.table-22040 tbody tr')\n\t\t\t\t\t.each(function() {\n\n\t\t\t\t\t\tif ( parseFloat($(this).find('._qtd-prog').val()) > 0 ) {\n\n\t\t\t\t\t\t\tret = false;\n\t\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t})\n\t\t\t\t;\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\treturn ret;\n\t\t}\n        \n        function processar(rem_proc)\n        {\n            //verificar se existem itens não programados\n            if ( !verificarItensProg() ) {\n\n                throw new Error('Existem itens não programados.');\n            }\n\n            var itens_dist     = $('.conteudo-filtro .up-container');\n            var controle_talao = $('._controle-talao').val().trim();\n\n\n            //clonar e colar as estações no popup\n            $(rem_proc)\n                .html( itens_dist.clone() )\n            ;\n\n            if (controle_talao === 'A') {\n                self.processarRemessaAcumulada(rem_proc);\n            } \n            else {\n                self.processarRemessaDetalhada(rem_proc);\n                self.addTrBlocoDetalhado(rem_proc);\n            }\n        }\n        \n        function events()\n        {\n            $('#btn-processar')\n                .click(function() {        \n\t\t\n                    try {\n                        \n                        var rem_proc       = $('.remessa-processada-container');\n                            self.processar(rem_proc);\n                            self.calcularFluxo(rem_proc, function()\n                            {\n                                self.identifBlocos(rem_proc);\t\t\t\t\n                                self.valoresHidden();\n\n                                //exibir popup\n                                $(this).popUp();\n                            });\n\n                    } catch(err) {\n                        showErro(err.message);\n                    }\n                })\n            ;\n        }\n\n\t}\n\t\n\tfunction gerarAuto() {\n        \n        var self = this;\n        this.distribuir = distribuir;\n        this.processar  = processar;\n        \n        function distribuir(table_tr) {\n            \n            return new Promise(function(resolve)\n            {\n                if (table_tr.length < 1) {\n                    resolve(true);\n                }\n                var deferreds = [];\n                \n\n                function listing() {\n                    var deferred = $.Deferred();\n                    var promises = [];\n\n                    progressBar(0,table_tr.length);\n                    //Passa em todos os itens da projeção\n                    table_tr\n                        .each(function(index) {   \n                            //Guardo o tr atual para ser utilizado no setTimeout\n                            var _this    = $(this);\n                            var qtd_prog = _this.find('._qtd-prog').val();\n                            var deferred = $.Deferred();\n                            \n                            setTimeout(function() {\n                                \n                                if ( (! _this.is(\":disabled\")) && qtd_prog > 0 ) {\n                                    _this.click(); \n                                    verificacao_perfil = false;\n                                    $('.conteudo-filtro .btn-incluir-auto').click();\n                                    verificacao_perfil = true;\n                                }\n                                progressBar(index+1);\n                                \n                                deferred.resolve();\n                            }, 25 * index);\n                            promises.push(deferred.promise());\n                        })\n                    ;\n\n                    $.when.apply($, promises).then(function () {\n                            deferred.resolve();\n                    });\n\n                    return deferred.promise();\n                }\n\n                $.when(listing().done(function () {\n                    resolve(true);\n                }));\n                \n            });\n        }\n        \n        function processar() {\n\n            var taloes      = $('.dist-auto .bloco-modelo');\n            var estacoes    = $('.remessa-processada-container .estacao-bloco:not(.dist-auto)');\n            var n_taloes    = taloes.length;\n            var n_estacoes  = estacoes.length;            \n            var arr_taloes  = [];\n            \n            \n            /**\n             * Laço que passará por todos os talões formados\n             */\n            $(taloes)\n                .each(function(i,talao){\n                    \n                    /**\n                     * Insere no talão o perfil e a posição inicial\n                     */\n                    var perfil_sku = $(this).next().find('._perfil-sku').val();\n                    var perfil_sku_descricao = $(this).next().find('td.perfil span').text();\n                    $(this)\n                        .attr('index',i+1)\n                        .attr('perfil', perfil_sku)\n                        .find('td.modelo').text($(this).find('td.modelo').text() + ' (Perfil: '+perfil_sku_descricao+')');\n\n                    /**\n                     * Cria o array com os talões detalhados\n                     */\n                    var arr_detalhe = [];\n                    var talao_detalhe = $(this)\n                        .nextAll()\n                        .each(function(){\n                            if ($(this).hasClass('bloco-modelo')) {\n                                return false;\n                            } else {\n                                arr_detalhe.push($(this));\n                            }\n                        })\n                    ;\n                \n                    /**\n                     * Insere no array de talões os talões acumulados e os detalhados\n                     */\n                    arr_taloes[i] = {\n                        talao           : $(this),\n                        talao_detalhe   : arr_detalhe\n                    };\n                    \n                })\n            ;\n            \n            /**\n             * Ordena os talões por perfil\n             */\n            var taloes_ord = arr_taloes;\n            taloes_ord.sort(function(a,b) {\n                var A = a.talao.attr('perfil');\n                var B = b.talao.attr('perfil');\n                return (A < B) ? -1 : (A > B) ? 1 : 0;\n            });\n            \n            /**\n             * Obs.: Variável de escopo da lógica de distribuição paralela\n             * Amazena a proxima estação a receber um talão\n             */\n            var proximo_receber = 0;\n            \n            /**\n             * Início do looping da lógica de distribuição paralela\n             */\n            for ( var i = 0 ; i < n_taloes ; i++ ) {\n                \n                /* Armazena o talão atual            */ var that_talao = taloes_ord[i];\n                /* Armazena o talão anterior         */ var talao_perfil_anterior   = (typeof taloes_ord[i-1] != 'undefined') ? taloes_ord[i-1].talao.attr('perfil') : '';\n                /* Armazena o perfil to talão atual  */ var talao_perfil_atual      = that_talao.talao.attr('perfil');\n                \n                /**\n                 * Verifica se o perfil do talão anterior é diferente do atual,\n                 * para que seja resetado a próxima estação que receberá o talão\n                 */\n                if ( talao_perfil_anterior != talao_perfil_atual ) {\n                    proximo_receber = 0;\n                }\n                \n                /**\n                 * Início do looping das estações\n                 */\n                $(estacoes)\n                    .each(function(j,that_estacao){\n                        \n                        \n                        /* Verifica se o talão já foi inserido em alguma estação */ var item_adicionado = false;\n                    \n                        /**\n                         * Verifica se a proxima estçaão a receber o talão confere com a estação atual\n                         */\n                        if ( j == proximo_receber ) {\n\n                            /**\n                             * Verifica se a estação atual é compatível com o perfil do talão atual\n                             */\n                            if ( $(that_estacao).data('perfil-auto').indexOf(talao_perfil_atual) != -1 ) {\n                                \n                                /**\n                                 * Armazena o body da estação\n                                 */\n                                var tbody = $(that_estacao).find('tbody');\n\n                                /**\n                                 * Insere o talão acumulado no body da estação\n                                 */\n                                tbody.append(that_talao.talao); \n\n                                /**\n                                 * Insere os talões detalhado no body da estação\n                                 */\n                                $.each(that_talao.talao_detalhe,function(id_detalhe,elemento_detalhe){\n                                    tbody.append(elemento_detalhe); \n                                });\n                                \n                                /**\n                                 * Marca como inserido o talão corrente\n                                 */\n                                item_adicionado = true;\n                                \n                            } else {\n                                \n                                /**\n                                 * Verifica se está na ultima estação e o talão não foi atribuido a nenhuma estação,\n                                 * reinicializa a busca do talão atual\n                                 */\n                                if ( proximo_receber == n_estacoes-1 ) {\n                                  \n                                  i--;\n                                }\n                            }\n                            \n                            /**\n                             * Incrementa a próxima estação \n                             */\n                            proximo_receber++;\n                        }\n                        \n                        /**\n                         * Verifica se a proxima estação a receber o talão é maior que o número de estações\n                         * e reinicializa o proximo a receber\n                         */\n                        if ( proximo_receber > n_estacoes-1 ) {\n                            proximo_receber = 0;\n                        }\n\n                        /**\n                         * Se o talão já foi inserido em alguma estação, cancela o loop atual\n                         */\n                        if ( item_adicionado ) {\n                            return false;\n                        }\n                    })\n                ;    \n                \n            };\n            \n            \n            $(estacoes)\n                .each(function(i,estacao){\n\n                    var arr_taloes  = [];\n                    var tr_estacao = $(this).find('tbody .bloco-modelo');\n            \n                    $(tr_estacao)\n                        .each(function(j){\n                            \n                            var arr_detalhe = [];\n                            $(this)\n                                .nextAll()\n                                .each(function(){\n                                    if ($(this).hasClass('bloco-modelo')) {\n                                        return false;\n                                    } else {\n                                        arr_detalhe.push($(this));\n                                    }\n                                })\n                            ;\n                            \n                            arr_taloes[j] = {\n                                talao           : $(this),\n                                talao_detalhe   : arr_detalhe\n                            };\n                        })\n                    ;\n\n                    var taloes_ordx = arr_taloes;\n                    taloes_ordx.sort(function(a,b) {\n                        var A = parseInt(a.talao.attr('index'));\n                        var B = parseInt(b.talao.attr('index'));\n                        return (A < B) ? -1 : (A > B) ? 1 : 0;\n                    });\n                    \n                    var add_class   = true;\n                        \n                    $.each(taloes_ordx, function(id, elemento) {\n                        \n                        var tbody = tr_estacao.closest('tbody');\n                        \n                        if ( add_class == true ) {\n                            elemento.talao.addClass('bloco-novo');\n                        } else {\n                            elemento.talao.removeClass('bloco-novo');\n                        }\n                        \n                        tbody.append(elemento.talao); \n\n                        $.each(elemento.talao_detalhe,function(id_detalhe,elemento_detalhe){\n                            \n                            elemento_detalhe.find('._up'     ).val(elemento_detalhe.closest('.up-bloco'     ).data('up'     ));\n                            elemento_detalhe.find('._estacao').val(elemento_detalhe.closest('.estacao-bloco').data('estacao'));\n                            \n                            if ( add_class == true ) {\n                                elemento_detalhe.addClass('bloco-novo');\n                            } else {\n                                elemento_detalhe.removeClass('bloco-novo');\n                            }\n                            tbody.append(elemento_detalhe); \n                        });\n                        \n                        add_class = !add_class;\n                    });\n                    \n                })\n            ;\n                    \n            \n            \n        }\n        \n\t\t$('#btn-distribuir-auto')\n            .off('click')\n\t\t\t.click(function() {\n                \n                var perfis = '';\n                $('.estacao-bloco:not(.dist-auto)')\n                    .each(function(){\n                        perfis = perfis + ' ' + $(this).data('perfil');\n                    });\n                \n                $('.estacao-bloco.dist-auto')\n                    .data('perfil',perfis)\n                    .find('.estacao-perfil').text(perfis);\n                $('.btn-incluir-auto')\n                    .data('perfil',perfis);\n                \n                var table_tr = $('.table-22040 tbody tr:not([disabled])');\n                    self.distribuir(table_tr).then(function() {\n                        try {\n                            var rem_proc       = $('.remessa-processada-container');\n                                objGerarManual.processar(rem_proc);\n\n                            self.processar();\n                                \n                            objGerarManual.calcularFluxo(rem_proc, function()\n                            {\n                                objGerarManual.identifBlocos(rem_proc);\t\t\t\t\n                                objGerarManual.valoresHidden();\n                                \n                                //exibir popup\n                                $(this).popUp();\n                                \n                                //Passa em todos os itens da projeção\n                                $('.taloes-automatico tr')\n                                    .each(function(index,teste) {   \n                                        var _this = $(this);\n                                            _this.click(); \n                                            $('.btn-excluir-auto').click();\n                                    })\n                                ;\n                            }); \n                        } catch(err) {\n\n                            //Passa em todos os itens da projeção\n                            $('.taloes-automatico tr')\n                                .each(function(index,teste) {   \n                                    var _this = $(this);\n                                        _this.click(); \n                                        $('.btn-excluir-auto').click();\n                                })\n                            ;\n                            \n                            showErro(err.message);\n                        }\n                        \n                    });\n                \n                \n\t\t\t})\n        ;\n\t}\n\t\n\tfunction dragAndDrop() {\n\t\t\n\t\tvar tr_22040 = $('.table-22040 tbody tr');\n\t\t//var ja_up = false;\n\t\t\t\t\n\t\tfunction gpToUp() {\n\t\t\t\n\t\t\t$(tr_22040)\n\t\t\t\t.draggable({\n\t\t\t\t\tappendTo\t\t\t: \"body\",\n\t\t\t\t\thelper\t\t\t\t: \"clone\",\n\t\t\t\t\tcursor\t\t\t\t: \"-webkit-grabbing\",\n\t\t\t\t\tcursorAt\t\t\t: { top: 50, left: 110 },\n\t\t\t\t\tscroll\t\t\t\t: true, \n\t\t\t\t\tscrollSensitivity\t: 100,\n\t\t\t\t\tdrag\t\t\t\t: function( event, ui ) {\n\t\t\t\t\t\t\n\t\t\t\t\t\t//desabilitar overflow da tabela principal\n\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t.closest('.dataTables_scrollBody')\n\t\t\t\t\t\t\t.addClass('dragging');\n\n\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t.closest('table')\n\t\t\t\t\t\t\t.addClass('dragging');\n\n\t\t\t\t\t},\n\t\t\t\t\tstop\t\t\t\t: function( event, ui ) {\n\n\t\t\t\t\t\t//habilitar overflow da tabela principal\n\t\t\t\t\t\t$(tr_22040)\n\t\t\t\t\t\t\t.closest('.dataTables_scrollBody')\n\t\t\t\t\t\t\t.removeClass('dragging');\n\n\t\t\t\t\t\t$(tr_22040)\n\t\t\t\t\t\t\t.closest('table')\n\t\t\t\t\t\t\t.removeClass('dragging');\n\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t$(\".estacao-bloco\")\n\t\t\t\t.droppable({\n\t//\t\t\t\taccept\t\t: \".estacao-bloco\",\n\t\t\t\t\ttolerance\t: \"pointer\",\n\t\t\t\t\tdrop\t\t: function( event, ui ) {\n\n//\t\t\t\t\t\tconsole.log( 'estdrop' );\n//\t\t\t\t\t\tconsole.log( event.target );\n//\t\t\t\t\t\tconsole.log( $(event.target).hasClass('estacao-bloco') );\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar clone = $(ui.helper).clone(true);\n\t\t\t\t\t\t$(clone).removeClass('ui-draggable-dragging');\n\t\t\t\t\t\t\n\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t.find('tbody')\n\t\t\t\t\t\t\t.append( clone )\t//add tr (drag) à estação\n\t\t\t\t\t\t\t.find('tr')\n\t\t\t\t\t\t\t.first()\n\t\t\t\t\t\t\t.hide(); //esconder mensagem 'Arraste'\n\t\t\t\t\t\n\t\t\t\t\t\t$(ui.draggable)\n\t\t\t\t\t\t\t.children('td')\n\t\t\t\t\t\t\t.last()\n\t\t\t\t\t\t\t.prev()\n\t\t\t\t\t\t\t.text('0,0000 KG');\n\t\t\t\t\t\n//\t\t\t\t\t\t//se for de estação para estação\n//\t\t\t\t\t\tif( $(event.target).parents('.estacao-bloco').length > 0 ) {\n//\t\t\t\t\t\t\treturn false;\n//\t\t\t\t\t\t}\n//\n\t\t\t\t\t\t//if( !ja_up )\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tupToGp();\n\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\n\t\t}\n\t\t\n\t\tfunction upToGp() {\n\t\t\t\n//\t\t\tconsole.log('uptogp');\n\t\t\t\n\t\t\t$(\".estacao-bloco tbody tr\")\n\t\t\t\t.draggable({\n\t\t\t\t\tcancel\t\t: \".dataTables_empty\",\n\t\t\t\t\tappendTo\t: \"body\",\n\t\t\t\t\thelper\t\t: \"clone\",\n\t\t\t\t\tcursor\t\t: \"-webkit-grabbing\",\n\t\t\t\t\tcursorAt\t: { top: 50, left: 110 },\n//\t\t\t\t\tstart\t\t: function( event, ui ) {\n//\t\t\t\t\t\t\n//\t\t\t\t\t\t//se for de estação para estação\n//\t\t\t\t\t\tif( $(event.target).parents('.estacao-bloco').length > 0 ) {\n//\t\t\t\t\t\t\tja_up = true;\n//\t\t\t\t\t\t}\n//\t\t\t\t\t\t\n////\t\t\t\t\t\tupToGp();\n//\t\t\t\t\t\t\n//\t\t\t\t\t},\n\t\t\t\t\tdrag\t\t: function( event, ui ) {\n\n//\t\t\t\t\t\tconsole.log('dragestacaotr');\n//\t\t\t\t\t\tconsole.log( $(event.target).parents('.estacao') );\n\t\t\t\t\t\t\n\t\t\t\t\t\tif ( $(this).siblings().length === 1 ) {\n\n\t\t\t\t\t\t\t//exibir mensagem 'Arraste'\n\t\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t\t.siblings()\n\t\t\t\t\t\t\t\t.find('.dataTables_empty')\n\t\t\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t\t\t.show();\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t$(\".table-22040\")\n\t\t\t\t.droppable({\n\t\t\t\t\t//accept\t\t: \".estacao-bloco\",\n\t\t\t\t\ttolerance\t: \"pointer\",\n\t\t\t\t\tdrop\t\t: function( event, ui ) {\n\t\t\t\t\t\t\t\t\n//\t\t\t\t\t\t//retornar dados da estação para a tabela principal\n//\t\t\t\t\t\t$(this)\n//\t\t\t\t\t\t\t.find('tbody')\n//\t\t\t\t\t\t\t.append( ui.draggable );\n\t\t\t\t\t\n\t\t\t\t\t\tvar tr_gp = '';\n\t\t\t\t\t\tvar tr_up = '';\n\t\t\t\t\t\t\n\t\t\t\t\t\t//valores da 'tr' de GP\n\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t.find('tr')\n\t\t\t\t\t\t\t.each(function() {\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t\t\t.children('td')\n\t\t\t\t\t\t\t\t\t.each(function() {\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\ttr_gp += $(this).text();\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\t//valores da 'tr' de UP\n\t\t\t\t\t\t$(ui.draggable)\n\t\t\t\t\t\t\t.find('tr')\n\t\t\t\t\t\t\t.each(function() {\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t\t\t.children('td')\n\t\t\t\t\t\t\t\t\t.each(function() {\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\ttr_up += $(this).text();\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\tif ( tr_gp === tr_up ) {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t//retornar dados da estação para a tabela principal\n\t\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t\t.find('tbody')\n\t\t\t\t\t\t\t\t.append( ui.draggable );\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\n\t\t}\n\t\t\n\t\tgpToUp();\n\n\t}\n\t\n\tfunction manipularConsumo() {\n\t\t\n\t\tfunction inserir() {\n\t\t\t\n\t\t\tfunction valoresHidden(btn) {\n\t\t\t\t\n\t\t\t\tvar up_bloco\t\t=\t$(btn)\n\t\t\t\t\t\t\t\t\t\t\t.closest('.up-bloco')\n\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\tvar estacao_bloco\t=\t$(btn)\n\t\t\t\t\t\t\t\t\t\t\t.closest('.estacao-bloco')\n\t\t\t\t\t\t\t\t\t\t;\n\n\t\t\t\t$(up_bloco)\n\t\t\t\t\t.find('._up')\n\t\t\t\t\t.val( $(up_bloco).data('up') )\n\t\t\t\t\t.siblings('._estacao')\n\t\t\t\t\t.val( $(estacao_bloco).data('estacao') )\n\t\t\t\t;\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\t/**\n\t\t\t * Verificar se o perfil do item é compatível com o da estação.\n\t\t\t * \n\t\t\t * @param {element} tr_consumo_selec\n\t\t\t * @param {element} perfil_estacao\n\t\t\t * @returns {Boolean}\n\t\t\t */\n\t\t\tfunction verificarPerfil(tr_consumo_selec, estacao) {\n\t\t\t\t\n\t\t\t\tvar verif_perfil = true;\n\t\t\t\t\t\n                var perfil_estacao      = estacao.data('perfil');                    \n                    \n\t\t\t\t$(tr_consumo_selec)\n\t\t\t\t\t.each(function() {\n\n\t\t\t\t\t\tvar perfil_consumo\t=\t$(this)\n\t\t\t\t\t\t\t\t\t\t\t\t\t.find('._perfil-sku')\n\t\t\t\t\t\t\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t\t\t\t\t\t\t;\n                        \n                            if ( perfil_estacao.indexOf(perfil_consumo) == -1 && verificacao_perfil ) {\n                                showAlert('Perfil do Item de Consumo é diferente do Perfil da Estação.');\n                                verif_perfil = false;\n                                return false;\n                            }\n\t\t\t\t\t})\n\t\t\t\t;\n\t\t\t\t\n\t\t\t\treturn verif_perfil;\n\t\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\t$(document)\n\t\t\t\t.on('click', '.conteudo-filtro .btn-incluir-consumo', function() {\n\n\t\t\t\t\tvar tr_consumo_selec\t=\t$('.table-22040')\n\t\t\t\t\t\t\t\t\t\t\t\t\t.find('tr.selected')\n\t\t\t\t\t\t\t\t\t\t\t\t;\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\tvar tbody_estacao\t\t=\t$(this)\n\t\t\t\t\t\t\t\t\t\t\t\t\t.closest('.estacao-bloco')\n\t\t\t\t\t\t\t\t\t\t\t\t\t.find('tbody')\n\t\t\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tif ( !verificarPerfil(tr_consumo_selec, $(this)) ) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n                    \n\t\t\t\t\t//clicar no botão de confirmar a edição de quantidade\n//\t\t\t\t\t$(btn_conf_qtd)\n//\t\t\t\t\t\t.click()\n//\t\t\t\t\t;\n\t\t\t\t\t\n\t\t\t\t\t//caso o valor de qtd inserido seja inválido, pára a execução\n//\t\t\t\t\tif ( $(btn_conf_qtd).data('valor-valido') === false ) {\n//\t\t\t\t\t\treturn false;\n//\t\t\t\t\t}\n\n\t\t\t\t\t//Copiar tr para a estação\n\t\t\t\t\t$(tr_consumo_selec)\n\t\t\t\t\t\t.each(function() {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t\t.removeClass('selected')\n\t\t\t\t\t\t\t\t.find('.selec-item-consumo')\n\t\t\t\t\t\t\t\t.removeProp('checked')\n\t\t\t\t\t\t\t\t.change()\n\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t\t.clone(true)\n\t\t\t\t\t\t\t\t.appendTo( tbody_estacao )\n\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar id_item\t\t=\tparseFloat( \n\t\t\t\t\t\t\t\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.data('item-consumo')\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tcalcularQtd( id_item );\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t})\n\t\t\t\t\t;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\tvaloresHidden( $(this) );\t\t\t\t\n\t\t\t\t   \n\t\t\t\t    //esconder mensagem 'arraste...'\n\t\t\t\t\t$(tbody_estacao)\n\t\t\t\t\t\t.find('.dataTables_empty')\n\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t.hide()\n\t\t\t\t\t;\n\t\t\t\t})\n            ;\n\t\t}\n\t\t\n\t\tfunction excluir() {\n\t\t\t\n\t\t\t$('.btn-excluir-consumo')\n\t\t\t\t.click(function() {\n\n\t\t\t\t\tvar tbody_estacao\t\t=\t$(this)\n\t\t\t\t\t\t\t\t\t\t\t\t\t.closest('.estacao-bloco')\n\t\t\t\t\t\t\t\t\t\t\t\t\t.find('table.estacao tbody')\n\t\t\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\tvar tr_estacao_selec\t=\t$(tbody_estacao)\n\t\t\t\t\t\t\t\t\t\t\t\t\t.find('tr.selected')\n\t\t\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\n\t\t\t\t\t$(tr_estacao_selec)\n\t\t\t\t\t\t.each(function() {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t//remover linha selecionada\n\t\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t\t.remove()\n\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar item_consumo\t=\t$(this)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.data('item-consumo')\n\t\t\t\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tcalcularQtd( item_consumo );\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t})\n\t\t\t\t\t;\n\t\t\t\t\t\n\t\t\t\t\t//mostrar mensagem 'Arraste...'\n\t\t\t\t\tif ( $(tbody_estacao).find('tr').length === 1 ) {\n\t\t\t\t\t\n\t\t\t\t\t\t$(tbody_estacao)\n\t\t\t\t\t\t\t.find('.dataTables_empty')\n\t\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t\t.show()\n\t\t\t\t\t\t;\n\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t//desabilitar botão excluir\n\t\t\t\t\t$(this)\n\t\t\t\t\t\t.prop('disabled', true)\n\t\t\t\t\t;\n\t\t\t\t\t\n\t\t\t\t\t//desabilitar botões de ordenação\n\t\t\t\t\t$(this)\n\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t.siblings('.acoes-ordenar-estacao')\n\t\t\t\t\t\t.children('button')\n\t\t\t\t\t\t.prop('disabled', true)\n\t\t\t\t\t;\n\n\t\t\t\t})\n\t\t\t;\n\t\t\t\n\t\t}\n\t\t\n\t\tfunction ordenar() {\n\t\t\t\n\t\t\t$(document)\n\t\t\t\t.on('click', '.btn-subir', function() {\n\t\t\t\t\t\n\t\t\t\t\tvar tr_estacao_selec\t=\t$(this)\n\t\t\t\t\t\t\t\t\t\t\t\t\t.closest('.estacao-bloco')\n\t\t\t\t\t\t\t\t\t\t\t\t\t.find('.selec-item-consumo:checked')\n\t\t\t\t\t\t\t\t\t\t\t\t\t.closest('tr')\n\t\t\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\n\t\t\t\t\t$(tr_estacao_selec)\n\t\t\t\t\t\t.insertBefore( tr_estacao_selec.prev() );\n\t\t\t\t\t;\n\t\t\t\t\t\n\t\t\t\t})\n\t\t\t\t.on('click', '.btn-descer', function() {\n\t\t\t\t\t\n\t\t\t\t\tvar tr_estacao_selec\t=\t$(this)\n\t\t\t\t\t\t\t\t\t\t\t\t\t.closest('.estacao-bloco')\n\t\t\t\t\t\t\t\t\t\t\t\t\t.find('.selec-item-consumo:checked')\n\t\t\t\t\t\t\t\t\t\t\t\t\t.closest('tr')\n\t\t\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\n\t\t\t\t\t$(tr_estacao_selec)\n\t\t\t\t\t\t.insertAfter( tr_estacao_selec.next() );\n\t\t\t\t\t;\n\t\t\t\t\t\n\t\t\t\t})\n\t\t\t;\n\t\t\t\n\t\t}\n\t\t\n\t\tfunction verificar() {\n\t\t\t\n\t\t\tfunction verificarIncluir() {\n\t\t\t\t\n\t\t\t\t$('.table-22040')\n\t\t\t\t\t.on('change', '.selec-item-consumo', function() {\n\n\t\t\t\t\t\t$('.btn-incluir-consumo')\n\t\t\t\t\t\t\t.prop('disabled', !$(this).is(':checked'))\n\t\t\t\t\t\t;\n\t\t\t\t\t\t\n\t\t\t\t\t})\n\t\t\t\t;\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tfunction verificarExcluirOrdenar() {\n\t\t\t\t\n\t\t\t\t$('table.estacao')\n\t\t\t\t\t.on('change', 'input[type=\"radio\"]', function() {\n\n\t\t\t\t\t\tvar up_container\t=\t$(this)\n\t\t\t\t\t\t\t\t\t\t\t\t\t.closest('.up-container')\n\t\t\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\tvar estacao_bloco\t=\t$(this)\n\t\t\t\t\t\t\t\t\t\t\t\t\t.closest('.estacao-bloco')\n\t\t\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t//Desabilitar todos os botões das estações\n\t\t\t\t\t\t$(up_container)\n\t\t\t\t\t\t\t.find('.btn-excluir-consumo, .btn-subir, .btn-descer')\n\t\t\t\t\t\t\t.prop('disabled', true)\n\t\t\t\t\t\t;\n\t\t\t\t\t\t\n\t\t\t\t\t\t//Desmarcar todos os 'tr' das estações\n\t\t\t\t\t\t$(up_container)\n\t\t\t\t\t\t\t.find('tbody tr')\n\t\t\t\t\t\t\t.removeClass('selected')\n\t\t\t\t\t\t;\n\t\t\t\t\t\t\n\t\t\t\t\t\t//Desmarcar todos os 'tr' da remessa\n\t\t\t\t\t\t$('.table-22040')\n\t\t\t\t\t\t\t.find('tbody tr')\n\t\t\t\t\t\t\t.removeClass('selected')\n\t\t\t\t\t\t\t.find('input[type=\"radio\"]')\n\t\t\t\t\t\t\t.trigger('change')\n\t\t\t\t\t\t;\n\n\t\t\t\t\t\t//Marcar 'tr' e habilitar botões de excluir/ordenar quando o 'radio' estiver marcado\n\t\t\t\t\t\tif ( $(this).is(':checked') ) {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t\t.closest('tr')\n\t\t\t\t\t\t\t\t.addClass('selected')\n\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t$(estacao_bloco)\n\t\t\t\t\t\t\t\t.find('.btn-excluir-consumo, .btn-subir, .btn-descer')\n\t\t\t\t\t\t\t\t.prop('disabled', false)\n\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\n\t\t\t\t\t})\n\t\t\t\t;\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tverificarIncluir();\n\t\t\tverificarExcluirOrdenar();\n\t\t\t\n\t\t}\n\t\t\n\t\tinserir();\n\t\texcluir();\n\t\tordenar();\n\t\tverificar();\n\t\t\n\t}\n\t\n\tfunction marcarTr() {\n\t\t\n\t\t/**\n\t\t * Verifica e marca os consumos com talão igual ao consumo selecionado.\n\t\t * \n\t\t * @param {string} talao_id\n\t\t * @param {element} tr_siblings\n\t\t */\n\t\tfunction verificarTalaoIgual(talao_id, tr_siblings) {\n\t\t\t\t\t\t\t\t\t\n\t\t\t$(tr_siblings)\n\t\t\t\t.each(function() {\n\n\t\t\t\t\tvar talao_id_ant\t=\t$(this)\n\t\t\t\t\t\t\t\t\t\t\t\t.find('._remessa-talao-id')\n\t\t\t\t\t\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\n\t\t\t\t\tif (talao_id === talao_id_ant) {\n\t\t\t\t\t\t\n\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t.addClass('selected')\n\t\t\t\t\t\t;\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t})\n\t\t\t;\n\t\t\t\n\t\t}\n\t\t\n\t\t$(document)\n\t\t\t.on('click', '.table-22040 tbody tr, table.estacao tbody tr', function() {\n\t\t\t\t\n\t\t\t\tvar controle_talao\t=\t$('._controle-talao')\n\t\t\t\t\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t\t\t\t\t\t.trim()\n\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\tvar talao_id\t\t=\t$(this)\n\t\t\t\t\t\t\t\t\t\t\t.find('._remessa-talao-id')\n\t\t\t\t\t\t\t\t\t\t\t.val()\n\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t//Só prossegue se for talão detalhado\n\t\t\t\tif (controle_talao === 'A' || talao_id === '') {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\tverificarTalaoIgual( talao_id, $(this).siblings() );\n\n\t\t\t})\n\t\t;\n\t}\n\t\n\t/**\n\t * Pedir confirmação ao atualizar a página.\n\t */\n\tfunction verificarAtualizar() {\n\t\t\t\n//\t\twindow.onbeforeunload = function() { \n//\n//\t\t\tif ( verif_atualizar == true ) {\n//\t\t\t\t\n//\t\t\t\treturn 'Se continuar, todas as alterações NÃO gravadas serão perdidas.';\n//\t\t\t\t\n//\t\t\t}\n//\n//\t\t};\n\t\t\n\t}\n    \n    function getRemessa() {\n        if ( parseInt($('#remessa').val()) > 0 ) {\n            $('#selec-remessa').click();\n        }\n    }\n\t\n\t$(function() {\n\t\t\n\t\tdestruirDataTable();\n\t\tativarDatatable();\n\t\tativarDatatableMenor();\n\t\tlimpar();\n\t\tpesqFamiliaRemessa();\n\t\tfamiliaHiddenParaText();\n\t\teditarQtd();\n\t\teditarQtdTaloes();\n\t\teditarQtdCota();\n\t\tfiltrar();\n\t\tgerarAuto();\n\t\tobjGerarManual.events();\n\t\tgravarRemessaProcessada();\n\t\tmarcarTr();\n\t\tverificarAtualizar();\n        getRemessa();\n\t\t\n\t});\n\t\n})(jQuery);\n"]}