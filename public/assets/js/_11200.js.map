{"version":3,"sources":["_11200.app.js","_11200.factory.gp.js","_11200.factory.operador.js","_11200.factory.talao.js","_11200.factory.filtro.js","_11200.controller.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"_11200.js","sourcesContent":["'use strict';\n\nangular\n\t.module('app', [\n\t\t'vs-repeat', \n        'gc-find',\n\t\t'gc-ajax',\n\t\t'gc-transform',\n\t\t'gc-form',\n\t\t'gc-utils'\n\t])\n;\n     ","angular\n    .module('app')\n    .factory('Gp', Gp);\n    \n\n\tGp.$inject = [\n        '$ajax',\n        '$q',\n        '$rootScope',\n        '$timeout',\n        'gcCollection',\n        'gScope'\n    ];\n\nfunction Gp($ajax, $q, $rootScope, $timeout, gcCollection, gScope) {\n\n    /**\n     * Constructor, with class name\n     */\n    function Gp(data) {\n        if (data) {\n            this.setData(data);\n        }\n\n\t\tgScope.Gp = this; \n        \n        this.DADOS = [];\n        this.SELECTED = {};\n        this.BARRAS       = '';\n        this.OPERACAO_ID  = 7;\n        this.VALOR_EXT    = 1;\n        this.ABORT        = true;\n        this.VERIFICAR_UP = true;\n        this.AUTENTICADO  = false;\n        this.CALLBACK     = null;\n        \n    }\n    \n    \n    Gp.prototype.consultar = function() {\n        \n        var that = this;\n        \n        return $q(function(resolve, reject){\n            $ajax.post('/_22030/api/gp/autenticacao',that)\n                .then(function(response) {\n\n                    that.SELECTED = response;\n                    that.AUTENTICADO  = true;\n                    that.close();\n\n                    that.CALLBACK();\n                    that.CALLBACK = null;\n                    resolve(that.SELECTED);\n                },function(erro){\n                    that.BARRAS = '';\n                    modal.find('input:focusable').first().focus();\n                    \n                    reject(erro);\n                }\n            );        \n        });\n    };\n   \n    Gp.prototype.open = function(callback) {\n        \n        var that = this;\n        if ( isEmpty(this.SELECTED) ) {        \n            this.show(function(){\n                \n                that.CALLBACK = callback;\n                \n                modal.find('input:focusable').first().focus();\n            },function(){\n                that.BARRAS = '';\n            });\n        } else {\n            addConfirme('<h4>Confirmação</h4>',\n                'Deseja sair da sessão do grupo de produção <b>' + that.SELECTED.GP_DESCRICAO + '</b>?',\n                [obtn_sim,obtn_nao],\n                [{ret:1,func:function(){\n                    $rootScope.$apply(function(){\n\n                        that.SELECTED = {};\n                        that.AUTENTICADO = false;\n                    });\n                }}]     \n            );\n        }\n    };\n    \n    \n    Gp.prototype.logoff = function() {\n        \n        var that = this;\n\n        that.SELECTED = {};\n        that.AUTENTICADO = false;\n    };\n    \n    \n\n    var modal = $('#modal-gp');\n    \n    Gp.prototype.show = function(shown,hidden) {\n\n        modal\n            .modal('show')\n        ;                         \n        \n        if ( shown ) {\n            modal\n                .one('shown.bs.modal', function(){\n                    shown();\n                })\n            ;     \n        }\n        \n        if ( hidden ) {\n            modal\n                .one('hidden.bs.modal', function(){\n                    hidden();\n                })\n            ;              \n        }\n    };\n\n    Gp.prototype.close = function(hidden) {\n\n        modal\n            .modal('hide')\n        ;\n        \n        if ( hidden ) {\n            modal\n                .one('hidden.bs.modal', function(){\n                    hidden ? hidden() : '';\n                })\n            ;                      \n        }\n    };\n     \n\n    /**\n     * Return the constructor function\n     */\n    return Gp;\n};","angular\n    .module('app')\n    .factory('Operador', Operador);\n    \n\n\tOperador.$inject = [\n        '$ajax',\n        '$q',\n        '$rootScope',\n        '$timeout',\n        'gcCollection',\n        'gScope'\n    ];\n\nfunction Operador($ajax, $q, $rootScope, $timeout, gcCollection, gScope) {\n\n    /**\n     * Constructor, with class name\n     */\n    function Operador(data) {\n        if (data) {\n            this.setData(data);\n        }\n\n\t\tgScope.Operador = this; \n        \n        this.DADOS = [];\n        this.SELECTED = {};\n        this.BARRAS       = '';\n        this.OPERACAO_ID  = 7;\n        this.VALOR_EXT    = 1;\n        this.ABORT        = true;\n        this.VERIFICAR_UP = true;\n        this.AUTENTICADO  = false;\n        this.CALLBACK     = null;\n        \n    }\n    \n    \n    Operador.prototype.consultar = function() {\n        \n        var that = this;\n        \n        return $q(function(resolve, reject){\n            $ajax.post('/_22050/autenticacao',that)\n                .then(function(response) {\n\n                    that.SELECTED = response[0];\n                    that.AUTENTICADO  = true;\n                    that.close();\n                    \n                    that.CALLBACK(response);\n                    that.CALLBACK = null;\n                    \n                    resolve(that.SELECTED);\n                },function(erro){\n                    that.BARRAS = '';\n                    modal.find('input:focusable').first().focus();\n                    \n                    reject(erro);\n                }\n            );        \n        });\n    };\n   \n    Operador.prototype.open = function(callback) {\n        \n        var that = this;\n        if ( isEmpty(this.SELECTED) ) {        \n            this.show(function(){\n                \n                that.CALLBACK = callback;\n                \n                \n                modal.find('input:focusable').first().focus();\n            },function(){\n                that.BARRAS = '';\n            });\n        } else {\n            addConfirme('<h4>Confirmação</h4>',\n                'Deseja sair da sessão do operador <b>' + that.SELECTED.OPERADOR_NOME + '</b>?',\n                [obtn_sim,obtn_nao],\n                [{ret:1,func:function(){\n                    $rootScope.$apply(function(){\n\n                        that.SELECTED = {};\n                        that.AUTENTICADO = false;\n                    });\n                }}]     \n            );\n        }\n    };\n    \n    Operador.prototype.logoff = function() {\n        \n        var that = this;\n\n        that.SELECTED = {};\n        that.AUTENTICADO = false;\n    };\n        \n\n    var modal = $('#modal-operador');\n    \n    Operador.prototype.show = function(shown,hidden) {\n\n        modal\n            .modal('show')\n        ;                         \n        \n        if ( shown ) {\n            modal\n                .one('shown.bs.modal', function(){\n                    shown();\n                })\n            ;     \n        }\n        \n        if ( hidden ) {\n            modal\n                .one('hidden.bs.modal', function(){\n                    hidden();\n                })\n            ;              \n        }\n    };\n\n    Operador.prototype.close = function(hidden) {\n\n        modal\n            .modal('hide')\n        ;\n        \n        if ( hidden ) {\n            modal\n                .one('hidden.bs.modal', function(){\n                    hidden ? hidden() : '';\n                })\n            ;                      \n        }\n    };\n     \n\n    /**\n     * Return the constructor function\n     */\n    return Operador;\n};","angular\n    .module('app')\n    .factory('Talao', Talao);\n    \n\n\tTalao.$inject = [\n        '$ajax',\n        '$q',\n        '$rootScope',\n        '$timeout',\n        'gcCollection',\n        'gcObject',\n        'gScope'\n    ];\n\nfunction Talao($ajax, $q, $rootScope, $timeout, gcCollection, gcObject, gScope) {\n\n    /**\n     * Constructor, with class name\n     */\n    function Talao(data) {\n        if (data) {\n            this.setData(data);\n        }\n\n\t\tgScope.Talao = this; \n        \n        \n        this.CONSULTA_FILTRO = '';\n        this.DADOS = [];\n        this.FILTERED = [];\n        this.SELECTED = {};\n        this.TALOES_LIBERAR = [];\n        this.TALOES_LIBERAR_LISTA = [];\n        this.BARRAS = '';\n    }\n    \n    var data = {};\n    \n    \n    Talao.prototype.consultar = function(data) {\n\n        var that = this;\n        \n        return $q(function(resolve,reject){\n        \n            $ajax.post('/_22200/api/talao',data).then(function(response){\n\n                resolve(response);\n            },function(erro){\n                reject(erro);\n            });\n        });\n    };    \n    \n    Talao.prototype.consultarBarras = function() {\n        \n        var that = this;\n                \n        return $q(function(resolve,reject){\n            that.consultar({\n                REMESSA_ID       : that.BARRAS.substring(0,6),\n                REMESSA_TALAO_ID : that.BARRAS.substring(6,10)\n            }).then(function(response){\n                \n                if ( response.length == 1 ) {\n                    \n                    gcCollection.merge(that.TALOES_LIBERAR, response, 'TALAO_ID',true);                     \n                    if ( response[0].STATUS == 2 ) {\n                        gcCollection.merge(that.TALOES_LIBERAR_LISTA, response, 'TALAO_ID',true);                     \n                    }\n                    \n                } else {\n                    showErro('Talão inválido.');\n                }\n                \n                that.BARRAS = '';\n                resolve(response);\n            },function(erro){\n                that.BARRAS = '';\n                reject(erro);\n            });\n        });\n    };\n    \n    Talao.prototype.liberar = function() {\n        \n        var that = this;\n        \n        gScope.Operador.open(function(){\n            gScope.Gp.open(function(){\n\n                var data = {};\n\n                data.OPERADOR_ID    = gScope.Operador.SELECTED.OPERADOR_ID;\n                data.GP_ID          = gScope.Gp.SELECTED.GP_ID;\n                data.TALOES_LIBERAR = that.TALOES_LIBERAR_LISTA;\n\n                $ajax.post('/_22200/api/talao/liberar',data).then(function(){\n                    that.TALOES_LIBERAR = [];\n                    that.TALOES_LIBERAR_LISTA = [];\n                });\n                \n                gScope.Operador.logoff();\n                gScope.Gp.logoff();\n            });  \n        });\n        \n    };\n    \n    Talao.prototype.liberarLimpar = function() {\n        this.TALOES_LIBERAR = [];\n        this.TALOES_LIBERAR_LISTA = [];\n    };\n   \n    \n    Talao.prototype.mergeComposicao = function(response) {\n         \n  \n        sanitizeJson(response.TALAO);\n        \n        var taloes = [];\n\n        if ( response.CONSUMOS != undefined ) {\n            sanitizeJson(response.DETALHES);\n            sanitizeJson(response.CONSUMOS);\n            sanitizeJson(response.HISTORICOS);   \n            sanitizeJson(response.ALOCADOS);\n            sanitizeJson(response.COMPONENTES);\n\n            gcCollection.bind(response.CONSUMOS, response.ALOCADOS, 'CONSUMO_ID', 'ALOCACOES');   \n            gcObject.bind(response.TALAO, response.DETALHES, ['REMESSA_ID','REMESSA_TALAO_ID'], 'DETALHES');\n            gcObject.bind(response.TALAO, response.CONSUMOS, 'TALAO_ID', 'CONSUMOS');\n            gcObject.bind(response.TALAO, response.COMPONENTES, 'TALAO_ID', 'COMPONENTES');\n            gcObject.bind(response.TALAO, response.HISTORICOS, 'PROGRAMACAO_ID', 'HISTORICOS');     \n\n            for ( var i in taloes ) {\n\n                var talao = taloes[i];\n\n                talao.CONSUMO_STATUS = '1';\n                talao.ESTOQUE_STATUS = '1';\n\n\n                for ( var y in talao.CONSUMOS ) {\n\n                    var consumo = talao.CONSUMOS[y];\n\n\n                    if ( talao.ESTOQUE_STATUS == '1' && consumo.ESTOQUE_STATUS == 0 ) {\n                        talao.ESTOQUE_STATUS = '0';\n                    }  \n\n                    talao.ULTIMO_TALAO = true;\n                    var i = 0;\n                    for ( var y in talao.DETALHES ) {\n\n\n                        var detalhe = talao.DETALHES[y];\n\n                        if ( detalhe.TALAO_DETALHE_STATUS < 2 ) {\n                            i++;    \n                        }\n\n                        if ( i > 1 ) {\n                            talao.ULTIMO_TALAO = false;\n                            break;\n                        }\n                    }                \n                }\n            }        \n        }\n        \n        \n        if ( gScope.Filtro.TAB_ACTIVE == 'PRODUZIDO' ) {\n            taloes = gScope.TalaoProduzido.DADOS;\n        } else\n        if ( gScope.Filtro.TAB_ACTIVE == 'PRODUZIR' ) {\n            taloes = gScope.TalaoProduzir.DADOS;\n        }         \n        \n        gcCollection.merge(taloes, [response.TALAO], 'TALAO_ID',true);  \n                \n        \n    };    \n\n\n    Talao.prototype.pick = function(item,action) {\n        \n        var that = this;\n\n        if ( item != undefined ) {\n\n            if ( item.TALAO_ID != this.SELECTED.TALAO_ID ) {\n                gScope.TalaoDetalhe.SELECTED = {};\n                gScope.TalaoDetalhe.SELECTEDS = [];\n                gScope.TalaoDetalhe.SELECTEDS_PRODUZIR = [];\n            }\n            \n            this.SELECTED = item;\n            \n            gScope.Filtro.TALAO_ID = item.TALAO_ID;\n            gScope.Filtro.uriHistory();                        \n\n            if ( gScope.Filtro.TAB_ACTIVE == 'PRODUZIDO' ) {\n                that.consultarComposicao();\n            }\n\n            if ( action == 'modal-open' ) {\n\n                \n                that.show(null,function(){\n\n                    $('[data-talao-id=\"' + gScope.Filtro.TALAO_ID + '\"]:focusable').focus();\n\n                    delete gScope.Filtro.TALAO_ID;\n                    gScope.Filtro.uriHistory();      \n                });               \n                \n            }\n        }\n\n    };    \n\n\n \n    \n    Talao.prototype.confirm = function () {\n        var that = this;\n\n        var dados = {\n            FILTRO: gScope.ConsumoBaixarFiltro,\n            DADOS: {\n                ITENS : that.ITENS_BAIXAR,\n                PESO : that.PESO\n            }\n        };\n        \n        \n        that.enableButton(false);\n        \n        $ajax.post('/_22160/api/consumo-baixar/post',dados,{complete: function(){\n                \n            that.enableButton(true);\n            \n        }}).then(function(response){\n        \n            postprint(response.ETIQUETAS);        \n        \n            gScope.ConsumoBaixarFiltro.merge(response.DATA_RETURN);\n            that.close();\n            \n        });        \n    };  \n\n    Talao.prototype.irPara = function (direcao) {\n        \n        var that = this;\n        var taloes = [];\n        \n        switch (gScope.Filtro.TAB_ACTIVE) {\n            case 'PRODUZIR':\n                taloes = gScope.TalaoProduzir.FILTERED;\n                break;\n            case 'PRODUZIDO':\n                taloes = gScope.TalaoProduzido.FILTERED;\n                break;\n                \n        }\n        \n        switch (direcao) {\n            case '|<':\n                that.pick(taloes[0]);\n                break;\n                \n            case '<':\n                \n                var idx = taloes.indexOf(that.SELECTED);\n                if ( taloes[idx-1] != undefined ) {\n                    that.pick(taloes[idx-1]);\n                }\n                break;\n                \n            case '>':\n\n                var idx = taloes.indexOf(that.SELECTED);\n                if ( taloes[idx+1] != undefined ) {\n                    that.pick(taloes[idx+1]);\n                }\n                break;\n                \n            case '>|':\n                that.pick(taloes[taloes.length-1]);\n                break;\n        }\n    };  \n\n    var modal = $('#modal-talao');\n    \n    Talao.prototype.show = function(shown,hidden) {\n\n        modal\n            .modal('show')\n        ;                         \n        \n        if ( shown ) {\n            modal\n                .one('shown.bs.modal', function(){\n                    shown();\n                })\n            ;     \n        }\n        \n        if ( hidden ) {\n            modal\n                .one('hidden.bs.modal', function(){\n                    hidden();\n                })\n            ;              \n        }\n    };\n\n    Talao.prototype.close = function(hidden) {\n\n        modal\n            .modal('hide')\n        ;\n        \n        if ( hidden ) {\n            modal\n                .one('hidden.bs.modal', function(){\n                    hidden ? hidden() : '';\n                })\n            ;                      \n        }\n    };\n    \n    Talao.prototype.inputKeydown = function($event) {\n         \n        if ( this.PESO_AUTOMATICO ) {\n            if ( isNumber($event.key) || $event.key == 'Backspace' || $event.key == 'Delete' ) {\n                $event.preventDefault();\n            }\n        }\n    };\n    \n\n\n    /**\n     * Return the constructor function\n     */\n    return Talao;\n};","angular\n    .module('app')\n    .factory('Filtro', Filtro);\n    \n\n\tFiltro.$inject = [\n        '$ajax',\n        '$q',\n        '$httpParamSerializer',\n        '$rootScope',\n        '$timeout',\n        'gcCollection',\n        'gScope'\n    ];\n\nfunction Filtro($ajax, $q, $httpParamSerializer, $rootScope, $timeout, gcCollection, gScope) {\n\n    /**\n     * Constructor, with class name\n     */\n    function Filtro(data) {\n        if (data) {\n            this.setData(data);\n        }\n\n\t\tgScope.Filtro = this; \n        \n        this.FAMILIA_ID = 3;\n        this.PRODUTO_ID = '> 0';\n        this.STATUS     = '2';\n        this.TURNO      = '';\n        this.DATA_1     = moment('2017.11.30').toDate();//new Date(Clock.DATETIME_SERVER);\n        this.DATA_2     = moment('2017.11.30').toDate();//new Date(Clock.DATETIME_SERVER);\n        this.DATA_TODOS = false;\n    }\n    \n    Filtro.prototype.consultar = function() {\n        \n        var that = this;\n\n        var dados = {};\n\n        angular.copy(that, dados);\n\n        if ( !that.DATA_TODOS ) {\n            var data = \"BETWEEN '\" + moment(dados.DATA_1).format('DD.MM.YYYY') + \"' AND '\" + moment(dados.DATA_2).format('DD.MM.YYYY') + \"'\";\n       \n            switch (dados.STATUS) {\n                case '2':\n                    dados.DATA_PRODUCAO = data;\n                    break;\n                case '3':\n                    dados.DATA_LIBERACAO = data;\n                    break;\n\n                default:\n                    dados.DATA_REMESSA = data;\n\n                    break;\n            }\n        }          \n        delete dados.DATA_1;\n        delete dados.DATA_2;\n        \n        if ( dados.STATUS.trim() != '' ) {\n            dados.STATUS = '= ' + dados.STATUS;\n        } else {\n            delete dados.STATUS;\n        }\n        \n        if ( dados.TURNO.trim() != '' ) {\n            dados.TURNO = \"= '\" + dados.TURNO + \"'\";\n        } else {\n            delete dados.TURNO;\n        }\n        \n\n        gScope.Talao.consultar(dados).then(function(response){\n\n            gcCollection.merge(gScope.Talao.DADOS, response, 'TALAO_ID');\n        });\n    };\n   \n    \n\n    /**\n     * Return the constructor function\n     */\n    return Filtro;\n};","angular\n    .module('app')\n    .value('gScope', {})\n    .controller('Ctrl', Ctrl);\n    \n    \n\tCtrl.$inject = [\n        '$scope',\n        '$timeout',\n        'gScope',\n        '$consulta',\n        'Filtro',\n        'Talao',\n        'Gp',\n        'Operador'\n    ];\n\n\tfunction Ctrl( \n        $scope, \n        $timeout, \n        gScope, \n        $consulta,\n        Filtro,\n        Talao,\n        Gp,\n        Operador\n    ) {\n\n\t\tvar vm = this;\n        \n        vm.Clock      = Clock;\n//        vm.Consulta   = new $consulta();\n//        \n//        vm.ConsultaEstabelecimento                             = vm.Consulta.getNew(true);\n//        vm.ConsultaEstabelecimento.componente                  = '.consulta-estabelecimento';\n//        vm.ConsultaEstabelecimento.model                       = 'vm.ConsultaEstabelecimento';\n//        vm.ConsultaEstabelecimento.option.label_descricao      = 'Estabelecimento:';\n//        vm.ConsultaEstabelecimento.option.obj_consulta         = '/_11020/api/estabelecimento';\n//        vm.ConsultaEstabelecimento.option.tamanho_input        = 'input-maior';\n//        vm.ConsultaEstabelecimento.option.tamanho_tabela       = 427;\n//        vm.ConsultaEstabelecimento.option.campos_tabela        = [['ESTABELECIMENTO_ID', 'ID'],['ESTABELECIMENTO_NOMEFANTASIA','NOME FANTASIA']];\n//        vm.ConsultaEstabelecimento.option.obj_ret              = ['ESTABELECIMENTO_ID', 'ESTABELECIMENTO_NOMEFANTASIA'];\n//        vm.ConsultaEstabelecimento.compile();\n//        gScope.ConsultaEstabelecimento = vm.ConsultaEstabelecimento;\n//        \n//        vm.ConsultaGp                             = vm.Consulta.getNew(true);\n//        vm.ConsultaGp.componente                  = '.consulta-gp';\n//        vm.ConsultaGp.model                       = 'vm.ConsultaGp';\n//        vm.ConsultaGp.option.label_descricao      = 'GP:';\n//        vm.ConsultaGp.option.obj_consulta         = '/_22030/api/gp';\n//        vm.ConsultaGp.option.tamanho_input        = 'input-maior';\n//        vm.ConsultaGp.option.tamanho_tabela       = 427;\n//        vm.ConsultaGp.option.campos_tabela        = [['GP_ID', 'ID'],['GP_DESCRICAO','GRUPO DE PRODUÇÃO']];\n//        vm.ConsultaGp.option.obj_ret              = ['GP_ID', 'GP_DESCRICAO'];\n//        vm.ConsultaGp.require                     = vm.ConsultaEstabelecimento;\n//        vm.ConsultaGp.vincular();\n//        vm.ConsultaGp.compile();\n//        gScope.ConsultaGp = vm.ConsultaGp;\n//        \n//        vm.ConsultaUp                             = vm.Consulta.getNew(true);\n//        vm.ConsultaUp.componente                  = '.consulta-up';\n//        vm.ConsultaUp.model                       = 'vm.ConsultaUp';\n//        vm.ConsultaUp.option.label_descricao      = 'UP:';\n//        vm.ConsultaUp.option.obj_consulta         = '/_22030/api/up';\n//        vm.ConsultaUp.option.tamanho_input        = 'input-maior';\n//        vm.ConsultaUp.option.tamanho_tabela       = 427;\n//        vm.ConsultaUp.option.campos_tabela        = [['UP_ID', 'ID'],['UP_DESCRICAO','GRUPO DE PRODUÇÃO']];\n//        vm.ConsultaUp.option.obj_ret              = ['UP_ID', 'UP_DESCRICAO'];\n//        vm.ConsultaUp.require                     = vm.ConsultaGp;\n//        vm.ConsultaUp.vincular();\n//        vm.ConsultaUp.setRequireRequest({GP_ID: [vm.ConsultaGp, 'GP_ID']});\n//        vm.ConsultaUp.compile();\n//        gScope.ConsultaUp = vm.ConsultaUp;\n//        \n//        vm.ConsultaEstacao                             = vm.Consulta.getNew(true);\n//        vm.ConsultaEstacao.componente                  = '.consulta-estacao';\n//        vm.ConsultaEstacao.model                       = 'vm.ConsultaEstacao';\n//        vm.ConsultaEstacao.option.label_descricao      = 'Estação:';\n//        vm.ConsultaEstacao.option.obj_consulta         = '/_22030/api/estacao';\n//        vm.ConsultaEstacao.option.tamanho_input        = 'input-maior';\n//        vm.ConsultaEstacao.option.tamanho_tabela       = 427;\n//        vm.ConsultaEstacao.option.campos_tabela        = [['ESTACAO', 'ID'],['ESTACAO_DESCRICAO','GRUPO DE PRODUÇÃO']];\n//        vm.ConsultaEstacao.option.obj_ret              = ['ESTACAO', 'ESTACAO_DESCRICAO'];\n//        vm.ConsultaEstacao.require                     = vm.ConsultaUp;\n//        vm.ConsultaEstacao.vincular();\n//        vm.ConsultaEstacao.setRequireRequest({UP_ID: [vm.ConsultaUp, 'UP_ID']});\n//        vm.ConsultaEstacao.compile();\n//        gScope.ConsultaEstacao = vm.ConsultaEstacao;\n        \n\t\tvm.Filtro         = new Filtro();\n\t\tvm.Talao          = new Talao();\n\t\tvm.Operador       = new Operador();\n\t\tvm.Gp             = new Gp();\n        \n\n//        $scope.$watch('vm.ConsultaEstacao.ESTACAO', function (newValue, oldValue, scope) {\n//            if ( newValue == undefined || newValue <= 0 ) {\n//                vm.SSE.close();\n//                \n//                vm.TalaoProduzir.DADOS = [];\n//                vm.TalaoProduzido.DADOS = [];\n//            }\n//        }, true);\n//\n//        $scope.$watch('vm.Filtro.TAB_ACTIVE', function (newValue, oldValue, scope) {\n//            \n//            if ( newValue == 'PRODUZIDO' ) {\n//                vm.Filtro.DATA_TODOS = false;\n//                vm.Filtro.DATA_TODOS_DISABLED = true;\n//                vm.Filtro.consultar();\n////                if ( $('#filtrar-toggle').hasClass('collapsed') ) {\n////                    $('#filtrar-toggle').click();\n////                }\n//            } else\n//            if ( newValue == 'PRODUZIR' ) {\n//                vm.Filtro.DATA_TODOS = true;\n//                vm.Filtro.DATA_TODOS_DISABLED = false;\n//                vm.Filtro.consultar();\n//                \n////                if ( !$('#filtrar-toggle').hasClass('collapsed') ) {\n////                    $('#filtrar-toggle').click();\n////                }                \n//            } \n//\n//        }, true);\n\n\t}   \n  "]}