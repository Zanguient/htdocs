{"version":3,"sources":["_13030.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"_13030.js","sourcesContent":["/**\r\n * Script com funções de:\r\n * - Escolher produtos para montar orçamento\r\n * */\r\n(function($) {\r\n    \r\n    function showCotaItem(param) {\r\n        var param = param || {};\r\n        \r\n        /**\r\n         * \r\n         * @returns {undefined}Controla a exibição da tabela de cota extra\r\n         */\r\n        function showHicota_totalizadeTable() {\r\n            $('tbody.t-body').each(function () {\r\n                var panel = $(this).parents('div.cota-extra');\r\n                var itens = $(this).find('td');\r\n\r\n                (itens.length > 0) ? panel.fadeIn('low') : panel.fadeOut('low');\r\n            });\r\n        }        \r\n\r\n        /**\r\n         * Controla a exibição da tabela de redução de cota\r\n         */\r\n        function showHideTableOutros() {\r\n            $('tbody.outros').each(function () {\r\n                var panel = $(this).parents('div.cota-outros');\r\n                var itens = $(this).find('td');\r\n\r\n                (itens.length > 0) ? panel.fadeIn('slow') : panel.fadeOut('slow');\r\n            });\r\n        } \r\n\r\n        /**\r\n         * Controla a exibição da tabela de itens\r\n         */\r\n        function showHideTableItens() {\r\n            $('tbody.itens').each(function () {\r\n                var panel = $(this).parents('div.cota-itens');\r\n                var itens = $(this).find('td');\r\n\r\n                (itens.length > 0) ? panel.fadeIn('slow') : panel.fadeOut('slow');\r\n            });\r\n        }         \r\n\r\n        /**\r\n         * \r\n         * @returns {undefined}Ativa a opção para copiar o atritubuto copy para o clipboard\r\n         */\r\n        function copyLink() {\r\n\r\n            $('.btn-copy')\r\n                .click(\r\n                    function() {\r\n                        //TODO\r\n                    }\r\n                )\r\n            ;\r\n        }\r\n\r\n        /**\r\n         * Realiza a chamada ajax\r\n         */\r\n        function tratarDados() {        \r\n            \r\n            function showHideTable() {\r\n                $('tbody.t-body').each(function () {\r\n                    var panel = $(this).parents('div.cota-extra');\r\n                    var itens = $(this).find('td');\r\n\r\n                    (itens.length > 0) ? panel.fadeIn('low') : panel.fadeOut('low');\r\n                });\r\n            }       \r\n            \r\n            function showHideTableOutros() {\r\n                $('tbody.outros').each(function () {\r\n                    var panel = $(this).parents('div.cota-outros');\r\n                    var itens = $(this).find('td');\r\n\r\n                    (itens.length > 0) ? panel.fadeIn('slow') : panel.fadeOut('slow');\r\n                });\r\n            }             \r\n\r\n            function showHideTableItens() {\r\n                $('tbody.itens').each(function () {\r\n                    var panel = $(this).parents('div.cota-itens');\r\n                    var itens = $(this).find('td');\r\n\r\n                    (itens.length > 0) ? panel.fadeIn('slow') : panel.fadeOut('slow');\r\n                });\r\n            } \r\n\r\n            function success(data) {\t\t\t\t\t\t\r\n                if(data) {\r\n                    \r\n                    $('#dre-historico').attr('data-tabela-id',param.dados.id);\r\n                    \r\n                    $('#cota-modal .modal-body').html(data);\r\n                    $('#cota-modal').modal('show');\r\n                    \r\n//                    $('div.modal-body').html(data);\r\n//                    param.selector.popUp();\r\n                    bootstrapInit();\r\n//                    copyLink();\r\n                    showHideTable();\r\n                    showHideTableOutros();\r\n                    showHideTableItens();\r\n//                    escondevoltar();\r\n                    $('#cota-modal').trigger('resize');\r\n                }\r\n            }\r\n\r\n            execAjax1('POST','/_13030/show',param.dados,success);\r\n        } \r\n        \r\n        tratarDados();\r\n    }    \r\n    \r\n    function index(){\r\n\r\n        function dre() {\r\n\r\n            var param = {};\r\n            var selector;\r\n            var table;\r\n\r\n            /**\r\n             * Carrega e configura tabela\r\n             * @returns {void}\r\n             */\r\n            function dataTable1() {\r\n\r\n                table = $('div.dre table.table');\r\n//                $(table)\r\n//                    .DataTable( \r\n//                        {\r\n//                            \"scrollY\"  : '60vh', // Altura da tabela \r\n//                            \"scrollX\"  : true  , // Habitila a rolagem horizontal\r\n//                            \"bSort\"    : false , // Desativa a ordenação\r\n//                            \"bFilter\"  : false , // Desativa o filtro\r\n//                            \"bInfo\"    : false , // Desativa as informações de registro\r\n//                            \"bPaginate\": false   // Desativa a paginação\r\n//                        } \r\n//                    )\r\n//                ;\r\n\r\n                popUpOpen();  \r\n            }\r\n\r\n            /**\r\n             * Exibe popUp\r\n             * @returns {void}\r\n             */\r\n            function popUpOpen() {\r\n\r\n                $('.popup-show')\r\n                    .click(\r\n                        function(e){\r\n                            e.stopPropagation();\r\n                            e.preventDefault();\r\n\r\n\r\n                            var args = {\r\n                                ajuste_inventario : $(this).data('ajuste-inventario'),\r\n                                ccusto            : $(this).data('ccusto'     ),\r\n                                mes               : $(this).data('mes'        ),\r\n                                ano               : $(this).data('ano'        )\r\n                            };\r\n\r\n                            if ( args.ccusto ) {\r\n\r\n                                execAjax1('POST','/_13030/ggf',args,\r\n                                    function(data) {\r\n\r\n                                        $('#ggf-modal .modal-body').html(data);\r\n                                        $('#ggf-modal').modal('show');\r\n                                        \r\n                                        $('#ggf-modal').trigger('resize');\r\n                                        bootstrapInit();\r\n\r\n\r\n                                        $('button[data-item=\"ggf\"]').click(function(){\r\n\r\n                                            var param = {\r\n                                                ajuste_inventario : args.ajuste_inventario,\r\n                                                ccusto      : $(this).data('ccusto'     ),\r\n                                                mes         : $(this).data('mes'        ),\r\n                                                ano         : $(this).data('ano'        ),\r\n                                                familia_id  : $(this).data('familia_id' )\r\n                                            };\r\n\r\n                                            execAjax1('POST','/_13030/ggfDetalhe',param,\r\n                                                function(data) {\r\n\r\n                                                    $('#ggf-modal-detalhe .modal-body').html(data);\r\n                                                    $('#ggf-modal-detalhe').modal('show');\r\n//                                                    $('#ggf-modal-detalhe').find('.lista-obj').DataTable(table_default);  \r\n                                                    $('#ggf-modal-detalhe').trigger('resize');\r\n                                                    bootstrapInit();\r\n\r\n                                                }\r\n                                            );                \r\n                                        });\r\n\r\n                                    }\r\n                                );  \r\n                            } else {\r\n\r\n                                var that = $(this);\r\n\r\n                                param['show'] = $(this).attr('id');    \r\n                                selector = $(this);\r\n                                showCotaItem({\r\n                                    selector : selector,\r\n                                    dados    : {\r\n                                        id      : param.show,\r\n                                        ref     : 'dre'\r\n                                    }\r\n                                });\r\n                            }\r\n                        }   \r\n                    )\r\n                ;\r\n\r\n            }\r\n\r\n            /**\r\n             * Exibe o detalhamento do item se a url requisitar\r\n             * @returns {void}\r\n             */\r\n            function showItem() {\r\n\r\n                param  = paramSplit(urlhash,'-');\r\n\r\n                if ( param.show ) {\r\n                    selector = $('#'+param.show);\r\n                    tratarDados();\r\n                }\r\n\r\n                if ( param.id ) {\r\n                    $('#'+param.id).focus();\r\n                }\r\n            }        \r\n\r\n            function printTable() {\r\n                $('.btn-print')\r\n                    .click( \r\n                        function(){\r\n                            $('.btn-print').button('loading');\r\n//                            $(table).dataTable().fnDestroy();\r\n                            var dados = {\r\n                                'table': $('div.dre').html()\r\n                            };    \r\n\r\n                            function success(data) {\t\t\t\t\t\t\r\n                                if(data) {\r\n                                    printPdf(data);\r\n                                }\r\n                            }\r\n\r\n                            function complete() {\r\n                                dataTable1();\r\n                                $('.btn-print').button('reset');\r\n                            }\r\n\r\n                            execAjax1('POST','/_13030/dre/pdf',dados,success,null,complete);\r\n                        }\r\n                    )\r\n                ;\r\n            }\r\n\r\n            function mesesToggle() {\r\n\r\n                $('#meses_toggle').change(function() {\r\n                    if($(this).is(\":checked\")) {\r\n                        $('.meses-transition').removeClass('meses-ocultar');\r\n                    } else {\r\n                        $('.meses-transition').addClass('meses-ocultar');\r\n\r\n                    }   \r\n//                    $('.dre').trigger('resize');\r\n                });\r\n            }\r\n\r\n            function filter() {\r\n\r\n                var dados = {};  \r\n\r\n                function ajax() {\r\n\r\n                    $('.btn-dre-filtrar').button('loading');\r\n\r\n                    function success(data) {\r\n                        if(data) {\r\n                            $('div.dre').html(data);\r\n                            //$('div.print').html(data);\r\n                            dataTable1();\r\n\r\n                            if($('#meses_toggle').is(\":checked\")) {\r\n                                $('.meses-transition').removeClass('meses-ocultar');\r\n                            } else {\r\n                                $('.meses-transition').addClass('meses-ocultar');\r\n                            }   \r\n//                            $('.dre').trigger('resize');  \r\n                        }\r\n                    }\r\n\r\n                    function complete() {\r\n                        $('.btn-dre-filtrar').button('reset');                        \r\n                    }\r\n\r\n                    execAjax1('POST','/_13030/dre/filter',dados,success,null,complete);             \r\n                }\r\n\r\n                function filedsLoad() {\r\n                    dados = {\r\n                        'filtro'        : $('input[name=filtro]').val() === '' ? null : $('input[name=filtro]').val(),\r\n                        'mes_1'         : $('select[name=mes_1]').val(),\r\n                        'mes_2'         : $('select[name=mes_2]').val(), \r\n                        'ano_1'         : $('select[name=ano_1]').val(),\r\n                        'cota_zerada'   : $('input[name=cota_zerada]').is(\":checked\"),\r\n                        'cota_valida'   : $('input[name=cota_valida]').is(\":checked\"),\r\n                        'cota_totaliza' : $('input[name=cota_totaliza]').is(\":checked\"),\r\n                        cota_faturamento : $('#dre-modal .filtro-faturamento').is(\":checked\"), \r\n                        cota_ggf         : $('#dre-modal .filtro-ggf').is(\":checked\"),\r\n                        cota_ajuste_inventario : $('#dre-modal .filtro-ajuste_inventario').is(\":checked\")                        \r\n                    };  \r\n\r\n                    ajax();\r\n                }\r\n\r\n                function filterStart() {\r\n                    $('.btn-dre-filtrar').click(   function(){ filedsLoad();});\r\n                    $('.btn-dre-filtro' ).keyEnter(function(){ filedsLoad();});        \r\n                }\r\n                filterStart();\r\n            }\r\n\r\n            function modalShow() {\r\n                \r\n                $('button[data-action=\"show-dre\"]').click(function(){\r\n    //\r\n    //            execAjax1('POST','/_13030/ggf',args,\r\n    //                function(data) {\r\n    //\r\n    //                    $('#ggf-modal .modal-body').html(data);\r\n                        $('#dre-modal').modal('show');\r\n    //                    $('#ggf-modal ').find('.lista-obj').DataTable(table_default);  \r\n    //                    $('#ggf-modal').trigger('resize');\r\n    //                    bootstrapInit();\r\n    //\r\n    //\r\n    //                    $('button[data-item=\"ggf\"]').click(function(){\r\n    //\r\n    //                        var param = {\r\n    //                            ccusto      : $(this).data('ccusto'     ),\r\n    //                            mes         : $(this).data('mes'        ),\r\n    //                            ano         : $(this).data('ano'        ),\r\n    //                            familia_id  : $(this).data('familia_id' )\r\n    //                        };\r\n    //\r\n    //                        execAjax1('POST','/_13030/ggfDetalhe',param,\r\n    //                            function(data) {\r\n    //\r\n    //                                $('#ggf-modal-detalhe .modal-body').html(data);\r\n    //                                $('#ggf-modal-detalhe').modal('show');\r\n    //                                $('#ggf-modal-detalhe').find('.lista-obj').DataTable(table_default);  \r\n    //                                $('#ggf-modal-detalhe').trigger('resize');\r\n    //                                bootstrapInit();\r\n    //\r\n    //                            }\r\n    //                        );                \r\n    //                    });\r\n    //\r\n    //                }\r\n    //            ); \r\n                });\r\n            }\r\n            \r\n            $(function() {\r\n                filter();\r\n                dataTable1();\r\n                printTable();\r\n                mesesToggle();\r\n                showItem();\r\n                modalShow();\r\n            });\r\n        }\r\n        dre();\r\n\r\n        function ggf() {\r\n            \r\n            function dataTableGgf() {\r\n//                $('#ggf-modal-detalhe').find('.lista-obj').DataTable(table_default);  \r\n            }    \r\n\r\n            $('button[data-item=\"ggf\"]').click(function(){\r\n                \r\n                var param = {\r\n                    ccusto      : $(this).data('ccusto'     ),\r\n                    mes         : $(this).data('mes'        ),\r\n                    ano         : $(this).data('ano'        ),\r\n                    familia_id  : $(this).data('familia_id' )\r\n                };\r\n                \r\n                execAjax1('POST','/_13030/ggfDetalhe',param,\r\n                    function(data) {\r\n                        \r\n                        $('#ggf-modal-detalhe .modal-body').html(data);\r\n                        bootstrapInit();\r\n                        \r\n                        $('#ggf-modal-detalhe').modal('show');\r\n                        \r\n                        dataTableGgf();\r\n                        $('#ggf-modal-detalhe').trigger('resize');\r\n                    }\r\n                );                \r\n            });\r\n        }\r\n        ggf();  \r\n            \r\n        function popUp() {\r\n            /**\r\n             * Abre o popup\r\n             */\r\n            function popUpOpen() {\r\n\r\n                $('.popup-show')\r\n                    .click(\r\n                        function(){\r\n                            showCotaItem({\r\n                                selector : $(this),\r\n                                dados    : {\r\n                                    'id': $(this).attr('id'),\r\n                                    'ref': 'index'\r\n                                }\r\n                            });                            \r\n                        }   \r\n                    )\r\n                ;\r\n                \r\n            }\r\n            popUpOpen();\r\n        }\r\n        \r\n        /**\r\n         * Filtro Accordion \r\n         */\r\n        function filtrar() {\r\n\r\n            //Efetua o filtro via ajax\r\n            function filtroAccordion(dados) {\r\n\r\n                $('.btn-cotas-filtrar').button('loading');\r\n                \r\n                function success(data) {\r\n\r\n                    if(data) {\r\n                        $('.Area-Acordion').html(data);\r\n                        popUp();\r\n                        ggf();\r\n                        bootstrapInit();\r\n                    }else{\r\n                       $('.Area-Acordion').empty();\r\n                    }\r\n                }           \r\n                \r\n                function complete() {\r\n                    $('.btn-cotas-filtrar').button('reset');                      \r\n                }\r\n                execAjax1('POST',pathname+'/listar',dados,success,null,complete);\r\n            } \r\n            \r\n            function filedsLoad() {\r\n            \r\n                var filtro          = $('.btn-cotas-filtro').val();\r\n                var mes_inicial\t\t= $('.filtro-mes-inicial').val();\r\n                var ano_inicial\t\t= $('.filtro-ano-inicial').val();\r\n                var mes_final\t\t= $('.filtro-mes-final').val();\r\n                var ano_final\t\t= $('.filtro-ano-final').val();\r\n                var data_inicial  \t= new Date(Date.parse('00:00:00 '+ano_inicial+'-'+mes_inicial+'-01'));\r\n                var data_final   \t= new Date(Date.parse('00:00:00 '+ano_final+'-'+mes_final+'-01'));\r\n                var cota_zerada \t= $('.filtro-cota-zerada').is(\":checked\");\r\n                var cota_valida  \t= $('.filtro-cota-valida').is(\":checked\"); \r\n                var cota_totaliza  \t= $('.filtro-totaliza').is(\":checked\"); \r\n                var cota_faturamento  \t= $('#programacao-filtro .filtro-faturamento').is(\":checked\"); \r\n                var cota_ggf          \t= $('#programacao-filtro .filtro-ggf').is(\":checked\"); \r\n                var cota_ajuste_inventario = $('#programacao-filtro .filtro-ajuste_inventario').is(\":checked\"); \r\n                \r\n                var dados = {\r\n                    'filtro'\t\t: filtro,\r\n                    'mes_inicial'\t: mes_inicial,\r\n                    'ano_inicial'\t: ano_inicial,\r\n                    'mes_final'\t\t: mes_final,\r\n                    'ano_final'\t\t: ano_final,\r\n                    'cota_zerada'\t: cota_zerada,\r\n                    'cota_valida'\t: cota_valida,\r\n                    'cota_totaliza'\t: cota_totaliza,\r\n                    cota_faturamento : cota_faturamento,\r\n                    cota_ggf         : cota_ggf,\r\n                    cota_ajuste_inventario : cota_ajuste_inventario\r\n                };\r\n\r\n                if (data_inicial > data_final) { \r\n                    showAlert('Data inválida. Data inicial maior que data final.');\r\n                    return false;\r\n                }\r\n                filtroAccordion(dados);\r\n            }\r\n            \r\n            function filterStart() {\r\n                if ( !(pathname == '/_13030') ) return false;\r\n                \r\n                $('.btn-cotas-filtrar').click   (function(){ filedsLoad();});\r\n                $('.btn-cotas-filtro' ).keyEnter(function(){ filedsLoad();});     \r\n//                $(window              ).load    (function(){ filedsLoad();});                \r\n            }\r\n            filterStart();\r\n        }\r\n        filtrar();\r\n\r\n        {\r\n           function removeItemAccordion(classdelete,classpai,classavo,tempo) {\r\n//                popUpSelector.popUpClose({focus: false});\r\n                \r\n                if ($('.'+classdelete).siblings().length == 0){\r\n\r\n                   console.log($('.'+classpai).children().length);\r\n                   if ($('.'+classpai).siblings().length == 0){\r\n\r\n                        $('.'+classdelete).fadeOut(tempo);\r\n                        setTimeout(function () { $('.'+classdelete).remove();\r\n\r\n                            $('.'+classpai).fadeOut(tempo);\r\n                            setTimeout(function () { $('.'+classpai).remove();\r\n\r\n                                $('.'+classavo).fadeOut(tempo);\r\n                                setTimeout(function () { $('.'+classavo).remove();}, tempo);\r\n\r\n                            } , tempo);\r\n\r\n                        }, tempo);\r\n\r\n                    }else{\r\n\r\n                        $('.'+classdelete).fadeOut(tempo);\r\n                        setTimeout(function () { $('.'+classdelete).remove();\r\n\r\n                            $('.'+classpai).fadeOut(tempo);\r\n                            setTimeout(function () { $('.'+classpai).remove();} , tempo);\r\n\r\n                        }, tempo);\r\n\r\n\r\n                    }\r\n\r\n                }else{\r\n\r\n                    $('.'+classdelete).fadeOut(tempo);\r\n                    setTimeout(function () { $('.'+classdelete).remove();}, tempo);\r\n\r\n                }\r\n            }\r\n\r\n            $(document).on('click', '.deletar', function(){\r\n\r\n\t\t\t\tvar contaid = $(this).attr('contaid');\r\n\r\n\t\t\t\tif( !confirm('Confirma exclusão desta cota?') ) return false;\r\n\r\n\r\n\t\t\t\tvar classdelete = $(this).attr('classdelete');\r\n\t\t\t\tvar classpai = $(this).attr('classpai');\r\n\t\t\t\tvar classavo = $(this).attr('classavo');\r\n\t\t\t\tvar tempo = 250;\r\n\t\t\t  \r\n\t\t\t\t//ajax\r\n\t\t\t\tvar type\t= \"POST\",\r\n\t\t\t\t\turl\t\t= pathname+\"/DeletaItemAccordion\",\r\n\t\t\t\t\tdata\t= {'ID': contaid},\r\n\t\t\t\t\tsuccess\t= function(data) {\r\n                        $('#cota-modal')\r\n                            .modal('hide')\r\n                            .one('hidden.bs.modal', function(){\r\n                                showSuccess('Conta excluída com sucesso.<br/><b>Para atualizar os totalizadores, filtre novamente.</b>');\r\n                                removeItemAccordion(classdelete,classpai,classavo,tempo);\r\n                            })\r\n                        ;\r\n\t\t\t\t\t}\r\n\t\t\t\t;\r\n\t\t\t\t\r\n\t\t\t\texecAjax1(type, url, data, success, null, null);\r\n              //removeItemAccordion(classdelete,classpai,classavo,tempo);\r\n\r\n           });\r\n\r\n        }\r\n\r\n        { /** Pesquisar Centro de Custo */\r\n\r\n            var filtro;\r\n            var campo_ccusto;\r\n            var btn_filtro_ccusto;\r\n            var input_group;\r\n            var itens_ccusto;\r\n            var _ccusto;\r\n            var tempo_focus;\r\n            var ccusto_selecionado = false;\r\n\r\n            /**\r\n             * Filtrar objeto.\r\n             */\r\n            function filtrarCCusto() {\r\n\r\n                campo_ccusto\t\t= $('#ccusto-descricao');\t//campo\r\n                btn_filtro_ccusto\t= $('.btn-filtro-ccusto');\r\n\r\n                input_group\t\t\t= $(campo_ccusto).parent('.input-group');\t//input-group\r\n                _ccusto\t\t\t\t= $('input[name=\"_ccusto\"]');\r\n\r\n                filtro\t\t\t\t= campo_ccusto.val();\r\n\r\n                //esvazia campo hidden caso algum item já tenha sido escolhido antes\r\n                if(ccusto_selecionado) \r\n                    $(_ccusto).val('');\r\n\r\n                if( !filtro ) {\r\n                    fechaListaccusto( input_group );\r\n                    $(_ccusto).val('');\r\n    //\t\t\t\treturn false;\r\n                }\r\n    //\t\t\t\t$('.container-fluid').shCircleLoader();\r\n\t\r\n\t\t\t\t//ajax\r\n\t\t\t\tvar type\t= \"POST\",\r\n                    url\t\t= \"/_20030/pesquisaCCusto\",\r\n                    data\t= {'filtro': filtro},\r\n\t\t\t\t\tsuccess\t= function(data) {\r\n\r\n                        abreListaccusto( input_group );\r\n                        $('.lista-ccusto').html(data);\r\n\r\n                        //se existem dados cadastrados\r\n                        if( data.indexOf('nao-cadastrado') === -1 ) {\r\n\r\n                            itens_ccusto = $('ul.ccusto li a');\r\n\r\n                            selecItemListaccusto( $(itens_ccusto), campo_ccusto );\r\n\r\n                            $(itens_ccusto)\r\n                                .focusout(function() {\r\n\r\n                                    if(tempo_focus) clearTimeout(tempo_focus);\r\n\r\n                                    tempo_focus = setTimeout(function() {\r\n\r\n                                        if( !$(itens_ccusto).is(':focus') && \r\n                                            !$(campo_ccusto).is(':focus') && \r\n                                            !$(btn_filtro_ccusto).is(':focus') \r\n                                        ) {\r\n                                            $(campo_ccusto).val('');\r\n                                            fechaListaccusto( input_group );\r\n                                        }\r\n\r\n                                    }, 200);\r\n\r\n                                });\r\n\r\n                            $(campo_ccusto)\r\n                                .focusout(function() {\r\n\r\n                                    if(tempo_focus) clearTimeout(tempo_focus);\r\n\r\n                                    tempo_focus = setTimeout(function() {\r\n\r\n                                        if( !$(itens_ccusto).is(':focus') && \r\n                                            !$(_ccusto).val() && \r\n                                            !$(btn_filtro_ccusto).is(':focus') \r\n                                        ) {\r\n                                            $(campo_ccusto).val('');\r\n                                            fechaListaccusto( input_group );\r\n                                        }\r\n\r\n                                    }, 200);\t\t\t\t\t\t\t\r\n\r\n                                });\r\n                        }\r\n                        else {\r\n                            $(_ccusto).val('');\r\n\r\n                            $(campo_ccusto)\r\n                                .focusout(function() {\r\n                                    if( $('.lista-ccusto').children().children().hasClass('nao-cadastrado') ) {\r\n                                        $(campo_ccusto).val('');\r\n                                        fechaListaccusto( input_group );\r\n                                    }\r\n                                });\r\n                        }\r\n\r\n                    }\r\n\t\t\t\t;\r\n\t\t\r\n\t\t\t\texecAjax2(type, url, data, success, null, btn_filtro_ccusto);\r\n\t\t\t\t\r\n            }\r\n\r\n\r\n            //Abre resultado da filtragem\r\n            function abreListaccusto(ccusto) {\r\n\r\n                $(ccusto)\r\n                    .next('.lista-ccusto-container')\r\n                    .addClass('ativo');\r\n\r\n                $(btn_filtro_ccusto)\r\n                    .attr('tabindex', '-1');\r\n\r\n            }\r\n\r\n            //Fecha resultado da filtragem\r\n            function fechaListaccusto(ccusto) {\r\n\r\n                $(ccusto)\r\n                    .next('.lista-ccusto-container')\r\n                    .removeClass('ativo')\r\n                    .children('.lista-ccusto')\r\n                    .empty();\r\n\r\n                $(btn_filtro_ccusto)\r\n                    .removeAttr('tabindex');\r\n\r\n            }\r\n\r\n            //Preencher campos de acordo com o item selecionado\r\n            function selecItemListaccusto(itens, campo) {\r\n\r\n                $(itens).click(function(e) {\r\n\r\n                    e.preventDefault();\r\n\r\n                    $(campo)\r\n                        .val( $(this).text() )\r\n                        .focus();\r\n\r\n                    selecionadoCCusto();\r\n\r\n                    $(_ccusto)\r\n                        .val( $(this).nextAll('.ccusto-id').val() )\r\n                        .trigger('change');\r\n\r\n                    fechaListaccusto( input_group );\r\n                    ccusto_selecionado = true;\r\n                });\r\n\r\n            }\r\n\r\n            /**\r\n             * Ações que devem acontecer após o item ser selecionado.\r\n             * \r\n             * @returns {undefined}\r\n             */\r\n            function selecionadoCCusto() {\r\n\r\n                $('#ccusto-descricao')\r\n                    .attr('readonly', true);\r\n\r\n\r\n                $('.btn-filtro-ccusto')\r\n                    .hide();\r\n\r\n                $('.btn-apagar-filtro-ccusto')\r\n                    .show()\r\n                    .click(function() {\r\n\r\n                        $(this)\r\n                            .siblings('input')\r\n                            .removeAttr('readonly');\r\n\r\n                        $(this)\r\n                            .hide()\r\n                            .prev('button')\r\n                            .show();\r\n\r\n                        $('#ccusto-descricao')\r\n                            .val('')\r\n                            .focus();\r\n\r\n                        $('input[name=\"_ccusto\"]')\r\n                            .val('');\r\n\r\n                    });\r\n            }\r\n\r\n            /**\r\n             * Eventos para o filtro de CCusto.\r\n             */\r\n            function iniciarFiltroCCusto() {\r\n\r\n                //Se o item já estiver selecionado (tela de update), efetua as devidas ações.\r\n                if ( $('input[name=\"_ccusto\"]').val() !== '' )\r\n                    selecionadoCCusto();\r\n\r\n                //Botão de filtrar\r\n                $('.btn-filtro-ccusto').on({\r\n\r\n                    click: function() {\r\n                        if ( !$(_ccusto).val() )\r\n                            filtrarCCusto();\r\n                    },\r\n\r\n                    focusout: function() {\r\n\r\n                        if(tempo_focus) clearTimeout(tempo_focus);\r\n\r\n                        tempo_focus = setTimeout(function() {\r\n\r\n                            if ( !$('input[name=\"_ccusto\"]').val() && $('.lista-ccusto').is(':empty') ) {\r\n                               $('#ccusto-descricao').val('');\r\n                            }\r\n\r\n                            if ( !$('input[name=\"_ccusto\"]').val() && \r\n                                 !$('.lista-ccusto ul li a').is(':focus') && \r\n                                  $('#ccusto-descricao').val() \r\n                            ) {\r\n                                $('#ccusto-descricao').val('');\r\n                                fechaListaccusto(input_group);\r\n                            }\r\n\r\n                            if ( !$('input[name=\"_ccusto\"]').val() && \r\n                                 !$('.lista-ccusto ul li a').is(':focus') && \r\n                                 !$('#ccusto-descricao').val() \r\n                            ) {\r\n                                fechaListaccusto(input_group);\r\n                            }\r\n\r\n                        }, 200);\r\n                    }\r\n\r\n                });\r\n\r\n                //Campo de filtro\r\n                $('#ccusto-descricao').on({\r\n\r\n                    keydown: function(e) {\r\n\r\n                        //Eventos após a escolha de um item\r\n                        if ( $(this).is('[readonly]') ) {\r\n\r\n                            //Deletar teclando 'Backspace' ou 'Delete'\r\n                            if ( (e.keyCode === 8) || (e.keyCode === 46) ) {\r\n                                $('.btn-apagar-filtro-ccusto').click();\r\n                            }\r\n                        }\r\n                        else {\r\n\r\n                            //Pesquisar com 'Enter'\r\n                            if (e.keyCode === 13) {\r\n                                filtrarCCusto();\r\n                            }\r\n                        }\r\n                    },\r\n\r\n                    focusout: function() {\r\n\r\n                        //verificar quando o campo deve ser zerado\r\n                        if(tempo_focus) clearTimeout(tempo_focus);\r\n\r\n                        tempo_focus = setTimeout(function() {\r\n\r\n                            if ( !$('input[name=\"_ccusto\"]').val() && \r\n                                 $('.lista-ccusto').is(':empty') &&\r\n                                 !$('.btn-filtro-ccusto').is(':focus') \r\n                            ) {\r\n                                $('#ccusto-descricao').val('');\r\n                            }\r\n\r\n                        }, 200);\r\n                    }\r\n\r\n                });\r\n\r\n            }\r\n\r\n            iniciarFiltroCCusto();\r\n\r\n        }\r\n\r\n        { /** Pesquisar Conta Contábil */\r\n\r\n            var filtro;\r\n            var campo_ccontabil;\r\n            var btn_filtro_ccontabil;\r\n            var input_group;\r\n            var itens_ccontabil;\r\n            var _ccontabil_id;\r\n            var tempo_focus;\r\n            var ccontabil_selecionado = false;\r\n\r\n            /**\r\n             * Filtrar objeto.\r\n             */\r\n            function filtrarCContabil() {\r\n\r\n                var ccontabil_tipo;\r\n\r\n                var campo_ccontabil_tipo\t= $('#ccontabil-tipo');\r\n\r\n                campo_ccontabil\t\t\t= $('#ccontabil-descricao');\t//campo\r\n                btn_filtro_ccontabil\t= $('.btn-filtro-ccontabil');\r\n\r\n                input_group\t\t\t\t= $(campo_ccontabil).parent('.input-group');\t//input-group\r\n                _ccontabil_id\t\t\t= $('input[name=\"_ccontabil\"]');\r\n\r\n                filtro \t\t\t= campo_ccontabil.val();\r\n                ccontabil_tipo\t= campo_ccontabil_tipo.val();\r\n\r\n                //esvazia campo hidden caso algum item já tenha sido escolhido antes\r\n                if(ccontabil_selecionado) \r\n                    $(_ccontabil_id).val('');\r\n\r\n                if( !filtro ) {\r\n                    fechaListaccontabil( input_group );\r\n                    $(_ccontabil_id).val('');\r\n                    //return false;\r\n                }\r\n\t\t\t\t\r\n\t\t\t\t//ajax\r\n\t\t\t\tvar type\t= \"POST\",\r\n                    url\t\t= \"/_17010/pesquisa\",\r\n                    data\t= {\r\n                        'filtro'\t\t:\tfiltro,\r\n                        'ccontabil_tipo':\tccontabil_tipo\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess\t= function(data) {\r\n\r\n                        abreListaccontabil( input_group );\r\n                        $('.lista-ccontabil').html(data);\r\n\r\n                        //existem dados cadastrados\r\n                        if( data.indexOf('nao-cadastrado') === -1 ) {\r\n\r\n                            itens_ccontabil = $('ul.ccontabil li a');\r\n\r\n                            selecItemListaccontabil( $(itens_ccontabil), campo_ccontabil );\r\n\r\n                            $(itens_ccontabil).focusout(function() {\r\n\r\n                                if(tempo_focus) clearTimeout(tempo_focus);\r\n\r\n                                tempo_focus = setTimeout(function() {\r\n                                    if( !$(itens_ccontabil).is(':focus') && !$(campo_ccontabil).is(':focus') && !$(btn_filtro_ccontabil).is(':focus') ) {\r\n                                        $(campo_ccontabil).val('');\r\n                                        fechaListaccontabil( input_group );\r\n                                    }\r\n                                }, 200);\r\n\r\n                            });\r\n\r\n                            $(campo_ccontabil).focusout(function() {\r\n\r\n                                if(tempo_focus) clearTimeout(tempo_focus);\r\n\r\n                                tempo_focus = setTimeout(function() {\r\n\r\n                                    if( !$(itens_ccontabil).is(':focus') && !$(_ccontabil_id).val() && !$(btn_filtro_ccontabil).is(':focus') ) {\r\n                                        $(campo_ccontabil).val('');\r\n                                        fechaListaccontabil( input_group );\r\n                                    }\r\n                                }, 200);\r\n\r\n                            });\r\n                        }\r\n                        else {\r\n                            $(_ccontabil_id).val('');\r\n\r\n                            $(campo_ccontabil).focusout(function() {\r\n                                if( $('.lista-ccontabil').children().children().hasClass('nao-cadastrado') ) {\r\n                                    $(campo_ccontabil).val('');\r\n                                    fechaListaccontabil( input_group );\r\n                                }\r\n                            });\r\n                        }\r\n\r\n                    }\r\n\t\t\t\t;\r\n\t\t\r\n\t\t\t\texecAjax2(type, url, data, success, null, btn_filtro_ccontabil);\r\n\r\n            }\r\n\r\n\r\n            //Abre resultado da filtragem\r\n            function abreListaccontabil(ccontabil) {\r\n                $(ccontabil).next('.lista-ccontabil-container').addClass('ativo');\r\n                $(btn_filtro_ccontabil).attr('tabindex', '-1');\r\n            }\r\n\r\n            //Fecha resultado da filtragem\r\n            function fechaListaccontabil(ccontabil) {\r\n                $(ccontabil).next('.lista-ccontabil-container').removeClass('ativo').children('.lista-ccontabil').empty();\r\n                $(btn_filtro_ccontabil).removeAttr('tabindex');\r\n            }\r\n\r\n            //Preencher campos de acordo com o item selecionado\r\n            function selecItemListaccontabil(itens, campo) {\r\n\r\n                $(itens).click(function(e) {\r\n\r\n                    e.preventDefault();\r\n\r\n                    $(campo)\r\n                        .val( $(this).text() )\r\n                        .focus();\r\n\r\n                    selecionadoCcontabil();\r\n\r\n                    $(_ccontabil_id)\r\n                        .val( $(this).nextAll('.ccontabil-conta').val() )\r\n                        .trigger('change');\r\n\r\n                    fechaListaccontabil( input_group );\r\n                    ccontabil_selecionado = true;\r\n\r\n                });\r\n\r\n            }\r\n\r\n            /**\r\n             * Ações que devem acontecer após o item ser selecionado.\r\n             * \r\n             * @returns {undefined}\r\n             */\r\n            function selecionadoCcontabil() {\r\n\r\n                $('#ccontabil-descricao')\r\n                    .attr('readonly', true);\r\n\r\n                $('.btn-filtro-ccontabil')\r\n                    .hide();\r\n\r\n                $('.btn-apagar-filtro-ccontabil')\r\n                    .show()\r\n                    .click(function() {\r\n\r\n                        $(this)\r\n                            .siblings('input')\r\n                            .removeAttr('readonly');\r\n\r\n                        $(this)\r\n                            .hide()\r\n                            .prev('button')\r\n                            .show();\r\n\r\n                        $('#ccontabil-descricao')\r\n                            .val('')\r\n                            .focus();\r\n\r\n                        $('input[name=\"_ccontabil\"]')\r\n                            .val('');\r\n\r\n                    });\r\n            }\r\n\r\n            //Se o item já estiver selecionado (tela de update), efetua as devidas ações.\r\n            if ( $('input[name=\"_ccontabil\"]').val() !== '' )\r\n                selecionadoCcontabil();\r\n\r\n            //Botão de filtrar\r\n            $('.btn-filtro-ccontabil').on({\r\n\r\n                click: function() {\r\n                    if ( !$(_ccontabil_id).val() )\r\n                        filtrarCContabil();\r\n                },\r\n\r\n                focusout: function() {\r\n\r\n                    if(tempo_focus) clearTimeout(tempo_focus);\r\n\r\n                    tempo_focus = setTimeout(function() {\r\n\r\n                        if ( !$('input[name=\"_ccontabil_id\"]').val() && $('.lista-ccontabil').is(':empty') ) {\r\n                           $('#ccontabil-descricao').val('');\r\n                        }\r\n\r\n                        if ( !$('input[name=\"_ccontabil_id\"]').val() && \r\n                             !$('.lista-ccontabil ul li a').is(':focus') && \r\n                              $('#ccontabil-descricao').val() \r\n                        ) {\r\n                            $('#ccontabil-descricao').val('');\r\n                            fechaListaccontabil(input_group);\r\n                        }\r\n\r\n                        if ( !$('input[name=\"_ccontabil_id\"]').val() && \r\n                             !$('.lista-ccontabil ul li a').is(':focus') && \r\n                             !$('#ccontabil-descricao').val() \r\n                        ) {\r\n                            fechaListaccontabil(input_group);\r\n                        }\r\n\r\n                    }, 200);\r\n                }\r\n\r\n            });\r\n\r\n\r\n            //Campo de filtro\r\n            $('#ccontabil-descricao').on({\r\n\r\n                keydown: function(e) {\r\n\r\n                    //Eventos após a escolha de um item\r\n                    if ( $(this).is('[readonly]') ) {\r\n\r\n                        //Deletar teclando 'Backspace' ou 'Delete'\r\n                        if ( (e.keyCode === 8) || (e.keyCode === 46) ) {\r\n                            $('.btn-apagar-filtro-ccontabil').click();\r\n                        }\r\n                    }\r\n                    else {\r\n\r\n                        //Pesquisar com 'Enter'\r\n                        if (e.keyCode === 13) {\r\n                            filtrarCContabil();\r\n                        }\r\n                    }\r\n                },\r\n\r\n                focusout: function() {\r\n\r\n                    //verificar quando o campo deve ser zerado\r\n                    if(tempo_focus) clearTimeout(tempo_focus);\r\n\r\n                    tempo_focus = setTimeout(function() {\r\n\r\n                        if ( !$('input[name=\"_ccontabil_id\"]').val() && \r\n                             $('.lista-ccontabil').is(':empty') &&\r\n                             !$('.btn-filtro-ccontabil').is(':focus') \r\n                        ) {\r\n                            $('#ccontabil-descricao').val('');\r\n                        }\r\n\r\n                    }, 200);\r\n                }\r\n\r\n            });\r\n\r\n        }\r\n\r\n        //var mes;\r\n        //var ano;\r\n        //var ccusto_id;\r\n        //var data_val;\r\n        //var data;\r\n        //\r\n        //$('.incluir-ccusto').click(function(e){\r\n        //\r\n        //\tdata_val = Date.parse('00:00:00 '+$('input[name=\"data_cota\"]').val()+'-01');\r\n        //\tdata = new Date(data_val);\r\n        //\r\n        //\tccusto_id  = $(_ccusto).val();\r\n        //\tmes = data.getMonth()+1;\r\n        //\tano = data.getFullYear();\r\n        //\tconsole.log('passo 1');\r\n        //\tif(mes!='' && ano!='' && ccusto_id!=''){\r\n        //\t\t$.ajax({\r\n        //\t\t\ttype: \"POST\",\r\n        //\t\t\turl: pathname+\"/consultaSaldo\",\r\n        //\t\t\tdata: {\r\n        //\t\t\t\t'ccusto_id': ccusto_id,\r\n        //\t\t\t\t'mes': mes,\r\n        //\t\t\t\t'ano': ano},\r\n        //\t\t\tsuccess:\r\n        //\t\t\t\tfunction(data) {\r\n        //\t\t\t\t\tif(data.indexOf('falha') == -1){\r\n        //\t\t\t\t\t\tconsole.log('passo 2');\r\n        //\t\t\t\t\t}\r\n        //\t\t\t\t\telse{\r\n        //\t\t\t\t\t\tconsole.log('Valores não localizados');\r\n        //\t\t\t\t\t}\r\n        //\r\n        //\r\n        //\r\n        //\t\t\t\t},\r\n        //\t\t\terror: function(e) {\r\n        //\t\t\t\tconsole.log('Erro ao localizar a cota do centro de custo (Ajax): '+e);\r\n        //\t\t\t}\r\n        //\t\t});\r\n        //\t}\r\n        //\te.preventDefault();\r\n        //});\r\n\r\n\r\n    //\t/*\r\n    //\t * Alteração de Cotas\r\n    //\t */\r\n    //\t{\r\n    //\t\t//Abre o modal de alteração de cota\r\n    //\t\tvar ccustoId = \"\";\r\n    //\t\tvar ccustoDescricao = \"\";\r\n    //\t\tvar conta = \"\";\r\n    //\t\tvar contaDescricao = \"\";\r\n    //\t\tvar mes = \"\";\r\n    //\t\tvar mesDescricao = \"\";\r\n    //\t\tvar ano = \"\";\r\n    //\t\tvar valor = \"\";\r\n    //\t\tvar expandido = false;\r\n    //\t\t$('.edit-cota-conta').click(function () {\r\n    //\r\n    //\t\t\tccustoId = $(this).attr('ccusto_id');\r\n    //\t\t\tccustoDescricao = $(this).attr('ccusto_descricao');\r\n    //\t\t\tconta = $(this).attr('conta');\r\n    //\t\t\tcontaDescricao = $(this).attr('conta_descricao');\r\n    //\t\t\tmes = $(this).attr('mes');\r\n    //\t\t\tmesDescricao = $(this).attr('mes_descricao');\r\n    //\t\t\tano = $(this).attr('ano');\r\n    //\t\t\tvalor = $(this).attr('valor');\r\n    //\r\n    //\t\t\texpandido = $(this).parent().prev('a').attr('aria-expanded');\r\n    //\r\n    //\t\t\tconsole.log(expandido);\r\n    //\t\t\t$('#modal-edit .ccusto-descricao').children('span').text(ccustoDescricao);\r\n    //\t\t\t$('#modal-edit .conta-descricao').children('span').text(contaDescricao);\r\n    //\t\t\t$('#modal-edit .periodo').children('span').text(mesDescricao + ' de ' + ano);\r\n    //\t\t\t$('#modal-edit .valor').children('span').text(mesDescricao + ' de ' + ano);\r\n    //\t\t\t$('#modal-edit .cota').val(valor);\r\n    //\t\t});\r\n    //\r\n    //\t\t$('.salvar-alt').click(function () {\r\n    //\t\t\tif (ccustoId != '' && conta != '' && mes != '' && ano != '' && valor != '') {\r\n    //\r\n    //\t\t\t\t$.ajax({\r\n    //\t\t\t\t\ttype: \"PUT\",\r\n    //\t\t\t\t\turl: pathname+\"/update\",\r\n    //\t\t\t\t\tdata: {\r\n    //\t\t\t\t\t\t'ccusto_id': ccustoId,\r\n    //\t\t\t\t\t\t'conta': conta,\r\n    //\t\t\t\t\t\t'mes': mes,\r\n    //\t\t\t\t\t\t'ano': ano,\r\n    //\t\t\t\t\t\t'valor': $('#modal-edit .cota').val()\r\n    //\t\t\t\t\t},\r\n    //\t\t\t\t\tsuccess: function (data) {\r\n    //\t\t\t\t\t\tif (data.indexOf('sucesso') != -1) {\r\n    //\r\n    //\t\t\t\t\t\t\t$('#modal-edit').modal('toggle');\r\n    //\t\t\t\t\t\t\t//$('.alert-success').children('.texto').text('Alteração realizada com sucesso!');\r\n    //\t\t\t\t\t\t\tsetTimeout(function () {\r\n    //\t\t\t\t\t\t\t\t//$('.alert-success').fadeIn('normal', function () {\r\n    //\t\t\t\t\t\t\t\t//\t$(this).removeClass('alerta');\r\n    //\t\t\t\t\t\t\t\t//});\r\n    //\t\t\t\t\t\t\t}, 500);\r\n    //\r\n    //\r\n    //\t\t\t\t\t\t\tlistarCotas(ccustoId, conta, mes, ano, expandido);\r\n    //\r\n    //\r\n    //\t\t\t\t\t\t}\r\n    //\t\t\t\t\t\telse {\r\n    //\t\t\t\t\t\t\t//$('.alert-danger').children('.texto').text(data);\r\n    //\t\t\t\t\t\t\tsetTimeout(function () {\r\n    //\t\t\t\t\t\t\t\t//$('.alert-danger').fadeIn('normal', function () {\r\n    //\t\t\t\t\t\t\t\t//\t$(this).removeClass('alerta');\r\n    //\t\t\t\t\t\t\t\t//});\r\n    //\t\t\t\t\t\t\t}, 500);\r\n    //\t\t\t\t\t\t}\r\n    //\r\n    //\r\n    //\t\t\t\t\t},\r\n    //\t\t\t\t\terror: function (xhr, ajaxOptions, thrownError) {\r\n    //\t\t\t\t\t\tvar mensagemErro = retornaMensagemErro(xhr);\r\n    //\t\t\t\t\t\t//$('.alert-danger').children('.texto').text(mensagemErro + 'Ocorreu uma falha. Requisição não enviada ao servidor.');\r\n    //\t\t\t\t\t\tsetTimeout(function () {\r\n    //\t\t\t\t\t\t\t//$('.alert-danger').fadeIn('normal', function () {\r\n    //\t\t\t\t\t\t\t//\t$(this).removeClass('alerta');\r\n    //\t\t\t\t\t\t\t//});\r\n    //\t\t\t\t\t\t}, 500);\r\n    //\t\t\t\t\t}\r\n    //\t\t\t\t});\r\n    //\t\t\t}\r\n    //\r\n    //\t\t});\r\n    //\r\n    //\r\n    //\t\t/*\r\n    //\t\t * Controles iniciais do modal de alteração de cota\r\n    //\t\t */\r\n    //\t\t$('#modal-edit').on('shown.bs.modal', function () {\r\n    //\t\t\t$('.cota').focus();\r\n    //\t\t});\r\n    //\r\n    //\t\t$('#modal-edit').on('hidden.bs.modal', function () {\r\n    //\t\t\t$('.toggle-btn').attr('checked', false);\r\n    //\t\t\t$('.toggle-item').fadeOut('normal');\r\n    //\t\t});\r\n    //\r\n    //\t\t$('.toggle-btn').click(function () {\r\n    //\t\t\t$(\".toggle-item\").fadeToggle('normal');\r\n    //\r\n    //\t\t});\r\n    //\r\n    //\t\tfunction listarCotas(ccusto_id, conta, mes, ano, expandido) {\r\n    //\t\t\t$.ajax({\r\n    //\t\t\t\ttype: \"POST\",\r\n    //\t\t\t\turl: pathname+\"/listarCotas\",\r\n    //\t\t\t\tdata: {\r\n    //\t\t\t\t\t'ccusto_id': ccusto_id,\r\n    //\t\t\t\t\t'conta': conta,\r\n    //\t\t\t\t\t'mes': mes,\r\n    //\t\t\t\t\t'ano': ano,\r\n    //\t\t\t\t\t'expandido': expandido\r\n    //\t\t\t\t},\r\n    //\t\t\t\tsuccess: function (data) {\r\n    //\t\t\t\t\t$('.cotas').children('.panel-body').empty();\r\n    //\t\t\t\t\t$('.cotas').children('.panel-body').append(data);\r\n    //\t\t\t\t},\r\n    //\t\t\t\terror: function (e) {\r\n    //\t\t\t\t\tconsole.log('erro');\r\n    //\t\t\t\t}\r\n    //\t\t\t});\r\n    //\t\t\texpandido = '';\r\n    //\t\t}\r\n    //\t}\r\n\r\n\r\n        { /** Verifica cota existente de acordo com o ano 13030.create */\r\n\r\n            /** Realiza a consulta de verificação */\r\n            $('.ccusto, .ccontabil, .mes-inicial, .ano-inicial, .mes-final, .ano-final').change(function () {\r\n\r\n                setTimeout(function() {\r\n                    var ccusto\t\t= $('.ccusto').val();\r\n                    var ccontabil\t= $('.ccontabil').val();\r\n                    var valor\t\t= $('.valor').val();\r\n                    var mesInicial\t= $('.mes-inicial').val();\r\n                    var anoInicial\t= $('.ano-inicial').val();\r\n                    var mesFinal\t= $('.mes-final').val();\r\n                    var anoFinal\t= $('.ano-final').val();\r\n                    var dataInicial  = new Date(Date.parse('00:00:00 '+anoInicial+'-'+mesInicial+'-01'));\r\n                    var dataFinal   = new Date(Date.parse('00:00:00 '+anoFinal+'-'+mesFinal+'-01'));\r\n                    var validaData  = !(dataInicial > dataFinal);\r\n\r\n                    //Limpa as informações sobre cotas existentes\r\n                    $('.cotas-existentes').empty();\r\n                    //Aplica os valores originais no botão GRAVAR (para não chamar o modal ao clicar em gravar)\r\n                    $('button.btn-modal').removeAttr('data-toggle').removeAttr('data-target').addClass('js-gravar').attr('type', 'submit');\r\n                    //Aplica os valores originais do botão GRAVAR do MODAL (para não chamar o submit no modal)\r\n                    $('button.btn-confirma').removeClass('js-gravar').attr('type', 'button');\r\n\r\n                    if (ccusto && ccontabil && dataInicial && dataFinal) {\r\n\r\n                        if ( validaData ) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t//ajax\r\n\t\t\t\t\t\t\tvar type\t= \"POST\",\r\n                                url\t\t= \"/_13030/consultaCota\",\r\n                                data\t= {\r\n                                    'ccusto'\t: ccusto,\r\n                                    'ccontabil'\t: ccontabil,\r\n                                    'mesInicial'\t: mesInicial,\r\n                                    'anoInicial': anoInicial,\r\n                                    'mesFinal'\t: mesFinal,\r\n                                    'anoFinal'\t: anoFinal\r\n                                },\r\n\t\t\t\t\t\t\t\tsuccess\t= function (data) {\r\n                                    if (data.indexOf('sucesso') !== -1) {\r\n                                        $('.cotas-existentes').append(data);\r\n                                        $('[data-toggle=\"tooltip\"]').tooltip();\r\n\r\n                                        //Remove o js-gravar do GRAVAR da página e coloca para o modal\r\n                                        $('button.btn-modal').attr('data-toggle','modal').attr('data-target','#modal-cotas-existentes').removeClass('js-gravar').attr('type', 'button');\r\n                                        $('button.btn-confirma').addClass('js-gravar').attr('type', 'submit');\r\n\r\n                                    } else {\r\n                                        if (data) {\r\n                                            $('.alert').children('.texto').text('Ocorreu uma falha: ' + data);\r\n                                            $('.alert').addClass('alert-danger').fadeIn();\r\n                                        }\r\n                                    }\r\n                                }\r\n\t\t\t\t\t\t\t;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\texecAjax1(type, url, data, success, null, null, false);\r\n\r\n                        }else {\r\n                            $('.alert').children('.texto').text('Data inválida! Data inicial maior que a final.');\r\n                            $('.alert').addClass('alert-danger').fadeIn();\r\n                        }\r\n\r\n                    }\r\n\r\n                }, 1);\r\n\r\n            });\r\n\r\n            /** Verifica onde será realizado o submit */\r\n            $('button.btn-modal, button.btn-confirma').click( function(e) {\r\n                var ccusto\t\t= $('.ccusto').val();\r\n                var ccontabil\t= $('.ccontabil').val();\r\n                var valor\t\t= $('.valor').val();\r\n                var mesInicial\t= $('.mes-inicial').val();\r\n                var anoInicial\t= $('.ano-inicial').val();\r\n                var mesFinal\t= $('.mes-final').val();\r\n                var anoFinal\t= $('.ano-final').val();\r\n                var dataInicial  = new Date(Date.parse('00:00:00 '+anoInicial+'-'+mesInicial+'-01'));\r\n                var dataFinal   = new Date(Date.parse('00:00:00 '+anoFinal+'-'+mesFinal+'-01'));\r\n                var validaData  = !(dataInicial > dataFinal);\r\n                var btnConfirma = $('button.btn-confirma');\r\n                var modalCota\t= $('#modal-cotas-existentes');\r\n\r\n                //Clicou no gravar padrão (cancela \r\n                if ( $(this).hasClass('btn-modal') && btnConfirma.attr('type')==='submit' ) {\r\n                    e.preventDefault();\r\n                    e.stopPropagation();\r\n                    $('button.btn-confirma').trigger('click');\r\n                }\r\n                if (btnConfirma.attr('type')==='submit' && modalCota.is(':visible') === false && ccusto && ccontabil && valor && validaData) {\r\n                    modalCota.modal('show');\r\n                    e.preventDefault();\r\n                    e.stopPropagation();\r\n                }\r\n            });\r\n    //\r\n    //\t\t$(document).on('click', '.btn-sim-todos', function(){\r\n    //\t\t\t$('.btn-sim-item').addClass('active').children('input').attr('checked', true);\r\n    //\t\t\t$('.btn-nao-item').removeClass('active').children('input').removeAttr('checked', false);\r\n    //\t\t});\r\n    //\t\t$(document).on('click', '.btn-nao-todos', function(){\r\n    //\t\t\t$('.btn-nao-item').addClass('active').children('input').attr('checked', true);\r\n    //\t\t\t$('.btn-sim-item').removeClass('active').children('input').removeAttr('checked', false);\r\n    //\t\t});\r\n    //\t\t//$(document).on('click', '.btn-sim-item', function(){\r\n    //\t\t//\talert('clicou Sim ITEM');\r\n    //\t\t//});\r\n    //\t\t//$(document).on('click', '.btn-nao-item', function(){\r\n    //\t\t//\talert('clicou Nao ITEM');\r\n    //\t\t//});\r\n\r\n        }\r\n\r\n        {/** Alteração de Cota 13030.edit*/\r\n\r\n\r\n\r\n            {/** Cota extra */\r\n\r\n                {/** Add cota extra */\r\n                    $('.btn-add-cota').click( function() {\r\n\r\n                        var datahora\t= dataFormatada();\r\n                        var usuario\t\t= $('input[name=usuario_nome]').val();\r\n                        var field_valor = $('input[name=cota_extra]');\r\n                        var field_obs   = $('textarea[name=observacao]');\r\n                        var valor\t\t= field_valor.val();\r\n                        var obs         = field_obs.val();\r\n                        var lineTable   =\r\n                            '<tr class=\"item-dinamico\" style=\"display: none\">\\\r\n                                    <td class=\"t-text t-medium\">' + usuario + '</td>\\\r\n                                    <td class=\"t-numb t-low\">R$ ' + valor + '</td>\\\r\n                                    <td class=\"t-center t-medium\">' + datahora + '</td>\\\r\n                                    <td class=\"t-text t-extra-large limit-width\">' + obs + '</td>\\\r\n                                    <td class=\"t-center t-low t-btn\"><button type=\"button\" class=\"btn btn-danger btn-sm btn-remove-cota\"><span class=\"glyphicon glyphicon-trash remove\"></span></button></td>\\\r\n                                    <input type=\"hidden\" name=\"cota_extra_add[valor][]\" value=\"' + formataPadrao(valor) + '\">\\\r\n                                    <input type=\"hidden\" name=\"cota_extra_add[obs][]\" value=\"' + obs + '\">\\\r\n                             </tr>';\r\n\r\n                        if ( valor && obs ) {                                 \r\n\r\n                            $('tbody.t-body').append(lineTable);\r\n                            $('tr.item-dinamico').fadeIn('slow').removeClass('item-dinamico');\r\n                            bootstrapInit();\r\n                            showHideTable();\r\n\r\n                            field_valor.val('');\r\n                            field_obs.val('');\r\n                        } else if ( !valor ) {\r\n                            field_valor.focus();                               \r\n                        } else if ( !obs ) {\r\n                            field_obs.focus();                               \r\n                        }\r\n\r\n\r\n                    });\r\n                }\r\n\r\n                {/** Remove cota extra */\r\n                    $(document).on('click', '.btn-remove-cota', function(){\r\n                        var linhaCota  = $(this).parent().parent('tr');\r\n                        var itemId\t   = $(this).parents('tr').attr('data-id');\r\n                        var lineRemove = '<input type=\"hidden\" name=\"cota_extra_del[]\" value=\"' + itemId + '\">'; \r\n\r\n                        linhaCota.fadeOut('low');\r\n                        setTimeout(function() {\r\n                            linhaCota.remove();\r\n                            itemId === undefined ? '' : $('.input-hiddens').append(lineRemove);\r\n                            showHideTable();\r\n                        }, 200);\r\n                    });\r\n                }\r\n\r\n                {/** Oculta/Mostra tabela se hover registros */\r\n\r\n                    function showHideTable() {\r\n                        $('tbody.t-body').each(function () {\r\n                            var panel = $(this).parents('div.cota-extra');\r\n                            var itens = $(this).find('td');\r\n\r\n                            (itens.length > 0) ? panel.fadeIn('low') : panel.fadeOut('low');\r\n                        });\r\n                    }\r\n\r\n                    showHideTable();\r\n\r\n                }\r\n\r\n                {/** Limite do textarea */\r\n                    limiteTextarea( $('textarea.obs'), 200, $('span.contador span') ); //função em master.js\r\n                }\r\n\r\n            }\r\n\r\n            {/** Cota Outros */\r\n\r\n                {/** Add cota outros */\r\n                    $('.btn-add-outros').click( function() {\r\n                        var datahora\t= dataFormatada();\r\n                        var usuario\t\t= $('input[name=usuario_nome]').val();\r\n                        var field_valor\t= $('input[name=outros_valor]');\r\n                        var field_obs   = $('textarea[name=outros_observacao]');\r\n                        var valor\t\t= field_valor.val();\r\n                        var obs\t\t= field_obs.val();\r\n                        var lineTable =\r\n                            '<tr class=\"outros-item-dinamico\" style=\"display: none\">\\\r\n                                    <td class=\"t-text t-medium\">' + usuario + '</td>\\\r\n                                    <td class=\"t-numb t-low\">R$ ' + valor + '</td>\\\r\n                                    <td class=\"t-center t-medium\">' + datahora + '</td>\\\r\n                                    <td class=\"t-text t-extra-large limit-width\">' + obs + '</td>\\\r\n                                    <td class=\"t-center t-low t-btn\"><button type=\"button\" class=\"btn btn-danger btn-sm btn-remove-outros\"><span class=\"glyphicon glyphicon-trash remove\"></span></button></td>\\\r\n                                    <input type=\"hidden\" name=\"cota_outros_add[valor][]\" value=\"' + formataPadrao(valor) + '\">\\\r\n                                    <input type=\"hidden\" name=\"cota_outros_add[obs][]\" value=\"' + obs + '\">\\\r\n                             </tr>';\r\n\r\n                        if ( valor && obs ) {                                 \r\n\r\n                            $('tbody.outros').append(lineTable);\r\n                            $('tr.outros-item-dinamico').fadeIn('slow').removeClass('outros-item-dinamico');\r\n                            bootstrapInit();\r\n                            showHideTableOutros();\r\n\r\n                            field_valor.val('');\r\n                            field_obs.val('');\r\n                        } else if ( !valor ) {\r\n                            field_valor.focus();                               \r\n                        } else if ( !obs ) {\r\n                            field_obs.focus();                               \r\n                        }\r\n\r\n\r\n                    });\r\n                }\r\n\r\n                {/** Remove cota outros */\r\n                    $(document).on('click', '.btn-remove-outros', function(){\r\n                        var linhaCota  = $(this).parent().parent('tr');\r\n                        var itemId\t   = $(this).parents('tr').attr('data-id');\r\n                        var lineRemove = '<input type=\"hidden\" name=\"cota_outros_del[]\" value=\"' + itemId + '\">'; \r\n\r\n                        linhaCota.fadeOut('low');\r\n                        setTimeout(function() {\r\n                            linhaCota.remove();\r\n                            itemId === undefined ? '' : $('.input-hiddens').append(lineRemove);\r\n                            showHideTableOutros();\r\n                        }, 200);\r\n                    });\r\n                }\r\n\r\n                {/** Oculta/Mostra tabela se hover registros */\r\n\r\n                    function showHideTableOutros() {\r\n                        $('tbody.outros').each(function () {\r\n                            console.log('ui');\r\n                            var panel = $(this).parents('div.cota-outros');\r\n                            var itens = $(this).find('td');\r\n\r\n                            (itens.length > 0) ? panel.fadeIn('slow') : panel.fadeOut('slow');\r\n                        });\r\n                    }\t\t\t\t\r\n                    showHideTableOutros();\t\r\n                }\r\n\r\n                {/** Limite do textarea */\r\n                    limiteTextarea( $('textarea.obs-outros'), 200, $('span.contador-outros span') ); //função em master.js\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        {/** Oculta o flash message */\r\n            $('.alert .close').click(function () {$(this).parent().removeClass('alert-success').removeClass('alert-info').removeClass('alert-warning').removeClass('alert-danger');});\r\n        }\r\n\r\n        { /** Redimensiona lista de acordo com o tamanho da tela */\r\n           function redimensionaTabela() {\r\n\r\n               if( $('fieldset .cotas > .panel-body').length > 0 ) {\r\n                   $('fieldset .cotas > .panel-body').height(document.documentElement.clientHeight - 380);\r\n               }\r\n           }\r\n\r\n           redimensionaTabela();\r\n\r\n           $(window).resize(function () {\r\n               redimensionaTabela();\r\n           });\r\n        }\r\n\r\n        function dataFormatada() {\r\n            var data\t = new Date(),\r\n                dia\t\t = strPad(data.getDate(), 2, '0'),\r\n                mes\t\t = strPad(data.getMonth() + 1, 2, '0'),\r\n                ano\t\t = strPad(data.getFullYear(), 2, '0'),\r\n                hora\t = strPad(data.getHours(), 2, '0'),\r\n                minutos\t = strPad(data.getMinutes(), 2, '0'),\r\n                segundos = strPad(data.getSeconds(), 2, '0');\r\n\r\n            return [dia, mes, ano].join('/') + ' ' + [hora, minutos, segundos].join(':');\r\n        }\r\n\r\n        function strPad(i,l,s) {\r\n            var o = i.toString();\r\n            if (!s) { s = '0'; }\r\n            while (o.length < l) {\r\n                o = s + o;\r\n            }\r\n            return o;\r\n        };\r\n    }\r\n\r\n    function dre(){\r\n        //Verifica o caminho acessado\r\n        if ( !(pathname === '/_13030/dre') ) return false;\r\n               \r\n        var param = {};\r\n        var selector;\r\n        var table;\r\n                \r\n        /**\r\n         * Carrega e configura tabela\r\n         * @returns {void}\r\n         */\r\n        function dataTable1() {\r\n            \r\n            table = $('div.dre table.table');\r\n//            $(table)\r\n//                .DataTable( \r\n//                    {\r\n//                        \"scrollY\"  : '60vh', // Altura da tabela \r\n//                        \"scrollX\"  : true  , // Habitila a rolagem horizontal\r\n//                        \"bSort\"    : false , // Desativa a ordenação\r\n//                        \"bFilter\"  : false , // Desativa o filtro\r\n//                        \"bInfo\"    : false , // Desativa as informações de registro\r\n//                        \"bPaginate\": false   // Desativa a paginação\r\n//                    } \r\n//                )\r\n//            ;\r\n\r\n            popUpOpen();  \r\n        }\r\n                        \r\n        /**\r\n         * Exibe popUp\r\n         * @returns {void}\r\n         */\r\n        function popUpOpen() {\r\n            \r\n            $('.popup-show')\r\n                .click(\r\n                    function(e){\r\n                        e.stopPropagation();\r\n                        e.preventDefault();\r\n                        \r\n                        \r\n                        var args = {\r\n                            ccusto      : $(this).data('ccusto'     ),\r\n                            mes         : $(this).data('mes'        ),\r\n                            ano         : $(this).data('ano'        )\r\n                        };\r\n\r\n                        if ( args.ccusto ) {\r\n\r\n                            execAjax1('POST','/_13030/ggf',args,\r\n                                function(data) {\r\n\r\n                                    $('#ggf-modal .modal-body').html(data);\r\n                                    $('#ggf-modal').modal('show');\r\n//                                    $('#ggf-modal ').find('.lista-obj').DataTable(table_default);  \r\n                                    $('#ggf-modal').trigger('resize');\r\n                                    bootstrapInit();\r\n\r\n                                    \r\n                                    $('button[data-item=\"ggf\"]').click(function(){\r\n\r\n                                        var param = {\r\n                                            ccusto      : $(this).data('ccusto'     ),\r\n                                            mes         : $(this).data('mes'        ),\r\n                                            ano         : $(this).data('ano'        ),\r\n                                            familia_id  : $(this).data('familia_id' )\r\n                                        };\r\n\r\n                                        execAjax1('POST','/_13030/ggfDetalhe',param,\r\n                                            function(data) {\r\n\r\n                                                $('#ggf-modal-detalhe .modal-body').html(data);\r\n                                                $('#ggf-modal-detalhe').modal('show');\r\n//                                                $('#ggf-modal-detalhe').find('.lista-obj').DataTable(table_default);  \r\n                                                $('#ggf-modal-detalhe').trigger('resize');\r\n                                                bootstrapInit();\r\n\r\n                                            }\r\n                                        );                \r\n                                    });\r\n                                    \r\n                                }\r\n                            );  \r\n                        } else {\r\n\r\n                            var that = $(this);\r\n\r\n                            param['show'] = $(this).attr('id');    \r\n                            selector = $(this);\r\n                            showCotaItem({\r\n                                selector : selector,\r\n                                dados    : {\r\n                                    id      : param.show,\r\n                                    ref     : 'dre'\r\n                                }\r\n                            });\r\n                        }\r\n                    }   \r\n                )\r\n            ;\r\n            \r\n        }\r\n\r\n        /**\r\n         * Exibe o detalhamento do item se a url requisitar\r\n         * @returns {void}\r\n         */\r\n        function showItem() {\r\n            \r\n            param  = paramSplit(urlhash,'-');\r\n            \r\n            if ( param.show ) {\r\n                selector = $('#'+param.show);\r\n                tratarDados();\r\n            }\r\n            \r\n            if ( param.id ) {\r\n                $('#'+param.id).focus();\r\n            }\r\n        }        \r\n        \r\n        function printTable() {\r\n            $('.btn-print')\r\n                .click( \r\n                    function(){\r\n                        $('.btn-print').button('loading');\r\n//                        $(table).dataTable().fnDestroy();\r\n                        var dados = {\r\n                            'table': $('div.dre').html()\r\n                        };    \r\n                        \r\n                        function success(data) {\t\t\t\t\t\t\r\n                            if(data) {\r\n                                printPdf(data);\r\n                            }\r\n                        }\r\n                        \r\n                        function complete() {\r\n                            dataTable1();\r\n                            $('.btn-print').button('reset');\r\n                        }\r\n                        \r\n                        execAjax1('POST','/_13030/dre/pdf',dados,success,null,complete);\r\n                    }\r\n                )\r\n            ;\r\n        }\r\n        \r\n        function mesesToggle() {\r\n            \r\n            $('#meses_toggle').change(function() {\r\n                if($(this).is(\":checked\")) {\r\n                    $('.meses-transition').removeClass('meses-ocultar');\r\n                } else {\r\n                    $('.meses-transition').addClass('meses-ocultar');\r\n                    \r\n                }   \r\n                $('.dre').trigger('resize');\r\n            });\r\n        }\r\n        \r\n        function filter() {\r\n            \r\n            var dados = {};  \r\n            \r\n            function ajax() {\r\n\r\n                $('.btn-dre-filtrar').button('loading');\r\n\r\n                function success(data) {\r\n                    if(data) {\r\n                        $('div.dre').html(data);\r\n                        //$('div.print').html(data);\r\n                        dataTable1();\r\n                \r\n                        if($('#meses_toggle').is(\":checked\")) {\r\n                            $('.meses-transition').removeClass('meses-ocultar');\r\n                        } else {\r\n                            $('.meses-transition').addClass('meses-ocultar');\r\n                        }   \r\n                        $('.dre').trigger('resize');  \r\n                    }\r\n                }\r\n                \r\n                function complete() {\r\n                    $('.btn-dre-filtrar').button('reset');                        \r\n                }\r\n\r\n                execAjax1('POST',pathname + '/filter',dados,success,null,complete);             \r\n            }\r\n            \r\n            function filedsLoad() {\r\n                dados = {\r\n                    'filtro'         : $('input[name=filtro]').val() === '' ? null : $('input[name=filtro]').val(),\r\n                    'mes_1'          : $('select[name=mes_1]').val(),\r\n                    'mes_2'          : $('select[name=mes_2]').val(), \r\n                    'ano_1'          : $('select[name=ano_1]').val(),\r\n                    'cota_zerada'    : $('input[name=cota_zerada]').is(\":checked\"),\r\n                    'cota_valida'    : $('input[name=cota_valida]').is(\":checked\"),\r\n                    'cota_totaliza'  : $('input[name=cota_totaliza]').is(\":checked\"),\r\n                    cota_faturamento : $('#dre-modal .filtro-faturamento').is(\":checked\"), \r\n                    cota_ggf         : $('#dre-modal .filtro-ggf').is(\":checked\"),\r\n                    cota_ajuste_inventario : $('#dre-modal .filtro-ajuste_inventario').is(\":checked\")\r\n                };  \r\n                \r\n                ajax();\r\n            }\r\n            \r\n            function filterStart() {\r\n                $('.btn-dre-filtrar').click(   function(){ filedsLoad();});\r\n                $('.btn-dre-filtro' ).keyEnter(function(){ filedsLoad();});        \r\n            }\r\n            filterStart();\r\n        }\r\n        \r\n        $(function() {\r\n            filter();\r\n            dataTable1();\r\n            printTable();\r\n            mesesToggle();\r\n            showItem();\r\n        });\r\n    }\r\n    \r\n    function faturamento() {\r\n        //Verifica o caminho acessado\r\n        if ( !(pathname === '/_13030/faturamento') ) return false;\r\n        \r\n        var table = $('.table-faturamento');     \r\n\r\n        function dataTable() {     \r\n            var data_table = $.extend({}, table_default);\r\n                data_table.scrollY = 'auto';             \r\n            \r\n//            table.DataTable(data_table);   \r\n            \r\n            function acoes() {\r\n                var tr;\r\n                \r\n                function alterar() {\r\n\r\n                    function clickAlterar() {\r\n                        $(table)\r\n                            .find('.btn-alterar')\r\n                            .click(\r\n                                function() {\r\n                                    tr = $(this).closest('tr');\r\n\r\n                                    $(tr)\r\n                                        .find('td[field-js=alterar-input]')\r\n                                        .each(function(){\r\n                                            $(this).children('.span').hide();\r\n                                            $(this).children('.input').css('display', 'inline-block');\r\n                                        })\r\n                                    ;\r\n                                    \r\n                                    $(tr).find('.btn-alterar').hide();\r\n                                    $(tr).find('.btn-confirm').css('display', 'inline-block');\r\n\r\n                                    $(tr).find('.btn-excluir').hide();\r\n                                    $(tr).find('.btn-cancel').css('display', 'inline-block');\r\n                                }\r\n                            )\r\n                        ;  \r\n                    }\r\n                    \r\n                    function clickCancelar() {\r\n                        $(table)\r\n                            .find('.btn-cancel')\r\n                            .click(\r\n                                function() {    \r\n                                    tr = $(this).closest('tr');\r\n                                    \r\n                                    $(tr)\r\n                                        .find('td[field-js=alterar-input]')\r\n                                        .each(function(){\r\n                                            $(this).children('.span').css('display', 'inline-block');\r\n                                            $(this).children('.input').hide();\r\n                                        })\r\n                                    ;\r\n                                                                        \r\n                                    $(tr).find('.btn-alterar').css('display', 'inline-block');\r\n                                    $(tr).find('.btn-confirm').hide();\r\n\r\n                                    $(tr).find('.btn-excluir').css('display', 'inline-block');\r\n                                    $(tr).find('.btn-cancel').hide();\r\n                                }\r\n                            )\r\n                        ;\r\n                    }\r\n                    \r\n                    function clickConfirmar() {\r\n                        var param = {};\r\n                        var input_estab;\r\n                        var input_mes;\r\n                        var input_ano;\r\n                        var input_valor;\r\n                        \r\n                        $(table)\r\n                            .find('.btn-confirm')\r\n                            .click(\r\n                                function() {    \r\n                                    tr = $(this).closest('tr'); \r\n                                    \r\n                                    input_estab = tr.find('select[name=\"estab\"]');\r\n                                    input_mes   = tr.find('select[name=\"mes\"]'  );\r\n                                    input_ano   = tr.find('select[name=\"ano\"]'  );\r\n                                    input_valor = tr.find('input[name=\"valor\"]');\r\n                                \r\n                                    param.ID    = $(tr).attr('data-id');\r\n                                    param.ESTABELECIMENTO_ID = parseFloat(input_estab.val());\r\n                                    param.MES   = parseFloat(input_mes.val());\r\n                                    param.ANO   = parseFloat(input_ano.val());\r\n                                    param.VALOR = formataPadrao(input_valor.val());\r\n                                    \r\n//                                    input_valor.val(number_format(input_valor.val(), 2, ',', '.'));\r\n                                                                        \r\n                                    execAjax1('PUT',pathname,param,function(data) {\r\n                                    \r\n                                        tr.find('span[name=\"estab\"]').text(input_estab.find(':selected').text());\r\n                                        tr.find('span[name=\"data\"]' ).text(input_mes.find(':selected').text() + ' DE ' + input_ano.find(':selected').text());\r\n                                        tr.find('span[name=\"valor\"]').text('R$ ' + input_valor.val());\r\n\r\n                                        $(tr)\r\n                                            .find('td[field-js=alterar-input]')\r\n                                            .each(function(){\r\n                                                $(this).children('.span').css('display', 'inline-block');\r\n                                                $(this).children('.input').hide();\r\n                                            })\r\n                                        ;\r\n\r\n                                        $(tr).find('.btn-alterar').css('display', 'inline-block');\r\n                                        $(tr).find('.btn-confirm').hide();\r\n\r\n                                        $(tr).find('.btn-excluir').css('display', 'inline-block');\r\n                                        $(tr).find('.btn-cancel').hide();     \r\n                                        \r\n                                        \r\n                                        showSuccess('Faturamento atualizado com sucesso!');\r\n                                    });\r\n                                }\r\n                            )\r\n                        ;\r\n                    }\r\n                    \r\n                    clickAlterar();\r\n                    clickConfirmar();\r\n                    clickCancelar();\r\n                }\r\n                \r\n                function excluir() {\r\n                    $(table)\r\n                        .find('.btn-excluir')                    \r\n                        .click( function(){\r\n                            tr = $(this).closest('tr'); \r\n                            var param = {};\r\n                            param.ID = $(tr).attr('data-id');\r\n\r\n                            execAjax1('DELETE',pathname,param,function(data) {\r\n                                tr.fadeOut('slow');\r\n                                setTimeout(function() {\r\n                                    tr.remove();\r\n                                    \r\n                                    showSuccess('Faturamento excluído com sucesso!');\r\n                                }, 200);\r\n                            });\r\n                        })\r\n                    ;                    \r\n                }\r\n                \r\n                alterar();\r\n                excluir();\r\n            }\r\n            acoes();\r\n        }     \r\n        \r\n        function cadastrar() {\r\n            var param = {};\r\n            var div_cad = $('div.faturamento-cadastrar');\r\n            $(div_cad)\r\n                .find('.btn-gravar')\r\n                .click(function(){\r\n                    \r\n                    var input_estab = div_cad.find('select[name=\"estab\"]');\r\n                    var input_mes   = div_cad.find('select[name=\"mes\"]'  );\r\n                    var input_ano   = div_cad.find('select[name=\"ano\"]'  );\r\n                    var input_valor = div_cad.find('input[name=\"valor\"]');\r\n//                    input_valor.val(number_format(input_valor.val(), 2, ',', '.'));\r\n\r\n                    param.ESTABELECIMENTO_ID = parseFloat(input_estab.val());\r\n                    param.MES   = parseFloat(input_mes.val());\r\n                    param.ANO   = parseFloat(input_ano.val());\r\n                    param.VALOR = formataPadrao(input_valor.val());\r\n                    \r\n                    execAjax1('POST',pathname,param,function(data) {\r\n                        execAjax1('GET',pathname+'/table',null,function(data) {\r\n                            if(data) {\r\n//                                table.dataTable().fnDestroy();\r\n                                $('.faturamento-alterar').html(data);\r\n                                table = $('.table-faturamento');       \r\n                                dataTable();\r\n                                listarEstab();\r\n                                \r\n                                showSuccess('Faturamento incluído com sucesso!');\r\n                            }\r\n                        });  \r\n                    });\r\n                                     \r\n                })\r\n            ;\r\n        }\r\n        \r\n        $(function() {\r\n            cadastrar();\r\n            dataTable();\r\n            \r\n            $(\".modal-dialog\").on('hidden.bs.modal, shown.bs.modal', function () {\r\n                $(window).trigger('resize');\r\n            });\r\n        });        \r\n    }\r\n    \r\n    index();\r\n    dre();\r\n    faturamento();\r\n\r\n})(jQuery);"]}