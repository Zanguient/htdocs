{"version":3,"sources":["_11140.app.js","_11140.factory.create.js","_11140.factory.index.js","_11140.controller.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/oBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"_11140.app.js","sourcesContent":["/**\n * _11140 - Cadastro de paineis de Casos\n */\n'use strict';\n\nangular\n\t.module('app', [\n\t\t'vs-repeat', \n\t\t'gc-ajax',\n\t\t'gc-transform',\n\t\t'gc-form',\n\t\t'gc-utils',\n\t\t'gc-find'\n\t])\n;","angular\n    .module('app')\n    .factory('Create', Create);\n    \nCreate.$inject = [\n        '$ajax',\n        '$httpParamSerializer',\n        '$rootScope',\n        'gScope',\n        '$compile',\n        '$consulta'\n    ];\n\nfunction Create($ajax, $httpParamSerializer, $rootScope, gScope, $compile, $consulta) {\n\n    /**\n     * Constructor, with class name\n     */\n    function Create(data) {\n        if (data) {\n            this.setData(data);\n        }\n    }\n\n    var itens_html = [];\n\n    var consulta = new $consulta();\n    gScope.consulta = consulta;\n\n    var Input_temp = {\n        EDIT     : 0,\n        NOME     : '',\n        ID       : 0,\n        TIPO     : 0,\n        VALOR    : 0,\n        TEXTO    : 'Texto',\n        DEFAULT  : 0,\n        MIN      : 0,\n        MAX      : 100,\n        TAMANHO  : '1',\n        REQUERED : '1',\n        VINCULO  : '',\n        STEP     : 1,\n        CONSULTA : null,\n        DISABLED : false,\n        ITENS    : [{TEXTO : 'ITEM 1', SELECTED: false, VALOR : '1'}]\n    }\n\n    function validarInput(item,Inputs){\n\n    }\n\n    /**\n     * Public method, assigned to prototype\n     */\n    Create.prototype = {\n        itens : [],\n        model : '',\n        validarCampos: function(){\n            var validar = true;\n\n            angular.forEach(this.itens, function(iten, key) {\n                var item_invalido = false;\n\n                if(iten.REQUERED == 1){\n\n                    if((iten.TIPO == 1 || iten.TIPO == 2 || iten.TIPO == 3 || iten.TIPO == 5 || iten.TIPO == 6 || iten.TIPO == 8 || iten.TIPO == 10) && iten.VALOR == \"\"){\n                        item_invalido = true;                            \n                    }\n\n                    if(iten.TIPO == 4){\n                        var not_selected_item = true;\n                        angular.forEach(iten.ITENS, function(a, key) {\n                            if(a.SELECTED == true){\n                                not_selected_item = false;\n                            }\n                        });\n\n                        if(not_selected_item){\n                            item_invalido = true;\n                        }\n                    }\n\n                    if(iten.TIPO == 7){\n                        var valor = iten.CONSULTA.item.dados[iten.CAMPO_GRAVAR];\n                        if(valor == undefined){\n                            item_invalido = true;\n                        }\n                    }\n\n                    try{\n                        //console.log(iten.VALOR);\n                        if((iten.TIPO == 9 ) && !(iten.VALOR.VALOR > 0)){\n                            //console.log(iten.VALOR);\n                            item_invalido = true;                            \n                        }\n                    }catch(erro){\n                        item_invalido = true;     \n                    }\n                    \n\n                    if(item_invalido){\n                        showErro(\"\\\"\"+iten.NOME+\"\\\" é obrigatório\");\n                        validar = false;\n                    }\n                }\n            });\n\n            return validar;\n        },\n        tratarCampos: function(){\n            var itens = [];\n\n            angular.forEach(this.itens, function(iten, key) {\n                var valor, id, tipo, arr_itens, comitens,temp, json;\n\n                id    = iten.ID;\n                valor = \"\";\n                arr_itens = [];\n                tipo  = iten.TIPO;\n                json  = \"\"; \n\n                comitens = false;\n\n                if(iten.TIPO == 1 || iten.TIPO == 2 || iten.TIPO == 3 || iten.TIPO == 5 || iten.TIPO == 6 || iten.TIPO == 8 || iten.TIPO == 10){\n                    valor = iten.VALOR;                            \n                }\n\n                if(iten.TIPO == 4){\n                    comitens = true;\n                    angular.forEach(iten.ITENS, function(a, key) {\n                        if(a.SELECTED){temp = 1;}else{temp = 0;}\n                        arr_itens.push({VALOR: temp, CAMPO_VALOR: a.VALOR});\n                    });\n                }\n\n                if(iten.TIPO == 7){\n                    valor = iten.CONSULTA.item.dados[iten.CAMPO_GRAVAR];\n                    json = JSON.stringify(iten.CONSULTA.item.dados);\n                }\n\n                if(iten.TIPO == 9 ){\n                    try{\n                        valor = iten.VALOR.VALOR;\n                    }catch(erro){\n                        valor = 0;\n                    }                        \n                }\n\n                if(valor == undefined){\n                    valor = 0;\n                }\n\n                itens.push({VALOR:valor, ID:id, TIPO:tipo, ITENS:arr_itens, COMITENS:comitens, JSON:json});\n                \n            });\n\n            return itens;\n        },\n        montarHtml:function(item,id,flag){\n            that = this;\n\n            var ng_model = ''; if(that.model.length > 0){ng_model = 'ng-model=\"'+that.model+'['+id+'].VALOR\"'; }else{ng_model = '';}\n            var ng_modelvalor = ''; if(that.model.length > 0){ng_modelvalor = that.model+'['+id+']'; }else{ng_modelvalor = '';}\n\n            var Input    = '';\n            var disabled = ''; if(item.DISABLED){disabled = 'ng-disabled=\"'+that.model+'['+id+'].DISABLED == true\"'; }else{disabled = '';}\n            var required = ''; if(item.REQUERED == 1){required = 'required'; }else{required = '';}\n            var tamanho  = ''; if(item.TAMANHO == 1){tamanho = 'input-menor';}else{if(item.TAMANHO == 2){tamanho = 'input-medio';}else{tamanho = 'input-maior';}}\n\n            var required2 = ''; if(item.REQUERED == 1){required2 = '<span style=\"color:red;\">*</span>'; }else{required2 = '';}\n            \n            if(flag == 0){\n                Input  += '<div class=\"div-obj-input item-'+id+'\">';\n            }\n\n            if(flag < 2){\n                    Input  += '<button ng-click=\"vm.Create.editInput('+id+')\" class=\"btn btn-primary action-items\">';\n                    Input  += '        <span class=\"glyphicon glyphicon-pencil\"></span>';\n                    Input  += '</button>';\n                    Input  += '<button ng-click=\"vm.Create.deleteInput('+id+')\" class=\"btn btn-danger action-items\">';\n                    Input  += '        <span class=\"glyphicon glyphicon-remove\"></span>';\n                    Input  += '</button>';\n            }\n            \n            if(flag == 2){\n                Input  += '<div class=\"itens-inputs\">';\n            }\n\n            switch(item.TIPO) {\n            case '1':\n                Input += '<div class=\"form-group\">'+\n                         '   <label>'+item.TEXTO+':</label>'+\n                         '   <input '+ng_model+' '+disabled+' type=\"text\" name=\"titulo\" class=\"form-control '+tamanho+'\"  value=\"'+item.VALOR+'\" '+required+' autocomplete=\"off\" '+required+'>'+\n                         '</div> ';\n                break;\n            case '2':\n                Input += '<div class=\"form-group\">'+\n                         '   <label>'+item.TEXTO+':</label>'+\n                         '   <input  '+ng_model+' '+disabled+' type=\"number\" name=\"titulo\" autocomplete=\"off\" value=\"'+item.VALOR+'\" min=\"'+item.MIN+'\" max=\"'+item.MAX+'\" step=\"'+item.STEP+'\" class=\"form-control '+tamanho+'\"  '+required+'>'+\n                         '</div> ';\n                break;\n            case '3':\n                Input += '<div class=\"form-group\">'+\n                         '   <label>'+item.TEXTO+':</label>'+\n                         '   <input  ng-change=\"console.log('+that.model+'['+id+'].VALOR)\" '+ng_model+' '+disabled+' placeholder=\"yyyy-MM-dd\" type=\"date\" autocomplete=\"off\" name=\"data_utilizacao\" class=\"form-control \" style=\"width: 163px;\" '+required+'>'+\n                         '</div> ';\n                break;\n            case '4':\n                Input += '<div class=\"form-group\">'+\n                         '   <label>'+item.TEXTO+':'+required2+'</label><div></div><div class=\"itens-group\">';\n\n                    angular.forEach(item.ITENS, function(iten, key) {\n                        var ch = '';\n                        if(iten.SELECTED){\n                            ch = 'checked';\n                        }\n\n                        if(that.model.length > 0){ng_model = 'ng-model=\"'+that.model+'['+id+'].ITENS['+key+'].SELECTED\"'; }else{ng_model = '';}\n                        Input += '<div class=\"item-checkbox\"><input '+ng_model+' '+disabled+' type=\"checkbox\" autocomplete=\"off\" value=\"'+iten.VALOR+'\" '+ch+' class=\"form-control\" '+required+'><span class=\"label-checkbox\">'+iten.TEXTO+'</span></div>';\n                        \n                    });\n\n                Input += '</div></div>';\n\n                break;\n            case '5':\n                Input += '<div class=\"form-group\">'+\n                         '   <label>'+item.TEXTO+':'+required2+'</label><div></div><div class=\"itens-group\">';\n\n                    angular.forEach(item.ITENS, function(iten, key) {\n                        var ch = '';\n                        if(iten.SELECTED){\n                            ch = 'checked';\n                        }\n                        //if(that.model.length > 0){ng_model = 'ng-model=\"'+that.model+'['+(that.itens.length - 1)+'].ITENS['+key+'].SELECTED\"'; }else{ng_model = '';}\n                        Input += '<div class=\"item-checkbox\"><input '+ng_model+' '+disabled+' type=\"radio\" autocomplete=\"off\" name=\"'+item.NOME+'\" value=\"'+iten.VALOR+'\" '+ch+' class=\"form-control\"><span class=\"label-checkbox\">'+iten.TEXTO+'</span></div>';\n                        \n                    });\n\n                Input += '</div></div>';\n                break;\n            case '6':\n                Input += '<div class=\"form-group\">'+\n                         '   <label>'+item.TEXTO+':</label>';\n                Input += '      <form><div class=\"item-checkbox\" style=\"display: inline-flex;\">';\n                Input += '          <input  '+ng_model+' '+disabled+' class=\"input-range  '+tamanho+'\" type=\"range\"  autocomplete=\"off\" name=\"amountRange\" min=\"'+item.MIN+'\" max=\"'+item.MAX+'\" step=\"'+item.STEP+'\" value=\"'+item.VALOR+'\" oninput=\"this.form.amountInput.value=this.value\" '+required+' />';\n                Input += '          <input class=\"form-control valor-range\" disabled type=\"number\" autocomplete=\"off\" name=\"amountInput\" min=\"'+item.MIN+'\" max=\"'+item.MAX+'\" step=\"'+item.STEP+'\" value=\"'+item.VALOR+'\" oninput=\"this.form.amountRange.value=this.value\" '+required+' />';\n                Input += '      </div></form>';\n                Input += '</div> ';\n                break;\n            case '7':\n\n                item.CONSULTA = consulta.getNew();\n                item.CONSULTA.option.filtro_sql = [];\n                item.CONSULTA.option.filtro_sql.push({SQL_ID : item.SQL_ID, PAINEL_ID: item.PAINEL_ID});\n\n                item.CONSULTA.autoload = item.AUTOLOAD;\n\n                    alerta  = '';\n                    vinculo = '';\n                    if(item.VINCULO_CAMPO.length > 0){\n                        alerta += '<span style=\"margin-left: 5px;\"';\n                        alerta += 'class=\"glyphicon glyphicon-info-sign\" ';\n                        alerta += 't-title=\"Depende de \\''+item.VINCULO_DESCRICAO+'\\'\"> ';\n                        alerta += '</span>';\n\n                        item.CONSULTA.require = [];\n                        \n                        angular.forEach(item.VINCULO_CAMPO, function(a, key) {\n                            item.CONSULTA.require.push(that.model_itens[a].CONSULTA);\n                        });\n                        \n                        item.CONSULTA.vincular();\n\n                        var a = item.CONSULTA.option.filtro_sql;\n                        item.CONSULTA.option.filtro_sql = [];\n                        item.CONSULTA.option.filtro_sql.push({SQL_ID : item.SQL_ID, PAINEL_ID: item.PAINEL_ID});\n\n                        angular.forEach(a, function(b, key) {\n                            item.CONSULTA.option.filtro_sql.push(b);\n                        });\n\n                        \n                    }\n\n                var ng_model = ''; if(that.model.length > 0){ng_model = that.model+'['+id+'].CONSULTA'; }else{ng_model = '';}\n\n                var tamanho  = ''; if(item.TAMANHO == 1){tamanho = 'input-menor';}else{if(item.TAMANHO == 2){tamanho = 'input-medio';}else{tamanho = 'input-maior';}}\n\n                var CAMPO_TABELA   = (item.CAMPO_TABELA   + '').split(',');\n                var CAMPOS_RETORNO = (item.CAMPOS_RETORNO + '').split(',');\n                var DESC_TABELA    = (item.DESC_TABELA    + '').split(',');\n\n                item.CONSULTA.option.obj_ret = [];\n                angular.forEach(CAMPOS_RETORNO, function(iten, key) {\n                    item.CONSULTA.option.obj_ret.push(iten);\n                });\n\n                item.CONSULTA.option.campos_tabela = [];\n                angular.forEach(CAMPO_TABELA, function(iten, key) {\n                    item.CONSULTA.option.campos_tabela.push([iten,DESC_TABELA[key]]);\n                });\n\n                item.CONSULTA.disable(item.DISABLED);           \n\n                item.CONSULTA.componente             = '.consulta_' + id,\n                item.CONSULTA.model                  = ng_model,\n                item.CONSULTA.option.label_descricao = item.TEXTO + alerta,\n                item.CONSULTA.option.obj_consulta    = item.URL_CONSULTA,\n                item.CONSULTA.option.tamanho_Input   = tamanho;\n                item.CONSULTA.option.class           = 'consulta_item_' + id,\n                item.CONSULTA.option.tamanho_tabela  = item.TAMANHO_TABELA;\n                item.CONSULTA.option.required        = item.REQUERED == 1;\n\n                var h = item.CONSULTA.html();\n\n                Input += '<div class=\"consulta_'+id+'\" >'+h+'</div>';\n\n                break;\n            case '8':\n                Input += '<div class=\"form-group\">'+\n                         '   <label>'+item.TEXTO+':</label>'+\n                         '   <input  '+ng_model+' '+disabled+' type=\"time\" name=\"titulo\" class=\"form-control \" autocomplete=\"off\" style=\"width: 94px;\"  '+required+'>'+\n                         '</div> ';\n                break;\n            case '9':\n\n                var ng_model2 = ''; if(that.model.length > 0){ng_model2 = 'ng-model=\"'+that.model+'['+id+'].VALOR\"'; }else{ng_model2 = '';}\n                var ng_model3 = ''; if(that.model.length > 0){ng_model3 = that.model+'['+id+']'; }else{ng_model3 = '';}\n                var vinculo   = '';\n                var alerta    = '';\n\n                //item.VALOR = {};\n\n                        vinculo = '';\n                        if(item.VINCULO_CAMPO > 0){\n                            alerta += '<span  style=\"margin-left: 5px;\"';\n                            alerta += 'class=\"glyphicon glyphicon-info-sign\" ';\n                            alerta += 't-title=\"Depende de \\''+item.VINCULO_DESCRICAO+'\\'\"> ';\n                            alerta += '</span>';\n\n                            var model = ''; if(that.model.length > 0){model = that.model+'['+item.VINCULO_CAMPO+'].VALOR.VALOR'; }else{model = '';}\n\n                                var array = []; \n                                var tmp   = 0;\n\n                                angular.forEach(item.VINCULO_ITENS, function(n, k) {\n                                    if(tmp != n.VALOR_VINCULO){\n                                        tmp = n.VALOR_VINCULO;\n                                        if(array[tmp] == undefined){\n                                            array[tmp] = [];\n                                        }\n                                        if(n.STATUS == 1){\n                                            array[tmp].push(n.VALOR_CAMPO);\n                                        }\n                                    }\n                                });\n\n                            item.VINCULO_ITENS = array;\n                            vinculo += '| inArray:'+ng_model3+'.VINCULO_ITENS['+model+']:\"VALOR\"';\n\n                        }\n\n                if(that.model.length > 0){ng_model = 'ng-options=\\'iten.TEXTO for iten in '+that.model+'['+id+'].ITENS '+vinculo+'\\''; }else{ng_model = '';}\n                \n\n                Input +='<div class=\"form-group\"><label>'+item.TEXTO+':'+alerta+'</label>';\n\n                if(that.model.length > 0){\n                    Input += '   <select '+ng_model2+' '+disabled+' class=\"form-control '+tamanho+'\" '+required+'  '+ng_model+'>';\n                    Input += '   <option value=\"\"> - SELECIONE - </option>'\n                }else{\n\n                    Input += '   <select class=\"form-control '+tamanho+'\" '+required+' >';\n\n                    console.log(item.VINCULO_CAMPO);\n                    \n                    angular.forEach(item.ITENS, function(iten, key) {\n                        var sl = '';\n                        if(iten.SELECTED){\n                            sl = 'selected';\n                        }\n\n                        Input += '<option value=\"'+iten.VALOR+'\" '+sl+'>'+iten.TEXTO+'</option>';\n                    });\n                }\n\n                Input +='   </select></div>';\n\n                break;\n            case '10':\n\n                Input +='<div class=\"form-group\"><label>'+item.TEXTO+':'+required2+'</label>';\n                Input += '<textarea '+disabled+' name=\"\" '+ng_model+' class=\"form-control\" rows=\"5\" cols=\"70\"></textarea><span class=\"contador\"><span>{{('+ng_modelvalor+'.VALOR + \\'\\').length}}</span> caracteres</span>';\n                Input +='</div>';\n\n                break;\n            default:\n                showErro('Tipo do Input não encontrado, Tipo:'+item.TIPO);\n            }\n\n            if(flag == 2 || flag == 0){\n                Input  += '</div>';\n            }\n\n            return Input;    \n        },\n        setData: function(data) {\n            angular.extend(this, data);\n        },        \n        consultar : function (args) {\n\n        },\n        addNewItem : function () {\n            this.Input.ITENS.push({TEXTO : 'ITEM '+(this.Input.ITENS.length + 1),SELECTED: false, VALOR : ''+(this.Input.ITENS.length + 1)});\n        },\n        validarInfo : function (tipo) {\n\n            this.ocultarInfo();\n            $('.info_padrao').css('display','block');\n\n            switch(tipo) {\n            case '1': //Texto\n                $('.info_tamanho').css('display','block');\n                break;\n            case '2': //Número\n                $('.info_tamanho').css('display','block');\n                $('.info_min_max').css('display','block');\n                break;\n            case '3': //Data\n                //$('.info_tamanho').css('display','block');\n                break;\n            case '4': //Check\n                $('.info_new_item').css('display','block');\n                break;\n            case '5': //Radio\n                $('.info_new_item').css('display','block');\n                break;\n            case '6': //Range\n                $('.info_tamanho').css('display','block');\n                $('.info_min_max').css('display','block');\n                break;\n            case '7': //Search\n                $('.info_tamanho').css('display','block');\n                $('.info_search').css('display','block');\n                break;\n            case '8': //Time\n               // $('.info_tamanho').css('display','block');\n            case '9': //Time\n                $('.info_new_item').css('display','block');\n                break;\n            case '10': //Time\n                //$('.info_new_item').css('display','block');\n                break;\n            default:\n                this.ocultarInfo();\n            }\n        },\n        ocultarInfo : function (tipo){\n            $('.item_info').css('display','none');    \n        },\n        uriHistory : function() {\n            window.history.replaceState('', '', encodeURI(urlhost + '/_11140?'+$httpParamSerializer(this)));\n        },\n        gravar: function() {\n            window.history.replaceState('', '', encodeURI(urlhost + '/_11140?'+$httpParamSerializer(this)));\n        },\n        edtInput: function(id) {\n            var item  = null;\n            var index = 0;\n            angular.forEach(this.Inputs, function(obj, key) {\n                if(obj.ID == id){\n                    index = key;\n                    item = obj;\n                }\n            });\n\n            var html = this.montarHtml(this.Input,id,1);\n            angular.copy(this.Input,this.Inputs[index]);\n\n            if(item.TIPO == 7){\n\n                var tamanho  = ''; if(item.TAMANHO == 1){tamanho = 'input-menor';}else{if(item.TAMANHO == 2){tamanho = 'input-medio';}else{tamanho = 'input-maior';}}\n                    \n                item.CONSULTA.componente             = '.consulta_' + id,\n                item.CONSULTA.model                  = 'vm.Create.Inputs['+id+'].CONSULTA',\n                item.CONSULTA.option.label_descricao = item.TEXTO,\n                item.CONSULTA.option.obj_consulta    = '/_11140/Consultar',\n                item.CONSULTA.option.tamanho_Input   = tamanho;\n                item.CONSULTA.option.class           = 'consulta_item_' + id,\n                item.CONSULTA.option.tamanho_tabela  = 300;\n                item.CONSULTA.option.required        = (item.REQUERED == 1);\n\n                console.log(item.CONSULTA);\n\n                item.CONSULTA.compile();\n\n            }else{\n                var obj   = $('.item-'+id+'');\n                var scope = obj.scope(); \n                obj.html(html);\n                var obj   = $('.item-'+id+'');\n                $compile(obj.contents())(scope);\n            }\n\n            $('#modal-add-Inputs').modal('hide');\n        },\n        addInput: function() {\n\n            var Input   = '';\n            var item    = angular.copy(this.Input, item);\n            var erro    = 0;\n            var msgErro = '';\n\n            function validarString(value){\n                var ret = 0;\n\n                if(/[!@#$%*()_+^&{}}:;?.]/gm.test(value)){\n                    ret = 1;\n                }\n\n                if(item.NOME == ''){\n                    ret = 1;    \n                }\n\n                return ret;\n            };\n\n            if(validarString(item.NOME)){    \n                msgErro = 'Este nome é inválido. contem \"!@#$%*()_+^&{}}:;?.\" ou \"\"';\n                erro    = 1;\n            }\n\n            if(item.TIPO == 0){    \n                msgErro = 'Selecione um tipo';\n                erro    = 1;\n            }\n\n            angular.forEach(this.Inputs, function(obj, key) {\n              if(obj.NOME == item.NOME){\n                msgErro = 'Este nome já existe';\n                erro    = 1;\n              }\n            });\n\n            if(erro == 0){\n                var that = this;\n                Input = this.montarHtml(item,this.Inputs.length,0);\n\n                item.EDIT = 0;\n                item.ID   = this.Inputs.length;\n\n                this.Inputs.push(item);\n                this.Input.EDIT = 0;\n\n                var obj   = $('.conteiner-Inputs');\n                var scope = obj.scope(); \n                obj.append(Input);\n                var obj   = $('.conteiner-Inputs').find('.div-obj-input').last();\n                $compile(obj.contents())(scope);\n\n                if(item.TIPO == 7){\n                    var id = (that.Inputs.length -1);\n                    item.CONSULTA = consulta.getNew();\n\n                    var tamanho  = ''; if(item.TAMANHO == 1){tamanho = 'input-menor';}else{if(item.TAMANHO == 2){tamanho = 'input-medio';}else{tamanho = 'input-maior';}}\n                    \n                    item.CONSULTA.componente             = '.consulta_' + id,\n                    item.CONSULTA.model                  = 'vm.Create.Inputs['+id+'].CONSULTA',\n                    item.CONSULTA.option.label_descricao = item.TEXTO,\n                    item.CONSULTA.option.obj_consulta    = '/_11140/Consultar',\n                    item.CONSULTA.option.tamanho_Input   = tamanho;\n                    item.CONSULTA.option.class           = 'consulta_item_' + id,\n                    item.CONSULTA.option.tamanho_tabela  = 300;\n                    item.CONSULTA.option.required        = (item.REQUERED == 1);\n\n                    console.log(item.CONSULTA);\n\n                    item.CONSULTA.compile();\n                    \n                }\n\n\n                $('#modal-add-Inputs').modal('hide');\n\n            }else{\n                showErro(msgErro);\n            }\n        },\n        editInput: function(id) {\n            var index = 0;\n            angular.forEach(this.Inputs, function(obj, key) {\n                if(obj.ID == id){\n                    index = key;\n                }\n            }); \n\n            var item = angular.copy(this.Inputs[index], item); ;\n\n            item.EDIT = 1;\n\n            this.Input = item;\n\n            this.validarInfo(item.TIPO);\n            $('#modal-add-Inputs').modal('show');\n        },\n        deleteInput: function(id) {\n\n            var index = 0;\n            angular.forEach(this.Inputs, function(obj, key) {\n                if(obj.ID == id){\n                    index = key;\n                }\n            });\n\n            var item = this.Inputs[index];\n            var obj = this.Inputs;\n\n            addConfirme('Excluir Input?',\n                    'Deseja realmente excluir o Input:'+item.TEXTO+' ('+item.NOME+')'\n                    ,[obtn_ok,obtn_cancelar],\n                [\n                {ret:1,func:function(e){\n\n                    obj.splice(index, 1);\n                    $('.item-'+id).remove();\n\n                }},\n                {ret:2,func:function(e){\n\n\n                }},\n                ]  \n            );\n            \n\n        },\n        modalAddInput: function() {\n            angular.copy(Input_temp, this.Input);\n            this.Input.NOME = 'OBJETO'+(this.Inputs.length + 1);\n            this.ocultarInfo();\n\n            console.log('Teste');\n            $('#modal-add-Inputs').modal('show');\n        },\n        model_itens : [],\n        Input: {},\n        Inputs : []\n    };\n\n    /**\n     * Return the constructor function\n     */\n    return Create;\n};","      \nangular\n    .module('app')\n    .factory('Index', Index);\n    \n\n\tIndex.$inject = [\n        '$ajax',\n        '$httpParamSerializer',\n        '$rootScope',\n        'gScope'\n    ];\n\nfunction Index($ajax, $httpParamSerializer, $rootScope, gScope) {\n\n    /**\n     * Constructor, with class name\n     */\n    function Index(data) {\n        if (data) {\n            this.setData(data);\n        }\n    }\n    \n    var url_base  = '/_11140/';\n\n    /**\n     * Public method, assigned to prototype\n     */\n    Index.prototype = {\n\t\tPAINEIS : [],\n        setData: function(data) {\n            angular.extend(this, data);\n        },        \n        consultar : function (args) {\n\n        },\n        uriHistory : function() {\n            window.history.replaceState('', '', encodeURI(urlhost + '/_11140?'+$httpParamSerializer(this)));\n        },\n\t\tinit: function (){\n\t\t\tvar ds = {\n\t\t\t\tSTATUS : 1\n\t\t\t};\n\t\t\t\n\t\t\tvar that = this;\n\n\t\t\t$ajax.post('/_11140/Consultar',ds)\n\t\t\t\t.then(function(response) {\n\t\t\t\t\tthat.PAINEIS = response;\t\t\t\t\t\n\t\t\t\t}\n\t\t\t);\n\t\t},\n        openLink:function(id){\n            window.location.href = urlhost + url_base +  id;\n        }\n    };\n\n    /**\n     * Return the constructor function\n     */\n    return Index;\n};","angular\n    .module('app')\n    .value('gScope', {\n        indexOfAttr : function(array,attr, value) {\n            for(var i in array) {\n                if(array[i][attr] === value) {\n                    return i;\n                }\n            }\n            return -1;\n        }\n    })\n    .controller('Ctrl', Ctrl);\n\n\tCtrl.$inject = [\n        '$ajax',\n        '$scope',\n        '$window',\n        '$timeout',\n        'gScope',\n        'Create', \n        'Index',\n        '$consulta',\n        '$httpParamSerializer'\n    ];\n\n\tfunction Ctrl($ajax, $scope, $window, $timeout, gScope, Create, Index, $consulta,$httpParamSerializer) {\n\n\t\tvar vm = this;\n\t\tvm.DADOS = [];\n\t\t\n        var pagina = window.location.pathname;\n        if(pagina == '/_11140'){\n            \n            vm.Index         = new Index();\n            gScope.Index     = vm.Index;\n            vm.DADOS.PAINEIS = [];\n            vm.Index.init();\n\n        }else{\n\n            vm.Create        = new Create();\n            gScope.Create    = vm.Create;\n\n            $scope.$watch('vm.Create.Input.TIPO', function (newValue, oldValue, scope) {\n                if ( newValue != oldValue) {\n                    vm.Create.validarInfo(newValue);\n                } \n            });\n\n            /*\n            vm.Consulta     = new $consulta();\n            gScope.Consulta = vm.Consulta;\n\n            vm.Consulta_GP1 = vm.Consulta.getNew();\n            vm.Consulta_GP2 = vm.Consulta.getNew();\n            vm.Consulta_GP3 = vm.Consulta.getNew();\n\n            vm.Consulta_GP1.componente             = '.consulta_angularjs1',\n            vm.Consulta_GP1.model                  = 'vm.Consulta_GP1',\n            vm.Consulta_GP1.option.label_descricao = 'GP1:',\n            vm.Consulta_GP1.option.obj_consulta    = '/_11140/Consultar',\n            vm.Consulta_GP1.option.tamanho_Input   = 'input-medio';\n            vm.Consulta_GP1.option.class           = 'consulta_gp_grup';\n            vm.Consulta_GP3.option.tamanho_tabela  = 250;\n\n            vm.Consulta_GP2.componente             = '.consulta_angularjs2',\n            vm.Consulta_GP2.model                  = 'vm.Consulta_GP2',\n            vm.Consulta_GP2.option.label_descricao = 'GP2:',\n            vm.Consulta_GP2.option.obj_consulta    = '/_11140/Consultar',\n            vm.Consulta_GP2.option.tamanho_Input   = 'input-medio';\n            vm.Consulta_GP2.option.class           = 'consulta_gp_grup2';\n            vm.Consulta_GP3.option.tamanho_tabela  = 250;\n\n            vm.Consulta_GP3.componente             = '.consulta_angularjs3',\n            vm.Consulta_GP3.model                  = 'vm.Consulta_GP3',\n            vm.Consulta_GP3.option.label_descricao = 'GP3:',\n            vm.Consulta_GP3.option.obj_consulta    = '/_11140/getClientes',\n            vm.Consulta_GP3.option.tamanho_Input   = 'input-medio';\n            vm.Consulta_GP3.option.class           = 'consulta_gp_grup3';\n            vm.Consulta_GP3.option.tamanho_tabela  = 480;\n            vm.Consulta_GP3.option.campos_tabela   = [['ID','ID'],['DESCRICAO','DESCRIÇÃO'],['STATUS','STATUS']],\n\n            vm.Consulta_GP1.compile();\n            vm.Consulta_GP2.compile();\n            vm.Consulta_GP3.compile();\n\n            vm.Consulta_GP2.require  = vm.Consulta_GP1;\n            vm.Consulta_GP3.require  = [vm.Consulta_GP1,vm.Consulta_GP2];\n            vm.Consulta_GP2.vincular();\n            vm.Consulta_GP3.vincular();\n\n            var arr = vm.Consulta.getHistory();\n\n            //vm.Consulta_GP3.option.filtro_sql = {GP1: vm.Consulta_GP2.item};\n\n            vm.Consulta_GP3.onSelect = function(){\n                var put = {TESTE:'teste'};\n                vm.Consulta.postHistory(put,'/_11140/create');\n            };\n\n            vm.Consulta_GP3.onClear = function(){\n                vm.Consulta.clearHistory('/_11140/create');\n            };\n\n            vm.Consulta_GP3.validarInput = function(){\n                var ret = true;\n                if(vm.Consulta_GP1.selected == null){\n                    //showSuccess('Selecione o GP1 e GP2');\n                    ret = false;    \n                }\n                return ret;\n            }\n            */\n\n\n        }\n\t}   \n    "]}