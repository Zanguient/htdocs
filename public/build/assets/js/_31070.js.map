{"version":3,"sources":["_31070.app.js","_31070.controller.js","_31070.factory.incentivo.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"_31070.js","sourcesContent":["/**\n * App do objeto _31070 - Cadastro de Incentivos\n */\n\n'use strict';\n\nangular\n\t.module('app', [\n\t\t'vs-repeat', \n        'gc-find',\n\t\t'gc-ajax',\n\t\t'gc-transform',\n\t\t'gc-form'\n\t])\n;","/**\r\n * Controller do objeto _31070 - Cadastro de Incentivos\r\n */\r\n\r\nangular\r\n\t.module('app')\r\n\t.value('gScope', {})\r\n\t.controller('Ctrl', Ctrl);\r\n\r\nCtrl.$inject = [\r\n\t'$scope',\r\n\t'gScope',\r\n\t'Historico',\r\n\t'Incentivo'\r\n];\r\n\r\nfunction Ctrl( \r\n\t$scope,\r\n\tgScope,\r\n\tHistorico,\r\n\tIncentivo\r\n) {\r\n\r\n\t// Public instance.\r\n\tgScope.vm = this;\r\n\r\n\t// Local instance.\r\n\tvar vm = this;\r\n\r\n\t// Global variables.\r\n\tvm.tipoTela      = 'listar';\r\n\tvm.permissaoMenu = {};\r\n\tvm.Historico     = new Historico('vm.Historico', $scope);\r\n\r\n\t// Objects.\r\n\tvm.Incentivo = new Incentivo();\r\n}","/**\r\n * Factory index do objeto _31070 - Cadastro de Incentivos\r\n */\r\n\r\n\r\nangular\r\n    .module('app')\r\n    .factory('Incentivo', Incentivo);    \r\n\r\nIncentivo.$inject = [\r\n    '$ajax',\r\n    'gScope'\r\n];\r\n\r\nfunction Incentivo($ajax, gScope) {\r\n\r\n    // Private variables.\r\n    var obj = null;\r\n\r\n    /**\r\n     * Constructor, with class name.\r\n     */\r\n    function Incentivo() {\r\n\r\n        obj = this;\r\n\r\n        // Public variables\r\n        this.filtro = {\r\n            DATA_INI_INPUT: moment().subtract(3, 'month').toDate(),\r\n            DATA_FIM_INPUT: moment().toDate()\r\n        };\r\n        this.dado = {};\r\n\r\n        obj.ALTERANDO = false;\r\n        obj.SELECTED  = null;\r\n        obj.DADOS     = []\r\n        obj.DADOS.push({ID:'', DESCRICAO:'', PERCENTUAL: '',PERCENTUAL_IR:''});\r\n        obj.ORDER_BY  = 'ID';\r\n\r\n        obj.consultar = function(){\r\n            var ds = {\r\n                    FLAG : 0\r\n                };\r\n\r\n            $ajax.post('/_31070/consultar',ds,{contentType: 'application/json'})\r\n                .then(function(response) {\r\n                    obj.DADOS = response;     \r\n                }\r\n            );\r\n        };\r\n\r\n        obj.cancelar = function(){\r\n            obj.ALTERANDO = false;\r\n        }\r\n\r\n        obj.modalIncluir = function(){\r\n            obj.ALTERANDO = false;\r\n\r\n            obj.NOVO = {\r\n                ID : 0,\r\n                DESCRICAO : '',\r\n                PERCENTUAL : 0,\r\n                PERCENTUAL_IR : 0\r\n            };\r\n\r\n            $('#modal-incluir').modal();  \r\n        };\r\n\r\n        obj.modalAlterar = function(){\r\n            obj.ALTERANDO = true;\r\n\r\n            obj.NOVO = {\r\n                ID            : obj.SELECTED.ID,\r\n                DESCRICAO     : obj.SELECTED.DESCRICAO,\r\n                PERCENTUAL    : Number(obj.SELECTED.PERCENTUAL),\r\n                PERCENTUAL_IR : Number(obj.SELECTED.PERCENTUAL_IR)\r\n            };\r\n\r\n            $('#modal-incluir').modal();  \r\n        };\r\n\r\n        obj.incluir = function(){\r\n            addConfirme('<h4>Confirmação</h4>',\r\n                'Deseja realmente gravar?',\r\n                [obtn_sim,obtn_nao],\r\n                [{ret:1,func:function(){\r\n                    var ds = {\r\n                        ITEM : obj.NOVO\r\n                    };\r\n\r\n                    $ajax.post('/_31070/incluir',ds,{contentType: 'application/json'})\r\n                        .then(function(response) {\r\n                            obj.consultar();\r\n                            $('#modal-incluir').modal('hide'); \r\n                            showSuccess('Gravado com sucesso!'); \r\n                            obj.ALTERANDO = false;   \r\n                        }\r\n                    );\r\n                }}]     \r\n            );\r\n\r\n            \r\n        };\r\n\r\n        obj.alterar = function(){\r\n            addConfirme('<h4>Confirmação</h4>',\r\n                'Deseja realmente gravar?',\r\n                [obtn_sim,obtn_nao],\r\n                [{ret:1,func:function(){\r\n                    var ds = {\r\n                        ITEM : obj.NOVO\r\n                    };\r\n\r\n                    $ajax.post('/_31070/alterar',ds,{contentType: 'application/json'})\r\n                        .then(function(response) {\r\n                            obj.consultar();\r\n                            $('#modal-incluir').modal('hide'); \r\n                            showSuccess('Alterado com sucesso!');\r\n                            obj.ALTERANDO = false;  \r\n                        }\r\n                    );\r\n                }}]     \r\n            );\r\n        };\r\n\r\n        obj.excluir = function(){\r\n            addConfirme('<h4>Confirmação</h4>',\r\n                'Deseja realmente excluir o incentivo ('+obj.SELECTED.DESCRICAO+')?',\r\n                [obtn_sim,obtn_nao],\r\n                [{ret:1,func:function(){\r\n                    var ds = {\r\n                            ITEM : obj.SELECTED\r\n                        };\r\n\r\n                    $ajax.post('/_31070/excluir',ds,{contentType: 'application/json'})\r\n                        .then(function(response) {\r\n                            obj.consultar();\r\n                            showSuccess('Excluido com sucesso!'); \r\n                            obj.ALTERANDO = false;   \r\n                        }\r\n                    ); \r\n                }}]     \r\n            );\r\n        };\r\n\r\n        obj.consultar();\r\n    }\r\n\r\n\r\n    /**\r\n     * Return the constructor function\r\n     */\r\n    return Incentivo;\r\n};"]}