{"version":3,"sources":["_13010.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"_13010.js","sourcesContent":["/**\r\n * Script com funções de:\r\n * - Pesquisar produto \r\n * - Adicionar campos para mais de um produto\r\n * */\r\n\r\n(function($) {\r\n\t\r\n\t{ //Enviar Arquivo\r\n\t\t$(':file').change(function() {\r\n\t\t\tenviarArquivo($(this), 'RequisicaoDeCompra');\t//função em 'arquivo.js'\r\n\t\t});\r\n\t}\r\n\t\r\n\t$(document).on('click', '.tamanho-produto', function(){\r\n\t\t$('.div-tamanho-produto').show();\r\n\t});\r\n\r\n    $(document).on('click', '.settamanho', function(){\r\n\r\n        var valor = $(this).attr('tamanho');\r\n\t\tvar posicao = $(this).attr('posicao');\r\n\r\n        $('.setar-tamanho')\r\n\t\t\t.val(valor)\r\n\t\t\t.next('.tam-posicao')\r\n\t\t\t.val(posicao);\r\n\t\r\n        $('.setar-tamanho')\r\n\t\t\t.removeClass('setar-tamanho');\r\n\r\n    });\r\n\r\n    $(document).on('click', '.sett', function(){\r\n        var but = $(this).parent().parent();\r\n        but.children('.tamanho-produto').addClass('setar-tamanho');\r\n        var ProdID = but.parent().parent().find('input[name=\"_produto_id[]\"]').val();\r\n\r\n        var fdata = new FormData();\r\n        fdata.append('ProdID', ProdID);\r\n\t\t\r\n\t\t//ajax\r\n\t\tvar type\t\t\t= 'POST',\r\n\t\t\turl\t\t\t\t= '/_13010/listarTamanho',\r\n\t\t    data\t\t\t= fdata,\r\n\t\t\tcache\t\t\t= false,\r\n\t\t\tcontentType\t\t= false,\r\n\t\t\tprocessData\t\t= false,\r\n\t\t\tsuccess\t\t\t= function(data) {\r\n\r\n                if (data){\r\n\t\t\t\t\t\r\n                    var desc = data[0][0][0];\r\n                    var total_tamanhos = data[0][0][1];\r\n\t\t\t\t\tvar posicao;\r\n                    var Tan;\r\n                    var abilitado;\r\n\r\n                    for (i = 1; i <= 20; i++) {\r\n\r\n                    \ttamanho   = data[0][i][0];\r\n\t\t\t\t\t\tabilitado = data[0][i][1];\r\n\t\t\t\t\t\tposicao   = data[0][i][2];\r\n\r\n                        if (i < 10){\r\n                            Tan = '.T0'+i;\r\n                        }else{\r\n                            Tan = '.T'+i;\r\n                        }\r\n\r\n                        // if ((data[0][i][1] === 0) || (total_tamanhos <= i)){\r\n                        if ((data[0][i][0] === '') || (total_tamanhos+1 <= i)){\r\n                            $(Tan).prop( \"disabled\", true );\r\n                        }else{\r\n                            $(Tan).prop( \"disabled\", false );\r\n                        }\r\n                        \r\n                        tamanho = (tamanho == '') ? '00' : tamanho;\r\n\r\n\t\t\t\t\t\tif(abilitado == 0){\r\n\t\t\t\t\t\t\t$(Tan).prop( \"disabled\", true );\r\n\t\t\t\t\t\t}\r\n\r\n                        $(Tan).attr(\"tamanho\",tamanho);\r\n                        $(Tan).attr(\"abilitado\",abilitado);\r\n\t\t\t\t\t\t$(Tan).attr(\"posicao\",posicao);\r\n                        $(Tan).find(Tan).html(tamanho);\r\n                        //$('.TGRADE').html('GRADE - ('+desc+')');\r\n\r\n\r\n                    }\r\n\r\n                    for (i = total_tamanhos+1; i <= 20; i++) {\r\n\r\n                        if (i < 10){\r\n                            Tan = '.T0'+i;\r\n                        }else{\r\n                            Tan = '.T'+i;\r\n                        }\r\n\r\n                        $(Tan).prop( \"disabled\", true );\r\n\r\n                        tamanho = '00';\r\n\t\t\t\t\t\tposicao = '00';\r\n\r\n                        $(Tan).attr(\"tamanho\",tamanho);\r\n\t\t\t\t\t\t$(Tan).attr(\"posicao\",posicao);\r\n                        $(Tan).find(Tan).html(tamanho);\r\n\r\n                    }\r\n\r\n                }else{\r\n\r\n                    for (i = 1; i <= 20; i++) {\r\n\r\n                            if (i < 10){\r\n                                Tan = '.T0'+i;\r\n                            }else{\r\n                                Tan = '.T'+i;\r\n                            }\r\n\r\n                            $(Tan).prop( \"disabled\", true );\r\n\r\n                            tamanho = '00';\r\n\r\n                            $(Tan).attr(\"tamanho\",tamanho);\r\n                            $(Tan).find(Tan).html(tamanho);\r\n\r\n                    }\r\n                }\r\n\r\n\t\t    },\r\n            error\t\t\t= function(e) {\r\n\r\n                for (i = 1; i <= 20; i++) {\r\n\r\n                        if (i < 10){\r\n                            Tan = '.T0'+i;\r\n                        }else{\r\n                            Tan = '.T'+i;\r\n                        }\r\n\r\n                        $(Tan).prop( \"disabled\", true );\r\n\r\n                        tamanho = '00';\r\n\r\n                        $(Tan).attr(\"tamanho\",tamanho);\r\n                        $(Tan).find(Tan).html(tamanho);\r\n\r\n                }\r\n\t\t    }\r\n\t\t;\r\n\t\t\r\n\t\texecAjax1(type, url, data, success, error, null, false, null, cache, contentType, processData);\r\n\r\n    });\r\n\t\r\n\t{ /** Pesquisar Centro de Custo */\r\n\t\t\r\n\t\tvar filtro;\r\n\t\tvar campo_ccusto;\r\n\t\tvar btn_filtro_ccusto;\r\n\t\tvar input_group;\r\n\t\tvar itens_ccusto;\r\n\t\tvar _ccusto_id;\r\n\t\tvar tempo_focus;\r\n\t\tvar ccusto_selecionado = false;\r\n\r\n\t\t/**\r\n\t\t * Filtrar objeto.\r\n\t\t */\r\n\t\tfunction filtrarCCusto() {\r\n\r\n\t\t\tcampo_ccusto\t\t= $('#ccusto-descricao');\t//campo\r\n\t\t\tbtn_filtro_ccusto\t= $('.btn-filtro-ccusto');\r\n\r\n\t\t\tinput_group\t\t\t= $(campo_ccusto).parent('.input-group');\t//input-group\r\n\t\t\t_ccusto_id\t\t\t= $('input[name=\"_ccusto_id\"]');\r\n\r\n\t\t\tfiltro = campo_ccusto.val();\r\n\r\n\t\t\t//esvazia campo hidden caso algum item já tenha sido escolhido antes\r\n\t\t\tif(ccusto_selecionado) \r\n\t\t\t\t$(_ccusto_id).val('');\r\n\r\n\t\t\tif( !filtro ) {\r\n\t\t\t\tfechaListaCCusto( input_group );\r\n\t\t\t\t$(_ccusto_id).val('');\r\n\t\t\t\t//return false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//ajax\r\n\t\t\tvar type\t= 'POST',\r\n\t\t\t\turl\t\t= '/_20030/pesquisaCCusto',\r\n\t\t\t\tdata\t= {'filtro': filtro},\r\n\t\t\t\tsuccess\t= function(data) {\r\n\r\n\t\t\t\t\tabreListaCCusto( input_group );\r\n\t\t\t\t\t\r\n\t\t\t\t\t$('.lista-ccusto')\r\n\t\t\t\t\t\t.html(data);\r\n\r\n\t\t\t\t\t//existem dados cadastrados\r\n\t\t\t\t\tif( data.indexOf('nao-cadastrado') === -1 ) {\r\n\r\n\t\t\t\t\t\titens_ccusto = $('ul.ccusto li a');\r\n\r\n\t\t\t\t\t\tselecItemListaCCusto( $(itens_ccusto), campo_ccusto );\r\n\r\n\t\t\t\t\t\t$(itens_ccusto)\r\n\t\t\t\t\t\t\t.focusout(function() {\r\n\r\n\t\t\t\t\t\t\t\tif(tempo_focus) \r\n\t\t\t\t\t\t\t\t\tclearTimeout(tempo_focus);\r\n\r\n\t\t\t\t\t\t\t\ttempo_focus = setTimeout(function() {\r\n\r\n\t\t\t\t\t\t\t\t\tif( !$(itens_ccusto).is(':focus') && \r\n\t\t\t\t\t\t\t\t\t\t!$(campo_ccusto).is(':focus') && \r\n\t\t\t\t\t\t\t\t\t\t!$(btn_filtro_ccusto).is(':focus') \r\n\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t$(campo_ccusto).val('');\r\n\t\t\t\t\t\t\t\t\t\tfechaListaCCusto( input_group );\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t}, 200);\r\n\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t$(campo_ccusto)\r\n\t\t\t\t\t\t\t.focusout(function() {\r\n\r\n\t\t\t\t\t\t\t\tif(tempo_focus) \r\n\t\t\t\t\t\t\t\t\tclearTimeout(tempo_focus);\r\n\r\n\t\t\t\t\t\t\t\ttempo_focus = setTimeout(function() {\r\n\r\n\t\t\t\t\t\t\t\t\tif( !$(itens_ccusto).is(':focus') &&\r\n\t\t\t\t\t\t\t\t\t\t!$(_ccusto_id).val() && \r\n\t\t\t\t\t\t\t\t\t\t!$(btn_filtro_ccusto).is(':focus') \r\n\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t$(campo_ccusto).val('');\r\n\t\t\t\t\t\t\t\t\t\tfechaListaCCusto( input_group );\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t}, 200);\r\n\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\t$(_ccusto_id).val('');\r\n\r\n\t\t\t\t\t\t$(campo_ccusto)\r\n\t\t\t\t\t\t\t.focusout(function() {\r\n\t\t\t\t\t\t\t\tif( $('.lista-ccusto').children().children().hasClass('nao-cadastrado') ) {\r\n\t\t\t\t\t\t\t\t\t$(campo_ccusto).val('');\r\n\t\t\t\t\t\t\t\t\tfechaListaCCusto( input_group );\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t;\t\t\t\t\r\n\r\n\t\t\texecAjax2(type, url, data, success, null, btn_filtro_ccusto);\r\n\r\n\t\t}\r\n\r\n\t\t//Abre resultado da filtragem\r\n\t\tfunction abreListaCCusto(ccusto) {\r\n\t\t\t\r\n\t\t\t$(ccusto)\r\n\t\t\t\t.next('.lista-ccusto-container')\r\n\t\t\t\t.addClass('ativo');\r\n\t\t\r\n\t\t\t$(btn_filtro_ccusto)\r\n\t\t\t\t.attr('tabindex', '-1');\r\n\t\t}\r\n\r\n\t\t//Fecha resultado da filtragem\r\n\t\tfunction fechaListaCCusto(ccusto) {\r\n\t\t\t\r\n\t\t\t$(ccusto)\r\n\t\t\t\t.next('.lista-ccusto-container')\r\n\t\t\t\t.removeClass('ativo')\r\n\t\t\t\t.children('.lista-ccusto')\r\n\t\t\t\t.empty();\r\n\t\t\r\n\t\t\t$(btn_filtro_ccusto)\r\n\t\t\t\t.removeAttr('tabindex');\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Preencher campos de acordo com o item selecionado.\r\n\t\t * \r\n\t\t * @param {object} itens\r\n\t\t * @param {object} campo\r\n\t\t * @returns {undefined}\r\n\t\t */\r\n\t\tfunction selecItemListaCCusto(itens, campo) {\r\n\r\n\t\t\t$(itens).click(function(e) {\r\n\t\t\t\t\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\t\r\n\t\t\t\t$(campo)\r\n\t\t\t\t\t.val( $(this).text() )\r\n\t\t\t\t\t.focus();\r\n\t\t\t\r\n\t\t\t\tselecionadoCCusto();\r\n\t\t\t\r\n\t\t\t\t$(_ccusto_id)\r\n\t\t\t\t\t.val( $(this).nextAll('.ccusto-id').val() )\r\n\t\t\t\t\t.trigger('change');\r\n\t\t\t\r\n\t\t\t\tfechaListaCCusto( input_group );\r\n\t\t\t\tccusto_selecionado = true;\r\n\t\t\t});\r\n\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Ações que devem acontecer após o item ser selecionado.\r\n\t\t */\r\n\t\tfunction selecionadoCCusto() {\r\n\t\t\t\r\n\t\t\t$('#ccusto-descricao')\r\n\t\t\t\t.attr('readonly', true);\r\n\r\n\t\t\t$('.btn-filtro-ccusto')\r\n\t\t\t\t.hide();\r\n\r\n\t\t\t$('.btn-apagar-filtro-ccusto')\r\n\t\t\t\t.show()\r\n\t\t\t\t.click(function() {\r\n\r\n\t\t\t\t\t$(this)\r\n\t\t\t\t\t\t.siblings('input')\r\n\t\t\t\t\t\t.removeAttr('readonly');\r\n\r\n\t\t\t\t\t$(this)\r\n\t\t\t\t\t\t.hide()\r\n\t\t\t\t\t\t.prev('button')\r\n\t\t\t\t\t\t.show();\r\n\r\n\t\t\t\t\t$('#ccusto-descricao')\r\n\t\t\t\t\t\t.val('')\r\n\t\t\t\t\t\t.focus();\r\n\r\n\t\t\t\t\t$('input[name=\"_ccusto_id\"]')\r\n\t\t\t\t\t\t.val('');\r\n\r\n\t\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t/**\r\n\t\t * Eventos para o filtro de CCusto.\r\n\t\t */\r\n\t\tfunction iniciarFiltroCCusto() {\r\n\t\t\t\r\n\t\t\t//Se o item já estiver selecionado (tela de update), efetua as devidas ações.\r\n\t\t\tif ( $('input[name=\"_ccusto_id\"]').val() !== '' )\r\n\t\t\t\tselecionadoCCusto();\r\n\r\n\t\t\t//Botão de filtrar\r\n\t\t\t$('.btn-filtro-ccusto').on({\r\n\r\n\t\t\t\tclick: function() {\r\n\r\n\t\t\t\t\tif ( !$(_ccusto_id).val() )\r\n\t\t\t\t\t\tfiltrarCCusto();\r\n\t\t\t\t},\r\n\r\n\t\t\t\tfocusout: function() {\r\n\r\n\t\t\t\t\tif(tempo_focus) clearTimeout(tempo_focus);\r\n\r\n\t\t\t\t\ttempo_focus = setTimeout(function() {\r\n\r\n\t\t\t\t\t\tif ( !$('input[name=\"_ccusto_id\"]').val() && \r\n\t\t\t\t\t\t\t $('.lista-ccusto').is(':empty') \r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t   $('#ccusto-descricao').val('');\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ( !$('input[name=\"_ccusto_id\"]').val() && \r\n\t\t\t\t\t\t\t !$('.lista-ccusto ul li a').is(':focus') && \r\n\t\t\t\t\t\t\t  $('#ccusto-descricao').val() \r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t$('#ccusto-descricao').val('');\r\n\t\t\t\t\t\t\tfechaListaCCusto(input_group);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif ( !$('input[name=\"_ccusto_id\"]').val() && \r\n\t\t\t\t\t\t\t !$('.lista-ccusto ul li a').is(':focus') && \r\n\t\t\t\t\t\t\t !$('#ccusto-descricao').val() \r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tfechaListaCCusto(input_group);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}, 200);\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t\t//Campo de filtro\r\n\t\t\t$('#ccusto-descricao').on({\r\n\r\n\t\t\t\tkeydown: function(e) {\r\n\r\n\t\t\t\t\t//Eventos após a escolha de um item\r\n\t\t\t\t\tif ( $(this).is('[readonly]') ) {\r\n\r\n\t\t\t\t\t\t//Deletar teclando 'Backspace' ou 'Delete'\r\n\t\t\t\t\t\tif ( (e.keyCode === 8) || (e.keyCode === 46) ) {\r\n\t\t\t\t\t\t\t$('.btn-apagar-filtro-ccusto').click();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\r\n\t\t\t\t\t\t//Pesquisar com 'Enter'\r\n\t\t\t\t\t\tif (e.keyCode === 13) {\r\n\t\t\t\t\t\t\tfiltrarCCusto();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\tfocusout: function() {\r\n\r\n\t\t\t\t\t//verificar quando o campo deve ser zerado\r\n\t\t\t\t\tif(tempo_focus)\r\n\t\t\t\t\t\tclearTimeout(tempo_focus);\r\n\r\n\t\t\t\t\ttempo_focus = setTimeout(function() {\r\n\r\n\t\t\t\t\t\tif ( !$('input[name=\"_ccusto_id\"]').val() && \r\n\t\t\t\t\t\t\t $('.lista-ccusto').is(':empty') &&\r\n\t\t\t\t\t\t\t !$('.btn-filtro-ccusto').is(':focus') \r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t$('#ccusto-descricao').val('');\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}, 200);\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\t\t\r\n\t\t}\r\n\t\t\r\n\t\tiniciarFiltroCCusto();\r\n\t}\r\n\r\n\r\n\t{ /** Pesquisar Gestor */\r\n\r\n\t\tvar filtro;\r\n\t\tvar campo_gestor;\r\n\t\tvar btn_filtro_gestor;\r\n\t\tvar input_group;\r\n\t\tvar itens_gestor;\r\n\t\tvar _gestor_id;\r\n\t\tvar _gestor_email;\r\n\t\tvar tempo_focus;\r\n\t\tvar gestor_selecionado = false;\r\n\r\n\t\t/**\r\n\t\t * Filtrar objeto.\r\n\t\t */\r\n\t\tfunction filtrarGestor() {\r\n\r\n\t\t\tcampo_gestor\t\t= $('#gestor-descricao');\t//campo\r\n\t\t\tbtn_filtro_gestor\t= $('.btn-filtro-gestor');\r\n\r\n\t\t\tinput_group\t\t\t= $(campo_gestor).parent('.input-group');\t//input-group\r\n\t\t\t_gestor_id\t\t\t= $('input[name=\"_gestor_id\"]');\r\n\t\t\t_gestor_email\t\t= $('input[name=\"_gestor_email\"]');\r\n\r\n\t\t\tfiltro\t\t\t\t= campo_gestor.val();\r\n\r\n\t\t\t//esvazia campo hidden caso algum item já tenha sido escolhido antes\r\n\t\t\tif(gestor_selecionado) \r\n\t\t\t\t$(_gestor_id).val('');\r\n\r\n\t\t\tif( !filtro ) {\r\n\t\t\t\tfechaListaGestor( input_group );\r\n\t\t\t\t$(_gestor_id).val('');\r\n\t\t\t\t//return false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//ajax\r\n\t\t\tvar type\t= 'POST',\r\n\t\t\t\turl\t\t= '/_13010/pesquisaGestor',\r\n\t\t\t\tdata\t= {'filtro': filtro},\r\n\t\t\t\tsuccess = function(data) {\r\n\r\n\t\t\t\t\tabreListaGestor( input_group ); \r\n\t\t\t\t\t$('.lista-gestores').html(data);\r\n\r\n\t\t\t\t\t//se existem dados cadastrados\r\n\t\t\t\t\tif( data.indexOf('nao-cadastrado') === -1 ) {\r\n\r\n\t\t\t\t\t\titens_gestor = $('ul.gestores li a');\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tselecItemListaGestor( $(itens_gestor), campo_gestor );\r\n\r\n\t\t\t\t\t\t$(itens_gestor)\r\n\t\t\t\t\t\t\t.focusout(function() {\r\n\r\n\t\t\t\t\t\t\t\tif(tempo_focus) clearTimeout(tempo_focus);\r\n\r\n\t\t\t\t\t\t\t\ttempo_focus = setTimeout(function() {\r\n\r\n\t\t\t\t\t\t\t\t\tif( !$(itens_gestor).is(':focus') && \r\n\t\t\t\t\t\t\t\t\t\t!$(campo_gestor).is(':focus') && \r\n\t\t\t\t\t\t\t\t\t\t!$(btn_filtro_gestor).is(':focus')\r\n\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t$(campo_gestor).val('');\r\n\t\t\t\t\t\t\t\t\t\tfechaListaGestor( input_group );\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}, 200);\r\n\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t$(campo_gestor)\r\n\t\t\t\t\t\t\t.focusout(function() { \r\n\r\n\t\t\t\t\t\t\t\tif(tempo_focus) clearTimeout(tempo_focus);\r\n\r\n\t\t\t\t\t\t\t\ttempo_focus = setTimeout(function() {\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tif( !$(itens_gestor).is(':focus') && \r\n\t\t\t\t\t\t\t\t\t\t!$(_gestor_id).val() && \r\n\t\t\t\t\t\t\t\t\t\t!$(btn_filtro_gestor).is(':focus')\r\n\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t$(campo_gestor).val('');\r\n\t\t\t\t\t\t\t\t\t\tfechaListaGestor( input_group );\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}, 200);\r\n\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\t$(_gestor_id).val('');\r\n\r\n\t\t\t\t\t\t$(campo_gestor)\r\n\t\t\t\t\t\t\t.focusout(function() { \r\n\t\t\t\t\t\t\t\tif( $('.lista-gestores').children().children().hasClass('nao-cadastrado') ) {\r\n\t\t\t\t\t\t\t\t\t$(campo_gestor).val('');\r\n\t\t\t\t\t\t\t\t\tfechaListaGestor( input_group );\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t;\r\n\t\t\t\t\r\n\t\t\texecAjax2(type, url, data, success, null, btn_filtro_gestor);\r\n\r\n\t\t}\r\n\r\n\t\t//Abre resultado da filtragem\r\n\t\tfunction abreListaGestor(gestor) {\r\n\t\t\t\r\n\t\t\t$(gestor)\r\n\t\t\t\t.next('.lista-gestores-container')\r\n\t\t\t\t.addClass('ativo');\r\n\t\t\r\n\t\t\t$(btn_filtro_gestor)\r\n\t\t\t\t.attr('tabindex', '-1');\r\n\t\t\r\n\t\t}\r\n\t\t\r\n\t\t//Fecha resultado da filtragem\r\n\t\tfunction fechaListaGestor(gestor) {\r\n\t\t\t\r\n\t\t\t$(gestor)\r\n\t\t\t\t.next('.lista-gestores-container')\r\n\t\t\t\t.removeClass('ativo')\r\n\t\t\t\t.children('.lista-gestores')\r\n\t\t\t\t.empty();\r\n\t\t\t\t\r\n\t\t\t$(btn_filtro_gestor)\r\n\t\t\t\t.removeAttr('tabindex');\r\n\t\t\r\n\t\t}\r\n\t\t\r\n\t\t//Preencher campos de acordo com o item selecionado\r\n\t\tfunction selecItemListaGestor(itens, campo) {\r\n\t\t\t\r\n\t\t\t$(itens).click(function(e) {\r\n\t\t\t\t\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\t\r\n\t\t\t\t$(campo)\r\n\t\t\t\t\t.val( $(this).text() )\r\n\t\t\t\t\t.focus();\r\n\t\t\t\t\r\n\t\t\t\tselecionadoGestor();\r\n\t\t\t\t\r\n\t\t\t\t$(_gestor_id)\r\n\t\t\t\t\t.val( $(this).nextAll('.id').val() );\r\n\t\t\t\r\n\t\t\t\t$(_gestor_email)\r\n\t\t\t\t\t.val( $(this).nextAll('.email').val() );\r\n\t\t\t\r\n\t\t\t\tfechaListaGestor( input_group );\r\n\t\t\t\tgestor_selecionado = true;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Ações que devem acontecer após o item ser selecionado.\r\n\t\t * \r\n\t\t * @returns {undefined}\r\n\t\t */\r\n\t\tfunction selecionadoGestor() {\r\n\t\t\t\r\n\t\t\t$('#gestor-descricao')\r\n\t\t\t\t.attr('readonly', true);\r\n\r\n\r\n\t\t\t$('.btn-filtro-gestor')\r\n\t\t\t\t.hide();\r\n\r\n\t\t\t$('.btn-apagar-filtro-gestor')\r\n\t\t\t\t.show()\r\n\t\t\t\t.click(function() {\r\n\r\n\t\t\t\t\t$(this)\r\n\t\t\t\t\t\t.siblings('input')\r\n\t\t\t\t\t\t.removeAttr('readonly');\r\n\r\n\t\t\t\t\t$(this)\r\n\t\t\t\t\t\t.hide()\r\n\t\t\t\t\t\t.prev('button')\r\n\t\t\t\t\t\t.show();\r\n\r\n\t\t\t\t\t$('#gestor-descricao')\r\n\t\t\t\t\t\t.val('')\r\n\t\t\t\t\t\t.focus();\r\n\r\n\t\t\t\t\t$('input[name=\"_gestor_id\"]')\r\n\t\t\t\t\t\t.val('');\r\n\t\t\t\t\r\n\t\t\t\t\t$('input[name=\"_gestor_email\"]')\r\n\t\t\t\t\t\t.val('');\r\n\r\n\t\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Eventos para o filtro de Gestor.\r\n\t\t */\r\n\t\tfunction iniciarFiltroGestor() {\r\n\t\t\r\n\t\t\t//Se o item já estiver selecionado (tela de update), efetua as devidas ações.\r\n\t\t\tif ( $('input[name=\"_gestor_id\"]').val() !== '' )\r\n\t\t\t\tselecionadoGestor();\r\n\r\n\t\t\t//Botão de filtrar\r\n\t\t\t$('.btn-filtro-gestor').on({\r\n\r\n\t\t\t\tclick: function() {\r\n\t\t\t\t\tif ( !$(_gestor_id).val() )\r\n\t\t\t\t\t\tfiltrarGestor();\r\n\t\t\t\t},\r\n\r\n\t\t\t\tfocusout: function() {\r\n\r\n\t\t\t\t\tif(tempo_focus) clearTimeout(tempo_focus);\r\n\r\n\t\t\t\t\ttempo_focus = setTimeout(function() {\r\n\r\n\t\t\t\t\t\tif ( !$('input[name=\"_gestor_id\"]').val() && $('.lista-gestor').is(':empty') ) {\r\n\t\t\t\t\t\t   $('#gestor-descricao').val('');\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ( !$('input[name=\"_gestor_id\"]').val() && \r\n\t\t\t\t\t\t\t !$('.lista-gestores ul li a').is(':focus') && \r\n\t\t\t\t\t\t\t  $('#gestor-descricao').val() \r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t$('#gestor-descricao').val('');\r\n\t\t\t\t\t\t\tfechaListaGestor(input_group);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif ( !$('input[name=\"_gestor_id\"]').val() && \r\n\t\t\t\t\t\t\t !$('.lista-gestores ul li a').is(':focus') && \r\n\t\t\t\t\t\t\t !$('#gestor-descricao').val() \r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tfechaListaGestor(input_group);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}, 200);\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t\t//Campo de filtro\r\n\t\t\t$('#gestor-descricao').on({\r\n\r\n\t\t\t\tkeydown: function(e) {\r\n\r\n\t\t\t\t\t//Eventos após a escolha de um item\r\n\t\t\t\t\tif ( $(this).is('[readonly]') ) {\r\n\r\n\t\t\t\t\t\t//Deletar teclando 'Backspace' ou 'Delete'\r\n\t\t\t\t\t\tif ( (e.keyCode === 8) || (e.keyCode === 46) ) {\r\n\t\t\t\t\t\t\t$('.btn-apagar-filtro-gestor').click();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\r\n\t\t\t\t\t\t//Pesquisar com 'Enter'\r\n\t\t\t\t\t\tif (e.keyCode === 13) {\r\n\t\t\t\t\t\t\tfiltrarGestor();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\tfocusout: function() {\r\n\r\n\t\t\t\t\t//verificar quando o campo deve ser zerado\r\n\t\t\t\t\tif(tempo_focus) clearTimeout(tempo_focus);\r\n\r\n\t\t\t\t\ttempo_focus = setTimeout(function() {\r\n\r\n\t\t\t\t\t\tif ( !$('input[name=\"_gestor_id\"]').val() && \r\n\t\t\t\t\t\t\t $('.lista-gestores').is(':empty') &&\r\n\t\t\t\t\t\t\t !$('.btn-filtro-gestor').is(':focus') \r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t$('#gestor-descricao').val('');\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}, 200);\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tiniciarFiltroGestor();\r\n\t\t\r\n\t}\r\n\r\n\r\n\t{ /** Pesquisar produto */\r\n\t\t\r\n\t\tvar filtro;\r\n\t\tvar campo_produto;\r\n\t\tvar btn_filtro_produto;\r\n\t\tvar btn_apagar_filtro_produto;\r\n\t\tvar campo_um; \r\n\t\tvar campo_tam;\r\n\t\tvar _produto_id;\r\n\t\tvar _produto_desc;\r\n\t\tvar input_group;\r\n\t\tvar itens_produto;\r\n\t\tvar tempo_focus;\r\n\t\tvar produto_selecionado = false;\r\n\t\t//var produto_cadastrado = true;\r\n\t\t\r\n\t\t/**\r\n\t\t * Filtrar objeto.\r\n\t\t * \r\n\t\t * @param {object} campo\r\n\t\t */\r\n\t\tfunction filtrarProduto(campo) {\r\n\t\t\t\r\n\t\t\tcampo_produto\t\t\t\t= campo;\r\n\t\t\tbtn_filtro_produto\t\t\t= campo_produto.nextAll('.btn-filtro-produto');\r\n\t\t\tbtn_apagar_filtro_produto\t= campo_produto.nextAll('.btn-apagar-filtro-produto');\r\n\r\n\t\t\tinput_group\t\t\t= campo_produto.parent('.input-group');\r\n\t\t\tcampo_um\t\t\t= input_group.parent('.form-group').next('.form-group').children('input[name=\"um[]\"]');\r\n            campo_tam\t\t\t= input_group.parent('.form-group').next('.form-group').next('.form-group').find('input[name=\"tamanho[]\"]');\r\n\t\t\t_produto_id\t\t\t= input_group.nextAll('input[name=\"_produto_id[]\"]');\r\n\t\t\t_produto_desc\t\t= input_group.nextAll('input[name=\"_produto_descricao[]\"]');\r\n\r\n\t\t\tfiltro\t\t\t\t= campo_produto.val();\r\n\r\n\t\t\t//esvazia campo hidden caso algum item já tenha sido escolhido antes\r\n\t\t\tif(produto_selecionado)\r\n\t\t\t\t$(_produto_id).val('');\r\n\r\n\t\t\tif( !filtro ) {\r\n\t\t\t\tfechaLista( input_group );\r\n\t\t\t\t$(_produto_id).val('');\r\n\t\t\t\t$(campo_um).removeAttr('readonly').val('');\r\n\t\t\t\t//return false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//ajax\r\n\t\t\tvar type\t= \"POST\",\r\n\t\t\t\turl\t\t= \"/_13010/pesquisaProduto\",\r\n\t\t\t\tdata\t= {'filtro': filtro},\r\n\t\t\t\tsuccess = function(data) {\r\n\r\n\t\t\t\t\tabreLista( input_group ); \r\n\t\t\t\t\t$('.lista-produtos').html(data);\r\n\r\n\t\t\t\t\t//se existem dados cadastrados\r\n\t\t\t\t\tif( data.indexOf('nao-cadastrado') === -1 ) {\r\n\r\n\t\t\t\t\t\titens_produto = $('ul.produtos li a');\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tselecItemLista( itens_produto, campo_produto, campo_um, _produto_id, _produto_desc, campo_tam );\r\n\r\n\t\t\t\t\t\t$(itens_produto)\r\n\t\t\t\t\t\t\t.focusout(function() {\r\n\r\n\t\t\t\t\t\t\t\tif(tempo_focus) clearTimeout(tempo_focus);\r\n\r\n\t\t\t\t\t\t\t\ttempo_focus = setTimeout(function() {\r\n\r\n\t\t\t\t\t\t\t\t\tif( !$(itens_produto).is(':focus') && \r\n\t\t\t\t\t\t\t\t\t\t!$(campo_produto).is(':focus') &&\r\n\t\t\t\t\t\t\t\t\t\t!$(btn_filtro_produto).is(':focus')\r\n\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t$(campo_produto).val('');\r\n\t\t\t\t\t\t\t\t\t\tfechaLista( input_group );\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t}, 200);\r\n\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t$(campo_produto)\r\n\t\t\t\t\t\t\t.focusout(function() { \r\n\r\n\t\t\t\t\t\t\t\tif(tempo_focus) clearTimeout(tempo_focus);\r\n\r\n\t\t\t\t\t\t\t\ttempo_focus = setTimeout(function() {\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tif( !$(itens_produto).is(':focus') && \r\n\t\t\t\t\t\t\t\t\t\t//!$('.lista-produtos .sim').is(':focus') && \r\n\t\t\t\t\t\t\t\t\t\t!$(_produto_id).val() &&\r\n\t\t\t\t\t\t\t\t\t\t!$(btn_filtro_produto).is(':focus')\r\n\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t$(campo_produto).val('');\r\n\t\t\t\t\t\t\t\t\t\tfechaLista( input_group );\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}, 200);\r\n\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\telse {\r\n\r\n\t\t\t\t\t\t$(campo_um)\r\n\t\t\t\t\t\t\t.removeAttr('readonly')\r\n\t\t\t\t\t\t\t.val('');\r\n\r\n\t\t\t\t\t\t$(campo_produto)\r\n\t\t\t\t\t\t\t.focusout(function() {\r\n\r\n\t\t\t\t\t\t\t\tif(tempo_focus) clearTimeout(tempo_focus);\r\n\r\n\t\t\t\t\t\t\t\ttempo_focus = setTimeout(function() {\r\n\r\n\t\t\t\t\t\t\t\t\tfechaLista( input_group );\r\n\t\t\t\t\t\t\t\t\t$(campo_produto).val('');\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}, 200);\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t/*\r\n\t\t\t\t\t\thabilitaCliqueSimNao( $('.lista-produtos .sim'), $('.lista-produtos .nao') );\r\n\r\n\t\t\t\t\t\t$(campo_produto)\r\n\t\t\t\t\t\t\t.focusout(function() {\r\n\r\n\t\t\t\t\t\t\t\tif(tempo_focus) clearTimeout(tempo_focus);\r\n\r\n\t\t\t\t\t\t\t\ttempo_focus = setTimeout(function() {\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tif( $('.lista-produtos').children().children().hasClass('nao-cadastrado') && \r\n\t\t\t\t\t\t\t\t\t\t!$('.lista-produtos .sim').is(':focus')\r\n\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\tfechaLista( input_group );\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}, 200);\r\n\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t*/\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t;\r\n\t\t\t\r\n\t\t\texecAjax2(type, url, data, success, null, btn_filtro_produto);\r\n\r\n\t\t}\r\n\t\t\r\n\t\t//Abre resultado da filtragem\r\n\t\tfunction abreLista(produto) {\r\n\t\t\t\r\n\t\t\t$(produto)\r\n\t\t\t\t.next('.lista-produtos-container')\r\n\t\t\t\t.addClass('ativo');\r\n\t\t\t\t\r\n\t\t\t$(btn_filtro_produto)\r\n\t\t\t\t.attr('tabindex', '-1');\r\n\t\t\r\n\t\t}\r\n\t\t\r\n\t\t//Fecha resultado da filtragem\r\n\t\tfunction fechaLista(produto) {\r\n\t\t\t\r\n\t\t\t$(produto)\r\n\t\t\t\t.next('.lista-produtos-container')\r\n\t\t\t\t.removeClass('ativo')\r\n\t\t\t\t.children('.lista-produtos')\r\n\t\t\t\t.empty();\r\n\t\t\r\n\t\t\t$(btn_filtro_produto)\r\n\t\t\t\t.removeAttr('tabindex');\r\n\t\t\r\n\t\t}\r\n\t\t\r\n\t\t//Preencher campos de acordo com o item selecionado\r\n\t\tfunction selecItemLista(itens, campo_produto, campo_um, _produto_id, _produto_desc, campo_tam) {\r\n\t\t\t\r\n\t\t\t$(itens)\r\n\t\t\t\t.click(function(e) {\r\n\t\t\t\t\r\n\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\tvar desc = $(this).nextAll('.prod-descricao-id').val();\r\n\r\n\t\t\t\t\t$(campo_produto)\r\n\t\t\t\t\t\t.val( desc )\r\n\t\t\t\t\t\t.focus();\r\n\t\t\t\t\r\n\t\t\t\t\t$(campo_um)\r\n\t\t\t\t\t\t.val( $(this).nextAll('.um').val() );\r\n\t\t\t\t\t\r\n\t\t\t\t\t$(_produto_id)\r\n\t\t\t\t\t\t.val( $(this).nextAll('.id').val() );\r\n\r\n\t\t\t\t\t$(_produto_desc)\r\n\t\t\t\t\t\t.val( $(this).nextAll('.descricao').val() );\r\n\r\n\t\t\t\t\t$(campo_tam)\r\n\t\t\t\t\t\t.val('');\r\n\r\n\t\t\t\t\tselecionadoProduto(campo_produto, campo_um, btn_filtro_produto, btn_apagar_filtro_produto);\r\n\r\n\t\t\t\t\tfechaLista( input_group );\r\n\t\t\t\t\tproduto_selecionado = true;\r\n\r\n\t\t\t\t});\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Ações que devem acontecer após o item ser selecionado.\r\n\t\t */\r\n\t\tfunction selecionadoProduto(campo_produto, campo_um, btn_filtro_produto, btn_apagar_filtro_produto) {\r\n\t\t\t\r\n\t\t\t$(campo_produto)\r\n\t\t\t\t.attr('readonly', true);\r\n\t\t\r\n\t\t\t$(campo_um)\r\n\t\t\t\t.attr('readonly', true);\r\n\r\n\t\t\t$(btn_filtro_produto)\r\n\t\t\t\t.hide();\r\n\r\n\t\t\t$(btn_apagar_filtro_produto)\r\n\t\t\t\t.show()\r\n\t\t\t\t.click(function() {\r\n\r\n\t\t\t\t\t$(this)\r\n\t\t\t\t\t\t.siblings('input')\r\n\t\t\t\t\t\t.removeAttr('readonly');\r\n\r\n\t\t\t\t\t$(this)\r\n\t\t\t\t\t\t.hide()\r\n\t\t\t\t\t\t.prev('button')\r\n\t\t\t\t\t\t.show();\r\n\t\t\t\t\r\n\t\t\t\t\t$(this)\r\n\t\t\t\t\t\t.parent()\r\n\t\t\t\t\t\t.parent('.form-group')\r\n\t\t\t\t\t\t.next()\r\n\t\t\t\t\t\t.find(campo_um)\r\n\t\t\t\t\t\t.removeAttr('readonly')\r\n\t\t\t\t\t\t.val('');\r\n\t\t\t\t\r\n\t\t\t\t\t$(this)\r\n\t\t\t\t\t\t.parent()\r\n\t\t\t\t\t\t.siblings('input[name=\"_produto_id[]\"]')\r\n\t\t\t\t\t\t.val('');\r\n\t\t\t\t\r\n\t\t\t\t\t$(this)\r\n\t\t\t\t\t\t.parent()\r\n\t\t\t\t\t\t.siblings('input[name=\"_produto_descricao[]\"]')\r\n\t\t\t\t\t\t.val('');\r\n\r\n\t\t\t\t\t$(this)\r\n\t\t\t\t\t\t.siblings('.produto-descricao')\r\n\t\t\t\t\t\t.val('')\r\n\t\t\t\t\t\t.focus();\r\n\r\n\t\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t//Habilitar clique de Sim e Não quando o produto não estiver cadastrado\r\n\t\t/*\r\n\t\tfunction habilitaCliqueSimNao(btn_sim, btn_nao) {\r\n\t\t\t\r\n\t\t\t$(btn_sim).click(function() {\r\n\t\t\t\tfechaLista( input_group );\r\n\t\t\t\t$(campo_um).removeAttr('readonly').val('');\r\n\t\t\t\t$(_produto_id).val('');\r\n\t\t\t\t$(_produto_desc).val( $(campo_produto).val() );\r\n\t\t\t\t$(campo_produto).focus();\r\n\t\t\t\tproduto_cadastrado = false;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t$(btn_nao).click(function() {\r\n\t\t\t\tfechaLista( input_group );\r\n\t\t\t\t$(_produto_id).val('');\r\n\t\t\t\t$(campo_um).removeAttr('readonly').val('');\r\n\t\t\t\t$(campo_produto).val('').focus();\r\n\t\t\t\tproduto_cadastrado = true;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t//Ativar clique com enter\r\n\t\t\t$(btn_sim).bind('keydown', 'return', function() {\r\n\t\t\t\t$(this).click();\r\n\t\t\t});\r\n\t\t\t$(btn_nao).bind('keydown', 'return', function() {\r\n\t\t\t\t$(this).click();\r\n\t\t\t});\r\n\t\t\t\r\n\t\t}\r\n\t\t*/\r\n\t\t\r\n\t\t\r\n\t\t/**\r\n\t\t * Eventos para o filtro de Produto.\r\n\t\t */\r\n\t\tfunction iniciarFiltroProduto() {\r\n\t\t\r\n\t\t\t//Se o item já estiver selecionado (tela de update), efetua as devidas ações.\r\n\t\t\t$('input[name=\"_produto_id[]\"]').each(function() {\r\n\t\t\t\t\r\n\t\t\t\tif ( $(this).val() !== '' ) {\r\n\t\t\t\r\n\t\t\t\t\tselecionadoProduto(\r\n\t\t\t\t\t\t$(this).siblings('.input-group').children('.produto-descricao'),\r\n\t\t\t\t\t\t$(this).parent('.form-group').next().children('input[name=\"um[]\"]'),\r\n\t\t\t\t\t\t$(this).siblings('.input-group').children('.btn-filtro-produto'),\r\n\t\t\t\t\t\t$(this).siblings('.input-group').children('.btn-apagar-filtro-produto')\r\n\t\t\t\t\t);\r\n\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t});\r\n\r\n\t\t\t//Botão de filtrar\r\n\t\t\t$('.btn-filtro-produto').on({\r\n\r\n\t\t\t\tclick: function() {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif ( !$(this).parent().nextAll('input[name=\"_produto_id[]\"]').val() )\r\n\t\t\t\t\t\tfiltrarProduto( $(this).prev('input') );\r\n\t\t\t\t\t\r\n\t\t\t\t},\r\n\r\n\t\t\t\tfocusout: function() {\r\n\r\n\t\t\t\t\t//Só prossegue se o produto estiver cadastrado.\r\n\t\t\t\t\t// if ( produto_cadastrado === false )\r\n\t\t\t\t\t// \treturn false;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(tempo_focus) \r\n\t\t\t\t\t\tclearTimeout(tempo_focus);\r\n\r\n\t\t\t\t\ttempo_focus = setTimeout(function() {\r\n\r\n\t\t\t\t\t\tif ( !$('input[name=\"_produto_id[]\"]').val() /*&& $('.lista-produtos').is(':empty')*/ ) {\r\n\t\t\t\t\t\t   $('.produto-descricao').val('');\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ( !$('input[name=\"_produto_id[]\"]').val() && \r\n\t\t\t\t\t\t\t !$('.lista-produtos ul li a').is(':focus') && \r\n\t\t\t\t\t\t\t  $('.produto-descricao').val() \r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t$('.produto-descricao').val('');\r\n\t\t\t\t\t\t\tfechaLista(input_group);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif ( !$('input[name=\"_produto_id[]\"]').val() && \r\n\t\t\t\t\t\t\t !$('.lista-produtos ul li a').is(':focus') && \r\n\t\t\t\t\t\t\t !$('.produto-descricao').val() \r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tfechaLista(input_group);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}, 200);\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t\t//Campo de filtro\r\n\t\t\t$('.produto-descricao').on({\r\n\r\n\t\t\t\tkeydown: function(e) {\r\n\r\n\t\t\t\t\t//Eventos após a escolha de um item\r\n\t\t\t\t\tif ( $(this).is('[readonly]') ) {\r\n\r\n\t\t\t\t\t\t//Deletar teclando 'Backspace' ou 'Delete'\r\n\t\t\t\t\t\tif ( (e.keyCode === 8) || (e.keyCode === 46) ) {\r\n\t\t\t\t\t\t\t$(this)\r\n\t\t\t\t\t\t\t\t.nextAll('.btn-apagar-filtro-produto')\r\n\t\t\t\t\t\t\t\t.click();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\r\n\t\t\t\t\t\t//Pesquisar com 'Enter'\r\n\t\t\t\t\t\tif (e.keyCode === 13) {\r\n\t\t\t\t\t\t\tfiltrarProduto( $(this) );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\tfocusout: function() {\r\n\r\n\t\t\t\t\tvar campo_prod_desc = $(this);\r\n\r\n\t\t\t\t\t//verificar quando o campo deve ser zerado\r\n\t\t\t\t\tif(tempo_focus) clearTimeout(tempo_focus);\r\n\r\n\t\t\t\t\ttempo_focus = setTimeout(function() {\r\n\r\n\t\t\t\t\t\tif ( !$(campo_prod_desc).parent().nextAll('input[name=\"_produto_id[]\"]').val() && \r\n\t\t\t\t\t\t\t //$(this).parent().nextAll('.lista-produtos-container').children('.lista-produtos').is(':empty') &&\r\n\t\t\t\t\t\t\t !$(campo_prod_desc).nextAll('.btn-filtro-produto').is(':focus') \r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t$(campo_prod_desc).val('');\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}, 200);\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tiniciarFiltroProduto();\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t{ \r\n\t\t/**\r\n\t\t * Ao add produto, o botão de apagar filtro do produto deve ser escondido. \r\n\t\t */\r\n\t\t$('.add-produto')\r\n\t\t\t.click(function() {\r\n\t\t\t\t\r\n\t\t\t\tvar btn_add = $(this);\r\n\t\t\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\r\n\t\t\t\t\t$(btn_add)\r\n\t\t\t\t\t\t.prev('.produto-container')\r\n\t\t\t\t\t\t.children('.produto')\r\n\t\t\t\t\t\t.last()\r\n\t\t\t\t\t\t.find('.btn-apagar-filtro-produto')\r\n\t\t\t\t\t\t.hide();\r\n\t\t\t\t\r\n\t\t\t\t\t$(btn_add)\r\n\t\t\t\t\t\t.prev('.produto-container')\r\n\t\t\t\t\t\t.children('.produto')\r\n\t\t\t\t\t\t.last()\r\n\t\t\t\t\t\t.find('.btn-filtro-produto')\r\n\t\t\t\t\t\t.show();\r\n\r\n\t\t\t\t\t$(btn_add)\r\n\t\t\t\t\t\t.prev('.produto-container')\r\n\t\t\t\t\t\t.find('.produto-descricao')\r\n\t\t\t\t\t\t.focus();\r\n\t\t\t\t\r\n\t\t\t\t}, 10);\r\n\r\n\t\t\t});\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t{ /** Pesquisar empresa */\r\n\t\t\r\n\t\tvar filtro;\r\n\t\tvar campo_empresa;\r\n\t\tvar campo_fone;\r\n\t\tvar campo_email;\r\n\t\tvar campo_contato;\r\n\t\tvar btn_filtro_empresa;\r\n\t\tvar input_group;\r\n\t\tvar itens_empresa;\r\n\t\tvar _empresa_id;\r\n\t\tvar tempo_focus;\r\n\t\tvar empresa_selecionada = false;\r\n\t\tvar empresa_cadastrada = true;\r\n\t\t\r\n\t\t/**\r\n\t\t * Filtrar objeto.\r\n\t\t */\r\n\t\tfunction filtrarEmpresa() {\r\n\t\t\t\r\n\t\t\tcampo_empresa\t\t= $('.empresa-descricao');\t//campo\t\t\t\r\n\t\t\tcampo_fone\t\t\t= campo_empresa.parent('.input-group').parent('.form-group').next('.form-group').children('.fone');\t//campo_fone \r\n\t\t\tcampo_email\t\t\t= campo_empresa.parent('.input-group').parent('.form-group').next('.form-group').next('.form-group').children('.email');\t//campo_email\r\n\t\t\tcampo_contato\t\t= campo_empresa.parent('.input-group').parent('.form-group').next('.form-group').next('.form-group').next('.form-group').children('.contato');\t//campo_contato\r\n\t\t\tbtn_filtro_empresa\t= $('.btn-filtro-empresa');\r\n\t\t\tinput_group\t\t\t= $(campo_empresa).parent('.input-group');\t//input-group\r\n\t\t\t_empresa_id\t\t\t= $('input[name=\"_empresa_id\"]');\r\n\t\t\tfiltro\t\t\t\t= campo_empresa.val();\r\n\r\n\t\t\t//esvazia campo hidden caso algum item já tenha sido escolhido antes\r\n\t\t\tif(empresa_selecionada)\r\n\t\t\t\t$(_empresa_id).val('');\r\n\r\n\t\t\tif( !filtro ) {\r\n\t\t\t\tfechaListaEmpresa( input_group );\r\n\t\t\t\t$(campo_fone, campo_email, campo_contato).empty();\r\n\t\t\t\t$(_empresa_id).val('');\r\n//\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//ajax\r\n\t\t\tvar type\t= \"POST\",\r\n\t\t\t\turl\t\t= \"/_13060/pesquisa\",\r\n\t\t\t\tdata\t= {\r\n\t\t\t\t\t'filtro': filtro, \r\n\t\t\t\t\t'status': '1', \r\n\t\t\t\t\t'habilita_fornecedor': '1'\r\n\t\t\t\t},\r\n\t\t\t\tsuccess = function(data) {\r\n\r\n\t\t\t\t\tabreListaEmpresa( input_group ); \r\n\r\n\t\t\t\t\t//se existem dados cadastrados\r\n\t\t\t\t\tif( data.indexOf('nao-cadastrado') === -1 ) {\r\n\r\n\t\t\t\t\t\t$('.lista-empresas').html(data);\r\n\t\t\t\t\t\titens_empresa = $('ul.empresas li a');\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tselecItemListaEmpresa( itens_empresa, campo_empresa, campo_fone, campo_email, campo_contato );\r\n\r\n\t\t\t\t\t\t$(itens_empresa)\r\n\t\t\t\t\t\t\t.focusout(function() {\r\n\r\n\t\t\t\t\t\t\t\tif(tempo_focus) clearTimeout(tempo_focus);\r\n\r\n\t\t\t\t\t\t\t\ttempo_focus = setTimeout(function() {\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tif( !$(itens_empresa).is(':focus') && \r\n\t\t\t\t\t\t\t\t\t\t!$(campo_empresa).is(':focus') &&\r\n\t\t\t\t\t\t\t\t\t\t!$(btn_filtro_empresa).is(':focus')\r\n\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t$(campo_empresa).val('');\r\n\t\t\t\t\t\t\t\t\t\tfechaListaEmpresa( input_group );\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}, 200);\r\n\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t$(campo_empresa)\r\n\t\t\t\t\t\t\t.focusout(function() { \r\n\r\n\t\t\t\t\t\t\t\tif(tempo_focus) clearTimeout(tempo_focus);\r\n\r\n\t\t\t\t\t\t\t\ttempo_focus = setTimeout(function() {\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tif( !$(itens_empresa).is(':focus') && \r\n\t\t\t\t\t\t\t\t\t\t!$('.lista-empresas .sim').is(':focus') &&\r\n\t\t\t\t\t\t\t\t\t\t!$(btn_filtro_empresa).is(':focus') \r\n\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\tfechaListaEmpresa( input_group );\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}, 200);\r\n\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\telse {\r\n\r\n\t\t\t\t\t\t$('.lista-empresas')\r\n\t\t\t\t\t\t\t.html('<div class=\"nao-cadastrado\">Empresa n&atildeo cadastrada. Deseja prosseguir?'+\r\n\t\t\t\t\t\t\t\t  '<div><button type=\"button\" class=\"btn btn-primary sim\">Sim</button>'+\r\n\t\t\t\t\t\t\t\t  '<button type=\"button\" class=\"btn btn-danger nao\">N&atildeo</button></div></div>');\r\n\r\n\t\t\t\t\t\thabilitaCliqueSimNaoEmpresa( $('.lista-empresas .sim'), $('.lista-empresas .nao') );\r\n\r\n\t\t\t\t\t\t$(campo_empresa).focusout(function() {\r\n\r\n\t\t\t\t\t\t\tif(tempo_focus) clearTimeout(tempo_focus);\r\n\r\n\t\t\t\t\t\t\ttempo_focus = setTimeout(function() {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif( $('.lista-empresas').children().children().hasClass('nao-cadastrado') &&\r\n\t\t\t\t\t\t\t\t\t!$('.lista-empresas .sim').is(':focus')\r\n\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\tfechaListaEmpresa( input_group );\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}, 200);\r\n\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t;\r\n\t\r\n\t\t\texecAjax2(type, url, data, success, null, btn_filtro_empresa);\r\n\r\n\t\t}\r\n\t\t\r\n\t\t//Abre resultado da filtragem\r\n\t\tfunction abreListaEmpresa(empresa) {\r\n\t\t\t\r\n\t\t\t$(empresa)\r\n\t\t\t\t.next('.lista-empresas-container')\r\n\t\t\t\t.addClass('ativo');\r\n\t\t\r\n\t\t\t$(btn_filtro_empresa)\r\n\t\t\t\t.attr('tabindex', '-1');\r\n\t\t\r\n\t\t}\r\n\t\t\r\n\t\t//Fecha resultado da filtragem\r\n\t\tfunction fechaListaEmpresa(empresa) {\r\n\t\t\t\r\n\t\t\t$(empresa)\r\n\t\t\t\t.next('.lista-empresas-container')\r\n\t\t\t\t.removeClass('ativo')\r\n\t\t\t\t.children('.lista-empresas')\r\n\t\t\t\t.empty();\r\n\t\t\r\n\t\t\t$(btn_filtro_empresa)\r\n\t\t\t\t.removeAttr('tabindex');\r\n\t\t}\r\n\t\t\r\n\t\t//Preencher campos de acordo com o item selecionado\r\n\t\tfunction selecItemListaEmpresa(itens, campo_empresa, campo_fone, campo_email, campo_contato) {\r\n\t\t\t\r\n\t\t\t$(itens).click(function(e) {\r\n\t\t\t\t\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\t\r\n\t\t\t\t$(campo_empresa)\r\n\t\t\t\t\t.val( $(this).next('.descricao').val() )\r\n\t\t\t\t\t.focus();\r\n\t\t\t\r\n\t\t\t\t$(campo_fone)\r\n\t\t\t\t\t.val( $(this).nextAll('input[name=\"_emp_fone\"]').val() );\r\n\t\t\t\r\n\t\t\t\t$(campo_email)\r\n\t\t\t\t\t.val( $(this).nextAll('input[name=\"_emp_email\"]').val() );\r\n\t\t\t\r\n\t\t\t\t$(campo_contato)\r\n\t\t\t\t\t.val( $(this).nextAll('input[name=\"_emp_contato\"]').val() );\r\n\t\t\t\r\n\t\t\t\t$(_empresa_id)\r\n\t\t\t\t\t.val( $(this).nextAll('input[name=\"_emp_id\"]').val() );\r\n\t\t\t\t\r\n\t\t\t\tselecionadoEmpresa();\r\n\t\t\t\t\r\n\t\t\t\tfechaListaEmpresa( input_group );\r\n\t\t\t\tempresa_selecionada = true;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Ações que devem acontecer após o item ser selecionado.\r\n\t\t */\r\n\t\tfunction selecionadoEmpresa() {\r\n\t\t\t\r\n\t\t\t$('.empresa-descricao')\r\n\t\t\t\t.attr('readonly', true);\r\n\r\n\t\t\t$('.btn-filtro-empresa')\r\n\t\t\t\t.hide();\r\n\r\n\t\t\t$('.btn-apagar-filtro-empresa')\r\n\t\t\t\t.show()\r\n\t\t\t\t.click(function() {\r\n\r\n\t\t\t\t\t$(this)\r\n\t\t\t\t\t\t.siblings('input')\r\n\t\t\t\t\t\t.removeAttr('readonly');\r\n\r\n\t\t\t\t\t$(this)\r\n\t\t\t\t\t\t.hide()\r\n\t\t\t\t\t\t.prev('button')\r\n\t\t\t\t\t\t.show();\r\n\r\n\t\t\t\t\t$('.empresa-descricao')\r\n\t\t\t\t\t\t.val('')\r\n\t\t\t\t\t\t.focus();\r\n\r\n\t\t\t\t\t$('input[name=\"_empresa_id\"]')\r\n\t\t\t\t\t\t.val('');\r\n\r\n\t\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t//Habilitar clique de Sim e Não quando o produto não estiver cadastrado\r\n\t\tfunction habilitaCliqueSimNaoEmpresa(btn_sim, btn_nao) {\r\n\t\t\t\r\n\t\t\t$(btn_sim).click(function() {\r\n\t\t\t\tfechaListaEmpresa( input_group );\r\n\t\t\t\t$(campo_empresa).focus();\r\n\t\t\t\tempresa_cadastrada = false;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t$(btn_nao).click(function() {\r\n\t\t\t\tfechaListaEmpresa( input_group );\r\n\t\t\t\t$(_empresa_id).val('');\r\n\t\t\t\t$(campo_empresa).val('').focus();\r\n\t\t\t\tempresa_cadastrada = true;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t//Ativar clique com enter\r\n\t\t\t$(btn_sim).bind('keydown', 'return', function() {\r\n\t\t\t\t$(this).click();\r\n\t\t\t});\r\n\t\t\t$(btn_nao).bind('keydown', 'return', function() {\r\n\t\t\t\t$(this).click();\r\n\t\t\t});\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Eventos para o filtro de Empresa.\r\n\t\t */\r\n\t\tfunction iniciarFiltroEmpresa() {\r\n\t\t\r\n\t\t\t//Se o item já estiver selecionado (tela de update), efetua as devidas ações.\r\n\t\t\tif ( ($('input[name=\"_empresa_id\"]').val() !== '') || ($('.empresa-descricao').val() !== '') )\r\n\t\t\t\tselecionadoEmpresa();\r\n\r\n\t\t\t//Botão de filtrar\r\n\t\t\t$('.btn-filtro-empresa').on({\r\n\r\n\t\t\t\tclick: function() {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif ( !$(_empresa_id).val() )\r\n\t\t\t\t\t\tfiltrarEmpresa();\r\n\t\t\t\t\t\r\n\t\t\t\t},\r\n\r\n\t\t\t\tfocusout: function() {\r\n\t\t\t\t\t\r\n\t\t\t\t\t//Só prossegue se o produto estiver cadastrado.\r\n\t\t\t\t\tif ( empresa_cadastrada === false || ($('.empresa-descricao').val() !== '') )\r\n\t\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t\tif(tempo_focus) clearTimeout(tempo_focus);\r\n\r\n\t\t\t\t\ttempo_focus = setTimeout(function() {\r\n\r\n\t\t\t\t\t\tif ( !$('input[name=\"_empresa_id\"]').val() && $('.lista-empresas').is(':empty') ) {\r\n\t\t\t\t\t\t   $('.empresa-descricao').val('');\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ( !$('input[name=\"_empresa_id\"]').val() && \r\n\t\t\t\t\t\t\t !$('.lista-empresas ul li a').is(':focus') && \r\n\t\t\t\t\t\t\t  $('.empresa-descricao').val() \r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t$('.empresa-descricao').val('');\r\n\t\t\t\t\t\t\tfechaListaEmpresa(input_group);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif ( !$('input[name=\"_empresa_id\"]').val() && \r\n\t\t\t\t\t\t\t !$('.lista-empresas ul li a').is(':focus') && \r\n\t\t\t\t\t\t\t !$('.empresa-descricao').val() \r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tfechaListaEmpresa(input_group);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}, 200);\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t\t//Campo de filtro\r\n\t\t\t$('.empresa-descricao').on({\r\n\r\n\t\t\t\tkeydown: function(e) {\r\n\r\n\t\t\t\t\t//Eventos após a escolha de um item\r\n\t\t\t\t\tif ( $(this).is('[readonly]') ) {\r\n\r\n\t\t\t\t\t\t//Deletar teclando 'Backspace' ou 'Delete'\r\n\t\t\t\t\t\tif ( (e.keyCode === 8) || (e.keyCode === 46) ) {\r\n\t\t\t\t\t\t\t$('.btn-apagar-filtro-empresa').click();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\r\n\t\t\t\t\t\t//Pesquisar com 'Enter'\r\n\t\t\t\t\t\tif (e.keyCode === 13) {\r\n\t\t\t\t\t\t\tfiltrarEmpresa();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\tfocusout: function() {\r\n\t\t\t\t\t\r\n\t\t\t\t\t//Só prossegue se o produto estiver cadastrado.\r\n\t\t\t\t\tif ( (empresa_cadastrada === false) || ($('.empresa-descricao').val() !== '') )\r\n\t\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t\t//verificar quando o campo deve ser zerado\r\n\t\t\t\t\tif(tempo_focus) clearTimeout(tempo_focus);\r\n\r\n\t\t\t\t\ttempo_focus = setTimeout(function() {\r\n\r\n\t\t\t\t\t\tif ( !$('input[name=\"_empresa_id\"]').val() && \r\n\t\t\t\t\t\t\t $('.lista-empresas').is(':empty') &&\r\n\t\t\t\t\t\t\t !$('.btn-filtro-empresa').is(':focus') \r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t$('.empresa-descricao').val('');\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}, 200);\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t//Ação ao clicar em 'Editar'\r\n\t\t\t$('.editar-item-dinamico')\r\n\t\t\t\t.click(function() {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif ( $('input[name=\"_empresa_id\"]').val() === '' ) {\r\n\t\t\t\t\t\t$('.empresa-descricao')\r\n\t\t\t\t\t\t\t.removeAttr('readonly');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tiniciarFiltroEmpresa();\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t{/** Excluir produto */\r\n\t\tvar prod;\r\n\t\tvar prod_id;\r\n\t\t\r\n\t\t$('.excluir-produto').click(function(){\r\n\t\t\t\r\n\t\t\tif( !confirm('Confirma exclusão?') ) return false;\r\n\r\n\t\t\tprod    = $(this);\r\n\t\t\tprod_id = $(prod).parent('.form-group').closest('.item-dinamico').find('.form-group').first().children('input[name=\"_req_item_id[]\"]').val();\r\n\r\n\t\t\t$(prod).parent('.form-group').closest('.item-dinamico').find('.form-group').first().children('input[name=\"_req_item_excluir[]\"]').val(\"1\");\r\n\r\n            if( $(prod).parents('.item-dinamico-container').children('.item-dinamico').length > 1 ){\r\n\r\n\t\t\t\t//$(prod).parents('.item-dinamico').siblings().children('.form-group').last().hide();\r\n                $(prod).parent().closest('.item-dinamico').hide();\r\n\r\n            }else{\r\n\r\n                //$(prod).parent().parent('.item-dinamico').hide();\r\n                $(prod).parent().closest('.item-dinamico').find('input').val('').first().focus();\r\n\t\t        $(prod).parent().closest('.item-dinamico').find('text, textarea').val('');\r\n\r\n            }\r\n\r\n\r\n\r\n\t\t\t/*\r\n\t\t    $.ajax({\r\n\t\t        url: '/_13010/excluiProduto',\r\n\t\t        type: 'POST',\r\n\t\t        data: {'item': prod_id},\r\n\t\t        success: function(data) {\r\n\t\t        \t\r\n\t\t        \tif( data == 'sucesso' ) {\r\n\t\t        \t\t\r\n\t\t        \t\tif( $(prod).parents('.item-dinamico-container').children('.item-dinamico').length == 2 )\r\n\t\t\t\t\t\t\t$(prod).parents('.item-dinamico').siblings().children('.form-group').last().hide();\r\n\t\t\t\t\t\t\r\n\t\t        \t\t$(prod).parent().parent('.item-dinamico').remove();\r\n\t\t\t\t\t\t\r\n\t\t        \t}else{\r\n\t\t        \t\t\r\n\t\t        \t\t$('.diverro').html(data);\r\n\t\t\t\t\t\t$('.alert-danger').show();\r\n\t\t\t\t\t\t\r\n\t\t        \t}\r\n\t\t        \t\r\n\t\t        },\r\n\t\t        error: function(e) {\r\n\t\t        \tconsole.log('Erro ao excluir produto: '+e);\r\n\t\t        }\r\n\t\t    });\r\n\t\t    //*/\r\n\t\t});\r\n\r\n\t}\r\n\t\r\n\t{/** Excluir arquivo */\r\n\t\tvar arq;\r\n\t\tvar arq_id;\r\n\t\t\r\n\t\t$('.excluir-arquivo').click(function(){\r\n\r\n\t\t\tif( !confirm('Confirma exclusão?') ) return false;\r\n\r\n\t\t\tprod    = $(this);\r\n\t\t\tprod_id = $(prod).parent('.form-group').parent('.item-dinamico').children('.form-group').first().children('input[name=\"_vinculo_Arquivo_id[]\"]').val();\r\n\r\n            if (prod_id > 0) {\r\n\t\t\t    $(prod).parent('.form-group').parent('.item-dinamico').children('.form-group').first().children('.marcaexcluiritem').val(1);\r\n            }\r\n\r\n            if( $(prod).parents('.anexo-container').children('.item-dinamico').length > 1 ){\r\n\r\n                $(prod).parent().parent('.item-dinamico').hide();\r\n\r\n            }else{\r\n\r\n                $(prod).parent().parent('.item-dinamico').find('input').val('').first().focus();\r\n\t\t        $(prod).parent().parent('.item-dinamico').find('text').val('').first().focus();\r\n\r\n            }\r\n\r\n            \r\n\t\t\tarq    = $(this);\r\n\t\t\tarq_id = $(arq).parent('.form-group').parent('.item-dinamico').children('.form-group').first().children('input[name=\"_vinculo_Arquivo_id[]\"]').val();\r\n\r\n\t\t    $.ajax({\r\n\t\t        url: '/_13010/excluiArquivo',\r\n\t\t        type: 'POST',\r\n\t\t        data: {'item': arq_id},\r\n\t\t        success: function(data) {\r\n\t\t        \t\r\n\t\t        \tif( data == 'sucesso' ) {\r\n\t\t        \t\t\r\n\t\t        \t\tif( $(arq).parents('.item-dinamico-container').children('.item-dinamico').length == 2 )\r\n\t\t        \t\t{\r\n\t\t\t\t\t\t\t$(arq).parents('.item-dinamico').siblings().children('.form-group').last().hide();\r\n\t\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t        \t\tif( $(arq).parents('.item-dinamico-container').children('.item-dinamico').length == 1 )\r\n\t\t        \t\t{\r\n\t\t        \t\t\t$(arq).parent().parent('.item-dinamico').find('input').val('').first().focus();\r\n\t\t        \t\t\t$(arq).parent().parent('.item-dinamico').find('text').val('').first().focus();\r\n\t\t        \t\t\t    \t\t\t\r\n\t\t        \t\t}else\r\n\t\t        \t\t{\r\n\t\t        \t\t\t$(arq).parent().parent('.item-dinamico').remove();\r\n\t\t        \t\t}\r\n\t\t        \t}\r\n\t\t        \t\t\r\n\t\t        },\r\n\t\t        error: function(e) {\r\n\t\t        \tconsole.log('Erro ao excluir arquivo: '+e);\r\n\t\t        }\r\n\t\t    });\r\n\t\t    \r\n\t\t});\r\n\r\n\t}\r\n\r\n    function CalcTotal(Campo) {\r\n\r\n\t   var qtd   = $(Campo).parent().parent().parent().find('.qtd').val();\r\n       var valor = $(Campo).parent().parent().parent().find('.valor').val();\r\n\r\n       //$(Campo).parent().parent().addClass('ccccccccc');\r\n       //$(Campo).parent().parent().addClass('eeeeeeeee');\r\n\r\n       var tot = $(Campo).val();\r\n\r\n       var valor1 = parseFloat( formataPadrao(qtd));\r\n           valor1 = valor1 ? valor1 : 0;\r\n\r\n       var valor2 = parseFloat(formataPadrao(valor));\r\n           valor2 = valor2 ? valor2 : 0;\r\n\r\n       var total = (valor1 * valor2).toFixed(4);\r\n\r\n       $(Campo).val(total);\r\n\r\n       var string = total.toString();\r\n       string = string.replace('.',',');\r\n\r\n       $(Campo).val(string);\r\n\t}\r\n\r\n    $('.valor-total').each(function(){\r\n\r\n       CalcTotal(this);\r\n\r\n    });\r\n\r\n    $(document).on('change', '.qtd', function(){\r\n\r\n        $(this).parent().parent().find('.valor-total').addClass('aaaaaaaaaa');\r\n\r\n        var campo = $(this).parent().parent().find('.valor-total');\r\n        CalcTotal(campo);\r\n\r\n    });\r\n\r\n    $(document).on('change', '.valor', function(){\r\n\r\n        $(this).parent().parent().parent().find('.valor-total').addClass('bbbbbbb');\r\n\r\n        var campo = $(this).parent().parent().parent().find('.valor-total');\r\n        CalcTotal(campo);\r\n\r\n    });\r\n\r\n\r\n\t//*\r\n\t$('.excluir-item-dinamico').each(function() {\r\n\r\n\t\tif( $(this).parents('.item-dinamico-container').children('.item-dinamico').length == 1 ) {\r\n\t\t\t\r\n\t\t\t$(this).children('.glyphicon-trash').parents('.form-group').show();\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tif( $(this).children('.glyphicon').hasClass('glyphicon-trash') ) {\r\n\t\t   \t$(this).parent().prev().find('.glyphicon-remove').parents('.form-group').hide();\r\n\t\t}\r\n\r\n\t});\r\n    //*/\r\n\r\n\t{/** Excluir arquivo */\r\n//\t\tvar arq;\r\n//\t\tvar arq_id;\r\n//\t\t$('.download-arquivo').click(function() {\t\r\n//\t\t\t\r\n//\t\t\t//if( !confirm('Confirma download?') ) return false;\r\n//\t\t\t//*\r\n//\t\t\tarq    = $(this);\r\n////\t\t\tarq_id = $(arq).parent('.form-group').parent('.item-dinamico').children('.form-group').first().children('input[name=\"_vinculo_id[]\"]').val();\r\n//\t\t\tarq_id = $(arq).siblings('._vinculo_id').val();\r\n//\t\t\t\r\n//\t\t\tvar nome;\r\n//\t\t\tvar tamanho;\r\n//\t\t\tvar Dir;\r\n//\t\t\t\r\n//\t\t    $.ajax({\r\n//\t\t    \turl: '/_13010/DownloadArquivo',\r\n//\t\t        type: 'POST',\r\n//\t\t        data: {'item': arq_id},\r\n//\t\t        success: function(data) {\r\n//\r\n//\t\t        \tvar obj = JSON.parse(data);\r\n//\t\t        \t\r\n//\t\t        \tnome= obj.nome;\r\n//\t\t        \ttamanho = obj.tamanho;\r\n//\t\t        \t\r\n//\t\t        \tDir = '/download/'+tamanho+'/';\t\t        \t\r\n//\t\t        \t\r\n//\t\t        \t/*\r\n//\t\t        \twindow.open('/download/'+tamanho+'/'+nome, '_self');\r\n//                   //*/\r\n//\t\t        \t\r\n//\t\t        \t//*\r\n//\t\t\t\t\tvar url_arq = urlhost+$(arq).attr('href');\r\n//\t\t\t\t\t\r\n//\t\t        \t//$.fileDownload(Dir+nome)\r\n//\t\t\t\t\t$.fileDownload(url_arq).fail(function () { alert('Erro no download');});\r\n//\t\t        \t//*/\r\n//\r\n//\t\t        },\r\n//\t\t        error: function (xhr) {\r\n//\t\t\t\t\t\t\r\n//\t\t\t\t\tvar msg = $(xhr.responseText)\r\n//\t\t\t\t\t\t\t\t\t.find('.msg-erro')\r\n//\t\t\t\t\t\t\t\t\t.html();\r\n//\t\t\t\t\t\r\n//\t\t\t\t\t$('.alert-principal')\r\n//\t\t\t\t\t\t.removeClass('alert-success')\r\n//\t\t\t\t\t\t.addClass('alert-danger')\r\n//\t\t\t\t\t\t.children('.texto')\r\n//\t\t\t\t\t\t.html(msg)\r\n//\t\t\t\t\t\t.parent()\r\n//\t\t\t\t\t\t.slideDown();\r\n//\t\t\t\t\t\r\n//\t\t\t\t}\r\n//\t\t    });\r\n//\r\n//\r\n//\t\t    \r\n//\t\t    \r\n//\t\t});\r\n//\t\t\r\n\t}\r\n\r\n\t{/** Excluir arquivo */\r\n\t\tvar arq;\r\n\t\tvar arq_id;\r\n\r\n        $('.view-arquivo').click(function(){\r\n\r\n\t\t\t//if( !confirm('Confirma download?') ) return false;\r\n\t\t\t//*\r\n\t\t\tarq    = $(this);\r\n\t\t\tarq_id = $(arq).parent('.form-group').parent('.item-dinamico').children('.form-group').first().children('input[name=\"_vinculo_id[]\"]').val();\r\n\r\n\t\t    //ajax\r\n\t\t\tvar type\t= 'POST',\r\n\t\t\t\turl\t\t= '/_13010/DownloadArquivo',\r\n\t\t\t\tdata\t= {'item': arq_id},\r\n\t\t\t\tsuccess = function(data) {\r\n\r\n\t\t        \tvar obj = JSON.parse(data);\r\n\r\n\t\t        \tvar nome= obj.nome;\r\n//\t\t        \tvar tamanho = obj.tamanho;\r\n\t\t\t\t\tvar tipo = nome.split(\".\").pop();\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar vis_arq = $('.visualizar-arquivo');\r\n\t\t\t\r\n\t\t\t\t\t$(vis_arq)\r\n\t\t\t\t\t\t.children('a')\r\n\t\t\t\t\t\t.attr('href', '/assets/temp/'+nome)\r\n\t\t\t\t\t\t.parent()\r\n\t\t\t\t\t\t.children('input.arquivo_nome_deletar')\r\n\t\t\t\t\t\t.val(nome)\r\n\t\t\t\t\t\t.parent()\r\n\t\t\t\t\t\t.children('object')\r\n\t\t\t\t\t\t.attr('data', '/assets/temp/'+nome)\r\n\t\t\t\t\t\t.removeClass()\r\n\t\t\t\t\t\t.addClass(tipo)\r\n\t\t\t\t\t\t.parent()\t\t\t\t\r\n\t\t\t\t\t\t.fadeIn();\r\n\r\n\t\t        \tativarCliqueFecharArquivo();\r\n\r\n\t\t        }\r\n\t\t    ;\r\n\t\t\t\r\n\t\t\texecAjax1(type, url, data, success, null, null, false);\r\n\t\t    //*/\r\n\r\n\t\t});\r\n\r\n\r\n\r\n\t}\r\n\r\n        $('#modal-edit').on('shown.bs.modal', function () {\r\n\t\t\t$('.cota').focus();\r\n\t\t});\r\n\r\n\t\t$('#modal-edit').on('hidden.bs.modal', function () {\r\n\t\t\t$('.toggle-btn').attr('checked', false);\r\n\t\t\t$('.toggle-item').fadeOut('normal');\r\n\r\n            var Tan = '';\r\n\r\n            for (i = 1; i <= 20; i++) {\r\n\r\n                if (i < 10){\r\n                    Tan = '.T0'+i;\r\n                }else{\r\n                    Tan = '.T'+i;\r\n                }\r\n\r\n                $(Tan).prop( \"disabled\", true );\r\n\r\n                tamanho = '00';\r\n\r\n                $(Tan).attr(\"tamanho\",tamanho);\r\n                $(Tan).find(Tan).html(tamanho);\r\n\r\n            }\r\n\t\t});\r\n\r\n\t\t$('.toggle-btn').click(function () {\r\n\t\t\t$(\".toggle-item\").fadeToggle('normal');\r\n\r\n\t\t});\r\n\r\n\t/**\r\n\t * Abre a lista de pesquisa \r\n\t * @param {type} input_group\r\n\t */\r\n\tfunction abreListaPesquisa(input_group) {\r\n\t\tvar btn_filtro = input_group.find('.btn-filtro');     \r\n\r\n\t\t$(input_group)\r\n\t\t\t.next('.pesquisa-res-container')\r\n\t\t\t.addClass('ativo')\r\n\t\t;\r\n\r\n\t\t$(btn_filtro)\r\n\t\t\t.attr('tabindex', '-1')\r\n\t\t;\r\n\t}\r\n\r\n\t/**\r\n\t * Fecha a lista de pesquisa\r\n\t * @param {type} input_group\r\n\t */\r\n\tfunction fechaListaPesquisa(input_group) {\r\n\t\tvar btn_filtro = input_group.find('.btn-filtro');  \r\n\r\n\t\t$(input_group)\r\n\t\t\t.next('.pesquisa-res-container')\r\n\t\t\t.removeClass('ativo')\r\n\t\t\t.children('.pesquisa-res')\r\n\t\t\t.empty();\r\n\r\n\t\t$(btn_filtro)\r\n\t\t\t.removeAttr('tabindex');\r\n\t}\r\n\t\r\n\t/** \r\n\t * Pesquisar Operações Fiscais \r\n\t * */\r\n\tfunction consultarOperacao() {\r\n\r\n        var filtro;\r\n        var operacao_campo;\r\n        var operacao_btn_filtro;\r\n        var operacao_btn_filtro_apagar;\r\n        var input_group;\r\n        var input_linha;\r\n        var operacao_itens;\r\n        var _operacao_id;\r\n        var _produto_id;\r\n        var _ccusto;\r\n        var _ccontabil;\r\n        var tempo_focus;\r\n        var operacao_selecionado = false;\r\n\r\n        /**\r\n         * Filtrar objeto.\r\n         * \r\n\t\t * @param {object} campo\r\n         */\r\n        function filtrarOperacao( campo ) {\r\n\r\n            operacao_campo              = campo;\t//campo\r\n            operacao_btn_filtro         = operacao_campo.nextAll('.btn-filtro-operacao');\r\n\t\t\toperacao_btn_filtro_apagar\t= operacao_campo.nextAll('.btn-apagar-filtro-operacao');\r\n\r\n            input_group\t\t= $(operacao_campo).parent('.input-group');\t//input-group\r\n            input_linha     = input_group.closest('.item-dinamico');\r\n            _operacao_id    = input_linha.find('input[field=\"item[operacao][]\"]');\r\n            _produto_id     = input_linha.find('._produto-id');\r\n            _ccusto         = input_linha.find('input[field=\"item[ccusto][]\"]');\r\n            _ccontabil      = input_linha.find('input[field=\"item[ccontabil][]\"]');\r\n\r\n            filtro = operacao_campo.val();    \r\n\r\n            //esvazia campo hidden caso algum item já tenha sido escolhido antes\r\n            if(operacao_selecionado) $(_operacao_id).val('');\r\n\r\n            if( !filtro ) {\r\n                fechaListaPesquisa( input_group );\r\n                $(_operacao_id).val('');\r\n                //return false;\r\n            }\r\n\t\t\t\r\n\t\t\t//ajax\r\n\t\t\tvar type\t= \"POST\",\r\n                url\t\t= \"/_21010/pesquisa\",\r\n                data\t= {\r\n                    'filtro'        : filtro,\r\n                    'produto_id'    : _produto_id.val()\r\n                },\r\n\t\t\t\tsuccess\t= function(data) {\r\n\r\n                    abreListaPesquisa( input_group );\r\n\r\n                    $('.lista-operacao')\r\n                        .html(data)\r\n                    ;\r\n\r\n                    //existem dados cadastrados\r\n                    if( data.indexOf('nao-cadastrado') === -1 ) {\r\n\r\n                        operacao_itens = $('ul.operacao li a');\r\n\r\n                        selecItemListaOperacao( $(operacao_itens), operacao_campo, _operacao_id, _ccusto, _ccontabil);\r\n\r\n                        $(operacao_itens)\r\n                            .focusout(function() {\r\n\r\n                                if(tempo_focus) \r\n                                    clearTimeout(tempo_focus);\r\n\r\n                                tempo_focus = setTimeout(function() {\r\n\r\n                                    if( !$(operacao_itens).is(':focus') && \r\n                                        !$(operacao_campo).is(':focus') && \r\n                                        !$(operacao_btn_filtro).is(':focus') \r\n                                    ) {\r\n                                        $(operacao_campo).val('');\r\n                                        fechaListaPesquisa( input_group );\r\n                                    }\r\n\r\n                                }, 200);\r\n\r\n                            });\r\n\r\n                        $(operacao_campo)\r\n                            .focusout(function() {\r\n\r\n                                if(tempo_focus) \r\n                                    clearTimeout(tempo_focus);\r\n\r\n                                tempo_focus = setTimeout(function() {\r\n\r\n                                    if( !$(operacao_itens).is(':focus') &&\r\n                                        !$(_operacao_id).val() && \r\n                                        !$(operacao_btn_filtro).is(':focus') \r\n                                    ) {\r\n                                        $(operacao_campo).val('');\r\n                                        fechaListaPesquisa( input_group );\r\n                                    }\r\n\r\n                                }, 200);\r\n\r\n                            });\r\n                    }\r\n                    else {\r\n                        $(_operacao_id).val('');\r\n\r\n                        $(operacao_campo)\r\n                            .focusout(function() {\r\n                                if( $('.lista-operacao').children().children().hasClass('nao-cadastrado') ) {\r\n                                    $(operacao_campo).val('');\r\n                                    fechaListaPesquisa( input_group );\r\n                                }\r\n                            });\r\n                    }\r\n                    bootstrapInit();\r\n                }\r\n\t\t\t;\r\n\t\t\t\r\n\t\t\texecAjax2(type, url, data, success, null, operacao_btn_filtro);\r\n\r\n        }\r\n\r\n        /**\r\n         * Preencher campos de acordo com o item selecionado.\r\n         * \r\n         * @param {object} itens\r\n         * @param {object} campo\r\n         * @returns {undefined}\r\n         */\r\n        function selecItemListaOperacao(itens, campo, operacao, ccusto, ccontabil) {\r\n\r\n\t\t\t\r\n\t\t\t$(itens)\r\n\t\t\t\t.click(function(e) {\r\n\t\t\t\t\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\r\n\t\t\t\t\t$(campo)\r\n\t\t\t\t\t\t.val( $(this).nextAll('.descricao').val() )\r\n\t\t\t\t\t\t.focus()\r\n                    ;\r\n\t\t\t\t\t\r\n\t\t\t\t\t$(operacao)\r\n\t\t\t\t\t\t.val( $(this).nextAll('.codigo').val() )\r\n                    ;\r\n\r\n\t\t\t\t\t$(ccusto)\r\n\t\t\t\t\t\t.val( $(this).nextAll('.ccusto').val() )\r\n                    ;\r\n\r\n\t\t\t\t\t$(ccontabil)\r\n\t\t\t\t\t\t.val( $(this).nextAll('.ccontabil').val() )\r\n                    ;\r\n                    \r\n\t\t\t\t\tselecionadoOperacao(campo, operacao_btn_filtro, operacao_btn_filtro_apagar);\r\n\r\n\t\t\t\t\tfechaListaPesquisa( input_group );\r\n\t\t\t\t\tproduto_selecionado = true;\r\n            });\r\n\r\n        }\r\n        \r\n\t\t/**\r\n\t\t * Ações que devem acontecer após o item ser selecionado.\r\n\t\t *\r\n         * @param input campo_produto\r\n         * @param button btn_filtro\r\n         * @param button btn_filtro_apagar\r\n         */\r\n\t\tfunction selecionadoOperacao(campo_produto, btn_filtro, btn_filtro_apagar) {\r\n\t\t\t\r\n\t\t\t$(campo_produto)\r\n\t\t\t\t.attr('readonly', true)\r\n            ;\r\n\t\t\r\n\t\t\t$(btn_filtro)\r\n\t\t\t\t.hide()\r\n            ;\r\n\r\n\t\t\t$(btn_filtro_apagar)\r\n\t\t\t\t.show()\r\n\t\t\t\t.click(function() {\r\n\r\n\t\t\t\t\t$(this)\r\n\t\t\t\t\t\t.hide()\r\n\t\t\t\t\t\t.prev('button')\r\n\t\t\t\t\t\t.removeAttr('disabled')\r\n\t\t\t\t\t\t.show()\r\n                    ;\r\n                    \r\n\t\t\t\t\t$(this)\r\n\t\t\t\t\t\t.siblings('input')\r\n\t\t\t\t\t\t.removeAttr('readonly')\r\n                        .val('')\r\n                    ;                    \r\n                    \r\n\t\t\t\t\t$(this)\r\n\t\t\t\t\t\t.parents('tr')\r\n                        .first()\r\n                        .find('input[field=\"item[operacao][]\"]')\r\n\t\t\t\t\t\t.val('')\r\n                    ;\r\n                                \r\n\t\t\t\t\t$(this)\r\n\t\t\t\t\t\t.parents('tr')\r\n                        .first()\r\n                        .find('input[field=\"item[ccusto][]\"]')\r\n\t\t\t\t\t\t.val('')\r\n                    ;\r\n                                \r\n\t\t\t\t\t$(this)\r\n\t\t\t\t\t\t.parents('tr')\r\n                        .first()\r\n                        .find('input[field=\"item[ccontabil][]\"]')\r\n\t\t\t\t\t\t.val('')\r\n                    ;\r\n             \r\n                    \r\n\t\t\t\t});\r\n\t\t}      \r\n\r\n        /**\r\n         * Eventos para o filtro de CCusto.\r\n         */\r\n        function iniciarFiltroOperacao() {\r\n            var linha_item;\r\n            var click_item;    \r\n\t\t\t\r\n\t\t\t$('.operacao-descricao').each(function() {\r\n\t\t\t\r\n\t\t\t\tif ( $(this).val() !== '' || $(this).attr('readonly') ) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tselecionadoOperacao(\r\n\t\t\t\t\t\t$(this), \r\n\t\t\t\t\t\t$(this).next('.btn-filtro-operacao'), \r\n\t\t\t\t\t\t$(this).siblings('.btn-apagar-filtro-operacao')\r\n\t\t\t\t\t);\r\n\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t});\r\n            \r\n            //Botão de filtrar\r\n            $('.btn-filtro-operacao').on({\r\n\r\n                click: function() {\r\n                    if ( !$(this).parents('tr').first().find('input[field=\"item[operacao][]\"]').val() )\r\n                        filtrarOperacao( $(this).prev('input') )\r\n                    ;\r\n                },\r\n                \r\n\t\t\t\tfocusout: function() {\r\n                    linha_item = $(this).parents('tr').first();\r\n                    \r\n\t\t\t\t\tif(tempo_focus) \r\n\t\t\t\t\t\tclearTimeout(tempo_focus);\r\n\r\n\t\t\t\t\ttempo_focus = setTimeout(function() {\r\n\r\n\t\t\t\t\t\tif (\r\n                           !linha_item\r\n                                .find('input[field=\"item[operacao][]\"]')\r\n                                .val() \r\n                            &&\r\n                            linha_item\r\n                                .find('.lista-operacao')\r\n                                .is(':empty')\r\n                        ) {\r\n                            linha_item\r\n                                .find('.operacao-descricao')\r\n                                .val('')\r\n                            ;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ( \r\n                           !linha_item\r\n                                .find('input[field=\"item[operacao][]\"]')\r\n                                .val() \r\n                            && \r\n                           !linha_item\r\n                                .find('.lista-operacao ul li a')\r\n                                .is(':focus')\r\n                            && \r\n\t\t\t\t\t\t\tlinha_item\r\n                                .find('.operacao-descricao')\r\n                                .val() \r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tlinha_item\r\n                                .find('.operacao-descricao')\r\n                                .val('')\r\n                            ;\r\n\t\t\t\t\t\t\tfechaListaPesquisa(input_group);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif ( \r\n                           !linha_item\r\n                                .find('input[field=\"item[operacao][]\"]')\r\n                                .val()\r\n                            && \r\n                           !linha_item\r\n                                .find('.lista-operacao ul li a')\r\n                                .is(':focus')\r\n                            && \r\n                           !linha_item\r\n                                .find('.operacao-descricao')\r\n                                .val() \r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tfechaListaPesquisa(input_group);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}, 200);\r\n\t\t\t\t}\r\n            });\r\n\r\n            //Campo de filtro\r\n            $('.operacao-descricao').on({\r\n\r\n                keydown: function(e) {\r\n\r\n                    //Eventos após a escolha de um item\r\n                    if ( $(this).is('[readonly]') ) {\r\n\r\n                        //Deletar teclando 'Backspace' ou 'Delete'\r\n                        if ( (e.keyCode === 8) || (e.keyCode === 46) ) {\r\n\t\t\t\t\t\t\t$(this)\r\n\t\t\t\t\t\t\t\t.nextAll('.btn-apagar-filtro-operacao')\r\n\t\t\t\t\t\t\t\t.click();\r\n                        }\r\n                    }\r\n                    else {\r\n\r\n                        //Pesquisar com 'Enter'\r\n                        if (e.keyCode === 13) {\r\n                            filtrarOperacao( $(this) );\r\n                        }\r\n                    }\r\n                },  \r\n                \r\n\t\t\t\tfocusout: function() {\r\n                    linha_item = $(this).parents('tr').first();\r\n                    click_item = $(this);\r\n                    \r\n\t\t\t\t\t//verificar quando o campo deve ser zerado\r\n\t\t\t\t\tif(tempo_focus) clearTimeout(tempo_focus);\r\n\r\n\t\t\t\t\ttempo_focus = setTimeout(function() {\r\n\r\n\t\t\t\t\t\tif (\r\n                           !linha_item\r\n                                .find('input[field=\"item[operacao][]\"]')\r\n                                .val('') \r\n                            && \r\n\t\t\t\t\t\t\tclick_item\r\n                                .parent()\r\n                                .nextAll('.lista-operacao-container')\r\n                                .children('.lista-operacao')\r\n                                .is(':empty')\r\n                            &&\r\n                           !click_item\r\n                                .nextAll('.btn-filtro-operacao')\r\n                                .is(':focus') \r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tclick_item\r\n                                .val('');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 200);\r\n\t\t\t\t}\r\n            });\r\n        }\r\n    \r\n\t\tiniciarFiltroOperacao();\r\n\t}\r\n\t\r\n\t/**\r\n\t * Passar entre itens com as teclas up/down.\r\n\t */\r\n\tfunction ativarTabSeta() {\r\n\r\n\t\t$(document)\r\n\t\t\t.on('keydown', '.pesquisa-res ul li a', 'down', function() {\r\n\t\t\t\t\r\n\t\t\t\t$.tabNext();\r\n\t\t\t\treturn false;\r\n\t\t\t\t\r\n\t\t\t})\r\n\t\t\t.on('keydown', '.pesquisa-res ul li a', 'up', function() {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t$.tabPrev();\r\n\t\t\t\treturn false;\r\n\t\t\t\r\n\t\t\t})\r\n\t\t\t.on('keydown', '.ccusto input, .gestor input, .produto input, .empresa-descricao', 'down', function() {\r\n\t\t\t\t\r\n\t\t\t\t$.tabNext();\r\n\t\t\t\treturn false;\r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t\t\r\n\t}\r\n\t\r\n\tfunction habilitarEdicaoOperacao() {\r\n\t\t\r\n\t\t$('.produto .editar-item-dinamico')\r\n\t\t\t.click(function() {\r\n\t\t\t\t\r\n\t\t\t\t$(this)\r\n\t\t\t\t\t.closest('.produto')\r\n\t\t\t\t\t.find('.btn-apagar-filtro-operacao')\r\n\t\t\t\t\t.removeAttr('disabled')\r\n\t\t\t\t;\r\n\t\t\t\t\r\n\t\t\t})\r\n\t\t;\r\n\t\t\r\n\t}\r\n\r\n\t/**\r\n\t * Filtro.\r\n\t */\r\n\tfunction filtrar() {\r\n\r\n\t\tvar filtro = $('.filtro-obj').val(),\r\n\t\t\tstatus = $('#filter-status').val();\r\n\t\t\r\n\t\t//ajax\r\n\t\tvar type\t= \"POST\",\r\n\t\t\turl\t\t= \"/_13010/filtraObj\",\r\n\t\t\tdata\t= {'filtro': filtro, 'status': status},\r\n\t\t\tsuccess\t= function(data) {\r\n\r\n\t\t\t\t$('.dataTables_scrollBody').scrollTop(0);\r\n\r\n\t\t\t\t$('table.lista-obj tbody').empty();\r\n\r\n\t\t\t\tconsole.log(data);\r\n\r\n\t\t\t\t$('table.lista-obj tbody').append(data);\r\n\t\t\t},\r\n\t\t\terro = function(xhr) {\r\n\t\t\t\t$('.dataTables_scrollBody').scrollTop(0);\r\n\r\n\t\t\t\t$('table.lista-obj tbody').empty();\r\n\r\n\t\t\t\tconsole.log('erro');\r\n\t\t\t}\r\n\t\t;\r\n\r\n\t\texecAjax1(type, url, data, success, erro);\r\n\r\n\t\turiHistory(data);\r\n\t}\r\n\r\n\tfunction eventoFiltrar() {\r\n\r\n\t\t$('#btn-table-filter').click(function() {\r\n\t\t\tfiltrar();\r\n\t\t});\t\r\n\r\n\t\t// Evento de filtrar pelo campo está em table.js.\r\n\t\t// Aqui somente irá setar o filtro na url.\r\n\t\t$('.filtro-obj').keydown(function(e) {\r\n\r\n\t\t\tif (e.keyCode === 13) {\r\n\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\t'filtro': $('.filtro-obj').val(), \r\n\t\t\t\t\t'status': $('#filter-status').val()\r\n\t\t\t\t};\r\n\r\n\t\t\t\turiHistory(data);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Filtrar tabela ao carregar página se algum filtro tiver sido feito antes.\r\n\t */\r\n\tfunction filtrarAoCarregar() {\r\n\r\n\t\t// Se houver parâmetros na url, o que significa que um filtro já foi feito antes.\r\n\t\tif ( location.href.indexOf('?') > -1 ) {\r\n\t\t\t\r\n\t\t\tsetTimeout(function() { \r\n\t\t\t\t$('#btn-table-filter').click(); \r\n\t\t\t}, 1000);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Definir URL com parâmetro do filtro e guardar em localStorage.\r\n\t */\r\n\tfunction uriHistory(dado) {\r\n\r\n\t\twindow.history.replaceState('', '', encodeURI(urlhost + '/_13010?'+ $.param(dado)));\r\n\r\n\t\tlocalStorage.setItem('13010FiltroUrl', location.href);\r\n\t}\r\n\r\n\r\n\t$(function() {\r\n\t\t\r\n\t\tativarTabSeta();\r\n\t\tconsultarOperacao();\r\n\t\thabilitarEdicaoOperacao();\r\n\t\teventoFiltrar();\r\n\t\tfiltrarAoCarregar();\r\n\t\t\r\n\t\t//Limite do textarea\r\n\t\tlimiteTextarea( $('textarea.obs'), 200, $('span.contador span') ); //função em master.js\r\n\t\t\r\n\t});\r\n\r\n})(jQuery);"]}