{"version":3,"sources":["AutoUpdate.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AutoUpdate.js","sourcesContent":["(function($) {\n    \n    var abilite = false;\n    var tempo_atualizar = 60;\n    var time_fechar;\n    var fechar_ativo = 0;\n    var tempo_fechar_tela = tempo_atualizar * 1000;\n    var tempo_atualizar_tela = tempo_atualizar * tempo_atualizar * 1000;\n    \n    function getAtributosTelaProd(x){\n\n        function getStabelecimento(){\n           return $(\"._input_estab\").val();\n        }\n        \n        function setStabelecimento(valor){\n           $(\"._input_estab\").val(valor);\n        }\n\n        function getGp(){\n           return $(\"._gp_descricao\").val(); \n        }\n        \n        function setGp(valor){\n            if(valor != ''){ \n                $('.consulta_gp_grup').find(\".consulta-descricao\").val(valor);\n                $('.consulta_gp_grup').find(\".btn-filtro-consulta\").trigger( \"click\" );\n            }\n        }\n\n        function getUp(){\n           return $(\"._up_descricao\").val(); \n        }\n\n        function setUp(valor){\n            if(valor != ''){ \n                $('.consulta_up_group').find(\".consulta-descricao\").val(valor);\n                $('.consulta_up_group').find(\".btn-filtro-consulta\").trigger( \"click\" );\n            }\n        }\n\n        function getUpo(){\n           return $(\"._up_origem_descricao\").val(); \n        }\n        \n        function setUpo(valor){\n            if(valor != ''){ \n                $('.consulta_up_origem_group').find(\".consulta-descricao\").val(valor);\n                $('.consulta_up_origem_group').find(\".btn-filtro-consulta\").trigger( \"click\" );\n            }\n        }\n\n        function filtrar(){\n           return $(\".btn-filtrar\").trigger( \"click\" );\n        }\n\n        function coletar(){\n            var estabelecimento = getStabelecimento();\n            var descricao_gp    = getGp();\n            var descricao_up    = getUp();\n            var descricao_upo   = getUpo();\n            var atualizar       = 0; \n\n            sessionStorage.setItem(\"estabelecimento\"  , estabelecimento   );\n            sessionStorage.setItem(\"descricao_gp\"     , descricao_gp      );\n            sessionStorage.setItem(\"descricao_up\"     , descricao_up      );\n            sessionStorage.setItem(\"descricao_upo\"    , descricao_upo     );\n            sessionStorage.setItem(\"atualizar\"        , atualizar         );\n\n        }\n        \n        function setValores(){\n            \n            var tempo = 2000;\n            \n            var estabelecimento = sessionStorage.getItem(\"estabelecimento\"  );\n            var descricao_gp    = sessionStorage.getItem(\"descricao_gp\"     );\n            var descricao_up    = sessionStorage.getItem(\"descricao_up\"     );\n            var descricao_upo   = sessionStorage.getItem(\"descricao_upo\"    );\n            \n            sessionStorage.setItem(\"atualizar\",0);\n            \n            setStabelecimento(estabelecimento);\n            setTimeout(function(){\n                setGp(descricao_gp);\n                setTimeout(function(){\n                    setUp(descricao_up);\n                    setTimeout(function(){\n                        setUpo(descricao_upo);\n                        setTimeout(function(){\n                            filtrar();\n                            fechar_ativo = 1;\n                            \n                            time_load = setTimeout(function(){\n                                $(document).on('mousemove', function() {\n                                    liparTimes();\n                                });\n\n                                clearTimeout(time_load);\n                                time_load = null;\n                            },5000);\n                            \n                            time_fechar = setTimeout(function(){\n                                \n                                var url = document.URL;\n                                var url = (url).replace(\"/\", \"@\");\n                                var url = (url).replace(\"/\", \"@\");\n                                var url = (url).replace(\"/\", \"@\");\n                                var url = (url).replace(\"/\", \"@\");\n                                var url = (url).replace(\"/\", \"@\");\n                                \n                                window.location.href = urlhost+'/abainativa/'+url;\n                                \n                            },tempo_fechar_tela);\n                            \n                        },tempo);\n                    },tempo);\n                },tempo);\n            },tempo);\n        }\n        \n        if(x == 1){\n            coletar();\n        }else{\n          setValores();  \n        }\n        \n    }\n    \n    var timer;\n    var Time_cont;\n    var cont = 0;\n    var contando = 0;\n    var timer_ativar;\n    \n    function liparTimes(){\n        clearTimeout(timer_ativar);\n        setAlertaOculto();\n        \n        if(fechar_ativo == 1){\n            clearTimeout(time_fechar);\n            time_fechar = null;\n        }\n        \n        if(contando == 1){\n            cont=0;\n            clearInterval(Time_cont);\n            Time_cont = null;\n            clearTimeout(timer);\n            timer = null;\n            contando = 0;\n            setContadorOculto();\n            sessionStorage.setItem(\"atualizar\",0);\n        }\n        \n        timer_ativar = setTimeout(function(){\n            if(abilite){\n                var flag = $('#finalizar').attr('disabled');\n\n                if( flag == 'disabled'){\n                    initContador();\n                }\n            }\n        },5000);\n    }\n    \n    function initContador(){\n                \n        contando =1;\n\n        setContadorVisivel();\n\n        timer = setTimeout(function(){\n            cont=0;\n            clearInterval(Time_cont);\n            Time_cont = null;\n            clearTimeout(timer);\n            timer = null;\n            sessionStorage.setItem(\"atualizar\",1);\n            setContadorOculto();\n            location.reload();\n        },tempo_atualizar_tela);\n\n        Time_cont = setInterval(function(){\n            cont++;\n            setContadorValor((tempo_atualizar - cont) + 's para actualizar a pagina e melhorar o desempenho do aplicativo.');\n            \n            if((tempo_atualizar - cont) <= 5){\n                setAlertaVisivel();\n            }\n            \n        },1000);\n    }\n    \n    function setContadorVisivel(){\n        $('.contador-Atualizar').show();\n    }\n    \n    function setContadorOculto(){\n        $('.contador-Atualizar').hide();\n    }\n    \n    function setAlertaVisivel(){\n        $('.info-Atualizar').show();\n    }\n    \n    function setAlertaOculto(){\n        $('.info-Atualizar').hide();\n    }\n    \n    function setContadorValor(valor){\n        $('.contador-Atualizar').html(valor);\n        $('.info-Atualizar-fraze').html(valor);\n    }\n    \n    var time_load;\n    \n    window.onload = function(){\n        if(abilite){\n            var flag = sessionStorage.getItem(\"atualizar\");\n\n            setContadorOculto();\n\n            if(flag == 1){\n                getAtributosTelaProd(2);  \n            }else{\n                time_load = setTimeout(function(){\n                    $(document).on('mousemove', function() {\n                        liparTimes();\n                    });\n\n                    clearTimeout(time_load);\n                    time_load = null;\n                },4000);\n            }    \n        }\n        setAlertaOculto();\n    };\n    \n    $(document).on('click','.btn-filtrar', function(e) {\n      getAtributosTelaProd(1);  \n    });\n    \n})(jQuery);"]}