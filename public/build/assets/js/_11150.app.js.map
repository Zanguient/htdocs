{"version":3,"sources":["_11150.app.js","_11150.script.js","_11140.factory.create.js","ng-file-upload.min.js","_11150.arquivos.js","_11150.controller.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/oBA;AACA;AACA;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"_11150.app.js","sourcesContent":["/**\n * _11140 - Cadastro de paineis de Casos\n */\n'use strict';\n\nangular\n\t.module('app', [\n\t\t'vs-repeat', \n\t\t'gc-ajax',\n\t\t'gc-transform',\n\t\t'gc-form',\n\t\t'gc-utils',\n\t\t'gc-find',\n        'ngFileUpload',\n        'ngSanitize'\n\t])\n\n\t.filter('inArray', function($filter){\n\t    return function(list, arrayFilter, element){\n\t        if(arrayFilter){\n\t            return $filter(\"filter\")(list, function(listItem){\n\t                return arrayFilter.indexOf(listItem[element]) != -1;\n\t            });\n\t        }\n\t    };\n\t});\n;","angular\r\n    .module('app')\r\n    .factory('ScriptCompile', ScriptCompile);\r\n\r\n\tScriptCompile.$inject = [\r\n        '$ajax',\r\n        '$window',\r\n        '$timeout',\r\n        '$rootScope',\r\n        '$compile'\r\n    ];\r\n\r\nfunction ScriptCompile($ajax,$window,$timeout,$rootScope,$compile) {\r\n\r\n    var lista = [];\r\n    /**\r\n     * Constructor, with class name\r\n     */\r\n    function ScriptCompile(data) {\r\n        if (data) {\r\n            this.setData(data);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Public method, assigned to prototype\r\n     */\r\n    ScriptCompile.prototype = {\r\n        /* Variaveis */\r\n        script     :'',\r\n        funcoes    :{\r\n            0 : {\r\n                CHAVE : 'ISNULL',\r\n                EXEC  : function(valor){\r\n                    var ret = false;\r\n                    valor = valor[0];\r\n\r\n                    if(valor == ''       ){ret = true}\r\n                    if(valor == undefined){ret = true}\r\n\r\n                    return ret;\r\n                },\r\n                DESC  : 'Verifica se um valor é vazio ou não definido'\r\n            },\r\n            1 : {\r\n                CHAVE : 'TRIM',\r\n                EXEC  : function(valor){\r\n                    valor = valor[0];\r\n                    valor = (valor+'').trim();\r\n                    return valor;\r\n                },\r\n                DESC  : 'Remove os espaços no inicio e fim de uma string'\r\n            },\r\n            2 : {\r\n                CHAVE : 'SOMA',\r\n                EXEC  : function(valor){\r\n                    var v1 = (valor[0]+'').trim();\r\n                    var v2 = (valor[1]+'').trim();\r\n\r\n                    var valor = Number(v1)+Number(v2);\r\n                    return valor;\r\n                },\r\n                DESC  : 'Soma dois valores'\r\n            },\r\n            3 : {\r\n                CHAVE : 'DIVISAO',\r\n                EXEC  : function(valor){\r\n                    var v1 = (valor[0]+'').trim();\r\n                    var v2 = (valor[1]+'').trim();\r\n\r\n                    var valor = Number(v1)/Number(v2);\r\n                    return valor;\r\n                },\r\n                DESC  : 'Soma dois valores'\r\n            }\r\n        },\r\n        variaveis  :[],\r\n        formulas   :[],\r\n        operadores :[],\r\n        /* funções */\r\n        setData: function(data) {\r\n            angular.extend(this, data);\r\n        },\r\n        mimifi: function(string){\r\n            var regex = new RegExp('\\\\n', 'g');\r\n            string = string.replace(regex, ' ');\r\n            \r\n            var regex = new RegExp('  ', 'g');\r\n            string = string.replace(regex, ' ');\r\n\r\n            //var regex = new RegExp(, 'g');\r\n            string = string.replace('/ (/g', '(');\r\n\r\n            return string;\r\n        },\r\n        removerAspas: function(string){\r\n            var aa = string.trim();\r\n\r\n            var e = aa.indexOf('\\'');\r\n            if(e == 0){\r\n                var f = aa.substring(1,aa.length);\r\n                f = f.indexOf('\\'');\r\n                if((f+2) == aa.length){\r\n                    aa = aa.substring(1,aa.length -1);\r\n                }\r\n            }\r\n\r\n            return aa;\r\n        },\r\n        encontrarValor: function(chave_ini,chave_fim,string,flag){\r\n            var that = this;\r\n\r\n            var ret = [];\r\n            var string_temp   = ' '+(string+'').trim()+' ';\r\n            var string_temp_a = '';\r\n            var string_temp_b = '';\r\n\r\n            var controle = 0;\r\n            var contador = 0;\r\n            \r\n            var encontrado_em_ini = 0;\r\n            var encontrado_em_fim = 0;\r\n            var ret_valor = '';\r\n\r\n            var encontrado_em_ini = string_temp.indexOf(chave_ini);\r\n            var encontrado_em_fim = string_temp.indexOf(chave_fim);\r\n\r\n            var c = 0;\r\n            var d = 0;\r\n            while (c == 0) {\r\n\r\n                if(encontrado_em_fim >= encontrado_em_ini){\r\n                    c = 1;    \r\n                }else{\r\n                    var e = string_temp.substring(encontrado_em_fim + 1, string_temp.length);\r\n                    var f = e.indexOf(chave_fim);\r\n                    if(f > 0){\r\n                        encontrado_em_fim = encontrado_em_fim + f + 1;\r\n                    }   \r\n                }\r\n\r\n                d++;\r\n\r\n                if(d > 10){\r\n                    c = 1;\r\n                }\r\n            }\r\n\r\n            if(encontrado_em_ini >= 0){\r\n                var variavel  = string_temp.substring(encontrado_em_ini,encontrado_em_fim + chave_fim.length);\r\n                var a         = string_temp.substring(0, encontrado_em_ini);\r\n                var b         = string_temp.substring(encontrado_em_fim + chave_fim.length, string_temp.length);\r\n                var x         = string_temp.substring(encontrado_em_ini + chave_ini.length,encontrado_em_fim - chave_fim.length +1);\r\n\r\n                string_temp   = a+b;\r\n                string_temp_a = a;\r\n                string_temp_b = b;\r\n\r\n                variavel      = variavel.trim();\r\n\r\n                if(flag == 1){\r\n                    variavel = x;\r\n                    variavel = variavel.trim();\r\n\r\n                }else{\r\n                    if((' '+variavel).indexOf(chave_ini) < 1){\r\n                        variavel = '';\r\n                    } \r\n                }\r\n\r\n                ret_valor = variavel;\r\n            }else{\r\n                controle = 1;    \r\n            }          \r\n\r\n            return {VALOR: ret_valor, STRING: string_temp, STRING_A: string_temp_a, STRING_B: string_temp_b}\r\n\r\n        },\r\n        removerComentario: function(string){\r\n            var that = this;\r\n            var chave_ini = \"/*\";\r\n            var chave_fim = \"*/\";\r\n\r\n            var controle = 0;\r\n\r\n            var contador = 0;\r\n            var string_temp = string;\r\n\r\n            var ret = [];\r\n\r\n            while (controle < 1) {\r\n\r\n                var a = that.encontrarValor(chave_ini,chave_fim,string_temp,0);\r\n\r\n                var variavel = a.VALOR;\r\n                var string_temp_a = a.STRING_A;\r\n                var string_temp_b = a.STRING_B;\r\n\r\n                if(variavel != ''){\r\n                    string_temp = string_temp_a+string_temp_b;\r\n                    ret.push(variavel.trim());\r\n                }else{\r\n                    controle = 1;    \r\n                } \r\n\r\n                contador++;\r\n                if(contador > 20){\r\n                    controle = 1;  \r\n                }         \r\n            }\r\n\r\n            return {COMENTARIOS: ret, STRING: string_temp}\r\n        }, \r\n        encontrarFuncoes: function(string){\r\n\r\n            var that = this;\r\n\r\n            var ret = [];\r\n            var string_temp = string;\r\n\r\n            angular.forEach(this.funcoes, function(iten, key) { \r\n                \r\n                var chave_ini = iten.CHAVE + '(';\r\n                var chave_fim = \")\";\r\n\r\n                var controle = 0;\r\n                var contador = 0;\r\n                \r\n                var encontrado_em_ini = 0;\r\n                var encontrado_em_fim = 0;\r\n\r\n                while (controle < 1) {\r\n\r\n                    var a = that.encontrarValor(chave_ini,chave_fim,string_temp,0);\r\n\r\n                    var variavel = a.VALOR;\r\n                    var string_temp_a = a.STRING_A;\r\n                    var string_temp_b = a.STRING_B;\r\n\r\n                    if(variavel != ''){\r\n                        var aa = variavel.substring(chave_ini.length, variavel.length - chave_fim.length);\r\n\r\n                        aa = that.removerAspas(aa);\r\n\r\n                        aa = iten.EXEC(aa.split(\",\"));\r\n\r\n                        string_temp = string_temp_a+aa+string_temp_b;\r\n\r\n                        ret.push(variavel);\r\n                    }else{\r\n                        controle = 1;    \r\n                    } \r\n\r\n                    contador++;\r\n                    if(contador > 20){\r\n                        controle = 1;  \r\n                    }         \r\n                }\r\n\r\n            });\r\n\r\n            return {FUNCAO: ret, STRING: string_temp}\r\n        },\r\n        encontrarVariaveis: function(string){\r\n\r\n            var that = this;\r\n\r\n            var ret = [];\r\n            var string_temp = string;\r\n                \r\n            var chave_ini = 'VAR';\r\n            var chave_fim = \";\";\r\n\r\n            var controle = 0;\r\n            var contador = 0;\r\n\r\n            while (controle < 1) {\r\n\r\n                var a = that.encontrarValor(chave_ini,chave_fim,string_temp,0);\r\n\r\n                var variavel = a.VALOR;\r\n                var string_temp = a.STRING;\r\n\r\n                if(variavel != ''){\r\n\r\n                    var c = that.encontrarValor('VAR ','=',variavel,1);\r\n                    var d = that.encontrarValor('=',';',variavel,1);\r\n                    var e = c.VALOR;\r\n                    var f = d.VALOR;\r\n\r\n                    ret.push({VAR:e,VALOR:f});\r\n                }else{\r\n                    controle = 1;    \r\n                } \r\n\r\n                contador++;\r\n                if(contador > 20){\r\n                    controle = 1;  \r\n                }         \r\n            }\r\n\r\n            return {VARIAVEIS: ret, STRING: string_temp}\r\n        },\r\n        ScriptCompile: function(data) {\r\n            if (data) {\r\n                this.setData(data);\r\n            }\r\n        },\r\n        getNew: function() {\r\n            return true;\r\n        },\r\n        formulaCompilar: function(formula,itens){\r\n\r\n            return true;\r\n        },\r\n        encontrarFormula: function(){\r\n            var formulas = [];\r\n            var tratado  = this.script.toUpperCase();\r\n            tratado      = this.mimifi(tratado);\r\n            tratado      = this.removerComentario(tratado);\r\n            tratado      = this.encontrarFuncoes(tratado.STRING);    var funcoes = tratado.FUNCAO;\r\n            tratado      = this.encontrarVariaveis(tratado.STRING);  var variavel = tratado.VARIAVEIS;\r\n            \r\n            var string = tratado.STRING;\r\n            console.log(funcoes);\r\n            console.log(variavel);\r\n            console.log(string);\r\n\r\n            return formulas;\r\n        },\r\n        exprecoes : [\r\n            {\r\n                NOME:'IF',\r\n                SCOPO:'IF(){}'\r\n            }\r\n        ],\r\n        testarfuncao: function(itens){\r\n            var sct   = '';\r\n                sct  += 'if ( ){ ';\r\n                sct  += '/* TESTE */';\r\n                sct  += ' var a = TRIM(\\' OI ANDERSON \\');';\r\n                sct  += ' var b = ISNULL(\\'ANDERSON\\');';\r\n                sct  += ' var c = SOMA(1,2);';\r\n                sct  += ' var d = DIVISAO( 2, 2 );';\r\n                sct  += ' var e = SOMA(:C,:D);';\r\n                sct  += '}';\r\n\r\n            this.script = sct;\r\n            var itens   = itens;\r\n            var retorno = this.encontrarFormula();\r\n        },\r\n        executar: function(){\r\n            var script = document.getElementById(\"textareaCode\").value;\r\n            var valor  = this.compile(script);\r\n            console.log(valor);\r\n        },\r\n        compile: function(script){\r\n\r\n            function sleep(ms) {\r\n                var unixtime_ms = new Date().getTime();\r\n                while(new Date().getTime() < unixtime_ms + ms) {}\r\n            }\r\n            \r\n            var valor;\r\n\r\n            try{\r\n\r\n                var text  = \"\";\r\n                text += \"<!DOCTYPE html>\";\r\n                text += \"<html>\";\r\n                text += \"  <body onload='onload()'>\";\r\n                text += \"    <input type='checkbox' id='valor-retorno' value='NOT'>\";\r\n                text += \"    <script>\";\r\n                text += \"    function silentErrorHandler(){return true;}\"; \r\n                text += \"    window.onerror=silentErrorHandler;\";\r\n                text += \"      var result;\";\r\n                text += \"      function onload() {\";\r\n                text += \"        try{\";\r\n                text +=            script;\r\n                text += \"          if(result == undefined){result = 'a variavel \\\"result\\\" não foi definida';}\";\r\n                text += \"          var ret = document.getElementById('valor-retorno');\";\r\n                text += \"          ret.checked = result;\";\r\n                text += \"          ret.value = result;\";\r\n                text += \"        }catch(erro) {\";\r\n                text += \"          ret.value = erro.message;\";\r\n                text += \"        }\";\r\n                text += \"      }\";\r\n                text += \"    </script>\";\r\n                text += \"  </body>\";\r\n                text += \"</html>\";\r\n\r\n                var ifr = document.createElement(\"iframe\");\r\n\r\n                ifr.setAttribute(\"frameborder\", \"0\");\r\n                ifr.setAttribute(\"id\", \"iframeResult\");\r\n                ifr.setAttribute(\"name\", \"iframeResult\");  \r\n                document.getElementById(\"iframewrapper\").innerHTML = \"\";\r\n                document.getElementById(\"iframewrapper\").appendChild(ifr);\r\n\r\n                var ifrw = (ifr.contentWindow) ? ifr.contentWindow : (ifr.contentDocument.document) ? ifr.contentDocument.document : ifr.contentDocument;\r\n                ifrw.document.open();\r\n                ifrw.onerror = function(e){\r\n                    if(valor == undefined){\r\n                        valor = e;\r\n                    }\r\n                };\r\n                ifrw.document.write(text);  \r\n                ifrw.document.close();\r\n                if (ifrw.document.body && !ifrw.document.body.isContentEditable) {\r\n                    ifrw.document.body.contentEditable = true;\r\n                    ifrw.document.body.contentEditable = false;\r\n                }\r\n\r\n            }catch(err) {\r\n                valor = err.message;\r\n            }\r\n\r\n            var cont = 0;\r\n            while(valor == undefined){\r\n                valor = $( \"#iframeResult\" ).contents().find( \"#valor-retorno\" ).val();\r\n                sleep(100);\r\n                cont++;\r\n                if(cont > 19){\r\n                    valor = false;\r\n                }\r\n            }\r\n\r\n            return valor;\r\n            \r\n        }\r\n    }\r\n\r\n    /**\r\n     * Return the constructor function\r\n     */\r\n    return ScriptCompile;\r\n};","angular\n    .module('app')\n    .factory('Create', Create);\n    \nCreate.$inject = [\n        '$ajax',\n        '$httpParamSerializer',\n        '$rootScope',\n        'gScope',\n        '$compile',\n        '$consulta'\n    ];\n\nfunction Create($ajax, $httpParamSerializer, $rootScope, gScope, $compile, $consulta) {\n\n    /**\n     * Constructor, with class name\n     */\n    function Create(data) {\n        if (data) {\n            this.setData(data);\n        }\n    }\n\n    var itens_html = [];\n\n    var consulta = new $consulta();\n    gScope.consulta = consulta;\n\n    var Input_temp = {\n        EDIT     : 0,\n        NOME     : '',\n        ID       : 0,\n        TIPO     : 0,\n        VALOR    : 0,\n        TEXTO    : 'Texto',\n        DEFAULT  : 0,\n        MIN      : 0,\n        MAX      : 100,\n        TAMANHO  : '1',\n        REQUERED : '1',\n        VINCULO  : '',\n        STEP     : 1,\n        CONSULTA : null,\n        DISABLED : false,\n        ITENS    : [{TEXTO : 'ITEM 1', SELECTED: false, VALOR : '1'}]\n    }\n\n    function validarInput(item,Inputs){\n\n    }\n\n    /**\n     * Public method, assigned to prototype\n     */\n    Create.prototype = {\n        itens : [],\n        model : '',\n        validarCampos: function(){\n            var validar = true;\n\n            angular.forEach(this.itens, function(iten, key) {\n                var item_invalido = false;\n\n                if(iten.REQUERED == 1){\n\n                    if((iten.TIPO == 1 || iten.TIPO == 2 || iten.TIPO == 3 || iten.TIPO == 5 || iten.TIPO == 6 || iten.TIPO == 8 || iten.TIPO == 10) && iten.VALOR == \"\"){\n                        item_invalido = true;                            \n                    }\n\n                    if(iten.TIPO == 4){\n                        var not_selected_item = true;\n                        angular.forEach(iten.ITENS, function(a, key) {\n                            if(a.SELECTED == true){\n                                not_selected_item = false;\n                            }\n                        });\n\n                        if(not_selected_item){\n                            item_invalido = true;\n                        }\n                    }\n\n                    if(iten.TIPO == 7){\n                        var valor = iten.CONSULTA.item.dados[iten.CAMPO_GRAVAR];\n                        if(valor == undefined){\n                            item_invalido = true;\n                        }\n                    }\n\n                    try{\n                        //console.log(iten.VALOR);\n                        if((iten.TIPO == 9 ) && !(iten.VALOR.VALOR > 0)){\n                            //console.log(iten.VALOR);\n                            item_invalido = true;                            \n                        }\n                    }catch(erro){\n                        item_invalido = true;     \n                    }\n                    \n\n                    if(item_invalido){\n                        showErro(\"\\\"\"+iten.NOME+\"\\\" é obrigatório\");\n                        validar = false;\n                    }\n                }\n            });\n\n            return validar;\n        },\n        tratarCampos: function(){\n            var itens = [];\n\n            angular.forEach(this.itens, function(iten, key) {\n                var valor, id, tipo, arr_itens, comitens,temp, json;\n\n                id    = iten.ID;\n                valor = \"\";\n                arr_itens = [];\n                tipo  = iten.TIPO;\n                json  = \"\"; \n\n                comitens = false;\n\n                if(iten.TIPO == 1 || iten.TIPO == 2 || iten.TIPO == 3 || iten.TIPO == 5 || iten.TIPO == 6 || iten.TIPO == 8 || iten.TIPO == 10){\n                    valor = iten.VALOR;                            \n                }\n\n                if(iten.TIPO == 4){\n                    comitens = true;\n                    angular.forEach(iten.ITENS, function(a, key) {\n                        if(a.SELECTED){temp = 1;}else{temp = 0;}\n                        arr_itens.push({VALOR: temp, CAMPO_VALOR: a.VALOR});\n                    });\n                }\n\n                if(iten.TIPO == 7){\n                    valor = iten.CONSULTA.item.dados[iten.CAMPO_GRAVAR];\n                    json = JSON.stringify(iten.CONSULTA.item.dados);\n                }\n\n                if(iten.TIPO == 9 ){\n                    try{\n                        valor = iten.VALOR.VALOR;\n                    }catch(erro){\n                        valor = 0;\n                    }                        \n                }\n\n                if(valor == undefined){\n                    valor = 0;\n                }\n\n                itens.push({VALOR:valor, ID:id, TIPO:tipo, ITENS:arr_itens, COMITENS:comitens, JSON:json});\n                \n            });\n\n            return itens;\n        },\n        montarHtml:function(item,id,flag){\n            that = this;\n\n            var ng_model = ''; if(that.model.length > 0){ng_model = 'ng-model=\"'+that.model+'['+id+'].VALOR\"'; }else{ng_model = '';}\n            var ng_modelvalor = ''; if(that.model.length > 0){ng_modelvalor = that.model+'['+id+']'; }else{ng_modelvalor = '';}\n\n            var Input    = '';\n            var disabled = ''; if(item.DISABLED){disabled = 'ng-disabled=\"'+that.model+'['+id+'].DISABLED == true\"'; }else{disabled = '';}\n            var required = ''; if(item.REQUERED == 1){required = 'required'; }else{required = '';}\n            var tamanho  = ''; if(item.TAMANHO == 1){tamanho = 'input-menor';}else{if(item.TAMANHO == 2){tamanho = 'input-medio';}else{tamanho = 'input-maior';}}\n\n            var required2 = ''; if(item.REQUERED == 1){required2 = '<span style=\"color:red;\">*</span>'; }else{required2 = '';}\n            \n            if(flag == 0){\n                Input  += '<div class=\"div-obj-input item-'+id+'\">';\n            }\n\n            if(flag < 2){\n                    Input  += '<button ng-click=\"vm.Create.editInput('+id+')\" class=\"btn btn-primary action-items\">';\n                    Input  += '        <span class=\"glyphicon glyphicon-pencil\"></span>';\n                    Input  += '</button>';\n                    Input  += '<button ng-click=\"vm.Create.deleteInput('+id+')\" class=\"btn btn-danger action-items\">';\n                    Input  += '        <span class=\"glyphicon glyphicon-remove\"></span>';\n                    Input  += '</button>';\n            }\n            \n            if(flag == 2){\n                Input  += '<div class=\"itens-inputs\">';\n            }\n\n            switch(item.TIPO) {\n            case '1':\n                Input += '<div class=\"form-group\">'+\n                         '   <label>'+item.TEXTO+':</label>'+\n                         '   <input '+ng_model+' '+disabled+' type=\"text\" name=\"titulo\" class=\"form-control '+tamanho+'\"  value=\"'+item.VALOR+'\" '+required+' autocomplete=\"off\" '+required+'>'+\n                         '</div> ';\n                break;\n            case '2':\n                Input += '<div class=\"form-group\">'+\n                         '   <label>'+item.TEXTO+':</label>'+\n                         '   <input  '+ng_model+' '+disabled+' type=\"number\" name=\"titulo\" autocomplete=\"off\" value=\"'+item.VALOR+'\" min=\"'+item.MIN+'\" max=\"'+item.MAX+'\" step=\"'+item.STEP+'\" class=\"form-control '+tamanho+'\"  '+required+'>'+\n                         '</div> ';\n                break;\n            case '3':\n                Input += '<div class=\"form-group\">'+\n                         '   <label>'+item.TEXTO+':</label>'+\n                         '   <input  ng-change=\"console.log('+that.model+'['+id+'].VALOR)\" '+ng_model+' '+disabled+' placeholder=\"yyyy-MM-dd\" type=\"date\" autocomplete=\"off\" name=\"data_utilizacao\" class=\"form-control \" style=\"width: 163px;\" '+required+'>'+\n                         '</div> ';\n                break;\n            case '4':\n                Input += '<div class=\"form-group\">'+\n                         '   <label>'+item.TEXTO+':'+required2+'</label><div></div><div class=\"itens-group\">';\n\n                    angular.forEach(item.ITENS, function(iten, key) {\n                        var ch = '';\n                        if(iten.SELECTED){\n                            ch = 'checked';\n                        }\n\n                        if(that.model.length > 0){ng_model = 'ng-model=\"'+that.model+'['+id+'].ITENS['+key+'].SELECTED\"'; }else{ng_model = '';}\n                        Input += '<div class=\"item-checkbox\"><input '+ng_model+' '+disabled+' type=\"checkbox\" autocomplete=\"off\" value=\"'+iten.VALOR+'\" '+ch+' class=\"form-control\" '+required+'><span class=\"label-checkbox\">'+iten.TEXTO+'</span></div>';\n                        \n                    });\n\n                Input += '</div></div>';\n\n                break;\n            case '5':\n                Input += '<div class=\"form-group\">'+\n                         '   <label>'+item.TEXTO+':'+required2+'</label><div></div><div class=\"itens-group\">';\n\n                    angular.forEach(item.ITENS, function(iten, key) {\n                        var ch = '';\n                        if(iten.SELECTED){\n                            ch = 'checked';\n                        }\n                        //if(that.model.length > 0){ng_model = 'ng-model=\"'+that.model+'['+(that.itens.length - 1)+'].ITENS['+key+'].SELECTED\"'; }else{ng_model = '';}\n                        Input += '<div class=\"item-checkbox\"><input '+ng_model+' '+disabled+' type=\"radio\" autocomplete=\"off\" name=\"'+item.NOME+'\" value=\"'+iten.VALOR+'\" '+ch+' class=\"form-control\"><span class=\"label-checkbox\">'+iten.TEXTO+'</span></div>';\n                        \n                    });\n\n                Input += '</div></div>';\n                break;\n            case '6':\n                Input += '<div class=\"form-group\">'+\n                         '   <label>'+item.TEXTO+':</label>';\n                Input += '      <form><div class=\"item-checkbox\" style=\"display: inline-flex;\">';\n                Input += '          <input  '+ng_model+' '+disabled+' class=\"input-range  '+tamanho+'\" type=\"range\"  autocomplete=\"off\" name=\"amountRange\" min=\"'+item.MIN+'\" max=\"'+item.MAX+'\" step=\"'+item.STEP+'\" value=\"'+item.VALOR+'\" oninput=\"this.form.amountInput.value=this.value\" '+required+' />';\n                Input += '          <input class=\"form-control valor-range\" disabled type=\"number\" autocomplete=\"off\" name=\"amountInput\" min=\"'+item.MIN+'\" max=\"'+item.MAX+'\" step=\"'+item.STEP+'\" value=\"'+item.VALOR+'\" oninput=\"this.form.amountRange.value=this.value\" '+required+' />';\n                Input += '      </div></form>';\n                Input += '</div> ';\n                break;\n            case '7':\n\n                item.CONSULTA = consulta.getNew();\n                item.CONSULTA.option.filtro_sql = [];\n                item.CONSULTA.option.filtro_sql.push({SQL_ID : item.SQL_ID, PAINEL_ID: item.PAINEL_ID});\n\n                item.CONSULTA.autoload = item.AUTOLOAD;\n\n                    alerta  = '';\n                    vinculo = '';\n                    if(item.VINCULO_CAMPO.length > 0){\n                        alerta += '<span style=\"margin-left: 5px;\"';\n                        alerta += 'class=\"glyphicon glyphicon-info-sign\" ';\n                        alerta += 't-title=\"Depende de \\''+item.VINCULO_DESCRICAO+'\\'\"> ';\n                        alerta += '</span>';\n\n                        item.CONSULTA.require = [];\n                        \n                        angular.forEach(item.VINCULO_CAMPO, function(a, key) {\n                            item.CONSULTA.require.push(that.model_itens[a].CONSULTA);\n                        });\n                        \n                        item.CONSULTA.vincular();\n\n                        var a = item.CONSULTA.option.filtro_sql;\n                        item.CONSULTA.option.filtro_sql = [];\n                        item.CONSULTA.option.filtro_sql.push({SQL_ID : item.SQL_ID, PAINEL_ID: item.PAINEL_ID});\n\n                        angular.forEach(a, function(b, key) {\n                            item.CONSULTA.option.filtro_sql.push(b);\n                        });\n\n                        \n                    }\n\n                var ng_model = ''; if(that.model.length > 0){ng_model = that.model+'['+id+'].CONSULTA'; }else{ng_model = '';}\n\n                var tamanho  = ''; if(item.TAMANHO == 1){tamanho = 'input-menor';}else{if(item.TAMANHO == 2){tamanho = 'input-medio';}else{tamanho = 'input-maior';}}\n\n                var CAMPO_TABELA   = (item.CAMPO_TABELA   + '').split(',');\n                var CAMPOS_RETORNO = (item.CAMPOS_RETORNO + '').split(',');\n                var DESC_TABELA    = (item.DESC_TABELA    + '').split(',');\n\n                item.CONSULTA.option.obj_ret = [];\n                angular.forEach(CAMPOS_RETORNO, function(iten, key) {\n                    item.CONSULTA.option.obj_ret.push(iten);\n                });\n\n                item.CONSULTA.option.campos_tabela = [];\n                angular.forEach(CAMPO_TABELA, function(iten, key) {\n                    item.CONSULTA.option.campos_tabela.push([iten,DESC_TABELA[key]]);\n                });\n\n                item.CONSULTA.disable(item.DISABLED);           \n\n                item.CONSULTA.componente             = '.consulta_' + id,\n                item.CONSULTA.model                  = ng_model,\n                item.CONSULTA.option.label_descricao = item.TEXTO + alerta,\n                item.CONSULTA.option.obj_consulta    = item.URL_CONSULTA,\n                item.CONSULTA.option.tamanho_Input   = tamanho;\n                item.CONSULTA.option.class           = 'consulta_item_' + id,\n                item.CONSULTA.option.tamanho_tabela  = item.TAMANHO_TABELA;\n                item.CONSULTA.option.required        = item.REQUERED == 1;\n\n                var h = item.CONSULTA.html();\n\n                Input += '<div class=\"consulta_'+id+'\" >'+h+'</div>';\n\n                break;\n            case '8':\n                Input += '<div class=\"form-group\">'+\n                         '   <label>'+item.TEXTO+':</label>'+\n                         '   <input  '+ng_model+' '+disabled+' type=\"time\" name=\"titulo\" class=\"form-control \" autocomplete=\"off\" style=\"width: 94px;\"  '+required+'>'+\n                         '</div> ';\n                break;\n            case '9':\n\n                var ng_model2 = ''; if(that.model.length > 0){ng_model2 = 'ng-model=\"'+that.model+'['+id+'].VALOR\"'; }else{ng_model2 = '';}\n                var ng_model3 = ''; if(that.model.length > 0){ng_model3 = that.model+'['+id+']'; }else{ng_model3 = '';}\n                var vinculo   = '';\n                var alerta    = '';\n\n                //item.VALOR = {};\n\n                        vinculo = '';\n                        if(item.VINCULO_CAMPO > 0){\n                            alerta += '<span  style=\"margin-left: 5px;\"';\n                            alerta += 'class=\"glyphicon glyphicon-info-sign\" ';\n                            alerta += 't-title=\"Depende de \\''+item.VINCULO_DESCRICAO+'\\'\"> ';\n                            alerta += '</span>';\n\n                            var model = ''; if(that.model.length > 0){model = that.model+'['+item.VINCULO_CAMPO+'].VALOR.VALOR'; }else{model = '';}\n\n                                var array = []; \n                                var tmp   = 0;\n\n                                angular.forEach(item.VINCULO_ITENS, function(n, k) {\n                                    if(tmp != n.VALOR_VINCULO){\n                                        tmp = n.VALOR_VINCULO;\n                                        if(array[tmp] == undefined){\n                                            array[tmp] = [];\n                                        }\n                                        if(n.STATUS == 1){\n                                            array[tmp].push(n.VALOR_CAMPO);\n                                        }\n                                    }\n                                });\n\n                            item.VINCULO_ITENS = array;\n                            vinculo += '| inArray:'+ng_model3+'.VINCULO_ITENS['+model+']:\"VALOR\"';\n\n                        }\n\n                if(that.model.length > 0){ng_model = 'ng-options=\\'iten.TEXTO for iten in '+that.model+'['+id+'].ITENS '+vinculo+'\\''; }else{ng_model = '';}\n                \n\n                Input +='<div class=\"form-group\"><label>'+item.TEXTO+':'+alerta+'</label>';\n\n                if(that.model.length > 0){\n                    Input += '   <select '+ng_model2+' '+disabled+' class=\"form-control '+tamanho+'\" '+required+'  '+ng_model+'>';\n                    Input += '   <option value=\"\"> - SELECIONE - </option>'\n                }else{\n\n                    Input += '   <select class=\"form-control '+tamanho+'\" '+required+' >';\n\n                    console.log(item.VINCULO_CAMPO);\n                    \n                    angular.forEach(item.ITENS, function(iten, key) {\n                        var sl = '';\n                        if(iten.SELECTED){\n                            sl = 'selected';\n                        }\n\n                        Input += '<option value=\"'+iten.VALOR+'\" '+sl+'>'+iten.TEXTO+'</option>';\n                    });\n                }\n\n                Input +='   </select></div>';\n\n                break;\n            case '10':\n\n                Input +='<div class=\"form-group\"><label>'+item.TEXTO+':'+required2+'</label>';\n                Input += '<textarea '+disabled+' name=\"\" '+ng_model+' class=\"form-control\" rows=\"5\" cols=\"70\"></textarea><span class=\"contador\"><span>{{('+ng_modelvalor+'.VALOR + \\'\\').length}}</span> caracteres</span>';\n                Input +='</div>';\n\n                break;\n            default:\n                showErro('Tipo do Input não encontrado, Tipo:'+item.TIPO);\n            }\n\n            if(flag == 2 || flag == 0){\n                Input  += '</div>';\n            }\n\n            return Input;    \n        },\n        setData: function(data) {\n            angular.extend(this, data);\n        },        \n        consultar : function (args) {\n\n        },\n        addNewItem : function () {\n            this.Input.ITENS.push({TEXTO : 'ITEM '+(this.Input.ITENS.length + 1),SELECTED: false, VALOR : ''+(this.Input.ITENS.length + 1)});\n        },\n        validarInfo : function (tipo) {\n\n            this.ocultarInfo();\n            $('.info_padrao').css('display','block');\n\n            switch(tipo) {\n            case '1': //Texto\n                $('.info_tamanho').css('display','block');\n                break;\n            case '2': //Número\n                $('.info_tamanho').css('display','block');\n                $('.info_min_max').css('display','block');\n                break;\n            case '3': //Data\n                //$('.info_tamanho').css('display','block');\n                break;\n            case '4': //Check\n                $('.info_new_item').css('display','block');\n                break;\n            case '5': //Radio\n                $('.info_new_item').css('display','block');\n                break;\n            case '6': //Range\n                $('.info_tamanho').css('display','block');\n                $('.info_min_max').css('display','block');\n                break;\n            case '7': //Search\n                $('.info_tamanho').css('display','block');\n                $('.info_search').css('display','block');\n                break;\n            case '8': //Time\n               // $('.info_tamanho').css('display','block');\n            case '9': //Time\n                $('.info_new_item').css('display','block');\n                break;\n            case '10': //Time\n                //$('.info_new_item').css('display','block');\n                break;\n            default:\n                this.ocultarInfo();\n            }\n        },\n        ocultarInfo : function (tipo){\n            $('.item_info').css('display','none');    \n        },\n        uriHistory : function() {\n            window.history.replaceState('', '', encodeURI(urlhost + '/_11140?'+$httpParamSerializer(this)));\n        },\n        gravar: function() {\n            window.history.replaceState('', '', encodeURI(urlhost + '/_11140?'+$httpParamSerializer(this)));\n        },\n        edtInput: function(id) {\n            var item  = null;\n            var index = 0;\n            angular.forEach(this.Inputs, function(obj, key) {\n                if(obj.ID == id){\n                    index = key;\n                    item = obj;\n                }\n            });\n\n            var html = this.montarHtml(this.Input,id,1);\n            angular.copy(this.Input,this.Inputs[index]);\n\n            if(item.TIPO == 7){\n\n                var tamanho  = ''; if(item.TAMANHO == 1){tamanho = 'input-menor';}else{if(item.TAMANHO == 2){tamanho = 'input-medio';}else{tamanho = 'input-maior';}}\n                    \n                item.CONSULTA.componente             = '.consulta_' + id,\n                item.CONSULTA.model                  = 'vm.Create.Inputs['+id+'].CONSULTA',\n                item.CONSULTA.option.label_descricao = item.TEXTO,\n                item.CONSULTA.option.obj_consulta    = '/_11140/Consultar',\n                item.CONSULTA.option.tamanho_Input   = tamanho;\n                item.CONSULTA.option.class           = 'consulta_item_' + id,\n                item.CONSULTA.option.tamanho_tabela  = 300;\n                item.CONSULTA.option.required        = (item.REQUERED == 1);\n\n                console.log(item.CONSULTA);\n\n                item.CONSULTA.compile();\n\n            }else{\n                var obj   = $('.item-'+id+'');\n                var scope = obj.scope(); \n                obj.html(html);\n                var obj   = $('.item-'+id+'');\n                $compile(obj.contents())(scope);\n            }\n\n            $('#modal-add-Inputs').modal('hide');\n        },\n        addInput: function() {\n\n            var Input   = '';\n            var item    = angular.copy(this.Input, item);\n            var erro    = 0;\n            var msgErro = '';\n\n            function validarString(value){\n                var ret = 0;\n\n                if(/[!@#$%*()_+^&{}}:;?.]/gm.test(value)){\n                    ret = 1;\n                }\n\n                if(item.NOME == ''){\n                    ret = 1;    \n                }\n\n                return ret;\n            };\n\n            if(validarString(item.NOME)){    \n                msgErro = 'Este nome é inválido. contem \"!@#$%*()_+^&{}}:;?.\" ou \"\"';\n                erro    = 1;\n            }\n\n            if(item.TIPO == 0){    \n                msgErro = 'Selecione um tipo';\n                erro    = 1;\n            }\n\n            angular.forEach(this.Inputs, function(obj, key) {\n              if(obj.NOME == item.NOME){\n                msgErro = 'Este nome já existe';\n                erro    = 1;\n              }\n            });\n\n            if(erro == 0){\n                var that = this;\n                Input = this.montarHtml(item,this.Inputs.length,0);\n\n                item.EDIT = 0;\n                item.ID   = this.Inputs.length;\n\n                this.Inputs.push(item);\n                this.Input.EDIT = 0;\n\n                var obj   = $('.conteiner-Inputs');\n                var scope = obj.scope(); \n                obj.append(Input);\n                var obj   = $('.conteiner-Inputs').find('.div-obj-input').last();\n                $compile(obj.contents())(scope);\n\n                if(item.TIPO == 7){\n                    var id = (that.Inputs.length -1);\n                    item.CONSULTA = consulta.getNew();\n\n                    var tamanho  = ''; if(item.TAMANHO == 1){tamanho = 'input-menor';}else{if(item.TAMANHO == 2){tamanho = 'input-medio';}else{tamanho = 'input-maior';}}\n                    \n                    item.CONSULTA.componente             = '.consulta_' + id,\n                    item.CONSULTA.model                  = 'vm.Create.Inputs['+id+'].CONSULTA',\n                    item.CONSULTA.option.label_descricao = item.TEXTO,\n                    item.CONSULTA.option.obj_consulta    = '/_11140/Consultar',\n                    item.CONSULTA.option.tamanho_Input   = tamanho;\n                    item.CONSULTA.option.class           = 'consulta_item_' + id,\n                    item.CONSULTA.option.tamanho_tabela  = 300;\n                    item.CONSULTA.option.required        = (item.REQUERED == 1);\n\n                    console.log(item.CONSULTA);\n\n                    item.CONSULTA.compile();\n                    \n                }\n\n\n                $('#modal-add-Inputs').modal('hide');\n\n            }else{\n                showErro(msgErro);\n            }\n        },\n        editInput: function(id) {\n            var index = 0;\n            angular.forEach(this.Inputs, function(obj, key) {\n                if(obj.ID == id){\n                    index = key;\n                }\n            }); \n\n            var item = angular.copy(this.Inputs[index], item); ;\n\n            item.EDIT = 1;\n\n            this.Input = item;\n\n            this.validarInfo(item.TIPO);\n            $('#modal-add-Inputs').modal('show');\n        },\n        deleteInput: function(id) {\n\n            var index = 0;\n            angular.forEach(this.Inputs, function(obj, key) {\n                if(obj.ID == id){\n                    index = key;\n                }\n            });\n\n            var item = this.Inputs[index];\n            var obj = this.Inputs;\n\n            addConfirme('Excluir Input?',\n                    'Deseja realmente excluir o Input:'+item.TEXTO+' ('+item.NOME+')'\n                    ,[obtn_ok,obtn_cancelar],\n                [\n                {ret:1,func:function(e){\n\n                    obj.splice(index, 1);\n                    $('.item-'+id).remove();\n\n                }},\n                {ret:2,func:function(e){\n\n\n                }},\n                ]  \n            );\n            \n\n        },\n        modalAddInput: function() {\n            angular.copy(Input_temp, this.Input);\n            this.Input.NOME = 'OBJETO'+(this.Inputs.length + 1);\n            this.ocultarInfo();\n\n            console.log('Teste');\n            $('#modal-add-Inputs').modal('show');\n        },\n        model_itens : [],\n        Input: {},\n        Inputs : []\n    };\n\n    /**\n     * Return the constructor function\n     */\n    return Create;\n};","/*! 12.2.13 */\n!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=function(a){return function(b,c){if(\"__setXHR_\"===b){var d=c(this);d instanceof Function&&d(this)}else a.apply(this,arguments)}}(window.XMLHttpRequest.prototype.setRequestHeader));var ngFileUpload=angular.module(\"ngFileUpload\",[]);ngFileUpload.version=\"12.2.13\",ngFileUpload.service(\"UploadBase\",[\"$http\",\"$q\",\"$timeout\",function(a,b,c){function d(d){function e(a){j.notify&&j.notify(a),k.progressFunc&&c(function(){k.progressFunc(a)})}function h(a){return null!=d._start&&g?{loaded:a.loaded+d._start,total:d._file&&d._file.size||a.total,type:a.type,config:d,lengthComputable:!0,target:a.target}:a}function i(){a(d).then(function(a){if(g&&d._chunkSize&&!d._finished&&d._file){var b=d._file&&d._file.size||0;e({loaded:Math.min(d._end,b),total:b,config:d,type:\"progress\"}),f.upload(d,!0)}else d._finished&&delete d._finished,j.resolve(a)},function(a){j.reject(a)},function(a){j.notify(a)})}d.method=d.method||\"POST\",d.headers=d.headers||{};var j=d._deferred=d._deferred||b.defer(),k=j.promise;return d.disableProgress||(d.headers.__setXHR_=function(){return function(a){a&&a.upload&&a.upload.addEventListener&&(d.__XHR=a,d.xhrFn&&d.xhrFn(a),a.upload.addEventListener(\"progress\",function(a){a.config=d,e(h(a))},!1),a.upload.addEventListener(\"load\",function(a){a.lengthComputable&&(a.config=d,e(h(a)))},!1))}}),g?d._chunkSize&&d._end&&!d._finished?(d._start=d._end,d._end+=d._chunkSize,i()):d.resumeSizeUrl?a.get(d.resumeSizeUrl).then(function(a){d._start=d.resumeSizeResponseReader?d.resumeSizeResponseReader(a.data):parseInt((null==a.data.size?a.data:a.data.size).toString()),d._chunkSize&&(d._end=d._start+d._chunkSize),i()},function(a){throw a}):d.resumeSize?d.resumeSize().then(function(a){d._start=a,d._chunkSize&&(d._end=d._start+d._chunkSize),i()},function(a){throw a}):(d._chunkSize&&(d._start=0,d._end=d._start+d._chunkSize),i()):i(),k.success=function(a){return k.then(function(b){a(b.data,b.status,b.headers,d)}),k},k.error=function(a){return k.then(null,function(b){a(b.data,b.status,b.headers,d)}),k},k.progress=function(a){return k.progressFunc=a,k.then(null,null,function(b){a(b)}),k},k.abort=k.pause=function(){return d.__XHR&&c(function(){d.__XHR.abort()}),k},k.xhr=function(a){return d.xhrFn=function(b){return function(){b&&b.apply(k,arguments),a.apply(k,arguments)}}(d.xhrFn),k},f.promisesCount++,k[\"finally\"]&&k[\"finally\"]instanceof Function&&k[\"finally\"](function(){f.promisesCount--}),k}function e(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}var f=this;f.promisesCount=0,this.isResumeSupported=function(){return window.Blob&&window.Blob.prototype.slice};var g=this.isResumeSupported();this.isUploadInProgress=function(){return f.promisesCount>0},this.rename=function(a,b){return a.ngfName=b,a},this.jsonBlob=function(a){null==a||angular.isString(a)||(a=JSON.stringify(a));var b=new window.Blob([a],{type:\"application/json\"});return b._ngfBlob=!0,b},this.json=function(a){return angular.toJson(a)},this.isFile=function(a){return null!=a&&(a instanceof window.Blob||a.flashId&&a.name&&a.size)},this.upload=function(a,b){function c(b,c){if(b._ngfBlob)return b;if(a._file=a._file||b,null!=a._start&&g){a._end&&a._end>=b.size&&(a._finished=!0,a._end=b.size);var d=b.slice(a._start,a._end||b.size);return d.name=b.name,d.ngfName=b.ngfName,a._chunkSize&&(c.append(\"_chunkSize\",a._chunkSize),c.append(\"_currentChunkSize\",a._end-a._start),c.append(\"_chunkNumber\",Math.floor(a._start/a._chunkSize)),c.append(\"_totalSize\",a._file.size)),d}return b}function h(b,d,e){if(void 0!==d)if(angular.isDate(d)&&(d=d.toISOString()),angular.isString(d))b.append(e,d);else if(f.isFile(d)){var g=c(d,b),i=e.split(\",\");i[1]&&(g.ngfName=i[1].replace(/^\\s+|\\s+$/g,\"\"),e=i[0]),a._fileKey=a._fileKey||e,b.append(e,g,g.ngfName||g.name)}else if(angular.isObject(d)){if(d.$$ngfCircularDetection)throw\"ngFileUpload: Circular reference in config.data. Make sure specified data for Upload.upload() has no circular reference: \"+e;d.$$ngfCircularDetection=!0;try{for(var j in d)if(d.hasOwnProperty(j)&&\"$$ngfCircularDetection\"!==j){var k=null==a.objectKey?\"[i]\":a.objectKey;d.length&&parseInt(j)>-1&&(k=null==a.arrayKey?k:a.arrayKey),h(b,d[j],e+k.replace(/[ik]/g,j))}}finally{delete d.$$ngfCircularDetection}}else b.append(e,d)}function i(){a._chunkSize=f.translateScalars(a.resumeChunkSize),a._chunkSize=a._chunkSize?parseInt(a._chunkSize.toString()):null,a.headers=a.headers||{},a.headers[\"Content-Type\"]=void 0,a.transformRequest=a.transformRequest?angular.isArray(a.transformRequest)?a.transformRequest:[a.transformRequest]:[],a.transformRequest.push(function(b){var c,d=new window.FormData;b=b||a.fields||{},a.file&&(b.file=a.file);for(c in b)if(b.hasOwnProperty(c)){var e=b[c];a.formDataAppender?a.formDataAppender(d,c,e):h(d,e,c)}return d})}return b||(a=e(a)),a._isDigested||(a._isDigested=!0,i()),d(a)},this.http=function(b){return b=e(b),b.transformRequest=b.transformRequest||function(b){return window.ArrayBuffer&&b instanceof window.ArrayBuffer||b instanceof window.Blob?b:a.defaults.transformRequest[0].apply(this,arguments)},b._chunkSize=f.translateScalars(b.resumeChunkSize),b._chunkSize=b._chunkSize?parseInt(b._chunkSize.toString()):null,d(b)},this.translateScalars=function(a){if(angular.isString(a)){if(a.search(/kb/i)===a.length-2)return parseFloat(1024*a.substring(0,a.length-2));if(a.search(/mb/i)===a.length-2)return parseFloat(1048576*a.substring(0,a.length-2));if(a.search(/gb/i)===a.length-2)return parseFloat(1073741824*a.substring(0,a.length-2));if(a.search(/b/i)===a.length-1)return parseFloat(a.substring(0,a.length-1));if(a.search(/s/i)===a.length-1)return parseFloat(a.substring(0,a.length-1));if(a.search(/m/i)===a.length-1)return parseFloat(60*a.substring(0,a.length-1));if(a.search(/h/i)===a.length-1)return parseFloat(3600*a.substring(0,a.length-1))}return a},this.urlToBlob=function(c){var d=b.defer();return a({url:c,method:\"get\",responseType:\"arraybuffer\"}).then(function(a){var b=new Uint8Array(a.data),e=a.headers(\"content-type\")||\"image/WebP\",f=new window.Blob([b],{type:e}),g=c.match(/.*\\/(.+?)(\\?.*)?$/);g.length>1&&(f.name=g[1]),d.resolve(f)},function(a){d.reject(a)}),d.promise},this.setDefaults=function(a){this.defaults=a||{}},this.defaults={},this.version=ngFileUpload.version}]),ngFileUpload.service(\"Upload\",[\"$parse\",\"$timeout\",\"$compile\",\"$q\",\"UploadExif\",function(a,b,c,d,e){function f(a,b,c){var e=[i.emptyPromise()];return angular.forEach(a,function(d,f){0===d.type.indexOf(\"image/jpeg\")&&i.attrGetter(\"ngfFixOrientation\",b,c,{$file:d})&&e.push(i.happyPromise(i.applyExifRotation(d),d).then(function(b){a.splice(f,1,b)}))}),d.all(e)}function g(a,b,c,e){var f=i.attrGetter(\"ngfResize\",b,c);if(!f||!i.isResizeSupported()||!a.length)return i.emptyPromise();if(f instanceof Function){var g=d.defer();return f(a).then(function(d){h(d,a,b,c,e).then(function(a){g.resolve(a)},function(a){g.reject(a)})},function(a){g.reject(a)})}return h(f,a,b,c,e)}function h(a,b,c,e,f){function g(d,g){if(0===d.type.indexOf(\"image\")){if(a.pattern&&!i.validatePattern(d,a.pattern))return;a.resizeIf=function(a,b){return i.attrGetter(\"ngfResizeIf\",c,e,{$width:a,$height:b,$file:d})};var j=i.resize(d,a);h.push(j),j.then(function(a){b.splice(g,1,a)},function(a){d.$error=\"resize\",(d.$errorMessages=d.$errorMessages||{}).resize=!0,d.$errorParam=(a?(a.message?a.message:a)+\": \":\"\")+(d&&d.name),f.$ngfValidations.push({name:\"resize\",valid:!1}),i.applyModelValidation(f,b)})}}for(var h=[i.emptyPromise()],j=0;j<b.length;j++)g(b[j],j);return d.all(h)}var i=e;return i.getAttrWithDefaults=function(a,b){if(null!=a[b])return a[b];var c=i.defaults[b];return null==c?c:angular.isString(c)?c:JSON.stringify(c)},i.attrGetter=function(b,c,d,e){var f=this.getAttrWithDefaults(c,b);if(!d)return f;try{return e?a(f)(d,e):a(f)(d)}catch(g){if(b.search(/min|max|pattern/i))return f;throw g}},i.shouldUpdateOn=function(a,b,c){var d=i.attrGetter(\"ngfModelOptions\",b,c);return d&&d.updateOn?d.updateOn.split(\" \").indexOf(a)>-1:!0},i.emptyPromise=function(){var a=d.defer(),c=arguments;return b(function(){a.resolve.apply(a,c)}),a.promise},i.rejectPromise=function(){var a=d.defer(),c=arguments;return b(function(){a.reject.apply(a,c)}),a.promise},i.happyPromise=function(a,c){var e=d.defer();return a.then(function(a){e.resolve(a)},function(a){b(function(){throw a}),e.resolve(c)}),e.promise},i.updateModel=function(c,d,e,h,j,k,l){function m(f,g,j,l,m){d.$$ngfPrevValidFiles=f,d.$$ngfPrevInvalidFiles=g;var n=f&&f.length?f[0]:null,o=g&&g.length?g[0]:null;c&&(i.applyModelValidation(c,f),c.$setViewValue(m?n:f)),h&&a(h)(e,{$files:f,$file:n,$newFiles:j,$duplicateFiles:l,$invalidFiles:g,$invalidFile:o,$event:k});var p=i.attrGetter(\"ngfModelInvalid\",d);p&&b(function(){a(p).assign(e,m?o:g)}),b(function(){})}function n(){function a(a,b){return a.name===b.name&&(a.$ngfOrigSize||a.size)===(b.$ngfOrigSize||b.size)&&a.type===b.type}function b(b){var c;for(c=0;c<r.length;c++)if(a(b,r[c]))return!0;for(c=0;c<s.length;c++)if(a(b,s[c]))return!0;return!1}if(j){q=[],t=[];for(var c=0;c<j.length;c++)b(j[c])?t.push(j[c]):q.push(j[c])}}function o(a){return angular.isArray(a)?a:[a]}function p(){function a(){b(function(){m(w?r.concat(v):v,w?s.concat(u):u,j,t,x)},z&&z.debounce?z.debounce.change||z.debounce:0)}var f=y?q:v;g(f,d,e,c).then(function(){y?i.validate(q,w?r.length:0,c,d,e).then(function(b){v=b.validsFiles,u=b.invalidsFiles,a()}):a()},function(){for(var b=0;b<f.length;b++){var c=f[b];if(\"resize\"===c.$error){var d=v.indexOf(c);d>-1&&(v.splice(d,1),u.push(c)),a()}}})}var q,r,s,t=[],u=[],v=[];r=d.$$ngfPrevValidFiles||[],s=d.$$ngfPrevInvalidFiles||[],c&&c.$modelValue&&(r=o(c.$modelValue));var w=i.attrGetter(\"ngfKeep\",d,e);q=(j||[]).slice(0),(\"distinct\"===w||i.attrGetter(\"ngfKeepDistinct\",d,e)===!0)&&n(d,e);var x=!w&&!i.attrGetter(\"ngfMultiple\",d,e)&&!i.attrGetter(\"multiple\",d);if(!w||q.length){i.attrGetter(\"ngfBeforeModelChange\",d,e,{$files:j,$file:j&&j.length?j[0]:null,$newFiles:q,$duplicateFiles:t,$event:k});var y=i.attrGetter(\"ngfValidateAfterResize\",d,e),z=i.attrGetter(\"ngfModelOptions\",d,e);i.validate(q,w?r.length:0,c,d,e).then(function(a){l?m(q,[],j,t,x):(z&&z.allowInvalid||y?v=q:(v=a.validFiles,u=a.invalidFiles),i.attrGetter(\"ngfFixOrientation\",d,e)&&i.isExifSupported()?f(v,d,e).then(function(){p()}):p())})}},i}]),ngFileUpload.directive(\"ngfSelect\",[\"$parse\",\"$timeout\",\"$compile\",\"Upload\",function(a,b,c,d){function e(a){var b=a.match(/Android[^\\d]*(\\d+)\\.(\\d+)/);if(b&&b.length>2){var c=d.defaults.androidFixMinorVersion||4;return parseInt(b[1])<4||parseInt(b[1])===c&&parseInt(b[2])<c}return-1===a.indexOf(\"Chrome\")&&/.*Windows.*Safari.*/.test(a)}function f(a,b,c,d,f,h,i,j){function k(){return\"input\"===b[0].tagName.toLowerCase()&&c.type&&\"file\"===c.type.toLowerCase()}function l(){return t(\"ngfChange\")||t(\"ngfSelect\")}function m(b){if(j.shouldUpdateOn(\"change\",c,a)){var e=b.__files_||b.target&&b.target.files,f=[];if(!e)return;for(var g=0;g<e.length;g++)f.push(e[g]);j.updateModel(d,c,a,l(),f.length?f:null,b)}}function n(a,d){function e(b){a.attr(\"id\",\"ngf-\"+b),d.attr(\"id\",\"ngf-label-\"+b)}for(var f=0;f<b[0].attributes.length;f++){var g=b[0].attributes[f];\"type\"!==g.name&&\"class\"!==g.name&&\"style\"!==g.name&&(\"id\"===g.name?(e(g.value),u.push(c.$observe(\"id\",e))):a.attr(g.name,g.value||\"required\"!==g.name&&\"multiple\"!==g.name?g.value:g.name))}}function o(){if(k())return b;var a=angular.element('<input type=\"file\">'),c=angular.element(\"<label>upload</label>\");return c.css(\"visibility\",\"hidden\").css(\"position\",\"absolute\").css(\"overflow\",\"hidden\").css(\"width\",\"0px\").css(\"height\",\"0px\").css(\"border\",\"none\").css(\"margin\",\"0px\").css(\"padding\",\"0px\").attr(\"tabindex\",\"-1\"),n(a,c),g.push({el:b,ref:c}),document.body.appendChild(c.append(a)[0]),a}function p(c){if(b.attr(\"disabled\"))return!1;if(!t(\"ngfSelectDisabled\",a)){var d=q(c);if(null!=d)return d;r(c);try{k()||document.body.contains(x[0])||(g.push({el:b,ref:x.parent()}),document.body.appendChild(x.parent()[0]),x.bind(\"change\",m))}catch(f){}return e(navigator.userAgent)?setTimeout(function(){x[0].click()},0):x[0].click(),!1}}function q(a){var b=a.changedTouches||a.originalEvent&&a.originalEvent.changedTouches;if(b){if(\"touchstart\"===a.type)return w=b[0].clientX,v=b[0].clientY,!0;if(\"touchend\"===a.type){var c=b[0].clientX,d=b[0].clientY;if(Math.abs(c-w)>20||Math.abs(d-v)>20)return a.stopPropagation(),a.preventDefault(),!1}return!0}}function r(b){j.shouldUpdateOn(\"click\",c,a)&&x.val()&&(x.val(null),j.updateModel(d,c,a,l(),null,b,!0))}function s(a){if(x&&!x.attr(\"__ngf_ie10_Fix_\")){if(!x[0].parentNode)return void(x=null);a.preventDefault(),a.stopPropagation(),x.unbind(\"click\");var b=x.clone();return x.replaceWith(b),x=b,x.attr(\"__ngf_ie10_Fix_\",\"true\"),x.bind(\"change\",m),x.bind(\"click\",s),x[0].click(),!1}x.removeAttr(\"__ngf_ie10_Fix_\")}var t=function(a,b){return j.attrGetter(a,c,b)};j.registerModelChangeValidator(d,c,a);var u=[];t(\"ngfMultiple\")&&u.push(a.$watch(t(\"ngfMultiple\"),function(){x.attr(\"multiple\",t(\"ngfMultiple\",a))})),t(\"ngfCapture\")&&u.push(a.$watch(t(\"ngfCapture\"),function(){x.attr(\"capture\",t(\"ngfCapture\",a))})),t(\"ngfAccept\")&&u.push(a.$watch(t(\"ngfAccept\"),function(){x.attr(\"accept\",t(\"ngfAccept\",a))})),u.push(c.$observe(\"accept\",function(){x.attr(\"accept\",t(\"accept\"))}));var v=0,w=0,x=b;k()||(x=o()),x.bind(\"change\",m),k()?b.bind(\"click\",r):b.bind(\"click touchstart touchend\",p),-1!==navigator.appVersion.indexOf(\"MSIE 10\")&&x.bind(\"click\",s),d&&d.$formatters.push(function(a){return(null==a||0===a.length)&&x.val()&&x.val(null),a}),a.$on(\"$destroy\",function(){k()||x.parent().remove(),angular.forEach(u,function(a){a()})}),h(function(){for(var a=0;a<g.length;a++){var b=g[a];document.body.contains(b.el[0])||(g.splice(a,1),b.ref.remove())}}),window.FileAPI&&window.FileAPI.ngfFixIE&&window.FileAPI.ngfFixIE(b,x,m)}var g=[];return{restrict:\"AEC\",require:\"?ngModel\",link:function(e,g,h,i){f(e,g,h,i,a,b,c,d)}}}]),function(){function a(a){return\"img\"===a.tagName.toLowerCase()?\"image\":\"audio\"===a.tagName.toLowerCase()?\"audio\":\"video\"===a.tagName.toLowerCase()?\"video\":/./}function b(b,c,d,e,f,g,h,i){function j(a){var g=b.attrGetter(\"ngfNoObjectUrl\",f,d);b.dataUrl(a,g)[\"finally\"](function(){c(function(){var b=(g?a.$ngfDataUrl:a.$ngfBlobUrl)||a.$ngfDataUrl;i?e.css(\"background-image\",\"url('\"+(b||\"\")+\"')\"):e.attr(\"src\",b),b?e.removeClass(\"ng-hide\"):e.addClass(\"ng-hide\")})})}c(function(){var c=d.$watch(f[g],function(c){var k=h;if(\"ngfThumbnail\"===g&&(k||(k={width:e[0].naturalWidth||e[0].clientWidth,height:e[0].naturalHeight||e[0].clientHeight}),0===k.width&&window.getComputedStyle)){var l=getComputedStyle(e[0]);l.width&&l.width.indexOf(\"px\")>-1&&l.height&&l.height.indexOf(\"px\")>-1&&(k={width:parseInt(l.width.slice(0,-2)),height:parseInt(l.height.slice(0,-2))})}return angular.isString(c)?(e.removeClass(\"ng-hide\"),i?e.css(\"background-image\",\"url('\"+c+\"')\"):e.attr(\"src\",c)):void(!c||!c.type||0!==c.type.search(a(e[0]))||i&&0!==c.type.indexOf(\"image\")?e.addClass(\"ng-hide\"):k&&b.isResizeSupported()?(k.resizeIf=function(a,e){return b.attrGetter(\"ngfResizeIf\",f,d,{$width:a,$height:e,$file:c})},b.resize(c,k).then(function(a){j(a)},function(a){throw a})):j(c))});d.$on(\"$destroy\",function(){c()})})}ngFileUpload.service(\"UploadDataUrl\",[\"UploadBase\",\"$timeout\",\"$q\",function(a,b,c){var d=a;return d.base64DataUrl=function(a){if(angular.isArray(a)){var b=c.defer(),e=0;return angular.forEach(a,function(c){d.dataUrl(c,!0)[\"finally\"](function(){if(e++,e===a.length){var c=[];angular.forEach(a,function(a){c.push(a.$ngfDataUrl)}),b.resolve(c,a)}})}),b.promise}return d.dataUrl(a,!0)},d.dataUrl=function(a,e){if(!a)return d.emptyPromise(a,a);if(e&&null!=a.$ngfDataUrl||!e&&null!=a.$ngfBlobUrl)return d.emptyPromise(e?a.$ngfDataUrl:a.$ngfBlobUrl,a);var f=e?a.$$ngfDataUrlPromise:a.$$ngfBlobUrlPromise;if(f)return f;var g=c.defer();return b(function(){if(window.FileReader&&a&&(!window.FileAPI||-1===navigator.userAgent.indexOf(\"MSIE 8\")||a.size<2e4)&&(!window.FileAPI||-1===navigator.userAgent.indexOf(\"MSIE 9\")||a.size<4e6)){var c=window.URL||window.webkitURL;if(c&&c.createObjectURL&&!e){var f;try{f=c.createObjectURL(a)}catch(h){return void b(function(){a.$ngfBlobUrl=\"\",g.reject()})}b(function(){if(a.$ngfBlobUrl=f,f){g.resolve(f,a),d.blobUrls=d.blobUrls||[],d.blobUrlsTotalSize=d.blobUrlsTotalSize||0,d.blobUrls.push({url:f,size:a.size}),d.blobUrlsTotalSize+=a.size||0;for(var b=d.defaults.blobUrlsMaxMemory||268435456,e=d.defaults.blobUrlsMaxQueueSize||200;(d.blobUrlsTotalSize>b||d.blobUrls.length>e)&&d.blobUrls.length>1;){var h=d.blobUrls.splice(0,1)[0];c.revokeObjectURL(h.url),d.blobUrlsTotalSize-=h.size}}})}else{var i=new FileReader;i.onload=function(c){b(function(){a.$ngfDataUrl=c.target.result,g.resolve(c.target.result,a),b(function(){delete a.$ngfDataUrl},1e3)})},i.onerror=function(){b(function(){a.$ngfDataUrl=\"\",g.reject()})},i.readAsDataURL(a)}}else b(function(){a[e?\"$ngfDataUrl\":\"$ngfBlobUrl\"]=\"\",g.reject()})}),f=e?a.$$ngfDataUrlPromise=g.promise:a.$$ngfBlobUrlPromise=g.promise,f[\"finally\"](function(){delete a[e?\"$$ngfDataUrlPromise\":\"$$ngfBlobUrlPromise\"]}),f},d}]),ngFileUpload.directive(\"ngfSrc\",[\"Upload\",\"$timeout\",function(a,c){return{restrict:\"AE\",link:function(d,e,f){b(a,c,d,e,f,\"ngfSrc\",a.attrGetter(\"ngfResize\",f,d),!1)}}}]),ngFileUpload.directive(\"ngfBackground\",[\"Upload\",\"$timeout\",function(a,c){return{restrict:\"AE\",link:function(d,e,f){b(a,c,d,e,f,\"ngfBackground\",a.attrGetter(\"ngfResize\",f,d),!0)}}}]),ngFileUpload.directive(\"ngfThumbnail\",[\"Upload\",\"$timeout\",function(a,c){return{restrict:\"AE\",link:function(d,e,f){var g=a.attrGetter(\"ngfSize\",f,d);b(a,c,d,e,f,\"ngfThumbnail\",g,a.attrGetter(\"ngfAsBackground\",f,d))}}}]),ngFileUpload.config([\"$compileProvider\",function(a){a.imgSrcSanitizationWhitelist&&a.imgSrcSanitizationWhitelist(/^\\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/),a.aHrefSanitizationWhitelist&&a.aHrefSanitizationWhitelist(/^\\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/)}]),ngFileUpload.filter(\"ngfDataUrl\",[\"UploadDataUrl\",\"$sce\",function(a,b){return function(c,d,e){if(angular.isString(c))return b.trustAsResourceUrl(c);var f=c&&((d?c.$ngfDataUrl:c.$ngfBlobUrl)||c.$ngfDataUrl);return c&&!f?(!c.$ngfDataUrlFilterInProgress&&angular.isObject(c)&&(c.$ngfDataUrlFilterInProgress=!0,a.dataUrl(c,d)),\"\"):(c&&delete c.$ngfDataUrlFilterInProgress,(c&&f?e?b.trustAsResourceUrl(f):f:c)||\"\")}}])}(),ngFileUpload.service(\"UploadValidate\",[\"UploadDataUrl\",\"$q\",\"$timeout\",function(a,b,c){function d(a){var b=\"\",c=[];if(a.length>2&&\"/\"===a[0]&&\"/\"===a[a.length-1])b=a.substring(1,a.length-1);else{var e=a.split(\",\");if(e.length>1)for(var f=0;f<e.length;f++){var g=d(e[f]);g.regexp?(b+=\"(\"+g.regexp+\")\",f<e.length-1&&(b+=\"|\")):c=c.concat(g.excludes)}else 0===a.indexOf(\"!\")?c.push(\"^((?!\"+d(a.substring(1)).regexp+\").)*$\"):(0===a.indexOf(\".\")&&(a=\"*\"+a),b=\"^\"+a.replace(new RegExp(\"[.\\\\\\\\+*?\\\\[\\\\^\\\\]$(){}=!<>|:\\\\-]\",\"g\"),\"\\\\$&\")+\"$\",b=b.replace(/\\\\\\*/g,\".*\").replace(/\\\\\\?/g,\".\"))}return{regexp:b,excludes:c}}function e(a,b){null==b||a.$dirty||(a.$setDirty?a.$setDirty():a.$dirty=!0)}var f=a;return f.validatePattern=function(a,b){if(!b)return!0;var c=d(b),e=!0;if(c.regexp&&c.regexp.length){var f=new RegExp(c.regexp,\"i\");e=null!=a.type&&f.test(a.type)||null!=a.name&&f.test(a.name)}for(var g=c.excludes.length;g--;){var h=new RegExp(c.excludes[g],\"i\");e=e&&(null==a.type||h.test(a.type))&&(null==a.name||h.test(a.name))}return e},f.ratioToFloat=function(a){var b=a.toString(),c=b.search(/[x:]/i);return b=c>-1?parseFloat(b.substring(0,c))/parseFloat(b.substring(c+1)):parseFloat(b)},f.registerModelChangeValidator=function(a,b,c){a&&a.$formatters.push(function(d){if(a.$dirty){var e=d;d&&!angular.isArray(d)&&(e=[d]),f.validate(e,0,a,b,c).then(function(){f.applyModelValidation(a,e)})}return d})},f.applyModelValidation=function(a,b){e(a,b),angular.forEach(a.$ngfValidations,function(b){a.$setValidity(b.name,b.valid)})},f.getValidationAttr=function(a,b,c,d,e){var g=\"ngf\"+c[0].toUpperCase()+c.substr(1),h=f.attrGetter(g,a,b,{$file:e});if(null==h&&(h=f.attrGetter(\"ngfValidate\",a,b,{$file:e}))){var i=(d||c).split(\".\");h=h[i[0]],i.length>1&&(h=h&&h[i[1]])}return h},f.validate=function(a,c,d,e,g){function h(b,c,h){if(a){for(var i=a.length,j=null;i--;){var n=a[i];if(n){var o=f.getValidationAttr(e,g,b,c,n);null!=o&&(h(n,o,i)||(-1===k.indexOf(b)?(n.$error=b,(n.$errorMessages=n.$errorMessages||{})[b]=!0,n.$errorParam=o,-1===m.indexOf(n)&&m.push(n),l||a.splice(i,1),j=!1):a.splice(i,1)))}}null!==j&&d.$ngfValidations.push({name:b,valid:j})}}function i(c,h,i,n,o){function p(b,d,e){function f(f){if(f())if(-1===k.indexOf(c)){if(d.$error=c,(d.$errorMessages=d.$errorMessages||{})[c]=!0,d.$errorParam=e,-1===m.indexOf(d)&&m.push(d),!l){var g=a.indexOf(d);g>-1&&a.splice(g,1)}b.resolve(!1)}else{var h=a.indexOf(d);h>-1&&a.splice(h,1),b.resolve(!0)}else b.resolve(!0)}null!=e?n(d,e).then(function(a){f(function(){return!o(a,e)})},function(){f(function(){return j(\"ngfValidateForce\",{$file:d})})}):b.resolve(!0)}var q=[f.emptyPromise(!0)];a&&(a=void 0===a.length?[a]:a,angular.forEach(a,function(a){var d=b.defer();return q.push(d.promise),!i||null!=a.type&&0===a.type.search(i)?void(\"dimensions\"===c&&null!=f.attrGetter(\"ngfDimensions\",e)?f.imageDimensions(a).then(function(b){p(d,a,j(\"ngfDimensions\",{$file:a,$width:b.width,$height:b.height}))},function(){d.resolve(!1)}):\"duration\"===c&&null!=f.attrGetter(\"ngfDuration\",e)?f.mediaDuration(a).then(function(b){p(d,a,j(\"ngfDuration\",{$file:a,$duration:b}))},function(){d.resolve(!1)}):p(d,a,f.getValidationAttr(e,g,c,h,a))):void d.resolve(!0)}));var r=b.defer();return b.all(q).then(function(a){for(var b=!0,e=0;e<a.length;e++)if(!a[e]){b=!1;break}d.$ngfValidations.push({name:c,valid:b}),r.resolve(b)}),r.promise}d=d||{},d.$ngfValidations=d.$ngfValidations||[],angular.forEach(d.$ngfValidations,function(a){a.valid=!0});var j=function(a,b){return f.attrGetter(a,e,g,b)},k=(f.attrGetter(\"ngfIgnoreInvalid\",e,g)||\"\").split(\" \"),l=f.attrGetter(\"ngfRunAllValidations\",e,g);if(null==a||0===a.length)return f.emptyPromise({validFiles:a,invalidFiles:[]});a=void 0===a.length?[a]:a.slice(0);var m=[];h(\"pattern\",null,f.validatePattern),h(\"minSize\",\"size.min\",function(a,b){return a.size+.1>=f.translateScalars(b)}),h(\"maxSize\",\"size.max\",function(a,b){return a.size-.1<=f.translateScalars(b)});var n=0;if(h(\"maxTotalSize\",null,function(b,c){return n+=b.size,n>f.translateScalars(c)?(a.splice(0,a.length),!1):!0}),h(\"validateFn\",null,function(a,b){return b===!0||null===b||\"\"===b}),!a.length)return f.emptyPromise({validFiles:[],invalidFiles:m});var o=b.defer(),p=[];return p.push(i(\"maxHeight\",\"height.max\",/image/,this.imageDimensions,function(a,b){return a.height<=b})),p.push(i(\"minHeight\",\"height.min\",/image/,this.imageDimensions,function(a,b){return a.height>=b})),p.push(i(\"maxWidth\",\"width.max\",/image/,this.imageDimensions,function(a,b){return a.width<=b})),p.push(i(\"minWidth\",\"width.min\",/image/,this.imageDimensions,function(a,b){return a.width>=b})),p.push(i(\"dimensions\",null,/image/,function(a,b){return f.emptyPromise(b)},function(a){return a})),p.push(i(\"ratio\",null,/image/,this.imageDimensions,function(a,b){for(var c=b.toString().split(\",\"),d=!1,e=0;e<c.length;e++)Math.abs(a.width/a.height-f.ratioToFloat(c[e]))<.01&&(d=!0);return d})),p.push(i(\"maxRatio\",\"ratio.max\",/image/,this.imageDimensions,function(a,b){return a.width/a.height-f.ratioToFloat(b)<1e-4})),p.push(i(\"minRatio\",\"ratio.min\",/image/,this.imageDimensions,function(a,b){return a.width/a.height-f.ratioToFloat(b)>-1e-4})),p.push(i(\"maxDuration\",\"duration.max\",/audio|video/,this.mediaDuration,function(a,b){return a<=f.translateScalars(b)})),p.push(i(\"minDuration\",\"duration.min\",/audio|video/,this.mediaDuration,function(a,b){return a>=f.translateScalars(b)})),p.push(i(\"duration\",null,/audio|video/,function(a,b){return f.emptyPromise(b)},function(a){return a})),p.push(i(\"validateAsyncFn\",null,null,function(a,b){return b},function(a){return a===!0||null===a||\"\"===a})),b.all(p).then(function(){if(l)for(var b=0;b<a.length;b++){var d=a[b];d.$error&&a.splice(b--,1)}l=!1,h(\"maxFiles\",null,function(a,b,d){return b>c+d}),o.resolve({validFiles:a,invalidFiles:m})}),o.promise},f.imageDimensions=function(a){if(a.$ngfWidth&&a.$ngfHeight){var d=b.defer();return c(function(){d.resolve({width:a.$ngfWidth,height:a.$ngfHeight})}),d.promise}if(a.$ngfDimensionPromise)return a.$ngfDimensionPromise;var e=b.defer();return c(function(){return 0!==a.type.indexOf(\"image\")?void e.reject(\"not image\"):void f.dataUrl(a).then(function(b){function d(){var b=h[0].naturalWidth||h[0].clientWidth,c=h[0].naturalHeight||h[0].clientHeight;h.remove(),a.$ngfWidth=b,a.$ngfHeight=c,e.resolve({width:b,height:c})}function f(){h.remove(),e.reject(\"load error\")}function g(){c(function(){h[0].parentNode&&(h[0].clientWidth?d():i++>10?f():g())},1e3)}var h=angular.element(\"<img>\").attr(\"src\",b).css(\"visibility\",\"hidden\").css(\"position\",\"fixed\").css(\"max-width\",\"none !important\").css(\"max-height\",\"none !important\");h.on(\"load\",d),h.on(\"error\",f);var i=0;g(),angular.element(document.getElementsByTagName(\"body\")[0]).append(h)},function(){e.reject(\"load error\")})}),a.$ngfDimensionPromise=e.promise,a.$ngfDimensionPromise[\"finally\"](function(){delete a.$ngfDimensionPromise}),a.$ngfDimensionPromise},f.mediaDuration=function(a){if(a.$ngfDuration){var d=b.defer();return c(function(){d.resolve(a.$ngfDuration)}),d.promise}if(a.$ngfDurationPromise)return a.$ngfDurationPromise;var e=b.defer();return c(function(){return 0!==a.type.indexOf(\"audio\")&&0!==a.type.indexOf(\"video\")?void e.reject(\"not media\"):void f.dataUrl(a).then(function(b){function d(){var b=h[0].duration;a.$ngfDuration=b,h.remove(),e.resolve(b)}function f(){h.remove(),e.reject(\"load error\")}function g(){c(function(){h[0].parentNode&&(h[0].duration?d():i>10?f():g())},1e3)}var h=angular.element(0===a.type.indexOf(\"audio\")?\"<audio>\":\"<video>\").attr(\"src\",b).css(\"visibility\",\"none\").css(\"position\",\"fixed\");h.on(\"loadedmetadata\",d),h.on(\"error\",f);var i=0;g(),angular.element(document.body).append(h)},function(){e.reject(\"load error\")})}),a.$ngfDurationPromise=e.promise,a.$ngfDurationPromise[\"finally\"](function(){delete a.$ngfDurationPromise}),a.$ngfDurationPromise},f}]),ngFileUpload.service(\"UploadResize\",[\"UploadValidate\",\"$q\",function(a,b){var c=a,d=function(a,b,c,d,e){var f=e?Math.max(c/a,d/b):Math.min(c/a,d/b);return{width:a*f,height:b*f,marginX:a*f-c,marginY:b*f-d}},e=function(a,e,f,g,h,i,j,k){var l=b.defer(),m=document.createElement(\"canvas\"),n=document.createElement(\"img\");return n.setAttribute(\"style\",\"visibility:hidden;position:fixed;z-index:-100000\"),document.body.appendChild(n),n.onload=function(){var a=n.width,b=n.height;if(n.parentNode.removeChild(n),null!=k&&k(a,b)===!1)return void l.reject(\"resizeIf\");try{if(i){var o=c.ratioToFloat(i),p=a/b;o>p?(e=a,f=e/o):(f=b,e=f*o)}e||(e=a),f||(f=b);var q=d(a,b,e,f,j);m.width=Math.min(q.width,e),m.height=Math.min(q.height,f);var r=m.getContext(\"2d\");r.drawImage(n,Math.min(0,-q.marginX/2),Math.min(0,-q.marginY/2),q.width,q.height),l.resolve(m.toDataURL(h||\"image/WebP\",g||.934))}catch(s){l.reject(s)}},n.onerror=function(){n.parentNode.removeChild(n),l.reject()},n.src=a,l.promise};return c.dataUrltoBlob=function(a,b,c){for(var d=a.split(\",\"),e=d[0].match(/:(.*?);/)[1],f=atob(d[1]),g=f.length,h=new Uint8Array(g);g--;)h[g]=f.charCodeAt(g);var i=new window.Blob([h],{type:e});return i.name=b,i.$ngfOrigSize=c,i},c.isResizeSupported=function(){var a=document.createElement(\"canvas\");return window.atob&&a.getContext&&a.getContext(\"2d\")&&window.Blob},c.isResizeSupported()&&Object.defineProperty(window.Blob.prototype,\"name\",{get:function(){return this.$ngfName},set:function(a){this.$ngfName=a},configurable:!0}),c.resize=function(a,d){if(0!==a.type.indexOf(\"image\"))return c.emptyPromise(a);var f=b.defer();return c.dataUrl(a,!0).then(function(b){e(b,d.width,d.height,d.quality,d.type||a.type,d.ratio,d.centerCrop,d.resizeIf).then(function(e){if(\"image/jpeg\"===a.type&&d.restoreExif!==!1)try{e=c.restoreExif(b,e)}catch(g){setTimeout(function(){throw g},1)}try{var h=c.dataUrltoBlob(e,a.name,a.size);f.resolve(h)}catch(g){f.reject(g)}},function(b){\"resizeIf\"===b&&f.resolve(a),f.reject(b)})},function(a){f.reject(a)}),f.promise},c}]),function(){function a(a,c,d,e,f,g,h,i,j,k){function l(){return c.attr(\"disabled\")||s(\"ngfDropDisabled\",a)}function m(b,c,d){if(b){var e;try{e=b&&b.getData&&b.getData(\"text/html\")}catch(f){}q(b.items,b.files,s(\"ngfAllowDir\",a)!==!1,s(\"multiple\")||s(\"ngfMultiple\",a)).then(function(a){a.length?n(a,c):o(d,e).then(function(a){n(a,c)})})}}function n(b,c){i.updateModel(e,d,a,s(\"ngfChange\")||s(\"ngfDrop\"),b,c)}function o(b,c){if(!i.shouldUpdateOn(b,d,a)||\"string\"!=typeof c)return i.rejectPromise([]);var e=[];c.replace(/<(img src|img [^>]* src) *=\\\"([^\\\"]*)\\\"/gi,function(a,b,c){e.push(c)});var f=[],g=[];if(e.length){angular.forEach(e,function(a){f.push(i.urlToBlob(a).then(function(a){g.push(a)}))});var h=k.defer();return k.all(f).then(function(){h.resolve(g)},function(a){h.reject(a)}),h.promise}return i.emptyPromise()}function p(a,b,c,d){var e=s(\"ngfDragOverClass\",a,{$event:c}),f=\"dragover\";if(angular.isString(e))f=e;else if(e&&(e.delay&&(w=e.delay),e.accept||e.reject)){var g=c.dataTransfer.items;if(null!=g&&g.length)for(var h=e.pattern||s(\"ngfPattern\",a,{$event:c}),j=g.length;j--;){if(!i.validatePattern(g[j],h)){f=e.reject;break}f=e.accept}else f=e.accept}d(f)}function q(b,c,e,f){function g(a,b){var c=k.defer();if(null!=a)if(a.isDirectory){var d=[i.emptyPromise()];if(m){var e={type:\"directory\"};e.name=e.path=(b||\"\")+a.name,n.push(e)}var f=a.createReader(),h=[],p=function(){f.readEntries(function(e){try{e.length?(h=h.concat(Array.prototype.slice.call(e||[],0)),p()):(angular.forEach(h.slice(0),function(c){n.length<=j&&l>=o&&d.push(g(c,(b?b:\"\")+a.name+\"/\"))}),k.all(d).then(function(){c.resolve()},function(a){c.reject(a)}))}catch(f){c.reject(f)}},function(a){c.reject(a)})};p()}else a.file(function(a){try{a.path=(b?b:\"\")+a.name,m&&(a=i.rename(a,a.path)),n.push(a),o+=a.size,c.resolve()}catch(d){c.reject(d)}},function(a){c.reject(a)});return c.promise}var j=i.getValidationAttr(d,a,\"maxFiles\");null==j&&(j=Number.MAX_VALUE);var l=i.getValidationAttr(d,a,\"maxTotalSize\");null==l&&(l=Number.MAX_VALUE);var m=s(\"ngfIncludeDir\",a),n=[],o=0,p=[i.emptyPromise()];if(b&&b.length>0&&\"file:\"!==h.location.protocol)for(var q=0;q<b.length;q++){if(b[q].webkitGetAsEntry&&b[q].webkitGetAsEntry()&&b[q].webkitGetAsEntry().isDirectory){var r=b[q].webkitGetAsEntry();if(r.isDirectory&&!e)continue;null!=r&&p.push(g(r))}else{var t=b[q].getAsFile();null!=t&&(n.push(t),o+=t.size)}if(n.length>j||o>l||!f&&n.length>0)break}else if(null!=c)for(var u=0;u<c.length;u++){var v=c.item(u);if((v.type||v.size>0)&&(n.push(v),o+=v.size),n.length>j||o>l||!f&&n.length>0)break}var w=k.defer();return k.all(p).then(function(){if(f||m||!n.length)w.resolve(n);else{for(var a=0;n[a]&&\"directory\"===n[a].type;)a++;w.resolve([n[a]])}},function(a){w.reject(a)}),w.promise}var r=b(),s=function(a,b,c){return i.attrGetter(a,d,b,c)};if(s(\"dropAvailable\")&&g(function(){a[s(\"dropAvailable\")]?a[s(\"dropAvailable\")].value=r:a[s(\"dropAvailable\")]=r}),!r)return void(s(\"ngfHideOnDropNotAvailable\",a)===!0&&c.css(\"display\",\"none\"));null==s(\"ngfSelect\")&&i.registerModelChangeValidator(e,d,a);var t,u=null,v=f(s(\"ngfStopPropagation\")),w=1;c[0].addEventListener(\"dragover\",function(b){if(!l()&&i.shouldUpdateOn(\"drop\",d,a)){if(b.preventDefault(),v(a)&&b.stopPropagation(),navigator.userAgent.indexOf(\"Chrome\")>-1){var e=b.dataTransfer.effectAllowed;b.dataTransfer.dropEffect=\"move\"===e||\"linkMove\"===e?\"move\":\"copy\"}g.cancel(u),t||(t=\"C\",p(a,d,b,function(d){t=d,c.addClass(t),s(\"ngfDrag\",a,{$isDragging:!0,$class:t,$event:b})}))}},!1),c[0].addEventListener(\"dragenter\",function(b){!l()&&i.shouldUpdateOn(\"drop\",d,a)&&(b.preventDefault(),v(a)&&b.stopPropagation())},!1),c[0].addEventListener(\"dragleave\",function(b){!l()&&i.shouldUpdateOn(\"drop\",d,a)&&(b.preventDefault(),\nv(a)&&b.stopPropagation(),u=g(function(){t&&c.removeClass(t),t=null,s(\"ngfDrag\",a,{$isDragging:!1,$event:b})},w||100))},!1),c[0].addEventListener(\"drop\",function(b){!l()&&i.shouldUpdateOn(\"drop\",d,a)&&(b.preventDefault(),v(a)&&b.stopPropagation(),t&&c.removeClass(t),t=null,m(b.dataTransfer,b,\"dropUrl\"))},!1),c[0].addEventListener(\"paste\",function(b){navigator.userAgent.toLowerCase().indexOf(\"firefox\")>-1&&s(\"ngfEnableFirefoxPaste\",a)&&b.preventDefault(),!l()&&i.shouldUpdateOn(\"paste\",d,a)&&m(b.clipboardData||b.originalEvent.clipboardData,b,\"pasteUrl\")},!1),navigator.userAgent.toLowerCase().indexOf(\"firefox\")>-1&&s(\"ngfEnableFirefoxPaste\",a)&&(c.attr(\"contenteditable\",!0),c.on(\"keypress\",function(a){a.metaKey||a.ctrlKey||a.preventDefault()}))}function b(){var a=document.createElement(\"div\");return\"draggable\"in a&&\"ondrop\"in a&&!/Edge\\/12./i.test(navigator.userAgent)}ngFileUpload.directive(\"ngfDrop\",[\"$parse\",\"$timeout\",\"$window\",\"Upload\",\"$http\",\"$q\",function(b,c,d,e,f,g){return{restrict:\"AEC\",require:\"?ngModel\",link:function(h,i,j,k){a(h,i,j,k,b,c,d,e,f,g)}}}]),ngFileUpload.directive(\"ngfNoFileDrop\",function(){return function(a,c){b()&&c.css(\"display\",\"none\")}}),ngFileUpload.directive(\"ngfDropAvailable\",[\"$parse\",\"$timeout\",\"Upload\",function(a,c,d){return function(e,f,g){if(b()){var h=a(d.attrGetter(\"ngfDropAvailable\",g));c(function(){h(e),h.assign&&h.assign(e,!0)})}}}])}(),ngFileUpload.service(\"UploadExif\",[\"UploadResize\",\"$q\",function(a,b){function c(a,b,c,d){switch(b){case 2:return a.transform(-1,0,0,1,c,0);case 3:return a.transform(-1,0,0,-1,c,d);case 4:return a.transform(1,0,0,-1,0,d);case 5:return a.transform(0,1,1,0,0,0);case 6:return a.transform(0,1,-1,0,d,0);case 7:return a.transform(0,-1,-1,0,d,c);case 8:return a.transform(0,-1,1,0,0,c)}}function d(a){for(var b=\"\",c=new Uint8Array(a),d=c.byteLength,e=0;d>e;e++)b+=String.fromCharCode(c[e]);return window.btoa(b)}var e=a;return e.isExifSupported=function(){return window.FileReader&&(new FileReader).readAsArrayBuffer&&e.isResizeSupported()},e.readOrientation=function(a){var c=b.defer(),d=new FileReader,e=a.slice?a.slice(0,65536):a;return d.readAsArrayBuffer(e),d.onerror=function(a){return c.reject(a)},d.onload=function(a){var b={orientation:1},d=new DataView(this.result);if(65496!==d.getUint16(0,!1))return c.resolve(b);for(var e=d.byteLength,f=2;e>f;){var g=d.getUint16(f,!1);if(f+=2,65505===g){if(1165519206!==d.getUint32(f+=2,!1))return c.resolve(b);var h=18761===d.getUint16(f+=6,!1);f+=d.getUint32(f+4,h);var i=d.getUint16(f,h);f+=2;for(var j=0;i>j;j++)if(274===d.getUint16(f+12*j,h)){var k=d.getUint16(f+12*j+8,h);return k>=2&&8>=k&&(d.setUint16(f+12*j+8,1,h),b.fixedArrayBuffer=a.target.result),b.orientation=k,c.resolve(b)}}else{if(65280!==(65280&g))break;f+=d.getUint16(f,!1)}}return c.resolve(b)},c.promise},e.applyExifRotation=function(a){if(0!==a.type.indexOf(\"image/jpeg\"))return e.emptyPromise(a);var f=b.defer();return e.readOrientation(a).then(function(b){return b.orientation<2||b.orientation>8?f.resolve(a):void e.dataUrl(a,!0).then(function(g){var h=document.createElement(\"canvas\"),i=document.createElement(\"img\");i.onload=function(){try{h.width=b.orientation>4?i.height:i.width,h.height=b.orientation>4?i.width:i.height;var g=h.getContext(\"2d\");c(g,b.orientation,i.width,i.height),g.drawImage(i,0,0);var j=h.toDataURL(a.type||\"image/WebP\",.934);j=e.restoreExif(d(b.fixedArrayBuffer),j);var k=e.dataUrltoBlob(j,a.name);f.resolve(k)}catch(l){return f.reject(l)}},i.onerror=function(){f.reject()},i.src=g},function(a){f.reject(a)})},function(a){f.reject(a)}),f.promise},e.restoreExif=function(a,b){var c={};return c.KEY_STR=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",c.encode64=function(a){var b,c,d,e,f,g=\"\",h=\"\",i=\"\",j=0;do b=a[j++],c=a[j++],h=a[j++],d=b>>2,e=(3&b)<<4|c>>4,f=(15&c)<<2|h>>6,i=63&h,isNaN(c)?f=i=64:isNaN(h)&&(i=64),g=g+this.KEY_STR.charAt(d)+this.KEY_STR.charAt(e)+this.KEY_STR.charAt(f)+this.KEY_STR.charAt(i),b=c=h=\"\",d=e=f=i=\"\";while(j<a.length);return g},c.restore=function(a,b){a.match(\"data:image/jpeg;base64,\")&&(a=a.replace(\"data:image/jpeg;base64,\",\"\"));var c=this.decode64(a),d=this.slice2Segments(c),e=this.exifManipulation(b,d);return\"data:image/jpeg;base64,\"+this.encode64(e)},c.exifManipulation=function(a,b){var c=this.getExifArray(b),d=this.insertExif(a,c);return new Uint8Array(d)},c.getExifArray=function(a){for(var b,c=0;c<a.length;c++)if(b=a[c],255===b[0]&225===b[1])return b;return[]},c.insertExif=function(a,b){var c=a.replace(\"data:image/jpeg;base64,\",\"\"),d=this.decode64(c),e=d.indexOf(255,3),f=d.slice(0,e),g=d.slice(e),h=f;return h=h.concat(b),h=h.concat(g)},c.slice2Segments=function(a){for(var b=0,c=[];;){if(255===a[b]&218===a[b+1])break;if(255===a[b]&216===a[b+1])b+=2;else{var d=256*a[b+2]+a[b+3],e=b+d+2,f=a.slice(b,e);c.push(f),b=e}if(b>a.length)break}return c},c.decode64=function(a){var b,c,d,e,f,g=\"\",h=\"\",i=0,j=[],k=/[^A-Za-z0-9\\+\\/\\=]/g;k.exec(a)&&console.log(\"There were invalid base64 characters in the input text.\\nValid base64 characters are A-Z, a-z, 0-9, NaNExpect errors in decoding.\"),a=a.replace(/[^A-Za-z0-9\\+\\/\\=]/g,\"\");do d=this.KEY_STR.indexOf(a.charAt(i++)),e=this.KEY_STR.indexOf(a.charAt(i++)),f=this.KEY_STR.indexOf(a.charAt(i++)),h=this.KEY_STR.indexOf(a.charAt(i++)),b=d<<2|e>>4,c=(15&e)<<4|f>>2,g=(3&f)<<6|h,j.push(b),64!==f&&j.push(c),64!==h&&j.push(g),b=c=g=\"\",d=e=f=h=\"\";while(i<a.length);return j},c.restore(a,b)},e}]);","angular\r\n    .module('app')\r\n    .factory('Arquivos', Arquivos);\r\n\r\nArquivos.$inject = [\r\n        '$ajax',\r\n        '$window',\r\n        '$timeout',\r\n        '$httpParamSerializer',\r\n        '$rootScope',\r\n        '$compile',\r\n        'Upload'\r\n    ];\r\n\r\n\r\n\r\nfunction Arquivos($ajax, $window, $timeout,$httpParamSerializer,$rootScope, $compile, Upload) {\r\n\r\n\t/**\r\n     * Constructor, with class name\r\n     */\r\n    function Arquivos(data) {\r\n        if (data) {\r\n            this.setData(data);\r\n        }\r\n    }\r\n\r\n    var arquivoPadrao = {\r\n    \t\tID      : 0,\r\n\t\t\tNOME \t: null,\r\n\t\t\tTABELA \t: null,\r\n\t\t\tTIPO \t: null,\r\n\t\t\tTAMANHO\t: null,\r\n\t\t\tBINARIO\t: null,\r\n\t\t\tCONTEUDO: null,\r\n\t\t\tCSS     : null\r\n\t};\r\n\r\n    /**\r\n     * Public method, assigned to prototype\r\n     */\r\n    Arquivos.prototype = {\r\n    \tdata: [],\r\n    \tdata_excluir: [],\r\n    \tcomentario: '',\r\n    \tvGravar: false,\r\n    \teditando: false,\r\n    \tde: '',\r\n    \tpara: '',\r\n    \tcc:'',\r\n    \tcco: '',\r\n    \tassunto: '',\r\n    \tsetData: function(data) {\r\n            angular.extend(this, data);\r\n        },\r\n    \taddArquivo: function() {\r\n\r\n    \t\tif(typeof this.data != 'array' && typeof this.data != 'object'){\r\n    \t\t\tthis.data = [];\r\n    \t\t}\r\n\r\n    \t\tvar validar = true;\r\n    \t\tangular.forEach(this.data, function(iten, key) {\r\n\r\n    \t\t\tif(iten.NOME == null){\r\n    \t\t\t\tvalidar = false;\r\n    \t\t\t}\r\n    \t\t});\r\n\r\n    \t\tif(validar){\r\n\t\t\t\tvar arquivoNovo = {};\r\n\t\t\t\tangular.copy(arquivoPadrao, arquivoNovo);\r\n\t\t\t\tthis.data.push(arquivoNovo);\r\n\t\t\t}\r\n\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tvar imputs = $('.arquivo-binario');\r\n\t\t\t\tif (imputs.length > 0){\r\n\t\t\t\t\t$(imputs[0]).trigger('click');\r\n\t\t\t\t}\r\n\t\t\t},200);\r\n\r\n\t\t},\r\n\t\tgravar:function(painel_id, caso_id, user, feed, tipo){\r\n\t\t\tthat = this;\r\n\t\t\tvar dados = {};\r\n\r\n\t\t\tdados.FEED_ID = 0;\r\n\t\t\tdados.FILES   = 1;\r\n\r\n\t\t\tdados.TIPO\t= tipo;\r\n\r\n\t\t\tif(that.editando == true){\r\n\t\t\t\tdados.FEED_ID = feed.ID;\r\n\t\t\t}\r\n\r\n\t\t\tdados.SUBFEED = 0;\r\n\t\t\tif(tipo == 99){\r\n\t\t\t\tdados.SUBFEED = feed.ID;\r\n\t\t\t\tdados.TIPO\t  = feed.TIPO;\r\n\t\t\t}\r\n\r\n\t\t\tif(feed.SUBFEED > 0){\r\n\t\t\t\tdados.SUBFEED = feed.SUBFEED;\r\n\t\t\t}\r\n\r\n\t\t\tdados.PAINEL_ID \t  = painel_id;\r\n\t\t\tdados.CASO_ID \t\t  = caso_id;\r\n\t\t\tdados.DE \t\t\t  = that.de; \r\n\t\t\tdados.PARA\t\t\t  = that.para; \r\n\t\t\tdados.EM_COPIA \t\t  = that.cc; \r\n\t\t\tdados.EM_COPIA_OCULTA = that.cco; \r\n\t\t\tdados.MENSAGEM\t      = that.comentario; \r\n\t\t\tdados.ASSUNTO \t\t  = that.assunto;\r\n\t\t\tdados.COMENTARIO      = that.coment;\r\n\t\t\tdados.USUARIO_ID\t  = user.CODIGO;\r\n\r\n\t\t\tdados.ARQUIVOS   \t  = that.data;\r\n\t\t\tdados.EXCLUIR         = that.data_excluir;\r\n\r\n\t\t\tconsole.log(dados);\r\n\r\n\t\t\tvar msg = CKEDITOR.instances.editor1.getData();\r\n\r\n\t\t\tdados.MENSAGEM\t      = msg;\r\n\r\n\t\t\tif((msg+' ').length > 10){\r\n\t\t\t\t$('.carregando-pagina').fadeIn(200);\r\n\r\n\r\n\t            var upload = Upload\r\n\t                            .upload({\r\n\t                                url : '/_11150/gravarFeed', \r\n\t                                data: dados\r\n\t                            });\r\n\r\n\t            upload\r\n\t                .finally(\r\n\t                    function(e) {\r\n\r\n\t\t\t\t\t\t\t$('#modal-file').modal('hide');  \r\n\r\n\t\t\t\t\t\t\tthat.data = [];\r\n\t\t\t\t\t\t\tthat.data_excluir = [];\r\n\t\t\t\t\t\t\tthat.comentario = '';\r\n\t\t\t\t\t\t\tthat.editando = false;\r\n\t\t\t\t\t\t\tthat.vGravar = false;\r\n\t                    \r\n\t                        $('.carregando-pagina').fadeOut(200);\r\n\r\n\t                        setTimeout(function() {\r\n\t                            $('.carregando-pagina .progress .progress-bar')\r\n\t                                .attr({'aria-valuenow': 0,'aria-valuemax': 0})\r\n\t                                .css('width', 0);\r\n\r\n\t                            if(that.coment == 0){\r\n\t                            \t$('.atualizar-files').trigger('click');\r\n\t                            }else{\r\n\t                            \t$('#tab-files').trigger('click');\r\n\t                            }\r\n\r\n\t                        }, 300);\r\n\t                    }\r\n\t                );\r\n\r\n\t            return upload;\r\n\t        }else{\r\n\t        \tshowErro('A mensagem deve ter no minimo 10 caracteres!');\r\n\t        }\r\n\t\t},\r\n\t\tcanselar:function(){\r\n\t\t\tthat = this;\r\n\r\n\t\t\t$('#modal-file').modal('hide'); \r\n\t\t\tthat.data = [];\r\n    \t\tthat.data_excluir = [];\r\n    \t\tthat.comentario = '';\r\n    \t\tthat.vGravar = true;\r\n    \t\tthat.editando = false;\r\n\t\t},\r\n\t\tprocessarArquivo: function(event, arquivo) {\r\n\r\n\t\t\tthat = this;\r\n\t\t\tvar arquivoAdicionado = false;\r\n\r\n\t\t\tangular.forEach(event.target.files, function(file, key) {\r\n\r\n\t\t\t\tvar size = (file.size / 1048576);\r\n\r\n\t\t\t\tif(size <= 2){\r\n\r\n\t\t\t\t\tvar validar = true;\r\n\t\t    \t\tangular.forEach(that.data, function(iten, key) {\r\n\t\t    \t\t\tif(iten.NOME == null){\r\n\t\t    \t\t\t\tvalidar = false;\r\n\t\t    \t\t\t}\r\n\t\t    \t\t});\r\n\r\n\t\t    \t\tif(validar){\r\n\t\t\t\t\t\tvar arquivoNovo = {};\r\n\t\t\t\t\t\tangular.copy(arquivoPadrao, arquivoNovo);\r\n\t\t\t\t\t\tthat.data.push(arquivoNovo);\r\n\r\n\t\t\t\t\t\tarquivo = that.data[that.data.length - 1];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthat.vGravar = true;\r\n\r\n\t\t\t\t\tarquivo.NOME \t = file.name;\r\n\t\t\t\t\tarquivo.TABELA \t = 'TBCASO_REGISTRO';\r\n\t\t\t\t\tarquivo.TIPO \t = file.type;\r\n\t\t\t\t\tarquivo.TAMANHO\t = file.size;\r\n\r\n\t\t\t\t\tarquivo.BINARIO = file;\r\n\r\n\t\t\t\t\tarquivo.CSS = 'unknown';\r\n\r\n\t\t\t\t\tif(arquivo.TIPO.indexOf('pdf'\t\t\t\t) >= 0 ){arquivo.CSS = 'pdf'; }\r\n\t\t\t\t\tif(arquivo.TIPO.indexOf('octet-stream'\t\t) >= 0 ){arquivo.CSS = 'exe'; }\r\n\t\t\t\t\tif(arquivo.TIPO.indexOf('zip'   \t\t\t) >= 0 ){arquivo.CSS = 'zip'; }\r\n\t\t\t\t\tif(arquivo.TIPO.indexOf('msword'   \t\t\t) >= 0 ){arquivo.CSS = 'doc'; }\r\n\t\t\t\t\tif(arquivo.TIPO.indexOf('vnd.ms-excel'   \t) >= 0 ){arquivo.CSS = 'xls'; }\r\n\t\t\t\t\tif(arquivo.TIPO.indexOf('vnd.ms-powerpoint' ) >= 0 ){arquivo.CSS = 'ppt'; }\r\n\t\t\t\t\tif(arquivo.TIPO.indexOf('gif'   \t\t\t) >= 0 ){arquivo.CSS = 'gif'; }\r\n\t\t\t\t\tif(arquivo.TIPO.indexOf('png'   \t\t\t) >= 0 ){arquivo.CSS = 'png'; }\r\n\t\t\t\t\tif(arquivo.TIPO.indexOf('jpg'   \t\t\t) >= 0 ){arquivo.CSS = 'jpg'; }\r\n\t\t\t\t\tif(arquivo.TIPO.indexOf('jpeg'   \t\t\t) >= 0 ){arquivo.CSS = 'jpeg';}\r\n\t\t\t\t\tif(arquivo.TIPO.indexOf('mpeg'   \t\t\t) >= 0 ){arquivo.CSS = 'mpeg';}\r\n\t\t\t\t\tif(arquivo.TIPO.indexOf('text/plain'   \t\t) >= 0 ){arquivo.CSS = 'txt'; }\r\n\t\t\t\t\tif(arquivo.TIPO.indexOf('sheet'   \t\t\t) >= 0 ){arquivo.CSS = 'xls'; }\r\n\t\t\t\t\tif(arquivo.TIPO.indexOf('wordprocessingml'  ) >= 0 ){arquivo.CSS = 'doc'; }\r\n\t\t\t\t\tif(arquivo.TIPO.indexOf('presentation'   \t) >= 0 ){arquivo.CSS = 'ppt'; }\r\n\r\n\t\t\t\t\tarquivoAdicionado = true;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tshowErro('Não é possível adicionar anexos maiores de 2MB e \"'+file.name+'\" tem '+size.toLocaleString('pt-BR')+'MB, diminua a resolução ou comprima o arquivo e tente novamente.');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(arquivoAdicionado == true){\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t$('.arquivo-container .scroll .form-group:last-of-type input.arquivo-binario').focus();\r\n\t\t\t\t}, 100);\r\n\t\t\t}else{\r\n\t\t\t\tthat.data.splice(that.data.length - 1, 1);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\texcluirArquivo: function(arquivo) {\r\n\r\n\t\t\t// Só adiciona para excluir do banco de dados se o arquivo tiver ID, ou seja, já está gravado no banco.\r\n\t\t\tif (arquivo.ID > 0) {\r\n\t\t\t\tthis.data_excluir = (typeof this.data_excluir != 'undefined') ? this.data_excluir : [];\r\n\t\t\t\tthis.data_excluir.push(arquivo);\r\n\t\t\t}\r\n\r\n\t\t\tthis.data.splice(this.data.indexOf(arquivo), 1);\r\n\t\t\t// Adiciona um arquivo vazio se não tiver mais nenhum outro.\r\n\t\t\tif (this.data.length == 0){\r\n\t\t\t\tthis.vGravar = false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n     * Return the constructor function\r\n     */\r\n    return Arquivos;\r\n\r\n}   \r\n    ","angular\n    .module('app')\n    .value('gScope', {\n        indexOfAttr : function(array,attr, value) {\n            for(var i in array) {\n                if(array[i][attr] === value) {\n                    return i;\n                }\n            }\n            return -1;\n        }\n    })\n    .controller('Ctrl', Ctrl);\n\n\tCtrl.$inject = [\n        '$ajax',\n        '$scope',\n        '$window',\n        '$timeout',\n        'gScope',\n        'Create',\n        '$consulta',\n        '$httpParamSerializer',\n        '$rootScope',\n        '$compile',\n        'ScriptCompile',\n        'Arquivos',\n        '$sce'\n    ];\n\n\tfunction Ctrl($ajax, $scope, $window, $timeout, gScope, Create, $consulta,$httpParamSerializer,$rootScope, $compile,ScriptCompile,Arquivos,$sce) {\n\n        function htmlDecode(str) {\n            \n            str = str.replace(/&QUOT;/g,    '&quot;'   );\n            str = str.replace(/&NBSP;/g,    '&nbsp;'   );\n            str = str.replace(/&AACUTE;/g,  '&Aacute;' );\n            str = str.replace(/&ACIRC;/g,   '&Acirc;'  );\n            str = str.replace(/&AGRAVE;/g,  '&Agrave;' );\n            str = str.replace(/&ARING;/g,   '&Aring;'  );\n            str = str.replace(/&ATILDE;/g,  '&Atilde;' );\n            str = str.replace(/&AUML;/g,    '&Auml;'   );\n            str = str.replace(/&AELIG;/g,   '&AElig;'  );\n            str = str.replace(/&EACUTE;/g,  '&Eacute;' );\n            str = str.replace(/&ECIRC;/g,   '&Ecirc;'  );\n            str = str.replace(/&EGRAVE;/g,  '&Egrave;' );\n            str = str.replace(/&EUML;/g,    '&Euml;'   );\n            str = str.replace(/&ETH;/g,     '&ETH;'    );\n            str = str.replace(/&IACUTE;/g,  '&Iacute;' );\n            str = str.replace(/&ICIRC;/g,   '&Icirc;'  );\n            str = str.replace(/&IGRAVE;/g,  '&Igrave;' );\n            str = str.replace(/&IUML;/g,    '&Iuml;'   );\n            str = str.replace(/&OACUTE;/g,  '&Oacute;' );\n            str = str.replace(/&OCIRC;/g,   '&Ocirc;'  );\n            str = str.replace(/&OGRAVE;/g,  '&Ograve;' );\n            str = str.replace(/&OSLASH;/g,  '&Oslash;' );\n            str = str.replace(/&OTILDE;/g,  '&Otilde;' );\n            str = str.replace(/&OUML;/g,    '&Ouml;'   );\n            str = str.replace(/&UACUTE;/g,  '&Uacute;' );\n            str = str.replace(/&UCIRC;/g,   '&Ucirc;'  );\n            str = str.replace(/&UGRAVE;/g,  '&Ugrave;' );\n            str = str.replace(/&UUML;/g,    '&Uuml;'   );\n            str = str.replace(/&CCEDIL;/g,  '&Ccedil;' );\n\n            return str;\n        }\n\n        $scope.trustAsHtml = function(string, feed) {\n            var html = htmlDecode(string);\n            return $sce.trustAsHtml(html);\n        };\n\n        var ckConfig = {\n                        toolbar: [{\n                            name: \"document\",\n                            items: [\"Print\"]\n                        }, {\n                            name: \"clipboard\",\n                            items: [\"Undo\", \"Redo\"]\n                        }, {\n                            name: \"styles\",\n                            items: [\"Format\", \"Font\", \"FontSize\"]\n                        }, {\n                            name: \"basicstyles\",\n                            items: [\"Bold\", \"Italic\", \"Underline\", \"Strike\", \"RemoveFormat\", \"CopyFormatting\"]\n                        }, {\n                            name: \"colors\",\n                            items: [\"TextColor\", \"BGColor\"]\n                        }, {\n                            name: \"align\",\n                            items: [\"JustifyLeft\", \"JustifyCenter\", \"JustifyRight\", \"JustifyBlock\"]\n                        }, {\n                            name: \"links\",\n                            items: [\"Link\", \"Unlink\"]\n                        }, {\n                            name: \"paragraph\",\n                            items: [\"NumberedList\", \"BulletedList\", \"-\", \"Outdent\", \"Indent\", \"-\", \"Blockquote\"]\n                        }, {\n                            name: \"insert\",\n                            items: [\"Table\"]\n                        }],\n                        removePlugins: \"autoembed,embedsemantic,image2,sourcedialog\",\n                        disallowedContent: \"img{width,height,float}\",\n                        extraAllowedContent: \"img[width,height,align]\",\n                        bodyClass: \"document-editor\"\n                    };\n\n        //loading($('#divgeral'));\n\n        document.addEventListener('keyup', function(evt) {\n\n            if(vm.caso_id > 0){\n                if(evt.altKey && evt.key == 'o'){\n                    $('#tab-caso').trigger('click');    \n                }\n\n                if(evt.altKey && evt.key == 'f'){\n                    $('#tab-feed').trigger('click');    \n                }\n\n                if(evt.altKey && evt.key == 'i'){\n                    $('#tab-files').trigger('click');    \n                }\n\n                if(evt.altKey && evt.key == 'h'){\n                    $('#tab-history').trigger('click');  \n                }\n            }\n\n            if(evt.altKey && evt.key == 'd'){\n                $('#tab-cadastro').trigger('click');    \n            }\n\n            if(evt.altKey && evt.key == 'n'){\n                $('#tab-contatos').trigger('click');  \n            }\n\n            if(evt.altKey && evt.key == 'b'){\n                $('#tab-lebretes').trigger('click');  \n            }\n\n\n            if(evt.altKey && evt.key == 'r'){\n                $('#tab-acordeon').trigger('click');  \n            }\n\n            if(evt.altKey && evt.key == 't'){\n                $('#tab-tabela').trigger('click');\n                setTimeout(function(){\n                    vm.Acoes.Canselar();\n                },100);\n            }\n\n\n        }, false);\n\n        function lpad(string, padString, length) {\n            var str = string;\n            while (str.length < length)\n                str = padString + str;\n            return str;\n        }\n\n\t\tvar vm = this;\n        vm.loading = 0;\n\n        vm.ordem = '-CODIGO';\n\n        vm.TratarOrdem = function(filtro){\n            if(vm.ordem == filtro){\n                vm.ordem = '-'+filtro;\n            }else{\n                vm.ordem = filtro;\n            }\n        };\n\n\t\tvm.DADOS = [];\n\n        vm.filtroCaso = '';\n        vm.filtroFeed = '';\n        vm.ordemFeed  = 0;\n        vm.qtd_casos  = 0;\n\n        vm.tipo_feed  = 0;\n\n        vm.PainelCaso = {};\n        vm.ConfConato = {};\n        vm.Validacao  = {};\n        vm.CasoIten   = {};\n        vm.Feed       = {};\n\n        vm.editar_contato = false;\n\n        vm.tabFeed = [];\n        vm.tabFeed.btn = [];\n        vm.tabFeed.btn.visivel = true;\n        vm.tabFeed.dados = [];\n\n        vm.tabHistory = [];\n        vm.tabHistory.btn = [];\n        vm.tabHistory.btn.visivel = true;\n        vm.tabHistory.dados = [];\n\n        vm.tabCaso = [];\n        vm.tabCaso.btn = [];\n        vm.tabCaso.btn.visivel = true;\n        vm.tabCaso.dados = [];\n\n        vm.tabCaso.btn.click = function(){\n            setTimeout(function(){\n                $('.modal-caso').find('.modal-body').scrollTop(0);\n            },100);\n        };\n\n        vm.hideTabs = function(flag){\n            vm.tabHistory.btn.visivel = !flag;\n            vm.tabFeed.btn.visivel    = !flag;\n            vm.tabCaso.btn.visivel    = !flag;\n            vm.tabFiles.btn.visivel   = !flag;\n        }\n\n        vm.tabFiles = [];\n        vm.tabFiles.btn = [];\n        vm.tabFiles.btn.visivel = true;\n        vm.tabFiles.dados = [];\n\n        vm.lista = {}\n\n        vm.PainelConfEdit = {};\n\n        vm.casos = [];\n        vm.user = [];\n \n        vm.btnGravar  = {};\n        vm.btnGravar.disabled = false;\n\n        vm.status_tela = 0;\n        vm.itens = [];\n        vm.feed_editar = [];\n\n        vm.Arquivos = new Arquivos();\n\t\t\n        vm.Create        = new Create();\n        vm.Create.model  = 'vm.Create.itens';\n        gScope.Create    = vm.Create;\n\n        vm.ScriptCompile        = new ScriptCompile();\n        gScope.ScriptCompile    = vm.ScriptCompile;\n\n        vm.tabComentario = {};\n\n        vm.PainelID = 0;\n\n        vm.abaAberta = 0;\n\n        vm.filterCaso = function($event,item){\n            if($event.key == 'Enter'){\n                //if( Object.keys(vm.lista).length == 0){\n                    vm.Acoes.openCaso(vm.filtroCaso, $event);\n                //}\n            } \n        }\n\n        vm.filterCaso2 = function($event,item){\n            if($event.key == 'Enter'){\n                vm.filterCaso3();\n            } \n        }\n\n        vm.filterCaso3 = function($event,item){\n            if(vm.FILTRO_CASO.length > 0){\n                vm.getCasos(2,vm.FILTRO_CASO);\n            }else{\n                showErro('O filtro deve conter ao menos uma palavra');\n            }\n        }\n\n        vm.PrepararFiltro = function(status){\n            vm.FILTRO_CASO = '';\n            vm.casos = [];\n        }\n\n        vm.getCasos = function(status,filtro){\n\n            vm.abaAberta  = status;\n            vm.filtroCaso = '';\n\n            vm.loading = 1;\n\n            vm.painel_id = $('._painel_id').val();\n\n            $ajax.post('/_11150/getCasos', {PAINEL_ID: vm.painel_id, STATUS : status, FILTRO : filtro})\n            .then(function(response) {\n\n                vm.casos     = response.CASOS;\n                vm.user      = response.USUARIO;\n                vm.status    = response.STATUS;\n                vm.conf      = response.CONF;\n                vm.parametro = response.PARAMETRO;\n\n                vm.caso = [];\n\n                setTimeout(function(){\n                    angular.forEach(vm.casos, function(caso, ordem) {\n                        var html = '';\n                        vm.caso[caso.ID]= [];\n                        vm.Create.model = 'vm.caso['+caso.ID+']';\n\n                        angular.forEach(vm.conf['CAMPO'], function(iten, key) {\n\n                            var valor;\n                            var def = caso['C'+key];\n                            iten.DEFAULT = caso['C'+key];\n\n                            if(iten.TIPO == 7){\n                                iten.TIPO = 1;\n                            }\n                            \n                            var obj = {\n                                VAR_NOME : iten.VAR_NOME,\n                                VALOR    : def,\n                                EDIT     : 0,\n                                NOME     : iten.DESCRICAO,\n                                ID       : iten.ID,\n                                TIPO     : iten.TIPO + '',\n                                TEXTO    : iten.DESCRICAO,\n                                DEFAULT  : def,\n                                MIN      : iten.MIN,\n                                MAX      : iten.MAX,\n                                TAMANHO  : iten.TAMANHO,\n                                REQUERED : iten.REQUERED,\n                                VINCULO  : '',\n                                STEP     : iten.STEP,\n                                CONSULTA : null,\n                                ITENS    : iten.ITENS,\n                                DISABLED : true,\n                                AUTOLOAD : iten.AUTOLOAD,\n                                JSON     : iten.JSON,\n\n                                CAMPO_GRAVAR: iten.CAMPO_GRAVAR,\n                                PAINEL_ID: vm.painel_id,\n\n                                SQL_ID         : iten.SQL_ID,\n                                TAMANHO_TABELA : iten.TAMANHO_TABELA,\n                                URL_CONSULTA   : iten.URL_CONSULTA,\n                                CAMPO_TABELA   : iten.CAMPO_TABELA,\n                                CAMPOS_RETORNO : iten.CAMPOS_RETORNO,\n                                DESC_TABELA    : iten.DESC_TABELA,\n\n                                VINCULO_CAMPO     : iten.VINCULO_CAMPO,\n                                VINCULO_ITENS     : iten.VINCULO_ITENS,\n                                VINCULO_DESCRICAO : iten.VINCULO_DESCRICAO,\n\n                                setValor : function(valor){\n                                    this.VALOR = valor;\n                                },\n                                log:function(valor){\n                                    console.log(valor);\n                                }\n                            };\n\n                            if(iten.TIPO  == 2 ||\n                                iten.TIPO == 6){\n\n                                if(iten.DEFAULT == ''){\n                                    valor = 0;\n                                }else{\n                                    valor = Number(iten.DEFAULT);\n                                }    \n                            }else{\n                                valor = iten.DEFAULT + ''; \n                            }                        \n\n                            if(iten.TIPO == 8 || iten.TIPO == 4 || iten.TIPO == 5){\n                                obj.setValor('');    \n                            }else{\n                                obj.setValor(valor);  \n                            }\n\n                            if(iten.TIPO  == 9){\n                                angular.forEach(obj.ITENS, function(t, i) {\n                                    if(valor == t.VALOR){\n                                        obj.VALOR = t;\n                                    }\n                                });   \n                            }\n\n                            if(iten.TIPO == 3){\n                                var momentDate = moment(def);\n                                def = momentDate.toDate();\n                                obj.setValor(def);\n                            }\n\n                            vm.Create.itens.push(obj);\n                            \n                            vm.caso[caso.ID][iten.ID] = obj;\n                            \n                            html += vm.Create.montarHtml(obj,iten.ID,2);\n\n                        });\n                            \n                        var obj   = $('.corpo-caso-'+caso.ID);\n                        var scope = obj.scope(); \n                        obj.html(html);\n                        var obj   = $('.corpo-caso-'+caso.ID);\n                        $compile(obj.contents())(scope);\n                    });\n                    vm.Acoes.Canselar();\n                },300);\n            });\n        }\n\n        vm.init = function(){\n\n            vm.painel_id = $('._painel_id').val();\n            if(vm.caso_id != -1){\n                vm.caso_id   = $('._caso_id').val();\n            }\n\n            vm.PainelCaso = [];\n            vm.PainelConf = [];\n            vm.Validacao  = [];\n            vm.CasoIten   = [];\n            vm.response   = [];\n            vm.Feed       = [];\n            vm.Contatos   = [];\n            vm.Envolvidos.dados = {};\n\n            var caso = vm.caso_id;\n            if(vm.caso_id == -1){\n                caso = 0;\n            }\n\n            $ajax.post('/_11150/getPainel', {PAINEL_ID: vm.painel_id,CASO_ID: caso})\n                .then(function(response) {\n\n                    vm.PainelCaso = response.PAINEl_CASO;\n                    vm.PainelConf = response.PAINEl_CONF;\n                    vm.Validacao  = response.VALIDACAO;\n                    vm.CasoIten   = response.CASO_ITEN;\n                    vm.response   = response;\n                    vm.Feed       = response.FEED;\n                    vm.Contatos   = response.CONTATOS;\n\n                    vm.Consulta_Motivos.option.filtro_sql      = {PAINEL_CASO: vm.PainelCaso};\n                    vm.Consulta_Responsavel.option.filtro_sql  = {PAINEL_CASO: vm.PainelCaso};\n                    vm.Consulta_Contato.option.filtro_sql      = {PAINEL_CASO: vm.PainelCaso};\n\n                    if(caso == 0){\n                        vm.Consulta_Status.option.filtro_sql   = {PAINEL_CASO: vm.PainelCaso, ABERTO: 1};\n                    }else{\n                        vm.Consulta_Status.option.filtro_sql   = {PAINEL_CASO: vm.PainelCaso, ABERTO: 0};\n                    }\n\n                    vm.Consulta_Motivos.option.paran['ID']     = 0;\n                    vm.Consulta_Responsavel.option.paran['ID'] = 0;\n                    vm.Consulta_Contato.option.paran['ID']     = 0;\n                    vm.Consulta_Status.option.paran['ID']      = 0;\n                    vm.Consulta_Tipos.option.paran['ID']       = 0;\n                    vm.Consulta_Origens.option.paran['ID']     = 0;\n\n                    if(vm.caso_id == -1){\n                        vm.Acoes.tratarItens(0,false,true);\n                    }else{\n                        if(vm.caso_id == 0){\n                            vm.Acoes.tratarItens(0,false);\n                            vm.Consulta_Motivos.filtrar();\n                            $('.modal-caso').find('.modal-body').scrollTop(0);\n                            vm.hideTabs(true);\n                            setTimeout(function(){\n                                $('#tab-caso').trigger('click');\n                                $('#tab-caso').focus();\n                            },100);\n                        }else{\n                            vm.Acoes.tratarItens(1,true);\n                            vm.hideTabs(false);\n\n                            setTimeout(function(){\n                                $('#tab-feed').trigger('click');\n                            },100);\n                        }\n\n                        $('#modal-caso').modal();\n                        setTimeout(function(){\n                            $('.modal-caso').find('.modal-body').scrollTop(0);\n                        },500);\n\n                        vm.btnGravar.disabled = false;\n                    }\n\n                    vm.caso_id   = $('._caso_id').val();\n     \n                }\n            );\n        }\n\n        vm.newLembrete = {\n            ID          : 0,\n            TIPO        : 0,\n            TODOS       : 0,\n            MENU_ID     : 0,\n            TITULO      : 'Lembrete Casos',\n            LEITURA     : 0,\n            ENVIO       : 0,\n            EMITENTE    : 0,\n            AGENDAMENTO : 0,\n            EXECUTADO   : 0,\n            TABELA      : 'TBCASO',\n            TABELA_ID   : 0,\n            PAINEL_ID   : 0\n        },\n\n        vm.lembrete = {\n            datahora   : '',\n            comentario : '',\n            iten       : {},\n            dados      : {},\n            min        : new Date(),\n            add: function(){\n                $('#modal-add-lembrete').modal();\n\n                this.iten = angular.copy(vm.newLembrete);\n                this.iten.TABELA_ID = angular.copy(vm.caso_id);\n                this.iten.PAINEL_ID = angular.copy(vm.painel_id);\n\n                this.iten.AGENDAMENTO = moment().toDate();\n                this.min = moment().toDate();\n\n                CKEDITOR.instances.editor5.setData('');\n\n            },\n            editar: function(iten){\n                $('#modal-add-lembrete').modal();\n\n                var obj             = angular.copy(iten);\n                this.iten           = obj;\n                this.iten.PAINEL_ID = angular.copy(vm.painel_id);\n\n                CKEDITOR.instances.editor5.setData(obj.MENSAGEM);\n\n            },\n            gravar: function(){\n                var that = this;\n\n                addConfirme('Gravar',\n                        'Deseja realmente gravar lembrete:'\n                        ,[obtn_ok,obtn_cancelar],\n                    [\n                    {ret:1,func:function(e){\n\n                        var dados = {\n                            MENSAGEM    : CKEDITOR.instances.editor5.getData(),\n                            ID          : that.iten.ID,\n                            TIPO        : 0,\n                            TITULO      : that.iten.TITULO,\n                            AGENDAMENTO : that.iten.AGENDAMENTO,\n                            EXECUTADO   : 0,\n                            TABELA      : that.iten.TABELA,\n                            TABELA_ID   : that.iten.TABELA_ID,\n                            PAINEL_ID   : that.iten.PAINEL_ID,\n                        };\n\n                        $ajax.post('/_11190/gravarLembrete', dados)\n                            .then(function(response) {\n                                that.canselar(); \n                                that.atualizar();   \n                            }\n                        );\n\n                    }},\n                    {ret:2,func:function(e){\n\n\n                    }},\n                    ]  \n                );\n                \n            },\n            excluir: function(){\n                var that = this;\n\n                addConfirme('Excluir',\n                        'Deseja realmente excluir lembrete:'\n                        ,[obtn_ok,obtn_cancelar],\n                    [\n                    {ret:1,func:function(e){\n\n                        var dados = {\n                            MENSAGEM    : CKEDITOR.instances.editor5.getData(),\n                            ID          : that.iten.ID,\n                            TIPO        : 0,\n                            TITULO      : that.iten.TITULO,\n                            AGENDAMENTO : that.iten.AGENDAMENTO,\n                            EXECUTADO   : 0,\n                            TABELA      : that.iten.TABELA,\n                            TABELA_ID   : that.iten.TABELA_ID,\n                        };\n\n                        $ajax.post('/_11190/excluirLembrete', dados)\n                            .then(function(response) {\n                                that.canselar(); \n                                that.atualizar();   \n                            }\n                        );\n\n                    }},\n                    {ret:2,func:function(e){\n\n\n                    }},\n                    ]  \n                );\n                \n            },\n            canselar: function(){\n                $('#modal-add-lembrete').modal('hide');\n            },\n            atualizar: function(){\n                var that   = this;\n                var TABELA_ID = angular.copy(vm.caso_id);\n\n                var dados = {\n                    TABELA      : 'TBCASO',\n                    TABELA_ID   : TABELA_ID,\n                };\n\n                $ajax.post('/_11190/getNotifCasos', dados)\n                    .then(function(response) {\n                        that.dados = response; \n\n                        angular.forEach(that.dados, function(iten, key) {\n                            iten.DATA_HORA   = moment(iten.DATA_HORA).toDate();\n                            iten.AGENDAMENTO = moment(iten.AGENDAMENTO).toDate();\n                        });   \n                    }\n                );\n                    \n            }\n        };\n\n        vm.Envolvidos = {\n            dados      : {},\n            add: function(){\n                var that = this;\n\n                var id   = vm.Consulta_Envolvidos.item.dados.ID\n                var nome = vm.Consulta_Envolvidos.item.dados.DESCRICAO\n\n                addConfirme('Remover',\n                        'Deseja realmente adicionar '+nome+'?'\n                        ,[obtn_ok,obtn_cancelar],\n                    [\n                    {ret:1,func:function(e){\n\n                        var dados = {\n                            PAINEL_ID  : vm.painel_id,\n                            CASO_ID    : vm.caso_id,\n                            USUARIO_ID : id\n                        };\n\n                        $ajax.post('/_11150/grvEnvolvidos', dados)\n                            .then(function(response) {\n                                that.atualizar();\n                                showSuccess('Adicionado!'); \n                            }\n                        );\n\n                        vm.Consulta_Envolvidos.apagar();\n\n                    }},\n                    {ret:2,func:function(e){\n                        vm.Consulta_Envolvidos.apagar();\n                    }},\n                    ]  \n                );\n                \n            },\n            excluir: function(item){\n                var that = this;\n\n                addConfirme('Remover',\n                        'Deseja realmente remover '+item.NOME+'?'\n                        ,[obtn_ok,obtn_cancelar],\n                    [\n                    {ret:1,func:function(e){\n\n                        $ajax.post('/_11150/rmvEnvolvidos', item)\n                            .then(function(response) {\n                                that.atualizar();\n                                showSuccess('Removido!'); \n                            }\n                        );\n\n                    }},\n                    {ret:2,func:function(e){\n\n\n                    }},\n                    ]  \n                );\n                \n            },\n            atualizar: function(){\n                vm.Consulta_Envolvidos.option.paran = {PAINEL_ID: vm.painel_id}\n\n                var that   = this;\n                var TABELA_ID = angular.copy(vm.caso_id);\n\n                var dados = {\n                    PAINEL_ID : vm.painel_id,\n                    CASO_ID   : vm.caso_id,\n                };\n\n                $ajax.post('/_11150/getEnvolvidos', dados)\n                    .then(function(response) {\n                        that.dados = response; \n                    }\n                );\n                    \n            }\n        };\n\n        vm.Acoes = {\n\n            modalFeed: function(feeed){\n                var modal = $('.feed-caso'+feeed.ID);\n                if($(modal).hasClass('email_model')){\n                    $(modal).removeClass('email_model');\n                }else{\n                    $(modal).addClass('email_model');\n                }\n            },            \n            fimCaso:function(){\n                that = this;\n                vm.painel_id = $('._painel_id').val();\n                vm.caso_id   = $('._caso_id').val();\n\n                vm.finalizar.problema = CKEDITOR.instances.editor2.getData();\n                vm.finalizar.solucao  = CKEDITOR.instances.editor3.getData(); \n\n                if((vm.finalizar.problema + '').length >= 30){\n                    if((vm.finalizar.solucao + '').length >= 30){\n\n                        addConfirme('Finalizar caso',\n                                'Deseja realmente finalizar caso:'+vm.caso_id \n                                ,[obtn_ok,obtn_cancelar],\n                            [\n                            {ret:1,func:function(e){\n\n                                $ajax.post('/_11150/finalizar', vm.finalizar)\n                                    .then(function(response) {\n\n                                        $('#modal-finalizar').modal('hide');\n                                        showSuccess('Caso finalizado');\n\n                                        setTimeout(function(){\n                                            $('.atualizar-files').trigger('click');\n                                        },300);  \n\n                                    }\n                                );\n\n                            }},\n                            {ret:2,func:function(e){\n\n\n                            }},\n                            ]  \n                        );\n\n                    }else{\n                        showErro(\"Solução para este caso, tem menos de 30 caracteres\");     \n                    }\n                }else{\n                    showErro(\"Descrição técnica do caso, tem menos de 30 caracteres\");   \n                }\n\n            },\n            CanselarFinalizar: function(){           \n                $('#modal-finalizar').modal('hide');\n            },\n            finalizarCaso:function(caso_id){\n                that = this;\n                vm.painel_id = $('._painel_id').val();\n                vm.caso_id   = $('._caso_id').val();\n\n                vm.finalizar = {};\n\n                vm.finalizar.caso_id   = vm.caso_id;\n                vm.finalizar.painel_id = vm.painel_id;\n                vm.finalizar.problema  = '';\n                vm.finalizar.solucao   = '';\n\n                $('#modal-finalizar').modal();\n\n                CKEDITOR.instances.editor2.setData('');\n                CKEDITOR.instances.editor3.setData(''); \n\n            },\n            editarFeedArquivo: function(feed){\n                var tmp = angular.copy(feed);\n\n                $('#modal-file').modal();  \n                vm.Arquivos.data = tmp.FILE;\n                vm.Arquivos.data_excluir = [];\n                vm.Arquivos.comentario = tmp.MENSAGEM;\n                vm.Arquivos.coment = tmp.COMENT;\n\n                vm.Arquivos.assunto = tmp.ASSUNTO;\n\n                vm.EmailContato1.itens = [];\n                vm.EmailContato2.itens = [];\n                vm.EmailContato3.itens = [];\n                vm.EmailContato4.itens = [];\n\n                vm.Arquivos.de      = tmp.DE;\n                vm.Arquivos.para    = tmp.PARA;\n                vm.Arquivos.cc      = tmp.EM_COPIA;\n                vm.Arquivos.cco     = tmp.EM_COPIA_OCULTA;\n\n                if((tmp.DE   + '').length > 0)\n                vm.EmailContato1.itens = (tmp.DE   + '').split(\",\");\n\n                if((tmp.PARA   + '').length > 0)\n                vm.EmailContato2.itens = (tmp.PARA + '').split(\",\");\n\n                if((tmp.EM_COPIA   + '').length > 0)\n                vm.EmailContato3.itens = (tmp.EM_COPIA   + '').split(\",\");\n\n                if((tmp.EM_COPIA_OCULTA   + '').length > 0)\n                vm.EmailContato4.itens = (tmp.EM_COPIA_OCULTA  + '').split(\",\");\n\n                CKEDITOR.instances.editor1.setData(tmp.MENSAGEM);\n\n                vm.Arquivos.vGravar = true;\n                vm.Arquivos.editando = true;\n\n                vm.tipo_feed   = tmp.TIPO;\n\n                vm.feed_editar = tmp;\n                    \n            },\n            excluirFeedArquivo:function(painel_id, caso_id, user, feed){\n                that = this;\n                var temp_feed = angular.copy(feed);\n\n                addConfirme('Excluir Feed',\n                        'Deseja realmente excluir este Feed:'+feed.ID\n                        ,[obtn_ok,obtn_cancelar],\n                    [\n                    {ret:1,func:function(e){\n\n                        var dados = {};\n\n                        dados.FEED_ID         = feed.ID;\n\n                        dados.PAINEL_ID       = painel_id;\n                        dados.CASO_ID         = caso_id;\n                        dados.DE              = user.EMAIL; \n                        dados.PARA            = ''; \n                        dados.EM_COPIA        = ''; \n                        dados.EM_COPIA_OCULTA = ''; \n                        dados.MENSAGEM        = that.comentario; \n                        dados.ASSUNTO         = ''; \n                        dados.FILES           = 1;\n                        dados.SUBFEED         = 0;\n                        dados.TIPO            = 2;\n                        dados.USUARIO_ID      = user.CODIGO;\n\n                        dados.ARQUIVOS        = that.data;\n                        dados.EXCLUIR         = that.data_excluir;\n                        console.log(dados);\n\n                        $ajax.post('/_11150/excluirFeed', dados)\n                            .then(function(response) {\n                                vm.Arquivos.data         = [];\n                                vm.Arquivos.data_excluir = [];\n                                vm.Arquivos.comentario   = [];\n                                vm.Arquivos.vGravar      = false;\n                                vm.Arquivos.editando     = false;\n                                vm.feed_editar           = [];\n\n                                $('#modal-file').modal('hide'); \n\n                                setTimeout(function(){\n\n                                    if(temp_feed.COMENT == 0){\n                                        $('.atualizar-files').trigger('click');\n                                    }else{\n                                        $('#tab-files').trigger('click');\n                                    }\n\n                                },300);\n\n                            }\n                        );\n\n                    }},\n                    {ret:2,func:function(e){\n\n\n                    }},\n                    ]  \n                );\n\n            },\n            comentarFeed: function(feed){\n\n                console.log(feed);\n\n                var tmp = angular.copy(feed);\n                var id = tmp.CASO_ID;\n\n                vm.Arquivos.data = [];\n                vm.Arquivos.data_excluir = [];\n                vm.Arquivos.comentario = [];\n                vm.Arquivos.vGravar = true;\n                vm.Arquivos.editando = false;\n                vm.Arquivos.coment = tmp.COMENT;\n\n                CKEDITOR.instances.editor1.setData('');\n\n                vm.Arquivos.de      = vm.user.EMAIL;\n                vm.Arquivos.para    = tmp.DE;\n                vm.Arquivos.cc      = '';\n                vm.Arquivos.cco     = '';\n\n                vm.EmailContato1.itens = [];\n                vm.EmailContato2.itens = [];\n                vm.EmailContato3.itens = [];\n                vm.EmailContato4.itens = [];\n\n                vm.EmailContato1.itens.push(vm.user.EMAIL);\n                vm.EmailContato2.itens.push(tmp.DE);\n                \n               \n                vm.Arquivos.assunto = 'Re: [CASO: '+lpad(id,\"0\", 8)+'] - ' + vm.Consulta_Motivos.dados.DESCRICAO;\n\n                vm.tipo_feed = 99;\n\n                vm.feed_editar = feed;\n\n                $('#modal-file').modal(); \n                    \n            },\n            gosteiFeed: function(feed){\n\n                $ajax.post('/_11150/gostei', {FEED_ID: feed.ID},{progress: false})\n                .then(function(response) {\n\n                    feed.USUARIO_GOSTOU = response.USUARIO_GOSTOU;\n                    feed.QTD_GOSTOU     = response.QTD_GOSTOU;\n                   \n                },function(){\n                    //vm.btnGravar.disabled = false;\n                }); \n\n            },\n            responderEmail: function(feed,flag){\n\n            },\n            feedFile: function(comentario){\n\n                var id = vm.caso_id;\n\n                vm.Arquivos.de      = vm.user.EMAIL;\n                vm.Arquivos.para    = vm.PainelCaso.EMAIL;\n                vm.Arquivos.cc      = '';\n                vm.Arquivos.cco     = '';\n                vm.Arquivos.coment  = comentario;\n\n                vm.EmailContato1.itens = [];\n                vm.EmailContato2.itens = [];\n                vm.EmailContato3.itens = [];\n                vm.EmailContato4.itens = [];\n\n                vm.EmailContato1.itens.push(vm.user.EMAIL);\n                vm.EmailContato2.itens.push(vm.PainelCaso.EMAIL);\n                \n                vm.Arquivos.assunto = 'Arquivos: [Caso: '+lpad(id,\"0\", 8)+'] - ' + vm.Consulta_Motivos.dados.DESCRICAO;\n                CKEDITOR.instances.editor1.setData('');\n\n                vm.tipo_feed = 2;\n                $('#modal-file').modal();     \n            },\n            feedEmail: function(comentario){\n\n                var id = vm.caso_id;\n\n                vm.Arquivos.de      = vm.user.EMAIL;\n                vm.Arquivos.para    = ''; //vm.PainelCaso.EMAIL;\n                vm.Arquivos.cc      = '';\n                vm.Arquivos.cco     = '';\n                vm.Arquivos.coment  = comentario;\n\n                vm.EmailContato1.itens = [];\n                vm.EmailContato2.itens = [];\n                vm.EmailContato3.itens = [];\n                vm.EmailContato4.itens = [];\n\n                vm.EmailContato1.itens.push(vm.user.EMAIL);\n\n                var caso_contato = (vm.PainelCaso.EMAIL_MONITOR + '').split(',');\n\n                for (var i = 0; i < caso_contato.length; i++) {\n                    vm.EmailContato4.itens.push((caso_contato[i] + '').trim());\n                }\n                \n\n                vm.Arquivos.assunto = 'Re: [CASO: '+lpad(id,\"0\", 8)+'] - ' + vm.Consulta_Motivos.dados.DESCRICAO;\n                CKEDITOR.instances.editor1.setData('');\n\n                vm.editar_contato = false;\n                vm.tipo_feed = 1;\n                $('#modal-file').modal();     \n            },\n            openListaContato: function(){\n                var imput = $(\"input[name*='filtro_pesquisa']\");\n                if(imput.length > 0){\n                    imput.focus();\n                }\n            },\n            openCaso: function(id,event){\n                if(event == null || event.key == 'Enter'){\n                    $('._caso_id').val(id)\n                    vm.init();\n                }\n            },\n            Canselar: function(){\n                var id = $('._caso_id').val();\n                var linhas = $('.tabela-itens-caso').find('tr');\n                var iten = $('.caso_iten_'+id);\n\n                if(iten.length > 0){\n                    $('.caso_iten_'+id).focus();\n                }else{\n                    if(linhas.length > 0){\n                        $(linhas[0]).focus();\n                    }\n                }\n            },\n            addCaso: function(){\n                $('._caso_id').val(0);\n                vm.init();\n            },\n            removerEnter: function(str){\n                str = str + '';\n                str = str.replace(/(?:\\r\\n|\\r|\\n)/g, '<br/>');\n                return str;\n            },\n            validarGravar: function(){\n                var that = this;\n                var ret = false;\n                vm.btnGravar.disabled = true;\n\n                var script = '';\n\n                angular.forEach(vm.Create.model_itens, function(iten, key) {\n                    var val;\n\n                    if(iten.TIPO == 1 || iten.TIPO == 3 || iten.TIPO == 8 || iten.TIPO == 10){\n                        val = '\\''+iten.VALOR+'\\'';\n                    }\n                    \n                    if(iten.TIPO == 2 || iten.TIPO == 6){\n                        val = iten.VALOR;\n                    }\n\n                    if(iten.TIPO == 4 || iten.TIPO == 5 || iten.TIPO == 9){\n                        val = JSON.stringify(iten.VALOR);\n                    }\n\n                    if(iten.TIPO == 7){\n                        val = JSON.stringify(iten.CONSULTA.item.dados);\n                    }\n\n                    if(val == undefined){\n                        val = '\\'\\'';\n                    }\n\n                    script += 'var '+iten.VAR_NOME+' = '+that.removerEnter(val)+';\\n';\n                });\n\n                angular.forEach(vm.parametro, function(iten, key) {\n                    var val = '';\n\n                    if($.isNumeric(iten.VALOR)){\n                        val = iten.VALOR;\n                    }else{\n                        val = '\\''+iten.VALOR+'\\'';\n                    }\n\n                    script += 'var '+iten.NOME+' = '+that.removerEnter(val)+';\\n';\n                });\n\n                \n\n                var val; val = JSON.stringify(vm.Consulta_Motivos.item.dados);\n                script += 'var MOTIVO = '+that.removerEnter(val)+';\\n';\n\n                var val; val = JSON.stringify(vm.Consulta_Tipos.item.dados);\n                script += 'var TIPO = '+that.removerEnter(val)+';\\n';\n\n                var val; val = JSON.stringify(vm.Consulta_Origens.item.dados);\n                script += 'var ORIGEM = '+that.removerEnter(val)+';\\n';\n\n                var val; val = JSON.stringify(vm.Consulta_Responsavel.item.dados);\n                script += 'var RESPONSAVEL = '+that.removerEnter(val)+';\\n';\n\n                var val; val = JSON.stringify(vm.Consulta_Status.item.dados);\n                script += 'var STATUS = '+that.removerEnter(val)+';\\n';\n\n                var val; val = JSON.stringify(vm.Consulta_Contato.item.dados);\n                script += 'var CONTATO = '+that.removerEnter(val)+';\\n';\n\n\n                var erro = 0;\n                angular.forEach(vm.Validacao, function(iten, key) {\n                    var formula = script+' \\n '+iten.FORMULA;\n                    console.log(formula);\n                    var valor   = vm.ScriptCompile.compile(formula);\n \n                    if(valor == 'true' || valor == 'false'){\n                        if(valor == 'false'){\n                            showErro(iten.MENSAGEM);\n                            erro = 1;    \n                        }\n                    }else{\n                        showErro('Erro nas regras de validação:('+valor+')');\n                        erro = 1;\n                    }\n                });\n\n                if(erro == 0){\n\n                    if(!vm.Consulta_Motivos.item.selected){\n                        showErro('Motivo é obrigatório!');\n                        vm.Consulta_Motivos.filtrar();\n                        vm.btnGravar.disabled = false;\n                    }else{\n\n                    if(!vm.Consulta_Tipos.item.selected){\n                        showErro('Tipo é obrigatório!');\n                        vm.Consulta_Tipos.filtrar();\n                        vm.btnGravar.disabled = false;\n                    }else{ \n\n                    if(!vm.Consulta_Origens.item.selected){\n                        showErro('Tipo de Origem é obrigatório!');\n                        vm.Consulta_Origens.filtrar();\n                        vm.btnGravar.disabled = false;\n                    }else{\n\n                    if(!vm.Consulta_Responsavel.item.selected){\n                        showErro('Responsável é obrigatório!');\n                        vm.Consulta_Responsavel.filtrar();\n                        vm.btnGravar.disabled = false;\n                    }else{\n\n                    if(!vm.Consulta_Status.item.selected){\n                        showErro('Status é obrigatório!');\n                        vm.Consulta_Status.filtrar();\n                        vm.btnGravar.disabled = false;\n                    }else{\n\n                        vm.Create.itens = [];\n                        var obj_temp = angular.copy(vm.itens);\n                        angular.forEach(obj_temp, function(iten, key) {\n                            if(iten != undefined){\n                                vm.Create.itens.push(iten);\n                            }\n                        });\n\n                        var validar = vm.Create.validarCampos();\n                        if(validar){\n                            \n                            ret = true;\n                            \n                        }else{\n                            vm.btnGravar.disabled = false;\n                        }\n\n                    }}}}}\n                }else{\n                    vm.btnGravar.disabled = false;\n                }\n\n                return ret;\n            },\n            gravarCaso: function(){\n                var that    = this;\n                var validar = that.validarGravar();\n                \n                if(validar){\n                    var campos = {};\n                        campos.MOTIVO      = vm.Consulta_Motivos.item.dados.ID;\n                        campos.TIPO        = vm.Consulta_Tipos.item.dados.ID;\n                        campos.ORIGEM      = vm.Consulta_Origens.item.dados.ID;\n                        campos.RESPONSAVEL = vm.Consulta_Responsavel.item.dados.CODIGO;\n                        campos.STATUS      = vm.Consulta_Status.item.dados.ID;\n                        campos.CONTATO     = vm.Consulta_Contato.item.dados.ID;\n\n                    vm.painel_id = $('._painel_id').val();\n                    vm.caso_id   = $('._caso_id').val();\n                    \n                    vm.Create.itens = [];\n                    var obj_temp = angular.copy(vm.itens);\n                    angular.forEach(obj_temp, function(iten, key) {\n                        if(iten != undefined){\n                            vm.Create.itens.push(iten);\n                        }\n                    });\n\n                    var itens    = vm.Create.tratarCampos();\n\n                    $ajax.post('/_11150/gravarCaso', {ITENS: itens, CAMPOS: campos, PAINEL_ID: vm.painel_id, CASO_ID: vm.caso_id})\n                    .then(function(response) {\n\n                        showSuccess('Gravado!');\n\n                        vm.getCasos(vm.abaAberta);\n                        that.openCaso(response,null);\n                       \n                    },function(){\n                        vm.btnGravar.disabled = false;\n                    });\n                    \n                }\n\n            },\n            canselarAlteracaoCaso: function(){ \n                vm.hideTabs(false);\n                this.tratarItens(1,true);\n            },\n            tratarItens: function(tela,disable,filtro){\n                vm.status_tela = tela;\n                vm.PainelConfEdit = [];\n                vm.PainelConfEdit = angular.copy(vm.PainelConf);\n\n                if(disable){\n                    vm.PainelCaso.OLD_CONTATO_CADASTRO = vm.PainelCaso.CONTATO_CADASTRO;\n                    vm.PainelCaso.CONTATO_CADASTRO = 0;\n                }\n\n                vm.Consulta_Motivos.apagar();\n                vm.Consulta_Responsavel.apagar();\n                vm.Consulta_Contato.apagar();\n                vm.Consulta_Status.apagar();\n                vm.Consulta_Tipos.apagar();\n                vm.Consulta_Origens.apagar();\n\n                vm.Consulta_Motivos.disable(true);\n                vm.Consulta_Responsavel.disable(true);\n                vm.Consulta_Contato.disable(true);\n                vm.Consulta_Status.disable(true);\n                vm.Consulta_Tipos.disable(true);\n                vm.Consulta_Origens.disable(true);\n\n                var motivo;\n                motivo = angular.copy(vm.response['MOTIVO']);\n                vm.Consulta_Motivos.dados = motivo;\n                vm.Consulta_Motivos.selecionarItem(motivo);\n\n                var responsavel;\n                responsavel = angular.copy(vm.response['RESPONSAVEL']);\n                vm.Consulta_Responsavel.dados = responsavel;\n                vm.Consulta_Responsavel.selecionarItem(responsavel);\n\n                var contato;\n                contato = angular.copy(vm.response['CONTATO']);\n                vm.Consulta_Contato.dados = contato;\n                vm.Consulta_Contato.selecionarItem(contato);\n\n                var status;\n                status = angular.copy(vm.response['STATUS']);\n                vm.Consulta_Status.dados = status;\n                vm.Consulta_Status.selecionarItem(status);\n\n                var tipo;\n                tipo = angular.copy(vm.response['TIPO']);\n                vm.Consulta_Tipos.dados = tipo;\n                vm.Consulta_Tipos.selecionarItem(tipo);\n\n                var origen;\n                origen = angular.copy(vm.response['ORIGEM']);\n                vm.Consulta_Origens.dados = origen;\n                vm.Consulta_Origens.selecionarItem(origen);\n\n                vm.Consulta_Motivos.disable(disable);\n                vm.Consulta_Responsavel.disable(disable);\n                vm.Consulta_Contato.disable(disable);\n                vm.Consulta_Status.disable(disable);\n                vm.Consulta_Tipos.disable(disable);\n                vm.Consulta_Origens.disable(disable);\n\n                ////////////////////////////////////////////////////////////////////////\n                    var grupo_id = 0;\n                    var html  = '';\n                    vm.Create.itens = [];\n                    vm.itens        = [];\n                    vm.Create.model = 'vm.itens';\n\n                    angular.forEach(vm.PainelConfEdit, function(iten, key) { \n\n                        if(grupo_id != iten.GRUPO_ID){\n                            grupo_id = iten.GRUPO_ID;\n                            html += '<div class=\"barra_descricao ng-binding\">'+iten.AGRUP+'</div>';\n                        }\n\n                        var valor;\n                        var def = iten.DEFAULT;\n                        \n                        var obj = {\n                            VAR_NOME : iten.VAR_NOME,\n                            VALOR    : def,\n                            EDIT     : 0,\n                            NOME     : iten.DESCRICAO,\n                            ID       : iten.ID,\n                            TIPO     : iten.TIPO + '',\n                            TEXTO    : iten.DESCRICAO,\n                            DEFAULT  : def,\n                            MIN      : iten.MIN,\n                            MAX      : iten.MAX,\n                            TAMANHO  : iten.TAMANHO,\n                            REQUERED : iten.REQUERED,\n                            VINCULO  : '',\n                            STEP     : iten.STEP,\n                            CONSULTA : null,\n                            ITENS    : iten.ITENS,\n                            DISABLED : disable,\n                            AUTOLOAD : iten.AUTOLOAD,\n                            JSON     : iten.JSON,\n\n                            CAMPO_GRAVAR: iten.CAMPO_GRAVAR,\n                            PAINEL_ID: vm.painel_id,\n\n                            SQL_ID         : iten.SQL_ID,\n                            TAMANHO_TABELA : iten.TAMANHO_TABELA,\n                            URL_CONSULTA   : iten.URL_CONSULTA,\n                            CAMPO_TABELA   : iten.CAMPO_TABELA,\n                            CAMPOS_RETORNO : iten.CAMPOS_RETORNO,\n                            DESC_TABELA    : iten.DESC_TABELA,\n\n                            VINCULO_CAMPO     : iten.VINCULO_CAMPO,\n                            VINCULO_ITENS     : iten.VINCULO_ITENS,\n                            VINCULO_DESCRICAO : iten.VINCULO_DESCRICAO,\n\n                            setValor : function(valor){\n                                this.VALOR = valor;\n                            },\n                            log:function(valor){\n                                console.log(valor);\n                            }\n                        };\n\n                        if(iten.TIPO  == 2 ||\n                            iten.TIPO == 6){\n\n                            if(iten.DEFAULT == ''){\n                                valor = 0;\n                            }else{\n                                valor = Number(iten.DEFAULT);\n                            }    \n                        }else{\n                            valor = iten.DEFAULT + ''; \n                        }                        \n\n                        if(iten.TIPO == 8 || iten.TIPO == 4 || iten.TIPO == 5){\n                            obj.setValor('');    \n                        }else{\n                            obj.setValor(valor);  \n                        }\n\n                        if(iten.TIPO  == 9){\n                            angular.forEach(obj.ITENS, function(t, i) {\n                                if(valor == t.VALOR){\n                                    obj.VALOR = t;\n                                }\n                            });   \n                        }\n\n                        if(iten.TIPO == 3){\n                            var momentDate = moment(def);\n                            def = momentDate.toDate();\n                            obj.setValor(def);\n                        }\n\n                        vm.Create.itens.push(obj);\n                        vm.itens[iten.ID] = obj;\n\n                        vm.Create.model_itens[iten.ID] = obj;\n                        \n                        html += vm.Create.montarHtml(obj,iten.ID,2);\n\n                    });\n                    \n                    if(filtro){\n                        var obj   = $('.painel_imputs2');\n                        var scope = obj.scope(); \n                        obj.html(html);\n                        var obj   = $('.painel_imputs2');\n                        $compile(obj.contents())(scope);\n                    }else{    \n                        var obj   = $('.painel_imputs');\n                        var scope = obj.scope(); \n                        obj.html(html);\n                        var obj   = $('.painel_imputs');\n                        $compile(obj.contents())(scope);\n                    }\n\n                    angular.forEach(vm.Create.itens, function(iten, key) { \n                        if(iten.TIPO == 7){\n                            iten.CONSULTA.getScale();\n                        }\n                    });\n\n                    angular.forEach(vm.itens, function(iten, key) {\n                        if(iten.TIPO == 7){\n                            if(iten.VALOR != 0 && iten.VALOR != '' && iten.VALOR != '{}'){\n                                if(iten.JSON != '' && iten.JSON != '{}'){\n                                    var a = JSON.parse(iten.JSON);\n                                    var B = iten.CONSULTA.actionsSelct;\n                                    iten.CONSULTA.actionsSelct = [];\n                                    iten.CONSULTA.dados = a;\n                                    iten.CONSULTA.selecionarItem(a);\n                                    iten.CONSULTA.disable(disable);\n                                    iten.CONSULTA.actionsSelct = B;\n                                }\n                            }\n                        }\n                    });\n\n                    //loading('hide');\n\n                    $('.modal-caso').find('.modal-body').scrollTop(0);\n\n            },\n            alterarCaso: function(){\n                this.tratarItens(2,false);\n                vm.PainelCaso.CONTATO_CADASTRO = vm.PainelCaso.OLD_CONTATO_CADASTRO;\n                vm.hideTabs(true);\n                $('#tab-caso').trigger('click');\n                $('.modal-caso').find('.modal-body').scrollTop(0);\n            },\n            excluirCaso: function(){\n\n                vm.painel_id = $('._painel_id').val();\n                vm.caso_id   = $('._caso_id').val();\n\n                addConfirme('Excluir Input?',\n                        'Deseja realmente excluir o caso de ID:'+vm.caso_id\n                        ,[obtn_ok,obtn_cancelar],\n                    [\n                    {ret:1,func:function(e){\n\n                        $ajax.post('/_11150/excluirCaso', {PAINEL_ID:vm.painel_id, CASO_ID:vm.caso_id})\n                        .then(function(response) {\n                            vm.getCasos(vm.abaAberta);\n                            showSuccess('Caso excluído!');\n                            $('._caso_id').val(0);\n                            $('#modal-caso').modal('hide');\n                        });\n\n                    }},\n                    {ret:2,func:function(e){\n\n\n                    }},\n                    ]  \n                );\n\n            },\n            btnVoltar: function(){\n\n            },\n            btnGravar: function(){\n                var validar = vm.Create.validarCampos();\n\n                if(validar){\n\n                    var itens = vm.Create.tratarCampos();\n\n                    $ajax.post('/_11150/gravarContato', {ITENS: itens, PAINEL_ID: vm.PainelCaso['ID']})\n                    .then(function(response) {\n                        $('#modal-cad-contato').modal('hide');\n                        showSuccess('CADASTRO EFETUADO COM SUCESSO!');\n\n                        if(vm.Consulta_Contato.selected == null){\n                            vm.Consulta_Contato.option.filtro_sql = {PAINEL_CASO: vm.PainelCaso,CONTATO_ID: response};\n                            vm.Consulta_Contato.filtrar();\n                            vm.Consulta_Contato.option.filtro_sql = {PAINEL_CASO: vm.PainelCaso};\n                        }\n                    });\n\n                }\n\n            },\n            historico: function(){\n                vm.tabHistory.dados = [];\n\n                var painel_id = $('._painel_id').val();\n                var caso_id   = $('._caso_id').val();\n\n                $ajax.post('/_11150/historico', {PAINEL_ID: painel_id, CASO_ID: caso_id})\n                .then(function(response) {\n                    vm.tabHistory.dados = response;\n                });\n\n            },\n            comentario: function(){\n                vm.tabComentario.dados = [];\n\n                var painel_id = $('._painel_id').val();\n                var caso_id   = $('._caso_id').val();\n\n                $ajax.post('/_11150/comentario', {PAINEL_ID: painel_id, CASO_ID: caso_id})\n                .then(function(response) {\n                    vm.tabComentario.dados = response;\n                });\n\n            },\n            selectContato: function(id){\n                $('#modal-cad-contato').modal('hide');\n                if(vm.Consulta_Contato.selected != null){\n                    vm.Consulta_Contato.apagar();    \n                }\n\n                vm.Consulta_Contato.option.filtro_sql = {PAINEL_CASO: vm.PainelCaso,CONTATO_ID: id};\n                vm.Consulta_Contato.filtrar();\n                vm.Consulta_Contato.option.filtro_sql = {PAINEL_CASO: vm.PainelCaso};\n            },\n            modalAddContato: function(){\n\n                var grupo_id = 0;\n\n                $ajax.post('/_11150/confContato', {PAINEL_CASO: vm.PainelCaso})\n                .then(function(response) {\n\n                        vm.ConfConato = response['IMPUTS'];\n                        vm.ListaConato = response['CONTATOS'];\n\n                        var html  = '';\n                        vm.Create.itens = [];\n                        vm.Create.model = 'vm.Create.itens';\n\n                        angular.forEach(response['IMPUTS'], function(iten, key) { \n\n                            if(grupo_id != iten.GRUPO_ID){\n                                grupo_id = iten.GRUPO_ID;\n                                html += '<div class=\"barra_descricao ng-binding\">'+iten.AGRUP+'</div>';\n                            }\n\n                            var valor;\n                            var obj = {\n                                VALOR    : null,\n                                EDIT     : 0,\n                                NOME     : iten.DESCRICAO,\n                                ID       : iten.ID,\n                                TIPO     : iten.TIPO + '',\n                                TEXTO    : iten.DESCRICAO,\n                                DEFAULT  : iten.DEFAULT,\n                                MIN      : iten.MIN,\n                                MAX      : iten.MAX,\n                                TAMANHO  : iten.TAMANHO,\n                                REQUERED : iten.REQUERED,\n                                VINCULO  : '',\n                                STEP     : iten.STEP,\n                                CONSULTA : null,\n                                ITENS    : iten.ITENS,\n                                DISABLED : false,\n                                CAMPO_GRAVAR: iten.CAMPO_GRAVAR,\n                                setValor : function(valor){\n                                    this.VALOR = valor;\n                                }\n                            };\n\n                            if(iten.TIPO  == 2 ||\n                                iten.TIPO == 6){\n\n                                if(iten.DEFAULT == ''){\n                                    valor = 0;\n                                }else{\n                                    valor = Number(iten.DEFAULT);\n                                }    \n                            }else{\n                                valor = iten.DEFAULT + '';    \n                            }\n\n                            if(iten.TIPO  == 3 || iten.TIPO == 8 || iten.TIPO == 4 || iten.TIPO == 5){\n                                obj.setValor('');    \n                            }else{\n                                obj.setValor(valor);  \n                            }\n\n                            if(iten.TIPO  == 9){\n                                angular.forEach(obj.ITENS, function(t, i) {\n\n                                    if(valor == t.VALOR){\n                                        obj.VALOR = t;\n                                    }\n                                });   \n                            }\n\n                            //vm.Create.itens.push(obj);\n                            vm.Create.itens[iten.ID] = obj;\n                            \n                            html += vm.Create.montarHtml(obj,iten.ID,2);\n\n                        });\n                        \n                        var obj   = $('#modal-cad-contato').find('.imput-itens-cad-contato');\n                        var scope = obj.scope(); \n                        obj.html(html);\n                        var obj   = $('#modal-cad-contato').find('.imput-itens-cad-contato');\n                        $compile(obj.contents())(scope);\n\n                        angular.forEach(response['IMPUTS'], function(iten, key) { \n                            if(iten.TIPO == 7){\n                                iten.CONSULTA.getScale();\n                            }\n                        });\n\n                        \n                        $('#modal-cad-contato').modal();\n\n                        setTimeout(function(){\n                            $('#tab-cadastro').trigger('click');\n\n                            $('imput-itens-cad-contato').focus();\n                        },200);\n                    }\n                ); \n            }\n        };\n\n        vm.Consulta     = new $consulta();\n        gScope.Consulta = vm.Consulta;\n\n        vm.Consulta_Motivos     = vm.Consulta.getNew();\n        vm.Consulta_Tipos       = vm.Consulta.getNew();\n        vm.Consulta_Origens     = vm.Consulta.getNew();\n        vm.Consulta_Responsavel = vm.Consulta.getNew();\n        vm.Consulta_Status      = vm.Consulta.getNew();\n        vm.Consulta_Contato     = vm.Consulta.getNew();\n        vm.Consulta_Envolvidos  = vm.Consulta.getNew();\n\n        vm.Consulta_Envolvidos.componente               = '.consulta_envolvidos',\n        vm.Consulta_Envolvidos.model                    = 'vm.Consulta_Envolvidos',\n        vm.Consulta_Envolvidos.option.label_descricao   = 'Usuários:',\n        vm.Consulta_Envolvidos.option.obj_consulta      = '/_11150/listEnvolvidos',\n        vm.Consulta_Envolvidos.option.tamanho_input     = 'input-medio';\n        vm.Consulta_Envolvidos.option.class             = 'consulta_Envolvidos_caso';\n        vm.Consulta_Envolvidos.option.tamanho_tabela    = 450;\n\n        vm.Consulta_Motivos.componente                  = '.consulta_motivos',\n        vm.Consulta_Motivos.model                       = 'vm.Consulta_Motivos',\n        vm.Consulta_Motivos.option.label_descricao      = 'Motivo do caso:',\n        vm.Consulta_Motivos.option.obj_consulta         = '/_11150/Motivos',\n        vm.Consulta_Motivos.option.tamanho_input        = 'input-medio';\n        vm.Consulta_Motivos.option.class                = 'consulta_motivos_caso';\n        vm.Consulta_Motivos.option.tamanho_tabela       = 300;\n\n        vm.Consulta_Tipos.componente                    = '.consulta_tipos',\n        vm.Consulta_Tipos.model                         = 'vm.Consulta_Tipos',\n        vm.Consulta_Tipos.option.label_descricao        = 'Tipo:',\n        vm.Consulta_Tipos.option.obj_consulta           = '/_11150/Tipos',\n        vm.Consulta_Tipos.option.tamanho_input          = 'input-medio';\n        vm.Consulta_Tipos.option.class                  = 'consulta_tipos_caso';\n        vm.Consulta_Tipos.option.tamanho_tabela         = 300;\n\n        vm.Consulta_Origens.componente                  = '.consulta_origens',\n        vm.Consulta_Origens.model                       = 'vm.Consulta_Origens',\n        vm.Consulta_Origens.option.label_descricao      = 'Tipo de Origem:',\n        vm.Consulta_Origens.option.obj_consulta         = '/_11150/Origens',\n        vm.Consulta_Origens.option.tamanho_input        = 'input-maior';\n        vm.Consulta_Origens.option.class                = 'consulta_origens_caso';\n        vm.Consulta_Origens.option.tamanho_tabela       = 385;\n\n        vm.Consulta_Responsavel.componente              = '.consulta_responsavel',\n        vm.Consulta_Responsavel.model                   = 'vm.Consulta_Responsavel',\n        vm.Consulta_Responsavel.option.label_descricao  = 'Responsável:',\n        vm.Consulta_Responsavel.option.obj_consulta     = '/_11150/Responsavel',\n        vm.Consulta_Responsavel.option.tamanho_input    = 'input-medio';\n        vm.Consulta_Responsavel.option.obj_ret          = ['CODIGO','USUARIO'],\n        vm.Consulta_Responsavel.option.campos_tabela    = [['CODIGO','ID'],['USUARIO','NOME']],\n        vm.Consulta_Responsavel.option.class            = 'consulta_responsavel_caso';\n        vm.Consulta_Responsavel.option.tamanho_tabela   = 300;\n\n        vm.Consulta_Contato.componente                  = '.consulta_contato',\n        vm.Consulta_Contato.model                       = 'vm.Consulta_Contato',\n        vm.Consulta_Contato.option.label_descricao      = 'Nome do contato:',\n        vm.Consulta_Contato.option.obj_consulta         = '/_11150/Contatos',\n        vm.Consulta_Contato.option.tamanho_input        = 'input-medio';\n        vm.Consulta_Contato.option.class                = 'consulta_contato_caso';\n        vm.Consulta_Contato.option.required             = false;\n        vm.Consulta_Contato.option.tamanho_tabela       = 300;\n\n        vm.Consulta_Status.componente                   = '.consulta_status',\n        vm.Consulta_Status.model                        = 'vm.Consulta_Status',\n        vm.Consulta_Status.option.label_descricao       = 'Status:',\n        vm.Consulta_Status.option.obj_consulta          = '/_11150/Status',\n        vm.Consulta_Status.option.tamanho_input         = 'input-medio';\n        vm.Consulta_Status.option.class                 = 'consulta_status_caso';\n        vm.Consulta_Status.option.tamanho_tabela        = 300;\n\n        vm.Consulta_Motivos.compile();\n        vm.Consulta_Tipos.compile();\n        vm.Consulta_Origens.compile();\n        vm.Consulta_Responsavel.compile();\n        vm.Consulta_Status.compile();\n        vm.Consulta_Contato.compile();\n\n        vm.Consulta_Envolvidos.compile();\n\n        vm.Consulta_Tipos.require    = vm.Consulta_Motivos;\n        vm.Consulta_Origens.require  = [vm.Consulta_Motivos,vm.Consulta_Tipos];\n        vm.Consulta_Tipos.vincular();\n        vm.Consulta_Origens.vincular();\n\n        vm.Consulta_Envolvidos.onSelect = function(){\n            if(vm.Consulta_Envolvidos.selected != null){\n                vm.Envolvidos.add();\n            }   \n        }\n\n        vm.Consulta_Origens.onSelect = function(){\n            if(vm.Consulta_Responsavel.selected == null){\n                vm.Consulta_Responsavel.filtrar();\n            }   \n        }\n\n        vm.Consulta_Responsavel.onSelect = function(){\n            if(vm.Consulta_Status.selected == null){\n                vm.Consulta_Status.filtrar();\n            }   \n        }\n\n        vm.Consulta_Status.onSelect = function(){\n            if(vm.Consulta_Contato.selected == null){\n                //vm.Consulta_Contato.filtrar();\n            }   \n        }\n\n        vm.Consulta_Contato.onSelect = function(){\n            /*\n            var imputs = $('.itens-inputs');\n\n            if(imputs.length > 0){\n                var item = imputs[0];\n\n                var imput = $(item).find('input');\n\n                if(imput.length > 0){\n                    $(imput[0]).focus();\n                }\n                \n            }\n            */\n        }      \n\n        vm.caso_id = $('._caso_id').val();\n        if(vm.caso_id > 0){\n            vm.init();\n        }\n\n        if(vm.loading == 0){\n            vm.getCasos(vm.abaAberta);\n        }\n\n        CKEDITOR.replace('editor1',ckConfig);\n        CKEDITOR.replace('editor2',ckConfig);\n        CKEDITOR.replace('editor3',ckConfig);\n        CKEDITOR.replace('editor5',ckConfig);\n\n        function validacaoEmail(field) {\n            var usuario = field.substring(0, field.indexOf(\"@\"));\n            var dominio = field.substring(field.indexOf(\"@\")+ 1, field.length);\n\n            var ret = false;\n\n            if ((usuario.length >=1) &&\n                (dominio.length >=3) && \n                (usuario.search(\"@\")==-1) && \n                (dominio.search(\"@\")==-1) &&\n                (usuario.search(\" \")==-1) && \n                (dominio.search(\" \")==-1) &&\n                (dominio.search(\".\")!=-1) &&      \n                (dominio.indexOf(\".\") >=1)&& \n                (dominio.lastIndexOf(\".\") < dominio.length - 1)) {\n                ret = true;\n            }\n\n            return ret;\n        }\n\n        vm.EmailContato = {\n            itens: [],\n            valor: '',\n            focus: false,\n            class: '.EmailContato',\n            listaFocus: 0,\n            unico: false,\n            exec : function(){},\n            keypress : function($event){\n                var that = this;\n                if(($event.keyCode == 32 || $event.keyCode == 13) && that.valor != ''){\n                    if(validacaoEmail(that.valor)){\n                        var validar = true;\n                        angular.forEach(that.itens, function(iten, key) { \n                            if(iten == that.valor){\n                                validar = false;\n                            }\n                        });\n\n                        if(validar == true){\n                            if(that.unico == false || that.itens.length == 0){\n                                that.itens.push(that.valor.toLowerCase());\n                                that.valor = '';\n                                that.setFoco();\n                                that.exec();\n                            }else{\n                                showErro('Deve conter apenas um endereço de e-mail');    \n                            }\n                        }else{\n                            showErro('Endereço de e-mail já na lista');\n                            that.valor = '';\n                            that.setFoco();\n                            that.exec();   \n                        }\n\n                    }else{\n                        showErro('Endereço de e-mail inválido');\n                        that.valor = '';\n                        that.setFoco();\n                        that.exec();\n                    }\n\n                    that.listaFocus = 0;\n                }\n            },\n            keydown: function($event){\n                var that = this;\n                //console.log($event);\n                if(($event.keyCode == 8 || $event.keyCode == 46) && (that.valor == '' || that.valor == undefined)){\n                    if(that.itens.length > 0){\n                        clearTimeout(that.time);\n                        that.itens.splice(that.itens.length - 1, 1);\n                        that.setFoco();\n                        that.exec();\n                    }\n                }\n\n                if($event.keyCode == 40){\n\n                    var itens = $(that.class).find('.lista-itens');\n\n                    if(itens.length > 0){\n                        clearTimeout(that.time);\n                        $(itens[0]).focus();\n                    }\n\n                    that.listaFocus = 1;                 \n                }\n            },\n            listaKeydown: function($event){\n                var that = this;\n\n                if($event.keyCode == 40){\n                    clearTimeout(that.time);\n                    var itens = $(that.class).find('.lista-itens');\n                    \n                    that.listaFocus = that.listaFocus + 1;\n\n                    if(itens.length >= that.listaFocus){\n                        $(itens[that.listaFocus - 1]).focus();\n                    }\n\n                    if(that.listaFocus > itens.length){\n                        that.listaFocus = itens.length;\n                    }                \n                }\n\n                if($event.keyCode == 38){\n                    var itens = $(that.class).find('.lista-itens');\n                    \n                    that.listaFocus = that.listaFocus - 1;\n\n                    if(itens.length >= that.listaFocus && that.listaFocus > 0){\n                        clearTimeout(that.time);\n                        $(itens[that.listaFocus - 1]).focus();\n                    }\n\n                    if(that.listaFocus < 0){\n\n                        that.listaFocus = 1;\n                    }         \n                }\n            },\n            time:null,\n            blur:function(){\n                var that = this;               \n            },\n            deletarItem : function(key){\n                this.itens.splice(key, 1);\n                this.exec();\n            },\n            setFoco: function(){\n                $(this.class).find('input').focus();\n            },\n            addEmail: function(contato){\n                if(validacaoEmail(contato.EMAIL)){\n                    var validar = true;\n                        angular.forEach(this.itens, function(iten, key) { \n                            if(iten == contato.EMAIL){\n                                validar = false;\n                            }\n                        });\n\n                        if(validar == true){\n                            if(this.unico == false || this.itens.length == 0){\n                                this.itens.push(contato.EMAIL.toLowerCase());\n                                this.valor = '';\n                                this.setFoco();\n                                this.exec();\n                            }else{\n                                showErro('Deve conter apenas um endereço de e-mail');    \n                            }\n                        }else{\n                            showErro('Endereço de e-mail já na lista');\n                            this.valor = '';\n                            this.setFoco();\n                            this.exec();  \n                        }\n                }else{\n                    showErro('Endereço de e-mail inválido');\n                    this.valor = '';\n                    this.setFoco();\n                    this.exec();\n                }\n            },\n        }\n\n        function tratarRet(itens){\n            var ret = '';\n            angular.forEach(itens, function(iten, key) { \n                if(key == 0){\n                    ret = iten;\n                }else{\n                    ret = ret + ', '+ iten;\n                }\n            });\n\n            return ret;\n        }\n\n        vm.EmailContato1 = angular.copy(vm.EmailContato); vm.EmailContato1.class = '.EmailContato1'; vm.EmailContato1.unico = true;\n        vm.EmailContato1.exec = function(){\n            vm.Arquivos.de = tratarRet(vm.EmailContato1.itens);\n        }\n\n        vm.EmailContato2 = angular.copy(vm.EmailContato); vm.EmailContato2.class = '.EmailContato2';\n        vm.EmailContato2.exec = function(){\n            vm.Arquivos.para = tratarRet(vm.EmailContato2.itens);\n        }\n\n        vm.EmailContato3 = angular.copy(vm.EmailContato); vm.EmailContato3.class = '.EmailContato3';\n        vm.EmailContato3.exec = function(){\n            vm.Arquivos.cc = tratarRet(vm.EmailContato3.itens);\n        }\n\n        vm.EmailContato4 = angular.copy(vm.EmailContato); vm.EmailContato4.class = '.EmailContato4';\n        vm.EmailContato4.exec = function(){\n            vm.Arquivos.cco = tratarRet(vm.EmailContato4.itens);\n        }\n\n\t}   \n    "]}