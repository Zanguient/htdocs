{"version":3,"sources":["_13021.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"_13021.js","sourcesContent":["/**\r\n * Script com funções de:\r\n * - Limitar caracteres do textarea\r\n * */\r\n(function($) {\r\n\t\r\n\t{ /** Limitar caracteres do textarea */\r\n\t\t\r\n\t\tlimiteTextarea( $('textarea'), 200, $('span.contador span') ); //função em master.js\r\n\r\n\t}\r\n\r\n\t{ /** Tratamento de produtos repetidos */\r\n\r\n\t\t//Verificar produtos repetidos\r\n\t\tfunction verificarProdRepet(prod) {\r\n\r\n\t\t\tvar ret = false;\r\n\r\n\t\t\tif ($(prod).siblings().hasClass($(prod).attr('class').split(' ').pop()))\r\n\t\t\t\tret = true;\r\n\r\n\t\t\treturn ret;\r\n\t\t}\r\n\r\n\t\t//Agrupar valores de itens repetidos\r\n\t\t$('.orc-item').each(function () {\r\n\r\n\t\t\tif (verificarProdRepet($(this))) {\r\n\r\n\t\t\t\tvar qtd = $(this).find('.prod-qtd').val();\r\n\t\t\t\tif (qtd === \"\") qtd = 0;\r\n\t\t\t\tvar qtd_tot = parseFloat(qtd) + parseFloat($(this).find('.prod-qtd').val());\r\n\t\t\t\tqtd_tot = qtd_tot.toFixed(4);\t//4 dígitos\r\n\t\t\t\tqtd_tot = formataReal(qtd_tot);\t//função em master.js\r\n\r\n\t\t\t\t$(this)\r\n\t\t\t\t\t.find('.prod-qtd')\r\n\t\t\t\t\t.val(qtd_tot);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t\t//Remover itens repetidos\r\n\t\t$('.orc-item').each(function () {\r\n\r\n\t\t\tif (verificarProdRepet($(this))) {\r\n\t\t\t\t$(this).remove();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t}\r\n\r\n\t{ /** Campos calculados */\r\n\r\n        //Calcular ao carregar a página\r\n\t\t$('.orc-item').each(function() {\r\n\r\n            calculaCampos(\r\n                $(this).find('.prod-vlr').val(),\r\n                $(this).find('.prod-qtd').val(),\r\n                $(this).find('.subtotal'),\r\n                $(this).find('.perc-ipi').val(),\r\n                $(this).find('.vlr-ipi'),\r\n                $(this).find('.total')\r\n            );\r\n\r\n\t\t});\r\n\r\n        var timer = null;\r\n\r\n        //Calcular ao digitar o valor\r\n        $('.prod-vlr, .perc-ipi').keyup(function() {\r\n\r\n            var input = $(this);\r\n            var row = input.parent().parent().parent();\r\n\r\n            if(timer) clearTimeout(timer);\r\n\r\n            setTimeout(function() {\r\n\r\n                calculaCampos(\r\n                    $(input).hasClass('prod-vlr') ? $(input).val() : row.find('.prod-vlr').val(),\r\n                    row.find('.prod-qtd').val(),\r\n                    row.find('.subtotal'),\r\n                    $(input).hasClass('perc-ipi') ? $(input).val() : row.find('.perc-ipi').val(),\r\n                    row.find('.vlr-ipi'),\r\n                    row.find('.total')\r\n                );\r\n\r\n            }, 500);\r\n        });\r\n\r\n        //Efetua o cálculo dos campos\r\n        function calculaCampos(valor, qtd, input_subtotal, perc_ipi, input_vlr_ipi, input_total) {\r\n\r\n            //cálculos\r\n\t\t\tvalor \t = formataPadrao(valor);\r\n            valor    = valor ? valor : 0;\r\n            qtd      = formataPadrao(qtd);\r\n            qtd      = qtd ? qtd : 0;\r\n            perc_ipi = formataPadrao(perc_ipi) / 100;\r\n            perc_ipi = perc_ipi ? perc_ipi : 0;\r\n\r\n            var subtotal = valor * qtd;\r\n            var vlr_ipi  = subtotal * perc_ipi;\r\n            var total    = subtotal + vlr_ipi;\r\n\r\n            //formatações nos campos\r\n            subtotal = formataReal( subtotal.toFixed(4) );\r\n            input_subtotal.val( subtotal );\r\n\r\n\t\t\tvlr_ipi = formataReal( vlr_ipi.toFixed(4) );\r\n            input_vlr_ipi.val( vlr_ipi );\r\n\r\n            total = formataReal( total.toFixed(4) );\r\n            input_total.val( total );\r\n\r\n        }\r\n\r\n\t}\r\n\t\r\n\t{ /** Enviar arquivos */\r\n\t\t\r\n\t\t$(':file').change(function() {\r\n\t\t\tenviarArquivo($(this), 'ORCAMENTO');\t//função em 'arquivo.js'\r\n\t\t});\r\n\t\t\r\n\t}\r\n\t\r\n\t{/** Excluir arquivo */\r\n\t\t\r\n\t\t$('.excluir-arquivo').click(function(){\r\n\r\n\t\t\tif( !confirm('Confirma exclusão?') ) return false;\r\n\r\n\t\t\tprod    = $(this);\r\n\t\t\tprod_id = $(prod).parent('.form-group').parent('.item-dinamico').children('.form-group').first().children('input[name=\"_vinculo_arquivo_id[]\"]').val();\r\n\r\n            if (prod_id > 0) {\r\n\t\t\t    $(prod).parent('.form-group').parent('.item-dinamico').children('.form-group').first().children('.marcaexcluiritem').val('1');\r\n            }\r\n\r\n            if( $(prod).parents('.anexo-container').children('.item-dinamico').length > 1 ){\r\n\r\n                $(prod).parent().parent('.item-dinamico').hide();\r\n\r\n            } else {\r\n\r\n\t\t\t\tvar item_din = $(prod).parent().parent('.item-dinamico');\r\n\t\t\t\t\r\n\t\t\t\titem_din.clone(true).appendTo( item_din.parent('.item-dinamico-container') );\r\n\t\t\t\titem_din.find('input').removeAttr('disabled').removeAttr('readonly').val('');\r\n\t\t\t\titem_din.find('input').first().focus();\r\n\t\t\t\titem_din.parent('.item-dinamico-container').children('.item-dinamico').last().find('.CLArquivo').remove();\r\n\t\t\t\titem_din.parent('.item-dinamico-container').children('.item-dinamico').last().hide();\r\n\t\t\t\t\r\n            }\r\n\r\n\t\t});\r\n\t\t\r\n\t}\r\n\t\r\n\t{\r\n\t\t\r\n\t\t/**\r\n\t\t * Verificar o tipo de frete para definir se ele pode ou não receber valor.\r\n\t\t * \r\n\t\t * @param {string} tipo\r\n\t\t * @returns {undefined}\r\n\t\t */\r\n\t\tfunction verificarFrete(tipo) {\r\n\t\t\t\r\n\t\t\t//CIF\r\n\t\t\tif ( tipo === '1' ) {\r\n\t\t\t\t\r\n\t\t\t\t$('.frete-valor')\r\n\t\t\t\t\t.removeAttr('readonly')\r\n\t\t\t\t\t.parent('.input-group')\r\n\t\t\t\t\t.removeClass('readonly');\r\n\t\t\t}\r\n\t\t\t//FOB\r\n\t\t\telse {\r\n\t\t\t\t\r\n\t\t\t\t$('.frete-valor')\r\n\t\t\t\t\t.attr('readonly', true)\r\n\t\t\t\t\t.val('0,0000')\r\n\t\t\t\t\t.parent('.input-group')\r\n\t\t\t\t\t.addClass('readonly');;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tverificarFrete( $('.frete').val() );\r\n\t\t\r\n\t\t$('.frete').change(function() {\r\n\t\t\tverificarFrete( $(this).val() );\t\t\t\r\n\t\t});\r\n\t\t\r\n\t}\r\n\t\r\n})(jQuery);"]}