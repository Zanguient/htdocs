{"version":3,"sources":["_11020-listar.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"_11020-listar.js","sourcesContent":["(function($) {\t\n\t\n\t/**\n\t * Listar Estabelecimentos.\n\t */\n\tfunction listarEstab() {\n\n\t\tfunction ativarConsulta() {\n\n\t\t\texecAjax1(\n\t\t\t\t'POST', \n\t\t\t\t'/_11020/listarSelect',\n\t\t\t\tnull,\n\t\t\t\tfunction(data) {\n\n\t\t\t\t\t$('._estab_cadastrado').each(function() {\n\n\t\t\t\t\t\tfor (var i = 0; data.length > i; i++) {\n\n\t\t\t\t\t\t\t//se o estabelecimento for igual ao cadastrado ou\n\t\t\t\t\t\t\t//a quantidade de estabelecimentos for igual a 1 (ou seja, usuário só possui permissão para 1 estabelecimento)\n\t\t\t\t\t\t\tif ( ($(this).val() === data[i]['ID']) || data.length === 1 ) {\n\n\t\t\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t\t\t.siblings('.estab')\n\t\t\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t\t\t'<option value=\"'+ data[i]['ID'] +'\" data-descricao=\"' + data[i]['NOMEFANTASIA'] + '\" selected>'+ \n\t\t\t\t\t\t\t\t\t\tdata[i]['ID'] +' - '+ data[i]['NOMEFANTASIA'] +\n\t\t\t\t\t\t\t\t\t\t'</option>'\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t;\n                                \n                                var valor = data[i]['ID'];\n                                $(this).parent().find('._input_estab').val(valor).trigger('change');\n                                \n                                var descricao = data[i]['NOMEFANTASIA'];\n                                $(this).parent().find('._input_estab_descricao').val(descricao).trigger('change');\n                                \n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\n\t\t\t\t\t\t\t\t$(this)\n\t\t\t\t\t\t\t\t\t.siblings('.estab')\n\t\t\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t\t\t'<option value=\"'+ data[i]['ID'] +'\" data-descricao=\"' + data[i]['NOMEFANTASIA'] + '\">'+ \n\t\t\t\t\t\t\t\t\t\tdata[i]['ID'] +' - '+ data[i]['NOMEFANTASIA'] +\n\t\t\t\t\t\t\t\t\t\t'</option>'\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\n\t\t}\n\n\n\t\tvar existe = false;\n\n\t\t$('.estab option').each(function() {\n\n\t\t   //verifica se não está preenchido e selecionado.\n\t//\t\t\t\tif( $(this).val() !== '' && $(this).is(':selected') ) {\n\t//\t\t\t\t\texiste = false;\n\t//\t\t\t\t\treturn false;\n\t//\t\t\t\t}\n\n\t\t\tif( $(this).val() !== '' ) {\n\t\t\t\t$(this).remove();\n\t\t\t}\n\n\t\t});\n\n\t\tif(!existe) {\n\t\t\tativarConsulta();\n\t\t}\n\t}\n    \n    $(document).on('change','.estab', function(e) {\n        var valor     = $(this).val();\n        var descricao = $(this).find(':selected').data('descricao');\n        $(this).parent().find('._input_estab'          ).val(valor).trigger('change');\n        $(this).parent().find('._input_estab_descricao').val(descricao).trigger('change');\n    });\n    \n\t\n\t$(function() {\n\t\t\t\n\t\tlistarEstab();\n\t\t\n\t});\n\t\n})(jQuery);\n"]}