{"version":3,"sources":["_11080.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"_11080.js","sourcesContent":["/**\n * _11080 - Criar Relatorio\n */\n\n;(function(angular) {\n\n    var Ctrl = function($scope,$ajax,$timeout) {\n\n        var vm     = this;\n        vm.FILTRO_REL = '';\n        vm.DADOS      = [];\n\n        function init(){\n\t\t\tvar ds = {\n\t\t\t\t\tFILTRO : ''\n\t\t\t\t};\n\n\t\t\t$ajax.post('/_11080/Consultar',ds)\n\t\t\t\t.then(function(response) {\n\t\t\t\t\tvm.DADOS = response;                \n\t\t\t\t}\n\t\t\t);\n        }\n\n        vm.openRel = function(link, id){\n        \twindow.location.href = link + '/' + id;        \t\n        }\n\t\t\n        init();        \n    };\n\n    Ctrl.$inject = [\n\t\t'$scope',\n\t\t'$ajax',\n\t\t'$timeout'\n\t];\n \n    angular\n    .module    ('app' , ['angular.filter','vs-repeat','gc-ajax','gc-form','gc-find','gc-transform'])\n    .controller('Ctrl', Ctrl);\n        \n})(angular);\n\n(function($) {\n  \n    function cad_getSQL(){\n    \tvar sql = $('.relatorio-sql').val()  + '';\n\t\tvar regex = new RegExp('\\\\n', 'g');\n\t\tsql = sql.replace(regex, ' ');\n\n\t\treturn sql;\n    }\n\n\tfunction cad_acharVariavel(sql){\n\n\t\tvar controle = 0;\n\n\t\tvar contador = 0;\n\t\tvar sql_temp = ' '+sql+' ';\n\n\t\tvar encontrado_em_ini = 0;\n\t\tvar encontrado_em_fim = 0;\n\n\t\tvar ret = [];\n\n\t\twhile (controle < 1) {\n\t\t\t\n\t\t\tsql_temp = sql_temp.substring(encontrado_em_ini + encontrado_em_fim,sql_temp.length);\n\n\t\t\tvar encontrado_em_ini = sql_temp.search(\":\");\n\n\t\t\tvar sub_temp = sql_temp.substring(encontrado_em_ini,sql_temp.length);\n\n\t\t\tvar encontrado_em_fimR = [];\n\t\t\tvar obj = [' ',',',')','||']\n\n\t\t\tvar encontrado_em_fim = -1;\n\n\t\t\tfor(var i = 0; i < (obj.length); i++){\n\t\t\t\tvar aa = sub_temp.indexOf(obj[i]);\n\n\t\t\t\tif(aa >=0 ){\n\t\t\t\t\tencontrado_em_fimR.push(aa);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar menor = encontrado_em_fimR.sort(function(a, b){return a-b});\n\t\t\tif(menor.length > 0){\n\t\t\t\tvar encontrado_em_fim = menor[0];\n\t\t\t}\n\n\t\t\tvar variavel = sql_temp.substring(encontrado_em_ini,encontrado_em_fim + encontrado_em_ini);\n\n\t\t\tcontador++;\n\n\n\t\t\tif((encontrado_em_fim == -1) || (encontrado_em_fim == -1)){\n\t\t\t\tcontrole = 1;\n\t\t\t}else{\n\n\t\t\tif((encontrado_em_ini == -1) || (encontrado_em_ini == -1)){\n\t\t\t\tcontrole = 1;\n\t\t\t}else{\n\n\t\t\t\tif(contador == 20){\n\t\t\t\t\tcontrole = 1;\n\t\t\t\t}else{\n\t\t\t\t\tret.push(variavel.trim());\t\n\t\t\t\t}\n\t\t\t}}\n\n\t\t}\n\n\t\treturn ret;\n\n\t}\n\n\tfunction cad_tratarSql(){\n\n\t\tvar sql = cad_getSQL();\n\n\t\tvar variaveis2 = cad_acharVariavel(sql);\n\n\t\tvar variaveis = variaveis2.filter(function(este, i) {\n\t\t    return variaveis2.indexOf(este) == i;\n\t\t});\n\n\n\t\t$('.lista-variaveis').html('');\n\n\t\tfunction listar(item, index) {\n\n\t\t\tvar html = $('.lista-variaveis').html();\n\n\t\t\tvar regex = new RegExp(':', 'g');\n\t\t\tvar classe = item.replace(regex, '');\n\n\t\t\thtml = html + '<div class=\"campos-tabela-conteiner\"><div class=\"campos-tabela\"><div class=\"campo-tabela-desc\">'+classe+'</div>'+\n\t\t\t\t\t\t  ' Descrição: <input type=\"text\" class=\"c-variavel-'+classe+'-desc parametro-imput\" name=\"fname\" data-imput=\"'+classe+'\" value=\"'+classe+'\">'+\n\t\t\t\t\t\t  ' Valor para pré-Visualizar: <input type=\"text\" class=\"c-variavel-'+classe+' parametro-imput\" name=\"fname\" data-imput=\"'+classe+'\" value=\"\">'+\n\t\t\t\t\t\t  ' Tipo: <select style=\"width: 196px;\" class=\"c-variavel-'+classe+'-chec\" required=\"\">'+\n\t\t\t\t\t\t  ' \t<option value=\"1\">01 - string</option>'+\n\t\t\t\t\t\t  ' \t<option value=\"2\">02 - número</option>'+\n\t\t\t\t\t\t  ' \t<option value=\"3\">03 - data</option>'+\n\t\t\t\t\t\t  '</select></div></div>';\n\n\t\t\t$('.lista-variaveis').html(html);\n\t\t\t\n\t\t};\n\n\t\tvariaveis.forEach(listar);\n\n\t\tvar html = $('.lista-variaveis').html();\n\t\t\thtml = html + '<BR><button type=\"button\" class=\"btn btn-success tratar-campos\">'\n\t        html = html + '<span class=\"glyphicon glyphicon-ok\"></span>'\n\t        html = html + 'Listar Campos'\n\t        html = html + '</button>'\n\t\t$('.lista-variaveis').html(html);\t\t\n\n\t}\n\n\tfunction cad_getCamposSql(sql){\n\n        var url_action = urlhost + \"/_11080/cad_getRetornoSql\";\n        \n        var continuar = true;\n\n        console.log(sql);\n        \n        var dados = {\n            'SQL' :sql\n        };\n\n        var type = \"POST\";\n\n        function success(dados){\n\n        \tif(dados.length > 0){\n\n        \t\tvar html = '<div>';\n\n        \t\tvar cont = 0;\n\t            function listar(item, index) {\n\n\t\t\t\t\thtml = html + '<div data-ordem=\"'+cont+'\" class=\"campos-tabela-conteiner\" draggable=\"true\">'+\n\t\t\t\t\t' <input type=\"hidden\" class=\"visivel-'+item+'-ordem ordem-item\" value=\"'+cont+'\">'+\n\t\t\t\t\t' <input type=\"hidden\" class=\"visivel-'+item+'-index ordem-item\" value=\"'+cont+'\">'+\n\t\t\t\t\t' <div class=\"campos-tabela\"><div class=\"campo-tabela-desc\">'+item+'</div>'+\n\t\t\t\t\t' <input type=\"checkbox\" class=\"visivel-'+item+'-chec\" name=\"vehicle\" value=\"0\" checked> Visivel?<br>'+\n\n\t\t\t\t\t'<input type=\"checkbox\" class=\"visivel-'+item+'-agrupar\" name=\"vehicle\" value=\"0\"> Agrupar?<br>'+\n\t\t\t\t\t'<input type=\"checkbox\" class=\"visivel-'+item+'-tagrupar\" name=\"vehicle\" value=\"0\"> Total grupo?<br>'+\n\n\t\t\t\t\t' Totalizar: <select style=\"width: 196px;\" class=\"visivel-'+item+'-total\" required=\"\">'+\n\t\t\t\t\t' \t<option value=\"0\">00 - Não</option>'+\n\t\t\t\t\t' \t<option value=\"1\">01 - Sim</option>'+\n\t\t\t\t\t' \t<option value=\"3\">03 - Título</option>'+\n\t\t\t\t\t' </select>'+\n\n\t\t\t\t\t' Total Tipo: <select style=\"width: 196px;\" class=\"visivel-'+item+'-total-tipo\" required=\"\">'+\n\t\t\t\t\t' \t<option value=\"1\">01 - Soma</option>'+\n\t\t\t\t\t' \t<option value=\"2\">02 - Contador</option>'+\n\t\t\t\t\t' \t<option value=\"3\">03 - Contador>0</option>'+\n\t\t\t\t\t' </select>'+\n\n\t\t\t\t\t' Formula: <input type=\"text\" class=\"visivel-'+item+'-formula\" name=\"fname\" value=\"#'+item+'#\">'+\n\t\t\t\t\t' Prefixo: <input type=\"text\" class=\"visivel-'+item+'-prefix\" name=\"fname\" value=\"\">'+\n\t\t\t\t\t' Sufixo : <input type=\"text\" class=\"visivel-'+item+'-sufix\"  name=\"fname\" value=\"\">'+\n\n\t\t\t\t\t' Descrição: <input type=\"text\" class=\"visivel-'+item+'-desc\" name=\"fname\" value=\"'+item+'\">'+\n\t\t\t\t\t' Cor:<input type=\"color\" style=\"width: 195px;\" class=\"visivel-'+item+'-cor\" name=\"fname\" value=\"'+cores[cont]+'\">'+\n\t\t\t\t\t' Decimais: <input type=\"text\" class=\"visivel-'+item+'-casas\" name=\"fname\" value=\"0\">'+\n\n\t\t\t\t\t' Tam. Min.: <input type=\"text\" class=\"visivel-'+item+'-tam_min\" name=\"fname\" value=\"0\">'+\n\t\t\t\t\t' Link: <input type=\"text\" class=\"visivel-'+item+'-link\" name=\"fname\" value=\"\">'+\n\n\t\t\t\t\t' Tipo: <select style=\"width: 196px;\" class=\"visivel-'+item+'-tipo\" required=\"\">'+\n\t\t\t\t\t' \t<option value=\"1\">01 - string</option>'+\n\t\t\t\t\t' \t<option value=\"2\">02 - número</option>'+\n\t\t\t\t\t' \t<option value=\"3\">03 - data</option>'+\n\t\t\t\t\t' </select><br>'+\n\t\t\t\t\t' </div></div>';\n\n\t\t\t\t\tcont++;\n\t\t\t\t};\n\n\t\t\t\tdados.forEach(listar);\n\n\t\t\t\t$('.lista-campos').html( html + '</div>');\n\n\t\t\t\tvar html = $('.lista-campos').html();\n\t\t\t\thtml = html + '<input type=\"hidden\" class=\"agrupar\" name=\"vehicle\" value=\"0\">'+\n\t\t\t\t\t\t\t  '<input type=\"hidden\" class=\"agrupar-campo\" name=\"fname\" value=\"'+dados[0]+'\">'+\n\t\t\t\t\t\t\t  '<input type=\"hidden\" class=\"visivel-agrup-cor\" name=\"fname\" value=\"#00CED1\"></div>';\n\n\t\t\t\t$('.lista-campos').html(html);\n\n\t\t\t\tvar html = $('.lista-campos').html();\n\t\t\t\thtml = html + '<BR><button type=\"button\" class=\"btn btn-success tratar-resultado\" >'\n\t\t        html = html + '<span class=\"glyphicon glyphicon-ok\"></span>'\n\t\t        html = html + 'Pré-Visualizar'\n\t\t        html = html + '</button>'\n\t\t\t\t$('.lista-campos').html(html);\n\n\n\t\t\t\tvar cols = document.querySelectorAll('.campos-tabela-conteiner');\n\t\t\t\t[].forEach.call(cols, function(col) {\n\t\t\t\t  col.addEventListener('dragstart', handleDragStart, false);\n\t\t\t\t  col.addEventListener('dragenter', handleDragEnter, false)\n\t\t\t\t  col.addEventListener('dragover', handleDragOver, false);\n\t\t\t\t  col.addEventListener('dragleave', handleDragLeave, false);\n\t\t\t\t  col.addEventListener('drop', handleDrop, false);\n\t\t\t\t  col.addEventListener('dragend', handleDragEnd, false);\n\t\t\t\t});\n\n\t\t\t\tvar dragSrcEl = null;\n\t\t\t\tvar oldDeag = null;\n\n\t\t\t\tfunction handleDragEnd(e) {\n\t\t\t\t  // this/e.target is the source node.\n\n\t\t\t\t  [].forEach.call(cols, function (col) {\n\t\t\t\t    col.classList.remove('over');\n\t\t\t\t  });\n\t\t\t\t}\n\n\t\t\t\tfunction handleDragStart(e) {\n\t\t\t\t  // Target (this) element is the source node.\n\t\t\t\t  \n\t\t\t\t  this.style.opacity = '0.4';\n\t\t\t\t  oldDeag = this;\n\n\t\t\t\t  dragSrcEl = this;\n\n\t\t\t\t  e.dataTransfer.effectAllowed = 'move';\n\t\t\t\t  e.dataTransfer.setData('text/html', this.innerHTML);\n\t\t\t\t}\n\n\t\t\t\tfunction handleDrop(e) {\n\t\t\t\t  // this/e.target is current target element.\n\n\t\t\t\t  if (e.stopPropagation) {\n\t\t\t\t    e.stopPropagation(); // Stops some browsers from redirecting.\n\t\t\t\t  }\n\n\t\t\t\t  // Don't do anything if dropping the same column we're dragging.\n\t\t\t\t  if (dragSrcEl != this) {\n\n\t\t\t\t  \tvar ini = $(this).data('ordem');\n\t\t\t\t  \tvar fim = $(dragSrcEl).data('ordem');\n\n\t\t\t\t  \t$(this).data('',fim);\n\t\t\t\t  \t$(dragSrcEl).data('',ini);\n\n\t\t\t\t    // Set the source column's HTML to the HTML of the columnwe dropped on.\n\t\t\t\t    dragSrcEl.innerHTML = this.innerHTML;\n\t\t\t\t    this.innerHTML = e.dataTransfer.getData('text/html');\n\t\t\t\t  }\n\n\t\t\t\t  oldDeag.style.opacity = '1';\n\n\t\t\t\t  return false;\n\t\t\t\t}\n\n\n\t\t\t\tfunction handleDragOver(e) {\n\t\t\t\t  if (e.preventDefault) {\n\t\t\t\t    e.preventDefault(); // Necessary. Allows us to drop.\n\t\t\t\t  }\n\n\t\t\t\t  e.dataTransfer.dropEffect = 'move';  // See the section on the DataTransfer object.\n\n\t\t\t\t  return false;\n\t\t\t\t}\n\n\t\t\t\tfunction handleDragEnter(e) {\n\t\t\t\t  // this / e.target is the current hover target.\n\t\t\t\t  this.classList.add('over');\n\t\t\t\t}\n\n\t\t\t\tfunction handleDragLeave(e) {\n\t\t\t\t  this.classList.remove('over');  // this / e.target is previous target element.\n\t\t\t\t}\n\n\t\t\t}else{\n\t\t\t\tshowAlert('Sem dados de retorno!,<br>altere o valor dos parametros!');\n\t\t\t}\n\t    }\n\n        function erro(data){\n            showErro(data);\n        }\n\n        execAjax1(type,url_action,dados,success,erro,false);\n    }\n\n    function cad_getRetorno(sql){\n\n        var url_action = urlhost + \"/_11080/cad_getRetorno\";\n        \n        var continuar = true;\n        \n        var dados = {\n            'SQL' :sql\n        };\n\n        var type = \"POST\";\n\n        function success(dados){\n\t    }\n\n        function erro(data){\n            showErro(data);\n        }\n\n        execAjax1(type,url_action,dados,success,erro,false);\n    }\n\n    function cad_getRelatorios(filtro){\n\n        var url_action = urlhost + \"/_11080/cad_getRelatorios\";\n        \n        var continuar = true;\n        \n        var dados = {\n            'filtro' : filtro\n        };\n\n        var type = \"POST\";\n\n        function success(dados){\n        \t$('.lista-obj-11080').html(dados);\n\t    }\n\n        function erro(data){\n            showErro(data);\n        }\n\n        execAjax1(type,url_action,dados,success,erro,false);\n    }\n\n\n   // $(document).on('click','.btn-filtro-obj', function(e) {\n    \t//var filtro = $(\"input[name='filtro_obj']\").val();\n        //cad_getRelatorios(filtro);\n    //});\n\n    //$(document).on('keypress','input[name=\\'filtro_obj\\']', function(e) {\n    \t//if(e.which == 13) {\n\t    \t//var filtro = $(\"input[name='filtro_obj']\").val();\n\t        //cad_getRelatorios(filtro);\n\t    //}\n    //});\n\n\n    //$(document).on('keyup','input[name=\\'filtro_obj\\']', function(e) {\n    \t//var filtro = $(\"input[name='filtro_obj']\").val();\n\n    \t//if(filtro == '') {\n\t        //cad_getRelatorios(filtro);\n\t    //}\n    //});\n    \n    \n    $(document).on('click','.tratar-sql', function(e) {\n        cad_tratarSql();  \n    });\n\n    $(document).on('click','.tratar-campos', function(e) {\n    \tvar validar = 0;\n\n        var sql = cad_getSQL();\n\n\t\tvar variaveis2 = cad_acharVariavel(sql);\n\n\t\tvar variaveis = variaveis2.filter(function(este, i) {\n\t\t    return variaveis2.indexOf(este) == i;\n\t\t});\n\n\t\tvar sql_tratado = sql;\n\n\t\t$('.lista-campos').html('');\n\n\t\tfunction listar(item, index) {\n\n\t\t\tvar regex = new RegExp(':', 'g');\n\t\t\tvar classe = item.replace(regex, '');\n\n\t\t\tvar valor = $('.c-variavel-'+classe).val();\n\t\t\tvar chec = $('.c-variavel-'+classe+'-chec').val();\n\n\t\t\tif(chec == 0){\n\t\t\t\tvalidar = 1;\n\t\t\t}\n\n\t\t\tvar regex = new RegExp(item, 'g');\n\n\t\t\tif((chec == 1) || (chec == 3)){\n\t\t\t\tsql_tratado = sql_tratado.replace(regex, \"'\"+valor+\"'\");\n\t\t\t}else{\n\t\t\t\tsql_tratado = sql_tratado.replace(regex, valor);\t\n\t\t\t}\n\n\t\t\tif(valor == ''){\n\t\t\t\tvalidar = 1;\t\n\t\t\t}\n\n\t\t};\n\n\t\tvariaveis.forEach(listar);\n\n\t\t$('.lista-campos').html(sql_tratado);\n\n\t\tif(validar == 0){\n\t\t\tcad_getCamposSql(sql_tratado);\n\t\t}else{\n\t\t\tshowAlert('Há parametros sem valor para \"TESTE DE SQL\" ou tipo definido');\n\t\t}\n\n    });\n\n    function preGravar(){\n\n\t\tvar var_imputis = [];\n\t\tvar var_campos  = [];\n\t\tvar var_agrup \t= [];\n\t\tvar var_info  \t= [];\n\n\t\tvar agrupar_chk = $('.agrupar:checked').length;\n    \tvar agrupar_tag = $('.agrupar-campo').val();\n    \tvar cor_agrup   = $('.visivel-agrup-cor').val();\n\n    \tvar Nome \t\t= $('.relatorio-nome').val();\n    \tvar Filtro \t\t= $('.relatorio-filtro').val();\n    \tvar Tipo   \t\t= $('.relatorio-tipo').val();\n    \tvar Template\t= $('.relatorio-template').val();\n    \tvar versao  \t= $('.relatorio-versao').val();\n    \tvar fontew  \t= $('.relatorio-fonteweb').val();\n    \tvar fontex  \t= $('.relatorio-fonteexp').val();\n    \tvar totalizar \t= $('.relatorio-totalizador').val();\n    \tvar grupo \t\t= $('.relatorio-grupo').val();\n    \tvar zebrado\t    = $('.relatorio-zebrado:checked').length;\n    \tvar paisagem    = $('.relatorio-paisagem:checked').length;\n\n    \tvar gravar = 0;\n\n    \tif(Nome.length \t\t== 0){ showAlert('Nome é obrigatório');\t\t\t\t\t gravar = 1; $('.relatorio-nome').focus();}else{\n    \tif(Filtro.length\t== 0){ showAlert('Filtro é obrigatório');\t\t\t\t gravar = 1; $('.relatorio-filtro').focus();}else{\n    \tif(Tipo.length\t\t== 0){ showAlert('Tipo é obrigatório');\t\t\t\t\t gravar = 1; $('.relatorio-tipo').focus();}else{\n    \tif(Template.length\t== 0){ showAlert('Template é obrigatório');\t  \t\t\t gravar = 1; $('.relatorio-template').focus();}else{\n    \tif(versao.length\t== 0){ showAlert('Versao é obrigatório');\t \t\t\t gravar = 1; $('.relatorio-versao').focus();}else{\n    \tif(fontew.length\t== 0){ showAlert('Fonte Web é obrigatório');\t\t\t gravar = 1; $('.relatorio-fonteweb').focus();}else{\n    \tif(fontex.length\t== 0){ showAlert('Fonte para exportação é obrigatório'); gravar = 1; $('.relatorio-fonteexp').focus();}else{\n    \tif(totalizar.length\t== 0){ showAlert('totalizador é obrigatório');\t\t\t gravar = 1; $('.relatorio-totalizador').focus();}else{\n    \tif(grupo.length\t\t== 0){ showAlert('Menu Grupo é obrigatório');\t\t\t gravar = 1; $('.relatorio-grupo').focus();}\t\t\n    \t}}}}}}}}\n\n    \tif(gravar == 0){\n\n    \t\tvar sql2 = cad_getSQL();\n\n    \t\tvar sql = $('.relatorio-sql').val()  + ' ';\n    \t\tvar variaveis2 = cad_acharVariavel(sql2);\n\n\t\t\tvar variaveis = variaveis2.filter(function(este, i) {\n\t\t\t    return variaveis2.indexOf(este) == i;\n\t\t\t});\n\n    \t\tvar_agrup.push(agrupar_tag,agrupar_chk,cor_agrup);\n\t    \tvar_info.push(Nome,Filtro,Tipo,Template,versao,zebrado,sql,fontew,fontex,totalizar,grupo,paisagem);\n\n\t\t\tvar sql_tratado = sql;\n\n\t\t\tfunction tratar(item, index) {\n\n\t\t\t\tvar regex = new RegExp(':', 'g');\n\t\t\t\tvar classe = item.replace(regex, '');\n\n\t\t\t\tvar valor = $('.c-variavel-'+classe).val();\n\t\t\t\tvar regex = new RegExp(item, 'g');\n\n\t\t\t\tvar valor = $('.c-variavel-'+classe).val();\n\t\t\t\tvar desc  = $('.c-variavel-'+classe+'-desc').val();\n\t\t\t\tvar chec = $('.c-variavel-'+classe+'-chec').val();\n\n\t\t\t\tvar_imputis.push([classe,desc,chec]);\n\n\t\t\t\tvar regex = new RegExp(item, 'g');\n\n\t\t\t\tif((chec == 1) || (chec == 3)){\n\t\t\t\t\tsql_tratado = sql_tratado.replace(regex, \"'\"+valor+\"'\");\n\t\t\t\t}else{\n\t\t\t\t\tsql_tratado = sql_tratado.replace(regex, valor);\t\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t\tvariaveis.forEach(tratar);\n\n\t\t\tvar url_action = urlhost + \"/_11080/getRetornoSql\";\n\t\t    \n\t\t    var continuar = true;\n\t\t    \n\t\t    var dados = {\n\t\t        'SQL' :sql_tratado\n\t\t    };\n\n\t\t    var type = \"POST\";\n\n\t\t    function success(dados){\n\n\t\t    \tvar campos_viziveis = [];\n\t\t    \tvar cont = 0;\n\n\t\t        function listar(item, index) {\n\n\t\t\t\t\tvar campo   = $('.visivel-'+item+'-chec:checked'    ).length;\n\t\t\t\t\tvar agrup   = $('.visivel-'+item+'-agrupar:checked' ).length;\n\t\t\t\t\tvar tagrup  = $('.visivel-'+item+'-tagrupar:checked').length;\n\t\t\t\t\tvar cor     = $('.visivel-'+item+'-cor'       ).val();\n\t\t\t\t\tvar desc    = $('.visivel-'+item+'-desc'      ).val();\n\t\t\t\t\tvar clss    = $('.visivel-'+item+'-tipo'      ).val();\n\t\t\t\t\tvar tota    = $('.visivel-'+item+'-total'     ).val();\n\t\t\t\t\tvar casa    = $('.visivel-'+item+'-casas'     ).val();\n\t\t\t\t\tvar ordem   = $('.visivel-'+item+'-casas'     ).parent().parent().data('ordem');\n\t\t\t\t\tvar index   = $('.visivel-'+item+'-index'     ).val();\n\t\t\t\t\tvar ttipo   = $('.visivel-'+item+'-total-tipo').val();\n\t\t\t\t\tvar formula = $('.visivel-'+item+'-formula'   ).val();\n\t\t\t\t\tvar prefix  = $('.visivel-'+item+'-prefix'    ).val();\n\t\t\t\t\tvar sufix   = $('.visivel-'+item+'-sufix'     ).val();\n\t\t\t\t\tvar tam_min = $('.visivel-'+item+'-tam_min'   ).val();\n\t\t\t\t\tvar link    = $('.visivel-'+item+'-link'      ).val();\n\t\t\t\t\t\n\t\t\t\t\tvar_campos.push([item,campo,cont,cor,desc,clss,tota,casa,ordem,index,agrup,tagrup,ttipo,formula,prefix,sufix,tam_min,link]);\n\n\t\t\t\t\tif(campo == 1){\n\t\t\t\t\t\tcampos_viziveis.push([item,campo,cont,cor,desc,clss,tota,casa,ordem,index,agrup,tagrup,ttipo,formula,prefix,sufix,tam_min,link]);\n\t\t\t\t\t}\n\n\t\t\t\t\tcont++;\n\t\t\t\t\n\t\t\t\t};\n\n\t\t\t\tdados.forEach(listar);\n\n\t\t\t\tvar dado2 = {\n\t\t\t\t\t'grupo' \t: var_agrup,\n\t\t\t\t\t'info' \t\t: var_info,\n\t\t\t\t\t'campos' \t: var_campos,\n\t\t\t\t\t'imputis' \t: var_imputis\n\t\t\t\t}\n\n\t\t\t\t\t///////////////////////////////////////////////////////////////\n\t\t\t\t\tvar url_action = urlhost + \"/_11080/Gravar\";\n\n\t\t\t\t\tvar dados = {\n\t\t\t            'SQL' :sql_tratado\n\t\t\t        };\n\n\t\t\t        var type = \"POST\";\n\n\t\t\t        function success2(dados){\n\t\t\t        \tshowSuccess('Gravado com sucesso');\n\t\t\t        \tsetTimeout(function(){\n\t\t\t        \t\t window.location.assign(urlhost + \"/_11080/\"+dados)\n\t\t\t        \t},1500);\n\t\t\t\t    }\n\n\t\t\t        function erro2(data){\n\t\t\t            showErro(data);\n\t\t\t        }\n\n\t\t\t        execAjax1(type,url_action,dado2,success2,erro2,false);\n\t\t\t        ///////////////////////////////////////////////////////////////\n\n\t\t    }\n\n\t        function erro(data){\n\t            showErro(data);\n\t        }\n\n\t        execAjax1(type,url_action,dados,success,erro,false);\n    \t}\n    }\n\n    $(document).on('click','.tratar-resultado', function(e) {\n\n    \tvar sql = cad_getSQL();\n\n    \tvar variaveis2 = cad_acharVariavel(sql);\n\n\t\tvar variaveis = variaveis2.filter(function(este, i) {\n\t\t    return variaveis2.indexOf(este) == i;\n\t\t});\n\n    \t$('.imputs-relatorio').html('');\n\n    \tvar htm_imputs  = '';\n\n    \thtm_imputs += '<input type=\"hidden\" name=\"relatorio-SQL\" clas=\"relatorio-SQL\"value=\"'+sql+'\">';\n    \thtm_imputs += '<input type=\"hidden\" name=\"user-relatorio\"  class=\"user-relatorio\"  value=\"USER TESTE\">';\n\n    \tvar nome \t\t= $('.relatorio-nome').val();\n    \tvar filtro \t\t= $('.relatorio-filtro').val();\n    \tvar tipo \t\t= $('.relatorio-tipo').val();\n    \tvar grupo \t\t= $('.relatorio-grupo').val();\n    \tvar template \t= $('.relatorio-template').val();\n    \tvar versao \t\t= $('.relatorio-versao').val();\n    \tvar fonteweb \t= $('.relatorio-fonteweb').val();\n    \tvar fonteexp \t= $('.relatorio-fonteexp').val();\n    \tvar totalizador = $('.relatorio-totalizador').val();\n    \tvar zebrado \t= $('.relatorio-zebrado').val();\n    \tvar paisagem \t= $('.relatorio-paisagem').val();\n\n    \thtm_imputs += '<input type=\"hidden\" name=\"titulo-relatorio\"        class=\"titulo-relatorio\"        value=\"TELATORIO TESTE\">';\n        htm_imputs += '<input type=\"hidden\" name=\"relatorio-ID\"            class=\"relatorio-ID\"            value=\"0\">';\n        htm_imputs += '<input type=\"hidden\" name=\"relatorio-NOME\"          class=\"relatorio-NOME\"          value=\"'+nome+'\">';\n        htm_imputs += '<input type=\"hidden\" name=\"relatorio-DESCRICAO\"     class=\"relatorio-DESCRICAO\"     value=\"TESTE\">';\n        htm_imputs += '<input type=\"hidden\" name=\"relatorio-TIPO\"          class=\"relatorio-TIPO\"          value=\"'+tipo+'\">';\n        htm_imputs += '<input type=\"hidden\" name=\"relatorio-TEMPLATE_ID \"  class=\"relatorio-TEMPLATE_ID \"  value=\"'+template+'\">';\n        htm_imputs += '<input type=\"hidden\" name=\"relatorio-STATUS \"       class=\"relatorio-STATUS \"       value=\"1\">';\n\n        htm_imputs += '<input type=\"hidden\" name=\"filtro-relatorio\"        class=\"filtro-relatorio\"        value=\"'+filtro+'\">';\n        htm_imputs += '<input type=\"hidden\" name=\"relatorio-relatorio_id\"  class=\"relatorio-relatorio_id\"  value=\"0\">';\n        htm_imputs += '<input type=\"hidden\" name=\"relatorio-filtro\"        class=\"relatorio-filtro\"        value=\"'+filtro+'\">';\n        htm_imputs += '<input type=\"hidden\" name=\"relatorio-agrupamento\"   class=\"relatorio-agrupamento\"   value=\"0\">';\n        htm_imputs += '<input type=\"hidden\" name=\"relatorio-agrupar \"      class=\"relatorio-agrupar \"      value=\"0\">';\n        htm_imputs += '<input type=\"hidden\" name=\"relatorio-zebrado \"      class=\"relatorio-zebrado \"      value=\"'+zebrado+'\">';\n        htm_imputs += '<input type=\"hidden\" name=\"relatorio-versao \"       class=\"relatorio-versao \"       value=\"'+versao+'\">';\n        htm_imputs += '<input type=\"hidden\" name=\"relatorio-cor \"          class=\"relatorio-cor \"          value=\"0\">';\n        htm_imputs += '<input type=\"hidden\" name=\"relatorio-fonte \"        class=\"relatorio-fonte \"        value=\"'+fonteweb+'\">';\n        htm_imputs += '<input type=\"hidden\" name=\"relatorio-fonteHTML \"    class=\"relatorio-fonteHTML \"    value=\"'+fonteweb+'\">';\n        htm_imputs += '<input type=\"hidden\" name=\"relatorio-totalizador \"  class=\"relatorio-totalizador \"  value=\"'+totalizador+'\">';\n        htm_imputs += '<input type=\"hidden\" name=\"relatorio-paisagem \"     class=\"relatorio-paisagem \"     value=\"'+paisagem+'\">';\n\n        var sql_tratado = sql;\n\n\t\tvariaveis.forEach(function(item, index){\n\n\t\t\tvar regex = new RegExp(':', 'g');\n\t\t\tvar classe = item.replace(regex, '');\n\n\t\t\tvar valor = $('.c-variavel-'+classe).val();\n\t\t\tvar regex = new RegExp(item, 'g');\n\n\t\t\tvar valor = $('.c-variavel-'+classe).val();\n\t\t\tvar desc = $('.c-variavel-'+classe+'-desc').val();\n\t\t\tvar chec = $('.c-variavel-'+classe+'-chec').val();\n\n\t\t\tvar regex = new RegExp(item, 'g');\n\n\t\t\tif((chec == 1) || (chec == 3)){\n\t\t\t\tsql_tratado = sql_tratado.replace(regex, \"'\"+valor+\"'\");\n\t\t\t}else{\n\t\t\t\tsql_tratado = sql_tratado.replace(regex, valor);\t\n\t\t\t}\n\n\t\t\thtm_imputs+='<input type=\"hidden\"'+\n\t\t\t\t        '\tname=\"relatorio-IMPUTS\"'+\n\t\t\t\t        '\tclass=\"relatorio-IMPUTS relatorio-IMPUTS-VALOR-'+classe+'\"'+\n\t\t\t\t        '\tdata-PARAMETRO=\"'+classe+'\"'+\n\t\t\t\t        '\tdata-DESCRICAO=\"'+desc+'\"'+\n\t\t\t\t        '\tdata-TIPO=\"'+chec+'\"'+\n\t\t\t\t        '>';\n\n\t\t});\n\n    \tvar url_action = urlhost + \"/_11080/getRetornoSql\";\n        \n        var continuar = true;\n\n        console.log(sql_tratado);\n        \n        var dados = {\n            'SQL' :sql_tratado\n        };\n\n        var type = \"POST\";\n\n        function success(dados){\n\n        \tvar campos_agrup\t= [];\n        \tvar campos_viziveis = [];\n        \tvar cont = 0;\n\n            function listar(item, index) {\n\n            \tvar campo   = $('.visivel-'+item+'-chec:checked' ).length;\n\t\t\t\tvar agrup   = $('.visivel-'+item+'-agrupar:checked' ).length;\n\t\t\t\tvar tagrup  = $('.visivel-'+item+'-tagrupar:checked' ).length;\n\t\t\t\tvar cor     = $('.visivel-'+item+'-cor'       ).val();\n\t\t\t\tvar desc    = $('.visivel-'+item+'-desc'      ).val();\n\t\t\t\tvar clss    = $('.visivel-'+item+'-tipo'      ).val();\n\t\t\t\tvar tota    = $('.visivel-'+item+'-total'     ).val();\n\t\t\t\tvar casa    = $('.visivel-'+item+'-casas'     ).val();\n\t\t\t\tvar ordem   = $('.visivel-'+item+'-casas'     ).parent().parent().data('ordem');\n\t\t\t\tvar index   = $('.visivel-'+item+'-index'     ).val();\n\t\t\t\tvar ttipo   = $('.visivel-'+item+'-total-tipo').val();\n\t\t\t\tvar formula = $('.visivel-'+item+'-formula'   ).val();\n\t\t\t\tvar prefix  = $('.visivel-'+item+'-prefix'    ).val();\n\t\t\t\tvar sufix   = $('.visivel-'+item+'-sufix'     ).val();\n\t\t\t\tvar link    = $('.visivel-'+item+'-link'      ).val();\n\t\t\t\tvar tamanho = $('.visivel-'+item+'-tam_min'   ).val();\n\n            \thtm_imputs+='<input type=\"hidden\"'+\n\t\t\t\t\t\t    '    name                =\"relatorio-CAMPOS\"'+\n\t\t\t\t\t\t    '    class               =\"relatorio-CAMPOS relatorio-CAMPOS-'+item+'\"'+\n\t\t\t\t\t\t    '    data-PERCENTUAL     =\"'+0+'\"'+\n\t\t\t\t\t\t    '    data-DESCRICAO      =\"'+desc+'\"'+\n\t\t\t\t\t\t    '    data-CLASSE         =\"'+clss+'\"'+\n\t\t\t\t\t\t    '    data-CAMPO          =\"'+campo+'\"'+\n\t\t\t\t\t\t    '    data-ORDEM          =\"'+ordem+'\"'+\n\t\t\t\t\t\t    '    data-MASCARA        =\"'+casa+'\"'+\n\t\t\t\t\t\t    '    data-VISIVEL        =\"'+campo+'\"'+\n\t\t\t\t\t\t    '    data-COR            =\"'+cor+'\"'+\n\t\t\t\t\t\t    '    data-TOTALIZAR      =\"'+tota+'\"'+\n\t\t\t\t\t\t    '    data-CASAS          =\"'+casa+'\"'+\n\t\t\t\t\t\t    '    data-INDEX          =\"'+index+'\"'+\n\t\t\t\t\t\t    '    data-AGRUP          =\"'+agrup+'\"'+\n\t\t\t\t\t\t    '    data-TAGRUP         =\"'+tagrup+'\"'+\n\t\t\t\t\t\t    '    data-TOTAL_TIPO     =\"'+ttipo+'\"'+\n\t\t\t\t\t\t    '    data-FORMULA        =\"'+formula+'\"'+\n\t\t\t\t\t\t    '    data-PREFIX         =\"'+prefix+'\"'+\n\t\t\t\t\t\t    '    data-SUFIX          =\"'+sufix+'\"'+\n\t\t\t\t\t\t    '    data-TAMANHO        =\"'+tamanho+'\"'+\n\t\t\t\t\t\t    '    data-LINK           =\"'+link+'\"'+\n\t\t\t\t\t        '>';\n\n\t\t\t\tif(agrup == 1){\n\t\t\t\t\tcampos_agrup.push([item,cont,cor,desc,clss,tota,casa,ordem,index,agrup,tagrup,ttipo,formula,prefix,sufix]);\n\t\t\t\t}\n\n\t\t\t\tif(campo == 1){\n\t\t\t\t\tcampos_viziveis.push([item,cont,cor,desc,clss,tota,casa,ordem,index,agrup,tagrup,ttipo,formula,prefix,sufix]);\n\t\t\t\t}\n\n\t\t\t\tcont++;\n\t\t\t\t\n\t\t\t};\n\n\t\t\tdados.forEach(listar);\n\n\t\t\t$('.imputs-relatorio').html('');\n\n\t\t\tvar url_action = urlhost + \"/_11080/getRetorno\";\n\n\t\t\tconsole.log(sql_tratado);\n\n\t\t\tvar dados = {\n\t            'SQL' :sql_tratado\n\t        };\n\n\t        var type = \"POST\";\n\n\t        function success2(dados){\n\t        \tcampos_viziveis = campos_viziveis.sort(function(a, b){\n\t        \t\treturn a[7]-b[7]\n\t        \t});\n\n\t        \tmostrarResultado(dados,campos_viziveis,campos_agrup);\n\t\t    }\n\n\t        function erro2(data){\n\t            showErro(data);\n\t        }\n\n\t        $('.imputs-relatorio').html(htm_imputs);\n\n\t        execAjax1(type,url_action,dados,success2,erro2,false);\n\n\t    }\n\n        function erro(data){\n            showErro(data);\n        }\n\n        execAjax1(type,url_action,dados,success,erro,false);  \n    });\n\n    $(document).on('click','.tratar-resultado2', function(e) {\n\n    \tvar sql = cad_getSQL();\n\n\t\t\tvar variaveis2 = cad_acharVariavel(sql);\n\n\t\t\tvar variaveis = variaveis2.filter(function(este, i) {\n\t\t\t    return variaveis2.indexOf(este) == i;\n\t\t\t});\n\n\t\t\tvar sql_tratado = sql;\n\n\t\t\tfunction tratar(item, index) {\n\n\t\t\t\tvar regex = new RegExp(':', 'g');\n\t\t\t\tvar classe = item.replace(regex, '');\n\n\t\t\t\tvar valor = $('.c-variavel-'+classe).val();\n\t\t\t\tvar regex = new RegExp(item, 'g');\n\n\t\t\t\tvar valor = $('.c-variavel-'+classe).val();\n\t\t\t\tvar chec = $('.c-variavel-'+classe+'-chec').val();\n\n\t\t\t\tvar regex = new RegExp(item, 'g');\n\n\t\t\t\tif((chec == 1) || (chec == 3)){\n\t\t\t\t\tsql_tratado = sql_tratado.replace(regex, \"'\"+valor+\"'\");\n\t\t\t\t}else{\n\t\t\t\t\tsql_tratado = sql_tratado.replace(regex, valor);\t\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t\tvariaveis.forEach(tratar);\n\n    \tvar url_action = urlhost + \"/_11080/getRetornoSql\";\n        \n        var continuar = true;\n        \n        var dados = {\n            'SQL' :sql_tratado\n        };\n\n        var type = \"POST\";\n\n        function success(dados){\n\n        \tvar campos_agrup\t= [];\n        \tvar campos_viziveis = [];\n        \tvar cont = 0;\n\n            function listar(item, index) {\n\n\t\t\t\tvar campo   = $('.visivel-'+item+'-chec:checked' ).length;\n\t\t\t\tvar agrup   = $('.visivel-'+item+'-agrupar:checked' ).length;\n\t\t\t\tvar tagrup  = $('.visivel-'+item+'-tagrupar:checked' ).length;\n\t\t\t\tvar cor     = $('.visivel-'+item+'-cor'       ).val();\n\t\t\t\tvar desc    = $('.visivel-'+item+'-desc'      ).val();\n\t\t\t\tvar clss    = $('.visivel-'+item+'-tipo'      ).val();\n\t\t\t\tvar tota    = $('.visivel-'+item+'-total'     ).val();\n\t\t\t\tvar casa    = $('.visivel-'+item+'-casas'     ).val();\n\t\t\t\tvar ordem   = $('.visivel-'+item+'-casas'     ).parent().parent().data('ordem');\n\t\t\t\tvar index   = $('.visivel-'+item+'-index'     ).val();\n\t\t\t\tvar ttipo   = $('.visivel-'+item+'-total-tipo').val();\n\t\t\t\tvar formula = $('.visivel-'+item+'-formula'   ).val();\n\t\t\t\tvar prefix  = $('.visivel-'+item+'-prefix'    ).val();\n\t\t\t\tvar sufix   = $('.visivel-'+item+'-sufix'     ).val();\n\n\t\t\t\tif(agrup == 1){\n\t\t\t\t\tcampos_agrup.push([item,cont,cor,desc,clss,tota,casa,ordem,index,agrup,tagrup,ttipo,formula,prefix,sufix]);\n\t\t\t\t}\n\n\t\t\t\tif(campo == 1){\n\t\t\t\t\tcampos_viziveis.push([item,cont,cor,desc,clss,tota,casa,ordem,index,agrup,tagrup,ttipo,formula,prefix,sufix]);\n\t\t\t\t}\n\n\t\t\t\tcont++;\n\t\t\t\t\n\t\t\t};\n\n\t\t\tdados.forEach(listar);\n\n\t\t\t\tvar url_action = urlhost + \"/_11080/getRetorno\";\n\n\t\t\t\tvar dados = {\n\t\t            'SQL' :sql_tratado\n\t\t        };\n\n\t\t        var type = \"POST\";\n\n\t\t        function success2(dados){\n\t\t        \t//mostrarResultado(dados,campos_viziveis);\n\n\t\t        \tcampos_viziveis = campos_viziveis.sort(function(a, b){\n\t\t        \t\t//console.log(a);\n\t\t        \t\t//console.log(b);\n\t\t        \t\treturn a[7]-b[7]\n\t\t        \t});\n\n\n\t\t        \tmostrarResultado2(dados,campos_viziveis,campos_agrup);\n\t\t\t    }\n\n\t\t        function erro2(data){\n\t\t            showErro(data);\n\t\t        }\n\n\t\t        execAjax1(type,url_action,dados,success2,erro2,false);\n\n\t    }\n\n        function erro(data){\n            showErro(data);\n        }\n\n        execAjax1(type,url_action,dados,success,erro,false);  \n    });\n\n    $(document).on('click','.relatorio-tratar-sql', function(e) {\n    \tcad_tratarSql();\n    });\n\n    $(document).on('click','.gravar-rel-personalizado', function(e) {\n    \tpreGravar();\n    });\n\n    $(document).on('click','.itemexcluir', function(e) {\n\n    \tvar id = $(this).data('id');\n\n    \taddConfirme('Excluir registro','Deseja realmente excluir este relatório?',\n    \t\t[obtn_sim,obtn_nao],\n            [\n               {ret:1,func:function(){\n               \t\tvar url_action = urlhost + \"/_11080/Excluir\";\n\n\t\t\t\t\tvar dados = {\n\t\t\t            'id' :id\n\t\t\t        };\n\n\t\t\t        var type = \"POST\";\n\n\t\t\t        function success2(dados){\n\t\t\t        \tshowSuccess('Excluido com sucesso!');\n\t\t\t        \tsetTimeout(function(){\n\t\t\t        \t\t window.location.assign(urlhost + \"/_11080\")\n\t\t\t        \t},1500);\n\t\t\t\t    }\n\n\t\t\t        function erro2(data){\n\t\t\t            showErro(data);\n\t\t\t        }\n\n\t\t\t        execAjax1(type,url_action,dados,success2,erro2,false);\n               }},\n               {ret:2,func:function(){\n\n               }}\n            ]     \n        );\n\t});\n\n    \n\n})(jQuery);\n\n"]}