{"version":3,"sources":["_23038.app.js","_23038.controller.js","_23038.factory.index.js","_23038.factory.create.js","_23038.factory.create.ccusto.js","_23038.factory.create.indicador.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"_23038.js","sourcesContent":["/**\n * App do objeto _23038 - Registro de indicadores por centro de custo.\n */\n\n'use strict';\n\nangular\n\t.module('app', [\n\t\t'vs-repeat', \n        'gc-find',\n\t\t'gc-ajax',\n\t\t'gc-transform',\n\t\t'gc-form'\n\t])\n;","/**\r\n * Controller do objeto _23038 - Registro de indicadores por centro de custo\r\n */\r\n\r\nangular\r\n\t.module('app')\r\n\t.value('gScope', {})\r\n\t.controller('Ctrl', Ctrl);\r\n\r\nCtrl.$inject = [\r\n\t'$scope',\r\n\t'gScope',\r\n\t'Historico',\r\n\t'Index',\r\n\t'Create',\r\n\t'CreateCCusto',\r\n\t'CreateIndicador'\r\n];\r\n\r\nfunction Ctrl( \r\n\t$scope,\r\n\tgScope,\r\n\tHistorico,\r\n\tIndex,\r\n\tCreate,\r\n\tCreateCCusto,\r\n\tCreateIndicador\r\n) {\r\n\r\n\t// Public instance.\r\n\tgScope.Ctrl = this;\r\n\r\n\t// Local instance.\r\n\tvar $ctrl = this;\r\n\r\n\t// Global variables.\r\n\t$ctrl.tipoTela      = 'listar';\r\n\t$ctrl.permissaoMenu = {};\r\n\t$ctrl.Historico     = new Historico('$ctrl.Historico', $scope);\r\n\r\n\t// Objects.\r\n\t$ctrl.Index  \t\t\t= new Index();\r\n\t$ctrl.Create \t\t\t= new Create();\r\n\t$ctrl.CreateCCusto \t\t= new CreateCCusto();\r\n\t$ctrl.CreateIndicador \t= new CreateIndicador();\r\n}","/**\r\n * Factory index do objeto _23038 - Registro de indicadores por centro de custo.\r\n */\r\n\r\nangular\r\n    .module('app')\r\n    .factory('Index', Index);    \r\n\r\nIndex.$inject = [\r\n    '$ajax',\r\n    'gScope'\r\n];\r\n\r\nfunction Index($ajax, gScope) {\r\n\r\n    // Private variables.\r\n    var obj = null;\r\n\r\n    /**\r\n     * Constructor, with class name.\r\n     */\r\n    function Index() {\r\n\r\n        obj = this;\r\n\r\n        // Public variables\r\n        this.filtro                  = {};\r\n        this.listaIndicadorPorCCusto = [];\r\n\r\n        // Public methods\r\n        this.init             = init;\r\n        this.filtrar          = filtrar;\r\n        this.habilitarIncluir = habilitarIncluir;\r\n        this.exibir           = exibir;\r\n\r\n        // Init methods.\r\n        this.init();\r\n    }\r\n    \r\n    function init() {\r\n\r\n        obj.filtro.DATA_INI_INPUT = moment().subtract('1', 'years').toDate();\r\n        obj.filtro.DATA_FIM_INPUT = moment().toDate();\r\n    }\r\n\r\n    function filtrar() {\r\n\r\n        obj.filtro.DATA_INI = obj.filtro.DATA_INI_INPUT ? moment(obj.filtro.DATA_INI_INPUT).format('YYYY-MM-DD') : null;\r\n        obj.filtro.DATA_FIM = obj.filtro.DATA_FIM_INPUT ? moment(obj.filtro.DATA_FIM_INPUT).format('YYYY-MM-DD') : null;\r\n\r\n        $ajax\r\n            .post('/_23038/consultarIndicadorPorCCusto', obj.filtro)\r\n            .then(function(response){\r\n\r\n                obj.listaIndicadorPorCCusto = response;\r\n                formatarCampo();\r\n            });\r\n\r\n        function formatarCampo() {\r\n\r\n            var ind = {};\r\n\r\n            for (var i in obj.listaIndicadorPorCCusto) {\r\n\r\n                ind = obj.listaIndicadorPorCCusto[i];\r\n\r\n                ind.DATA_INI_HUMANIZE = moment(ind.DATA_INI).format('DD/MM/YYYY');\r\n                ind.DATA_FIM_HUMANIZE = moment(ind.DATA_FIM).format('DD/MM/YYYY');\r\n            }\r\n        }\r\n    }\r\n\r\n    function habilitarIncluir() {\r\n\r\n        gScope.Ctrl.tipoTela = 'incluir';\r\n\r\n        setTimeout(function() { \r\n            $('.js-input-focus').focus(); \r\n        }, 500);\r\n    }\r\n\r\n    function exibir(indicadorPorCCusto) {\r\n\r\n        gScope.Ctrl.tipoTela = 'exibir';\r\n        gScope.Ctrl.Create.exibir(indicadorPorCCusto);\r\n    }\r\n\r\n    /**\r\n     * Return the constructor function\r\n     */\r\n    return Index;\r\n};","/**\r\n * Factory create do objeto _23038 - Registro de indicadores por centro de custo.\r\n */\r\n\r\nangular\r\n\t.module('app')\r\n\t.factory('Create', Create);    \r\n\r\nCreate.$inject = [\r\n\t'$ajax',\r\n\t'gScope'\r\n];\r\n\r\nfunction Create($ajax, gScope) {\r\n\r\n\t// Private variables.\r\n\tvar obj = null;\r\n\r\n\t/**\r\n\t * Constructor, with class name.\r\n\t */\r\n\tfunction Create() {\r\n\r\n\t\tobj = this;\r\n\r\n\t\t// Public variables.\r\n\t\tthis.indicadorPorCCusto    = {};\r\n\t\tthis.indicadorPorCCustoBkp = {};\r\n\r\n\t\t// Public methods.\r\n\t\tthis.gravar             = gravar;\r\n\t\tthis.excluir            = excluir;\r\n\t\tthis.limparCampo        = limparCampo;\r\n\t\tthis.exibir             = exibir;\r\n\t\tthis.habilitarAlteracao = habilitarAlteracao;\r\n\t\tthis.cancelarAlteracao  = cancelarAlteracao;\r\n\t\tthis.exibirModal        = exibirModal;\r\n\t\tthis.fecharModal        = fecharModal;\r\n\r\n\t\t// Init methods.\r\n\t}\r\n\t\r\n\r\n\tfunction gravar() {\r\n\r\n\t\tobj.indicadorPorCCusto.DATA_INI = moment(obj.indicadorPorCCusto.DATA_INI_INPUT).format('YYYY-MM-DD');\r\n\t\tobj.indicadorPorCCusto.DATA_FIM = moment(obj.indicadorPorCCusto.DATA_FIM_INPUT).format('YYYY-MM-DD');\r\n\r\n\t\t$ajax\r\n\t\t\t.post('/_23038/gravar', obj.indicadorPorCCusto)\r\n\t\t\t.then(function(response) {\r\n\r\n\t\t\t\tshowSuccess('Gravado com sucesso.');\r\n\t\t\t\tgScope.Ctrl.Index.filtrar();\r\n\t\t\t\tfecharModal();\r\n\t\t\t});\r\n\t}\r\n\r\n\tfunction excluir() {\r\n\r\n\t\tconfirmar();\r\n\r\n\t\tfunction confirmar() {\r\n\r\n\t\t\taddConfirme(\r\n\t\t\t\t'<h4>Confirmação</h4>',\r\n\t\t\t\t'Confirma a exclusão?',\r\n\t\t\t\t[obtn_sim, obtn_nao],\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tret: 1,\r\n\t\t\t\t\t\tfunc: function() {\r\n\r\n\t\t\t\t\t\t\tefetivar();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tret: 2,\r\n\t\t\t\t\t\tfunc: function() {}\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tfunction efetivar() {\r\n\r\n\t\t\t$ajax\r\n\t\t\t\t.post('/_23038/excluir', obj.indicadorPorCCusto)\r\n\t\t\t\t.then(function(response){\r\n\r\n\t\t\t\t\tshowSuccess('Excluído com sucesso.');\r\n\t\t\t\t\tgScope.Ctrl.Index.filtrar();\r\n\t\t\t\t\tfecharModal();\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction limparCampo() {\r\n\r\n\t\tobj.indicadorPorCCusto = {};\r\n\t}\r\n\r\n\tfunction exibir(indicadorPorCCusto) {\r\n\r\n\t\tindicadorPorCCusto.DATA_INI_INPUT \t= moment(indicadorPorCCusto.DATA_INI).toDate();\r\n\t\tindicadorPorCCusto.DATA_FIM_INPUT \t= moment(indicadorPorCCusto.DATA_FIM).toDate();\r\n\t\tindicadorPorCCusto.CCUSTO \t\t\t= {};\r\n\t\tindicadorPorCCusto.CCUSTO.CODIGO    = indicadorPorCCusto.CCUSTO_CODIGO;\r\n\t\tindicadorPorCCusto.CCUSTO.MASK      = indicadorPorCCusto.CCUSTO_MASK;\r\n\t\tindicadorPorCCusto.CCUSTO.DESCRICAO = indicadorPorCCusto.CCUSTO_DESCRICAO;\r\n\t\tindicadorPorCCusto.INDICADOR \t\t= {};\r\n\t\tindicadorPorCCusto.INDICADOR.ID\t\t= indicadorPorCCusto.INDICADOR_ID;\r\n\t\tindicadorPorCCusto.INDICADOR.TITULO\t= indicadorPorCCusto.INDICADOR_TITULO;\r\n\r\n\t\tobj.indicadorPorCCusto    = indicadorPorCCusto;\r\n\t\tobj.indicadorPorCCustoBkp = angular.copy(indicadorPorCCusto);\r\n\r\n\t\tobj.exibirModal();\r\n\t}\r\n\r\n\tfunction habilitarAlteracao() {\r\n\r\n\t\tgScope.Ctrl.tipoTela = 'alterar';\r\n\t\t\r\n\t\tsetTimeout(function() { \r\n\t\t\t$('.js-input-focus').focus(); \r\n\t\t}, 100);\r\n\t}\r\n\r\n\tfunction cancelarAlteracao() {\r\n\r\n\t\tangular.extend(obj.indicadorPorCCusto, obj.indicadorPorCCustoBkp);\r\n\t\tgScope.Ctrl.tipoTela = 'exibir';\r\n\t}\r\n\r\n\tfunction exibirModal() {\r\n\r\n\t\t$('#modal-create').modal('show');\r\n\t}\r\n\r\n\tfunction fecharModal() {\r\n\r\n\t\t$('#modal-create')\r\n\t\t\t.modal('hide')\r\n\t\t\t.find('.modal-body')\r\n\t\t\t.animate({ scrollTop: 0 }, 'fast');\r\n\r\n\t\tobj.limparCampo();        \r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Return the constructor function.\r\n\t */\r\n\treturn Create;\r\n};","/**\r\n * Factory create (centro de custo) do objeto _23038 - Registro de indicadores por centro de custo.\r\n */\r\n\r\nangular\r\n\t.module('app')\r\n\t.factory('CreateCCusto', CreateCCusto);\r\n\r\nCreateCCusto.$inject = [\r\n\t'$ajax',\r\n\t'gScope',\r\n\t'$timeout'\r\n];\r\n\r\nfunction CreateCCusto($ajax, gScope, $timeout) {\r\n\r\n\t// Private variables.\r\n\tvar obj = null;\r\n\r\n\t/**\r\n\t * Constructor, with class name.\r\n\t */\r\n\tfunction CreateCCusto() {\r\n\r\n\t\tobj = this;\r\n\r\n\t\t// Public variables\r\n\t\tthis.create \t\t\t \t \t\t\t= gScope.Ctrl.Create;\r\n\t\tthis.create.indicadorPorCCusto.CCUSTO \t= {};\r\n\t\tthis.listaCCusto\t\t \t \t\t\t= [];\r\n\r\n\t\t// Public methods\r\n\t\tthis.consultarCCusto \t\t= consultarCCusto;\r\n\t\tthis.selecionarCCusto \t\t= selecionarCCusto;\r\n\t\tthis.fixVsRepeatPesqCCusto \t= fixVsRepeatPesqCCusto;\r\n\t\tthis.exibirModal \t\t\t= exibirModal;\r\n\t\tthis.fecharModal \t\t\t= fecharModal;\r\n\r\n\t\t// Init methods.\r\n\t}\r\n\r\n\tfunction consultarCCusto() {\r\n\r\n\t\t$ajax\r\n\t\t\t.post('/_20030/pesquisaCCustoTodos')\r\n\t\t\t.then(function(response) {\r\n\r\n\t\t\t\tfor (var i in response) {\r\n\r\n\t\t\t\t\tresponse[i].CODIGO = response[i].ID;\r\n\t\t\t\t\tdelete response[i].ID;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tobj.listaCCusto = response;\r\n\t\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Selecionar Centro de Custos (modal).\r\n\t */\r\n\tfunction selecionarCCusto(ccusto) {\r\n\r\n\t\tobj.create.indicadorPorCCusto.CCUSTO = ccusto;\r\n\t\tobj.fecharModal();\r\n\t}\r\n\r\n\t/**\r\n     * Fix para vs-repeat: exibir a tabela completa.\r\n     */\r\n    function fixVsRepeatPesqCCusto() {\r\n\r\n        $timeout(function() {\r\n            $('#modal-pesq-ccusto .table-ccusto').scrollTop(0);\r\n        }, 200);\r\n\r\n    }\r\n\r\n\tfunction exibirModal() {\r\n\r\n\t\tif (obj.listaCCusto.length == 0)\r\n\t\t\tobj.consultarCCusto();\r\n\r\n\t\t$('#modal-pesq-ccusto').modal('show');\r\n\r\n\t\tsetTimeout(function() {\r\n\t\t\t$('.js-input-filtrar-ccusto').focus();\r\n\t\t}, 500);\r\n\r\n\t\tobj.fixVsRepeatPesqCCusto();\r\n\t}\r\n\r\n\tfunction fecharModal() {\r\n\r\n\t\t$('#modal-pesq-ccusto')\r\n\t\t\t.modal('hide')\r\n\t\t\t.find('.modal-body')\r\n\t\t\t.animate({ scrollTop: 0 }, 'fast');\r\n\r\n\t\tobj.filtrarCCusto = \"\";\r\n\t}\r\n\r\n\t/**\r\n\t * Return the constructor function\r\n\t */\r\n\treturn CreateCCusto;\r\n};\r\n","/**\r\n * Factory create (indicador) do objeto _23038 - Registro de indicadores por centro de custo.\r\n */\r\n\r\nangular\r\n\t.module('app')\r\n\t.factory('CreateIndicador', CreateIndicador);\r\n\r\nCreateIndicador.$inject = [\r\n\t'$ajax',\r\n\t'gScope',\r\n\t'$timeout'\r\n];\r\n\r\nfunction CreateIndicador($ajax, gScope, $timeout) {\r\n\r\n\t// Private variables.\r\n\tvar obj = null;\r\n\r\n\t/**\r\n\t * Constructor, with class name.\r\n\t */\r\n\tfunction CreateIndicador() {\r\n\r\n\t\tobj = this;\r\n\r\n\t\t// Public variables\r\n\t\tthis.create \t\t\t \t    \t\t = gScope.Ctrl.Create;\r\n\t\tthis.create.indicadorPorCCusto.INDICADOR = {};\r\n\t\tthis.listaIndicador\t\t \t    \t\t = [];\r\n\r\n\t\t// Public methods\r\n\t\tthis.consultarIndicador\t\t    = consultarIndicador;\r\n\t\tthis.selecionarIndicador \t\t= selecionarIndicador;\r\n\t\tthis.fixVsRepeatPesqIndicador \t= fixVsRepeatPesqIndicador;\r\n\t\tthis.exibirModal \t\t\t    = exibirModal;\r\n\t\tthis.fecharModal \t\t\t    = fecharModal;\r\n\r\n\t\t// Init methods.\r\n\t}\r\n\r\n\tfunction consultarIndicador() {\r\n\r\n\t\t$ajax\r\n\t\t\t.post('/_23038/consultarIndicador')\r\n\t\t\t.then(function(response) {\r\n\r\n\t\t\t\tobj.listaIndicador = response;\r\n\t\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Selecionar indicadores (modal).\r\n\t */\r\n\tfunction selecionarIndicador(indicador) {\r\n\r\n\t\tobj.create.indicadorPorCCusto.INDICADOR = indicador;\r\n\t\tobj.fecharModal();\r\n\t}\r\n\r\n\t/**\r\n     * Fix para vs-repeat: exibir a tabela completa.\r\n     */\r\n    function fixVsRepeatPesqIndicador() {\r\n\r\n        $timeout(function() {\r\n            $('#modal-pesq-indicador .table-indicador').scrollTop(0);\r\n        }, 200);\r\n\r\n    }\r\n\r\n\tfunction exibirModal() {\r\n\r\n\t\tif (obj.listaIndicador.length == 0)\r\n\t\t\tobj.consultarIndicador();\r\n\r\n\t\t$('#modal-pesq-indicador').modal('show');\r\n\r\n\t\tsetTimeout(function() {\r\n\t\t\t$('.js-input-filtrar-indicador').focus();\r\n\t\t}, 500);\r\n\r\n\t\tobj.fixVsRepeatPesqIndicador();\r\n\t}\r\n\r\n\tfunction fecharModal() {\r\n\r\n\t\t$('#modal-pesq-indicador')\r\n\t\t\t.modal('hide')\r\n\t\t\t.find('.modal-body')\r\n\t\t\t.animate({ scrollTop: 0 }, 'fast');\r\n\r\n\t\tobj.filtrarIndicador = \"\";\r\n\t}\r\n\r\n\t/**\r\n\t * Return the constructor function\r\n\t */\r\n\treturn CreateIndicador;\r\n};\r\n"]}