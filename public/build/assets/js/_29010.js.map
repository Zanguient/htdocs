{"version":3,"sources":["ng-file-upload.min.js","_29010.app.js","_29010-workflow-index.component.js","_29010-workflow-index.service.js","_29010-workflow-index.controller.js","_29010-workflow-create.component.js","_29010-workflow-create.service.js","_29010-workflow-create.controller.js","_29010-info-geral.component.js","_29010-info-geral.controller.js","_29010-tarefa.component.js","_29010-tarefa.service.js","_29010-tarefa.controller.js"],"names":[],"mappings":"AAAA;AACA;AACA;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"_29010.js","sourcesContent":["/*! 12.2.13 */\n!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=function(a){return function(b,c){if(\"__setXHR_\"===b){var d=c(this);d instanceof Function&&d(this)}else a.apply(this,arguments)}}(window.XMLHttpRequest.prototype.setRequestHeader));var ngFileUpload=angular.module(\"ngFileUpload\",[]);ngFileUpload.version=\"12.2.13\",ngFileUpload.service(\"UploadBase\",[\"$http\",\"$q\",\"$timeout\",function(a,b,c){function d(d){function e(a){j.notify&&j.notify(a),k.progressFunc&&c(function(){k.progressFunc(a)})}function h(a){return null!=d._start&&g?{loaded:a.loaded+d._start,total:d._file&&d._file.size||a.total,type:a.type,config:d,lengthComputable:!0,target:a.target}:a}function i(){a(d).then(function(a){if(g&&d._chunkSize&&!d._finished&&d._file){var b=d._file&&d._file.size||0;e({loaded:Math.min(d._end,b),total:b,config:d,type:\"progress\"}),f.upload(d,!0)}else d._finished&&delete d._finished,j.resolve(a)},function(a){j.reject(a)},function(a){j.notify(a)})}d.method=d.method||\"POST\",d.headers=d.headers||{};var j=d._deferred=d._deferred||b.defer(),k=j.promise;return d.disableProgress||(d.headers.__setXHR_=function(){return function(a){a&&a.upload&&a.upload.addEventListener&&(d.__XHR=a,d.xhrFn&&d.xhrFn(a),a.upload.addEventListener(\"progress\",function(a){a.config=d,e(h(a))},!1),a.upload.addEventListener(\"load\",function(a){a.lengthComputable&&(a.config=d,e(h(a)))},!1))}}),g?d._chunkSize&&d._end&&!d._finished?(d._start=d._end,d._end+=d._chunkSize,i()):d.resumeSizeUrl?a.get(d.resumeSizeUrl).then(function(a){d._start=d.resumeSizeResponseReader?d.resumeSizeResponseReader(a.data):parseInt((null==a.data.size?a.data:a.data.size).toString()),d._chunkSize&&(d._end=d._start+d._chunkSize),i()},function(a){throw a}):d.resumeSize?d.resumeSize().then(function(a){d._start=a,d._chunkSize&&(d._end=d._start+d._chunkSize),i()},function(a){throw a}):(d._chunkSize&&(d._start=0,d._end=d._start+d._chunkSize),i()):i(),k.success=function(a){return k.then(function(b){a(b.data,b.status,b.headers,d)}),k},k.error=function(a){return k.then(null,function(b){a(b.data,b.status,b.headers,d)}),k},k.progress=function(a){return k.progressFunc=a,k.then(null,null,function(b){a(b)}),k},k.abort=k.pause=function(){return d.__XHR&&c(function(){d.__XHR.abort()}),k},k.xhr=function(a){return d.xhrFn=function(b){return function(){b&&b.apply(k,arguments),a.apply(k,arguments)}}(d.xhrFn),k},f.promisesCount++,k[\"finally\"]&&k[\"finally\"]instanceof Function&&k[\"finally\"](function(){f.promisesCount--}),k}function e(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}var f=this;f.promisesCount=0,this.isResumeSupported=function(){return window.Blob&&window.Blob.prototype.slice};var g=this.isResumeSupported();this.isUploadInProgress=function(){return f.promisesCount>0},this.rename=function(a,b){return a.ngfName=b,a},this.jsonBlob=function(a){null==a||angular.isString(a)||(a=JSON.stringify(a));var b=new window.Blob([a],{type:\"application/json\"});return b._ngfBlob=!0,b},this.json=function(a){return angular.toJson(a)},this.isFile=function(a){return null!=a&&(a instanceof window.Blob||a.flashId&&a.name&&a.size)},this.upload=function(a,b){function c(b,c){if(b._ngfBlob)return b;if(a._file=a._file||b,null!=a._start&&g){a._end&&a._end>=b.size&&(a._finished=!0,a._end=b.size);var d=b.slice(a._start,a._end||b.size);return d.name=b.name,d.ngfName=b.ngfName,a._chunkSize&&(c.append(\"_chunkSize\",a._chunkSize),c.append(\"_currentChunkSize\",a._end-a._start),c.append(\"_chunkNumber\",Math.floor(a._start/a._chunkSize)),c.append(\"_totalSize\",a._file.size)),d}return b}function h(b,d,e){if(void 0!==d)if(angular.isDate(d)&&(d=d.toISOString()),angular.isString(d))b.append(e,d);else if(f.isFile(d)){var g=c(d,b),i=e.split(\",\");i[1]&&(g.ngfName=i[1].replace(/^\\s+|\\s+$/g,\"\"),e=i[0]),a._fileKey=a._fileKey||e,b.append(e,g,g.ngfName||g.name)}else if(angular.isObject(d)){if(d.$$ngfCircularDetection)throw\"ngFileUpload: Circular reference in config.data. Make sure specified data for Upload.upload() has no circular reference: \"+e;d.$$ngfCircularDetection=!0;try{for(var j in d)if(d.hasOwnProperty(j)&&\"$$ngfCircularDetection\"!==j){var k=null==a.objectKey?\"[i]\":a.objectKey;d.length&&parseInt(j)>-1&&(k=null==a.arrayKey?k:a.arrayKey),h(b,d[j],e+k.replace(/[ik]/g,j))}}finally{delete d.$$ngfCircularDetection}}else b.append(e,d)}function i(){a._chunkSize=f.translateScalars(a.resumeChunkSize),a._chunkSize=a._chunkSize?parseInt(a._chunkSize.toString()):null,a.headers=a.headers||{},a.headers[\"Content-Type\"]=void 0,a.transformRequest=a.transformRequest?angular.isArray(a.transformRequest)?a.transformRequest:[a.transformRequest]:[],a.transformRequest.push(function(b){var c,d=new window.FormData;b=b||a.fields||{},a.file&&(b.file=a.file);for(c in b)if(b.hasOwnProperty(c)){var e=b[c];a.formDataAppender?a.formDataAppender(d,c,e):h(d,e,c)}return d})}return b||(a=e(a)),a._isDigested||(a._isDigested=!0,i()),d(a)},this.http=function(b){return b=e(b),b.transformRequest=b.transformRequest||function(b){return window.ArrayBuffer&&b instanceof window.ArrayBuffer||b instanceof window.Blob?b:a.defaults.transformRequest[0].apply(this,arguments)},b._chunkSize=f.translateScalars(b.resumeChunkSize),b._chunkSize=b._chunkSize?parseInt(b._chunkSize.toString()):null,d(b)},this.translateScalars=function(a){if(angular.isString(a)){if(a.search(/kb/i)===a.length-2)return parseFloat(1024*a.substring(0,a.length-2));if(a.search(/mb/i)===a.length-2)return parseFloat(1048576*a.substring(0,a.length-2));if(a.search(/gb/i)===a.length-2)return parseFloat(1073741824*a.substring(0,a.length-2));if(a.search(/b/i)===a.length-1)return parseFloat(a.substring(0,a.length-1));if(a.search(/s/i)===a.length-1)return parseFloat(a.substring(0,a.length-1));if(a.search(/m/i)===a.length-1)return parseFloat(60*a.substring(0,a.length-1));if(a.search(/h/i)===a.length-1)return parseFloat(3600*a.substring(0,a.length-1))}return a},this.urlToBlob=function(c){var d=b.defer();return a({url:c,method:\"get\",responseType:\"arraybuffer\"}).then(function(a){var b=new Uint8Array(a.data),e=a.headers(\"content-type\")||\"image/WebP\",f=new window.Blob([b],{type:e}),g=c.match(/.*\\/(.+?)(\\?.*)?$/);g.length>1&&(f.name=g[1]),d.resolve(f)},function(a){d.reject(a)}),d.promise},this.setDefaults=function(a){this.defaults=a||{}},this.defaults={},this.version=ngFileUpload.version}]),ngFileUpload.service(\"Upload\",[\"$parse\",\"$timeout\",\"$compile\",\"$q\",\"UploadExif\",function(a,b,c,d,e){function f(a,b,c){var e=[i.emptyPromise()];return angular.forEach(a,function(d,f){0===d.type.indexOf(\"image/jpeg\")&&i.attrGetter(\"ngfFixOrientation\",b,c,{$file:d})&&e.push(i.happyPromise(i.applyExifRotation(d),d).then(function(b){a.splice(f,1,b)}))}),d.all(e)}function g(a,b,c,e){var f=i.attrGetter(\"ngfResize\",b,c);if(!f||!i.isResizeSupported()||!a.length)return i.emptyPromise();if(f instanceof Function){var g=d.defer();return f(a).then(function(d){h(d,a,b,c,e).then(function(a){g.resolve(a)},function(a){g.reject(a)})},function(a){g.reject(a)})}return h(f,a,b,c,e)}function h(a,b,c,e,f){function g(d,g){if(0===d.type.indexOf(\"image\")){if(a.pattern&&!i.validatePattern(d,a.pattern))return;a.resizeIf=function(a,b){return i.attrGetter(\"ngfResizeIf\",c,e,{$width:a,$height:b,$file:d})};var j=i.resize(d,a);h.push(j),j.then(function(a){b.splice(g,1,a)},function(a){d.$error=\"resize\",(d.$errorMessages=d.$errorMessages||{}).resize=!0,d.$errorParam=(a?(a.message?a.message:a)+\": \":\"\")+(d&&d.name),f.$ngfValidations.push({name:\"resize\",valid:!1}),i.applyModelValidation(f,b)})}}for(var h=[i.emptyPromise()],j=0;j<b.length;j++)g(b[j],j);return d.all(h)}var i=e;return i.getAttrWithDefaults=function(a,b){if(null!=a[b])return a[b];var c=i.defaults[b];return null==c?c:angular.isString(c)?c:JSON.stringify(c)},i.attrGetter=function(b,c,d,e){var f=this.getAttrWithDefaults(c,b);if(!d)return f;try{return e?a(f)(d,e):a(f)(d)}catch(g){if(b.search(/min|max|pattern/i))return f;throw g}},i.shouldUpdateOn=function(a,b,c){var d=i.attrGetter(\"ngfModelOptions\",b,c);return d&&d.updateOn?d.updateOn.split(\" \").indexOf(a)>-1:!0},i.emptyPromise=function(){var a=d.defer(),c=arguments;return b(function(){a.resolve.apply(a,c)}),a.promise},i.rejectPromise=function(){var a=d.defer(),c=arguments;return b(function(){a.reject.apply(a,c)}),a.promise},i.happyPromise=function(a,c){var e=d.defer();return a.then(function(a){e.resolve(a)},function(a){b(function(){throw a}),e.resolve(c)}),e.promise},i.updateModel=function(c,d,e,h,j,k,l){function m(f,g,j,l,m){d.$$ngfPrevValidFiles=f,d.$$ngfPrevInvalidFiles=g;var n=f&&f.length?f[0]:null,o=g&&g.length?g[0]:null;c&&(i.applyModelValidation(c,f),c.$setViewValue(m?n:f)),h&&a(h)(e,{$files:f,$file:n,$newFiles:j,$duplicateFiles:l,$invalidFiles:g,$invalidFile:o,$event:k});var p=i.attrGetter(\"ngfModelInvalid\",d);p&&b(function(){a(p).assign(e,m?o:g)}),b(function(){})}function n(){function a(a,b){return a.name===b.name&&(a.$ngfOrigSize||a.size)===(b.$ngfOrigSize||b.size)&&a.type===b.type}function b(b){var c;for(c=0;c<r.length;c++)if(a(b,r[c]))return!0;for(c=0;c<s.length;c++)if(a(b,s[c]))return!0;return!1}if(j){q=[],t=[];for(var c=0;c<j.length;c++)b(j[c])?t.push(j[c]):q.push(j[c])}}function o(a){return angular.isArray(a)?a:[a]}function p(){function a(){b(function(){m(w?r.concat(v):v,w?s.concat(u):u,j,t,x)},z&&z.debounce?z.debounce.change||z.debounce:0)}var f=y?q:v;g(f,d,e,c).then(function(){y?i.validate(q,w?r.length:0,c,d,e).then(function(b){v=b.validsFiles,u=b.invalidsFiles,a()}):a()},function(){for(var b=0;b<f.length;b++){var c=f[b];if(\"resize\"===c.$error){var d=v.indexOf(c);d>-1&&(v.splice(d,1),u.push(c)),a()}}})}var q,r,s,t=[],u=[],v=[];r=d.$$ngfPrevValidFiles||[],s=d.$$ngfPrevInvalidFiles||[],c&&c.$modelValue&&(r=o(c.$modelValue));var w=i.attrGetter(\"ngfKeep\",d,e);q=(j||[]).slice(0),(\"distinct\"===w||i.attrGetter(\"ngfKeepDistinct\",d,e)===!0)&&n(d,e);var x=!w&&!i.attrGetter(\"ngfMultiple\",d,e)&&!i.attrGetter(\"multiple\",d);if(!w||q.length){i.attrGetter(\"ngfBeforeModelChange\",d,e,{$files:j,$file:j&&j.length?j[0]:null,$newFiles:q,$duplicateFiles:t,$event:k});var y=i.attrGetter(\"ngfValidateAfterResize\",d,e),z=i.attrGetter(\"ngfModelOptions\",d,e);i.validate(q,w?r.length:0,c,d,e).then(function(a){l?m(q,[],j,t,x):(z&&z.allowInvalid||y?v=q:(v=a.validFiles,u=a.invalidFiles),i.attrGetter(\"ngfFixOrientation\",d,e)&&i.isExifSupported()?f(v,d,e).then(function(){p()}):p())})}},i}]),ngFileUpload.directive(\"ngfSelect\",[\"$parse\",\"$timeout\",\"$compile\",\"Upload\",function(a,b,c,d){function e(a){var b=a.match(/Android[^\\d]*(\\d+)\\.(\\d+)/);if(b&&b.length>2){var c=d.defaults.androidFixMinorVersion||4;return parseInt(b[1])<4||parseInt(b[1])===c&&parseInt(b[2])<c}return-1===a.indexOf(\"Chrome\")&&/.*Windows.*Safari.*/.test(a)}function f(a,b,c,d,f,h,i,j){function k(){return\"input\"===b[0].tagName.toLowerCase()&&c.type&&\"file\"===c.type.toLowerCase()}function l(){return t(\"ngfChange\")||t(\"ngfSelect\")}function m(b){if(j.shouldUpdateOn(\"change\",c,a)){var e=b.__files_||b.target&&b.target.files,f=[];if(!e)return;for(var g=0;g<e.length;g++)f.push(e[g]);j.updateModel(d,c,a,l(),f.length?f:null,b)}}function n(a,d){function e(b){a.attr(\"id\",\"ngf-\"+b),d.attr(\"id\",\"ngf-label-\"+b)}for(var f=0;f<b[0].attributes.length;f++){var g=b[0].attributes[f];\"type\"!==g.name&&\"class\"!==g.name&&\"style\"!==g.name&&(\"id\"===g.name?(e(g.value),u.push(c.$observe(\"id\",e))):a.attr(g.name,g.value||\"required\"!==g.name&&\"multiple\"!==g.name?g.value:g.name))}}function o(){if(k())return b;var a=angular.element('<input type=\"file\">'),c=angular.element(\"<label>upload</label>\");return c.css(\"visibility\",\"hidden\").css(\"position\",\"absolute\").css(\"overflow\",\"hidden\").css(\"width\",\"0px\").css(\"height\",\"0px\").css(\"border\",\"none\").css(\"margin\",\"0px\").css(\"padding\",\"0px\").attr(\"tabindex\",\"-1\"),n(a,c),g.push({el:b,ref:c}),document.body.appendChild(c.append(a)[0]),a}function p(c){if(b.attr(\"disabled\"))return!1;if(!t(\"ngfSelectDisabled\",a)){var d=q(c);if(null!=d)return d;r(c);try{k()||document.body.contains(x[0])||(g.push({el:b,ref:x.parent()}),document.body.appendChild(x.parent()[0]),x.bind(\"change\",m))}catch(f){}return e(navigator.userAgent)?setTimeout(function(){x[0].click()},0):x[0].click(),!1}}function q(a){var b=a.changedTouches||a.originalEvent&&a.originalEvent.changedTouches;if(b){if(\"touchstart\"===a.type)return w=b[0].clientX,v=b[0].clientY,!0;if(\"touchend\"===a.type){var c=b[0].clientX,d=b[0].clientY;if(Math.abs(c-w)>20||Math.abs(d-v)>20)return a.stopPropagation(),a.preventDefault(),!1}return!0}}function r(b){j.shouldUpdateOn(\"click\",c,a)&&x.val()&&(x.val(null),j.updateModel(d,c,a,l(),null,b,!0))}function s(a){if(x&&!x.attr(\"__ngf_ie10_Fix_\")){if(!x[0].parentNode)return void(x=null);a.preventDefault(),a.stopPropagation(),x.unbind(\"click\");var b=x.clone();return x.replaceWith(b),x=b,x.attr(\"__ngf_ie10_Fix_\",\"true\"),x.bind(\"change\",m),x.bind(\"click\",s),x[0].click(),!1}x.removeAttr(\"__ngf_ie10_Fix_\")}var t=function(a,b){return j.attrGetter(a,c,b)};j.registerModelChangeValidator(d,c,a);var u=[];t(\"ngfMultiple\")&&u.push(a.$watch(t(\"ngfMultiple\"),function(){x.attr(\"multiple\",t(\"ngfMultiple\",a))})),t(\"ngfCapture\")&&u.push(a.$watch(t(\"ngfCapture\"),function(){x.attr(\"capture\",t(\"ngfCapture\",a))})),t(\"ngfAccept\")&&u.push(a.$watch(t(\"ngfAccept\"),function(){x.attr(\"accept\",t(\"ngfAccept\",a))})),u.push(c.$observe(\"accept\",function(){x.attr(\"accept\",t(\"accept\"))}));var v=0,w=0,x=b;k()||(x=o()),x.bind(\"change\",m),k()?b.bind(\"click\",r):b.bind(\"click touchstart touchend\",p),-1!==navigator.appVersion.indexOf(\"MSIE 10\")&&x.bind(\"click\",s),d&&d.$formatters.push(function(a){return(null==a||0===a.length)&&x.val()&&x.val(null),a}),a.$on(\"$destroy\",function(){k()||x.parent().remove(),angular.forEach(u,function(a){a()})}),h(function(){for(var a=0;a<g.length;a++){var b=g[a];document.body.contains(b.el[0])||(g.splice(a,1),b.ref.remove())}}),window.FileAPI&&window.FileAPI.ngfFixIE&&window.FileAPI.ngfFixIE(b,x,m)}var g=[];return{restrict:\"AEC\",require:\"?ngModel\",link:function(e,g,h,i){f(e,g,h,i,a,b,c,d)}}}]),function(){function a(a){return\"img\"===a.tagName.toLowerCase()?\"image\":\"audio\"===a.tagName.toLowerCase()?\"audio\":\"video\"===a.tagName.toLowerCase()?\"video\":/./}function b(b,c,d,e,f,g,h,i){function j(a){var g=b.attrGetter(\"ngfNoObjectUrl\",f,d);b.dataUrl(a,g)[\"finally\"](function(){c(function(){var b=(g?a.$ngfDataUrl:a.$ngfBlobUrl)||a.$ngfDataUrl;i?e.css(\"background-image\",\"url('\"+(b||\"\")+\"')\"):e.attr(\"src\",b),b?e.removeClass(\"ng-hide\"):e.addClass(\"ng-hide\")})})}c(function(){var c=d.$watch(f[g],function(c){var k=h;if(\"ngfThumbnail\"===g&&(k||(k={width:e[0].naturalWidth||e[0].clientWidth,height:e[0].naturalHeight||e[0].clientHeight}),0===k.width&&window.getComputedStyle)){var l=getComputedStyle(e[0]);l.width&&l.width.indexOf(\"px\")>-1&&l.height&&l.height.indexOf(\"px\")>-1&&(k={width:parseInt(l.width.slice(0,-2)),height:parseInt(l.height.slice(0,-2))})}return angular.isString(c)?(e.removeClass(\"ng-hide\"),i?e.css(\"background-image\",\"url('\"+c+\"')\"):e.attr(\"src\",c)):void(!c||!c.type||0!==c.type.search(a(e[0]))||i&&0!==c.type.indexOf(\"image\")?e.addClass(\"ng-hide\"):k&&b.isResizeSupported()?(k.resizeIf=function(a,e){return b.attrGetter(\"ngfResizeIf\",f,d,{$width:a,$height:e,$file:c})},b.resize(c,k).then(function(a){j(a)},function(a){throw a})):j(c))});d.$on(\"$destroy\",function(){c()})})}ngFileUpload.service(\"UploadDataUrl\",[\"UploadBase\",\"$timeout\",\"$q\",function(a,b,c){var d=a;return d.base64DataUrl=function(a){if(angular.isArray(a)){var b=c.defer(),e=0;return angular.forEach(a,function(c){d.dataUrl(c,!0)[\"finally\"](function(){if(e++,e===a.length){var c=[];angular.forEach(a,function(a){c.push(a.$ngfDataUrl)}),b.resolve(c,a)}})}),b.promise}return d.dataUrl(a,!0)},d.dataUrl=function(a,e){if(!a)return d.emptyPromise(a,a);if(e&&null!=a.$ngfDataUrl||!e&&null!=a.$ngfBlobUrl)return d.emptyPromise(e?a.$ngfDataUrl:a.$ngfBlobUrl,a);var f=e?a.$$ngfDataUrlPromise:a.$$ngfBlobUrlPromise;if(f)return f;var g=c.defer();return b(function(){if(window.FileReader&&a&&(!window.FileAPI||-1===navigator.userAgent.indexOf(\"MSIE 8\")||a.size<2e4)&&(!window.FileAPI||-1===navigator.userAgent.indexOf(\"MSIE 9\")||a.size<4e6)){var c=window.URL||window.webkitURL;if(c&&c.createObjectURL&&!e){var f;try{f=c.createObjectURL(a)}catch(h){return void b(function(){a.$ngfBlobUrl=\"\",g.reject()})}b(function(){if(a.$ngfBlobUrl=f,f){g.resolve(f,a),d.blobUrls=d.blobUrls||[],d.blobUrlsTotalSize=d.blobUrlsTotalSize||0,d.blobUrls.push({url:f,size:a.size}),d.blobUrlsTotalSize+=a.size||0;for(var b=d.defaults.blobUrlsMaxMemory||268435456,e=d.defaults.blobUrlsMaxQueueSize||200;(d.blobUrlsTotalSize>b||d.blobUrls.length>e)&&d.blobUrls.length>1;){var h=d.blobUrls.splice(0,1)[0];c.revokeObjectURL(h.url),d.blobUrlsTotalSize-=h.size}}})}else{var i=new FileReader;i.onload=function(c){b(function(){a.$ngfDataUrl=c.target.result,g.resolve(c.target.result,a),b(function(){delete a.$ngfDataUrl},1e3)})},i.onerror=function(){b(function(){a.$ngfDataUrl=\"\",g.reject()})},i.readAsDataURL(a)}}else b(function(){a[e?\"$ngfDataUrl\":\"$ngfBlobUrl\"]=\"\",g.reject()})}),f=e?a.$$ngfDataUrlPromise=g.promise:a.$$ngfBlobUrlPromise=g.promise,f[\"finally\"](function(){delete a[e?\"$$ngfDataUrlPromise\":\"$$ngfBlobUrlPromise\"]}),f},d}]),ngFileUpload.directive(\"ngfSrc\",[\"Upload\",\"$timeout\",function(a,c){return{restrict:\"AE\",link:function(d,e,f){b(a,c,d,e,f,\"ngfSrc\",a.attrGetter(\"ngfResize\",f,d),!1)}}}]),ngFileUpload.directive(\"ngfBackground\",[\"Upload\",\"$timeout\",function(a,c){return{restrict:\"AE\",link:function(d,e,f){b(a,c,d,e,f,\"ngfBackground\",a.attrGetter(\"ngfResize\",f,d),!0)}}}]),ngFileUpload.directive(\"ngfThumbnail\",[\"Upload\",\"$timeout\",function(a,c){return{restrict:\"AE\",link:function(d,e,f){var g=a.attrGetter(\"ngfSize\",f,d);b(a,c,d,e,f,\"ngfThumbnail\",g,a.attrGetter(\"ngfAsBackground\",f,d))}}}]),ngFileUpload.config([\"$compileProvider\",function(a){a.imgSrcSanitizationWhitelist&&a.imgSrcSanitizationWhitelist(/^\\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/),a.aHrefSanitizationWhitelist&&a.aHrefSanitizationWhitelist(/^\\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/)}]),ngFileUpload.filter(\"ngfDataUrl\",[\"UploadDataUrl\",\"$sce\",function(a,b){return function(c,d,e){if(angular.isString(c))return b.trustAsResourceUrl(c);var f=c&&((d?c.$ngfDataUrl:c.$ngfBlobUrl)||c.$ngfDataUrl);return c&&!f?(!c.$ngfDataUrlFilterInProgress&&angular.isObject(c)&&(c.$ngfDataUrlFilterInProgress=!0,a.dataUrl(c,d)),\"\"):(c&&delete c.$ngfDataUrlFilterInProgress,(c&&f?e?b.trustAsResourceUrl(f):f:c)||\"\")}}])}(),ngFileUpload.service(\"UploadValidate\",[\"UploadDataUrl\",\"$q\",\"$timeout\",function(a,b,c){function d(a){var b=\"\",c=[];if(a.length>2&&\"/\"===a[0]&&\"/\"===a[a.length-1])b=a.substring(1,a.length-1);else{var e=a.split(\",\");if(e.length>1)for(var f=0;f<e.length;f++){var g=d(e[f]);g.regexp?(b+=\"(\"+g.regexp+\")\",f<e.length-1&&(b+=\"|\")):c=c.concat(g.excludes)}else 0===a.indexOf(\"!\")?c.push(\"^((?!\"+d(a.substring(1)).regexp+\").)*$\"):(0===a.indexOf(\".\")&&(a=\"*\"+a),b=\"^\"+a.replace(new RegExp(\"[.\\\\\\\\+*?\\\\[\\\\^\\\\]$(){}=!<>|:\\\\-]\",\"g\"),\"\\\\$&\")+\"$\",b=b.replace(/\\\\\\*/g,\".*\").replace(/\\\\\\?/g,\".\"))}return{regexp:b,excludes:c}}function e(a,b){null==b||a.$dirty||(a.$setDirty?a.$setDirty():a.$dirty=!0)}var f=a;return f.validatePattern=function(a,b){if(!b)return!0;var c=d(b),e=!0;if(c.regexp&&c.regexp.length){var f=new RegExp(c.regexp,\"i\");e=null!=a.type&&f.test(a.type)||null!=a.name&&f.test(a.name)}for(var g=c.excludes.length;g--;){var h=new RegExp(c.excludes[g],\"i\");e=e&&(null==a.type||h.test(a.type))&&(null==a.name||h.test(a.name))}return e},f.ratioToFloat=function(a){var b=a.toString(),c=b.search(/[x:]/i);return b=c>-1?parseFloat(b.substring(0,c))/parseFloat(b.substring(c+1)):parseFloat(b)},f.registerModelChangeValidator=function(a,b,c){a&&a.$formatters.push(function(d){if(a.$dirty){var e=d;d&&!angular.isArray(d)&&(e=[d]),f.validate(e,0,a,b,c).then(function(){f.applyModelValidation(a,e)})}return d})},f.applyModelValidation=function(a,b){e(a,b),angular.forEach(a.$ngfValidations,function(b){a.$setValidity(b.name,b.valid)})},f.getValidationAttr=function(a,b,c,d,e){var g=\"ngf\"+c[0].toUpperCase()+c.substr(1),h=f.attrGetter(g,a,b,{$file:e});if(null==h&&(h=f.attrGetter(\"ngfValidate\",a,b,{$file:e}))){var i=(d||c).split(\".\");h=h[i[0]],i.length>1&&(h=h&&h[i[1]])}return h},f.validate=function(a,c,d,e,g){function h(b,c,h){if(a){for(var i=a.length,j=null;i--;){var n=a[i];if(n){var o=f.getValidationAttr(e,g,b,c,n);null!=o&&(h(n,o,i)||(-1===k.indexOf(b)?(n.$error=b,(n.$errorMessages=n.$errorMessages||{})[b]=!0,n.$errorParam=o,-1===m.indexOf(n)&&m.push(n),l||a.splice(i,1),j=!1):a.splice(i,1)))}}null!==j&&d.$ngfValidations.push({name:b,valid:j})}}function i(c,h,i,n,o){function p(b,d,e){function f(f){if(f())if(-1===k.indexOf(c)){if(d.$error=c,(d.$errorMessages=d.$errorMessages||{})[c]=!0,d.$errorParam=e,-1===m.indexOf(d)&&m.push(d),!l){var g=a.indexOf(d);g>-1&&a.splice(g,1)}b.resolve(!1)}else{var h=a.indexOf(d);h>-1&&a.splice(h,1),b.resolve(!0)}else b.resolve(!0)}null!=e?n(d,e).then(function(a){f(function(){return!o(a,e)})},function(){f(function(){return j(\"ngfValidateForce\",{$file:d})})}):b.resolve(!0)}var q=[f.emptyPromise(!0)];a&&(a=void 0===a.length?[a]:a,angular.forEach(a,function(a){var d=b.defer();return q.push(d.promise),!i||null!=a.type&&0===a.type.search(i)?void(\"dimensions\"===c&&null!=f.attrGetter(\"ngfDimensions\",e)?f.imageDimensions(a).then(function(b){p(d,a,j(\"ngfDimensions\",{$file:a,$width:b.width,$height:b.height}))},function(){d.resolve(!1)}):\"duration\"===c&&null!=f.attrGetter(\"ngfDuration\",e)?f.mediaDuration(a).then(function(b){p(d,a,j(\"ngfDuration\",{$file:a,$duration:b}))},function(){d.resolve(!1)}):p(d,a,f.getValidationAttr(e,g,c,h,a))):void d.resolve(!0)}));var r=b.defer();return b.all(q).then(function(a){for(var b=!0,e=0;e<a.length;e++)if(!a[e]){b=!1;break}d.$ngfValidations.push({name:c,valid:b}),r.resolve(b)}),r.promise}d=d||{},d.$ngfValidations=d.$ngfValidations||[],angular.forEach(d.$ngfValidations,function(a){a.valid=!0});var j=function(a,b){return f.attrGetter(a,e,g,b)},k=(f.attrGetter(\"ngfIgnoreInvalid\",e,g)||\"\").split(\" \"),l=f.attrGetter(\"ngfRunAllValidations\",e,g);if(null==a||0===a.length)return f.emptyPromise({validFiles:a,invalidFiles:[]});a=void 0===a.length?[a]:a.slice(0);var m=[];h(\"pattern\",null,f.validatePattern),h(\"minSize\",\"size.min\",function(a,b){return a.size+.1>=f.translateScalars(b)}),h(\"maxSize\",\"size.max\",function(a,b){return a.size-.1<=f.translateScalars(b)});var n=0;if(h(\"maxTotalSize\",null,function(b,c){return n+=b.size,n>f.translateScalars(c)?(a.splice(0,a.length),!1):!0}),h(\"validateFn\",null,function(a,b){return b===!0||null===b||\"\"===b}),!a.length)return f.emptyPromise({validFiles:[],invalidFiles:m});var o=b.defer(),p=[];return p.push(i(\"maxHeight\",\"height.max\",/image/,this.imageDimensions,function(a,b){return a.height<=b})),p.push(i(\"minHeight\",\"height.min\",/image/,this.imageDimensions,function(a,b){return a.height>=b})),p.push(i(\"maxWidth\",\"width.max\",/image/,this.imageDimensions,function(a,b){return a.width<=b})),p.push(i(\"minWidth\",\"width.min\",/image/,this.imageDimensions,function(a,b){return a.width>=b})),p.push(i(\"dimensions\",null,/image/,function(a,b){return f.emptyPromise(b)},function(a){return a})),p.push(i(\"ratio\",null,/image/,this.imageDimensions,function(a,b){for(var c=b.toString().split(\",\"),d=!1,e=0;e<c.length;e++)Math.abs(a.width/a.height-f.ratioToFloat(c[e]))<.01&&(d=!0);return d})),p.push(i(\"maxRatio\",\"ratio.max\",/image/,this.imageDimensions,function(a,b){return a.width/a.height-f.ratioToFloat(b)<1e-4})),p.push(i(\"minRatio\",\"ratio.min\",/image/,this.imageDimensions,function(a,b){return a.width/a.height-f.ratioToFloat(b)>-1e-4})),p.push(i(\"maxDuration\",\"duration.max\",/audio|video/,this.mediaDuration,function(a,b){return a<=f.translateScalars(b)})),p.push(i(\"minDuration\",\"duration.min\",/audio|video/,this.mediaDuration,function(a,b){return a>=f.translateScalars(b)})),p.push(i(\"duration\",null,/audio|video/,function(a,b){return f.emptyPromise(b)},function(a){return a})),p.push(i(\"validateAsyncFn\",null,null,function(a,b){return b},function(a){return a===!0||null===a||\"\"===a})),b.all(p).then(function(){if(l)for(var b=0;b<a.length;b++){var d=a[b];d.$error&&a.splice(b--,1)}l=!1,h(\"maxFiles\",null,function(a,b,d){return b>c+d}),o.resolve({validFiles:a,invalidFiles:m})}),o.promise},f.imageDimensions=function(a){if(a.$ngfWidth&&a.$ngfHeight){var d=b.defer();return c(function(){d.resolve({width:a.$ngfWidth,height:a.$ngfHeight})}),d.promise}if(a.$ngfDimensionPromise)return a.$ngfDimensionPromise;var e=b.defer();return c(function(){return 0!==a.type.indexOf(\"image\")?void e.reject(\"not image\"):void f.dataUrl(a).then(function(b){function d(){var b=h[0].naturalWidth||h[0].clientWidth,c=h[0].naturalHeight||h[0].clientHeight;h.remove(),a.$ngfWidth=b,a.$ngfHeight=c,e.resolve({width:b,height:c})}function f(){h.remove(),e.reject(\"load error\")}function g(){c(function(){h[0].parentNode&&(h[0].clientWidth?d():i++>10?f():g())},1e3)}var h=angular.element(\"<img>\").attr(\"src\",b).css(\"visibility\",\"hidden\").css(\"position\",\"fixed\").css(\"max-width\",\"none !important\").css(\"max-height\",\"none !important\");h.on(\"load\",d),h.on(\"error\",f);var i=0;g(),angular.element(document.getElementsByTagName(\"body\")[0]).append(h)},function(){e.reject(\"load error\")})}),a.$ngfDimensionPromise=e.promise,a.$ngfDimensionPromise[\"finally\"](function(){delete a.$ngfDimensionPromise}),a.$ngfDimensionPromise},f.mediaDuration=function(a){if(a.$ngfDuration){var d=b.defer();return c(function(){d.resolve(a.$ngfDuration)}),d.promise}if(a.$ngfDurationPromise)return a.$ngfDurationPromise;var e=b.defer();return c(function(){return 0!==a.type.indexOf(\"audio\")&&0!==a.type.indexOf(\"video\")?void e.reject(\"not media\"):void f.dataUrl(a).then(function(b){function d(){var b=h[0].duration;a.$ngfDuration=b,h.remove(),e.resolve(b)}function f(){h.remove(),e.reject(\"load error\")}function g(){c(function(){h[0].parentNode&&(h[0].duration?d():i>10?f():g())},1e3)}var h=angular.element(0===a.type.indexOf(\"audio\")?\"<audio>\":\"<video>\").attr(\"src\",b).css(\"visibility\",\"none\").css(\"position\",\"fixed\");h.on(\"loadedmetadata\",d),h.on(\"error\",f);var i=0;g(),angular.element(document.body).append(h)},function(){e.reject(\"load error\")})}),a.$ngfDurationPromise=e.promise,a.$ngfDurationPromise[\"finally\"](function(){delete a.$ngfDurationPromise}),a.$ngfDurationPromise},f}]),ngFileUpload.service(\"UploadResize\",[\"UploadValidate\",\"$q\",function(a,b){var c=a,d=function(a,b,c,d,e){var f=e?Math.max(c/a,d/b):Math.min(c/a,d/b);return{width:a*f,height:b*f,marginX:a*f-c,marginY:b*f-d}},e=function(a,e,f,g,h,i,j,k){var l=b.defer(),m=document.createElement(\"canvas\"),n=document.createElement(\"img\");return n.setAttribute(\"style\",\"visibility:hidden;position:fixed;z-index:-100000\"),document.body.appendChild(n),n.onload=function(){var a=n.width,b=n.height;if(n.parentNode.removeChild(n),null!=k&&k(a,b)===!1)return void l.reject(\"resizeIf\");try{if(i){var o=c.ratioToFloat(i),p=a/b;o>p?(e=a,f=e/o):(f=b,e=f*o)}e||(e=a),f||(f=b);var q=d(a,b,e,f,j);m.width=Math.min(q.width,e),m.height=Math.min(q.height,f);var r=m.getContext(\"2d\");r.drawImage(n,Math.min(0,-q.marginX/2),Math.min(0,-q.marginY/2),q.width,q.height),l.resolve(m.toDataURL(h||\"image/WebP\",g||.934))}catch(s){l.reject(s)}},n.onerror=function(){n.parentNode.removeChild(n),l.reject()},n.src=a,l.promise};return c.dataUrltoBlob=function(a,b,c){for(var d=a.split(\",\"),e=d[0].match(/:(.*?);/)[1],f=atob(d[1]),g=f.length,h=new Uint8Array(g);g--;)h[g]=f.charCodeAt(g);var i=new window.Blob([h],{type:e});return i.name=b,i.$ngfOrigSize=c,i},c.isResizeSupported=function(){var a=document.createElement(\"canvas\");return window.atob&&a.getContext&&a.getContext(\"2d\")&&window.Blob},c.isResizeSupported()&&Object.defineProperty(window.Blob.prototype,\"name\",{get:function(){return this.$ngfName},set:function(a){this.$ngfName=a},configurable:!0}),c.resize=function(a,d){if(0!==a.type.indexOf(\"image\"))return c.emptyPromise(a);var f=b.defer();return c.dataUrl(a,!0).then(function(b){e(b,d.width,d.height,d.quality,d.type||a.type,d.ratio,d.centerCrop,d.resizeIf).then(function(e){if(\"image/jpeg\"===a.type&&d.restoreExif!==!1)try{e=c.restoreExif(b,e)}catch(g){setTimeout(function(){throw g},1)}try{var h=c.dataUrltoBlob(e,a.name,a.size);f.resolve(h)}catch(g){f.reject(g)}},function(b){\"resizeIf\"===b&&f.resolve(a),f.reject(b)})},function(a){f.reject(a)}),f.promise},c}]),function(){function a(a,c,d,e,f,g,h,i,j,k){function l(){return c.attr(\"disabled\")||s(\"ngfDropDisabled\",a)}function m(b,c,d){if(b){var e;try{e=b&&b.getData&&b.getData(\"text/html\")}catch(f){}q(b.items,b.files,s(\"ngfAllowDir\",a)!==!1,s(\"multiple\")||s(\"ngfMultiple\",a)).then(function(a){a.length?n(a,c):o(d,e).then(function(a){n(a,c)})})}}function n(b,c){i.updateModel(e,d,a,s(\"ngfChange\")||s(\"ngfDrop\"),b,c)}function o(b,c){if(!i.shouldUpdateOn(b,d,a)||\"string\"!=typeof c)return i.rejectPromise([]);var e=[];c.replace(/<(img src|img [^>]* src) *=\\\"([^\\\"]*)\\\"/gi,function(a,b,c){e.push(c)});var f=[],g=[];if(e.length){angular.forEach(e,function(a){f.push(i.urlToBlob(a).then(function(a){g.push(a)}))});var h=k.defer();return k.all(f).then(function(){h.resolve(g)},function(a){h.reject(a)}),h.promise}return i.emptyPromise()}function p(a,b,c,d){var e=s(\"ngfDragOverClass\",a,{$event:c}),f=\"dragover\";if(angular.isString(e))f=e;else if(e&&(e.delay&&(w=e.delay),e.accept||e.reject)){var g=c.dataTransfer.items;if(null!=g&&g.length)for(var h=e.pattern||s(\"ngfPattern\",a,{$event:c}),j=g.length;j--;){if(!i.validatePattern(g[j],h)){f=e.reject;break}f=e.accept}else f=e.accept}d(f)}function q(b,c,e,f){function g(a,b){var c=k.defer();if(null!=a)if(a.isDirectory){var d=[i.emptyPromise()];if(m){var e={type:\"directory\"};e.name=e.path=(b||\"\")+a.name,n.push(e)}var f=a.createReader(),h=[],p=function(){f.readEntries(function(e){try{e.length?(h=h.concat(Array.prototype.slice.call(e||[],0)),p()):(angular.forEach(h.slice(0),function(c){n.length<=j&&l>=o&&d.push(g(c,(b?b:\"\")+a.name+\"/\"))}),k.all(d).then(function(){c.resolve()},function(a){c.reject(a)}))}catch(f){c.reject(f)}},function(a){c.reject(a)})};p()}else a.file(function(a){try{a.path=(b?b:\"\")+a.name,m&&(a=i.rename(a,a.path)),n.push(a),o+=a.size,c.resolve()}catch(d){c.reject(d)}},function(a){c.reject(a)});return c.promise}var j=i.getValidationAttr(d,a,\"maxFiles\");null==j&&(j=Number.MAX_VALUE);var l=i.getValidationAttr(d,a,\"maxTotalSize\");null==l&&(l=Number.MAX_VALUE);var m=s(\"ngfIncludeDir\",a),n=[],o=0,p=[i.emptyPromise()];if(b&&b.length>0&&\"file:\"!==h.location.protocol)for(var q=0;q<b.length;q++){if(b[q].webkitGetAsEntry&&b[q].webkitGetAsEntry()&&b[q].webkitGetAsEntry().isDirectory){var r=b[q].webkitGetAsEntry();if(r.isDirectory&&!e)continue;null!=r&&p.push(g(r))}else{var t=b[q].getAsFile();null!=t&&(n.push(t),o+=t.size)}if(n.length>j||o>l||!f&&n.length>0)break}else if(null!=c)for(var u=0;u<c.length;u++){var v=c.item(u);if((v.type||v.size>0)&&(n.push(v),o+=v.size),n.length>j||o>l||!f&&n.length>0)break}var w=k.defer();return k.all(p).then(function(){if(f||m||!n.length)w.resolve(n);else{for(var a=0;n[a]&&\"directory\"===n[a].type;)a++;w.resolve([n[a]])}},function(a){w.reject(a)}),w.promise}var r=b(),s=function(a,b,c){return i.attrGetter(a,d,b,c)};if(s(\"dropAvailable\")&&g(function(){a[s(\"dropAvailable\")]?a[s(\"dropAvailable\")].value=r:a[s(\"dropAvailable\")]=r}),!r)return void(s(\"ngfHideOnDropNotAvailable\",a)===!0&&c.css(\"display\",\"none\"));null==s(\"ngfSelect\")&&i.registerModelChangeValidator(e,d,a);var t,u=null,v=f(s(\"ngfStopPropagation\")),w=1;c[0].addEventListener(\"dragover\",function(b){if(!l()&&i.shouldUpdateOn(\"drop\",d,a)){if(b.preventDefault(),v(a)&&b.stopPropagation(),navigator.userAgent.indexOf(\"Chrome\")>-1){var e=b.dataTransfer.effectAllowed;b.dataTransfer.dropEffect=\"move\"===e||\"linkMove\"===e?\"move\":\"copy\"}g.cancel(u),t||(t=\"C\",p(a,d,b,function(d){t=d,c.addClass(t),s(\"ngfDrag\",a,{$isDragging:!0,$class:t,$event:b})}))}},!1),c[0].addEventListener(\"dragenter\",function(b){!l()&&i.shouldUpdateOn(\"drop\",d,a)&&(b.preventDefault(),v(a)&&b.stopPropagation())},!1),c[0].addEventListener(\"dragleave\",function(b){!l()&&i.shouldUpdateOn(\"drop\",d,a)&&(b.preventDefault(),\nv(a)&&b.stopPropagation(),u=g(function(){t&&c.removeClass(t),t=null,s(\"ngfDrag\",a,{$isDragging:!1,$event:b})},w||100))},!1),c[0].addEventListener(\"drop\",function(b){!l()&&i.shouldUpdateOn(\"drop\",d,a)&&(b.preventDefault(),v(a)&&b.stopPropagation(),t&&c.removeClass(t),t=null,m(b.dataTransfer,b,\"dropUrl\"))},!1),c[0].addEventListener(\"paste\",function(b){navigator.userAgent.toLowerCase().indexOf(\"firefox\")>-1&&s(\"ngfEnableFirefoxPaste\",a)&&b.preventDefault(),!l()&&i.shouldUpdateOn(\"paste\",d,a)&&m(b.clipboardData||b.originalEvent.clipboardData,b,\"pasteUrl\")},!1),navigator.userAgent.toLowerCase().indexOf(\"firefox\")>-1&&s(\"ngfEnableFirefoxPaste\",a)&&(c.attr(\"contenteditable\",!0),c.on(\"keypress\",function(a){a.metaKey||a.ctrlKey||a.preventDefault()}))}function b(){var a=document.createElement(\"div\");return\"draggable\"in a&&\"ondrop\"in a&&!/Edge\\/12./i.test(navigator.userAgent)}ngFileUpload.directive(\"ngfDrop\",[\"$parse\",\"$timeout\",\"$window\",\"Upload\",\"$http\",\"$q\",function(b,c,d,e,f,g){return{restrict:\"AEC\",require:\"?ngModel\",link:function(h,i,j,k){a(h,i,j,k,b,c,d,e,f,g)}}}]),ngFileUpload.directive(\"ngfNoFileDrop\",function(){return function(a,c){b()&&c.css(\"display\",\"none\")}}),ngFileUpload.directive(\"ngfDropAvailable\",[\"$parse\",\"$timeout\",\"Upload\",function(a,c,d){return function(e,f,g){if(b()){var h=a(d.attrGetter(\"ngfDropAvailable\",g));c(function(){h(e),h.assign&&h.assign(e,!0)})}}}])}(),ngFileUpload.service(\"UploadExif\",[\"UploadResize\",\"$q\",function(a,b){function c(a,b,c,d){switch(b){case 2:return a.transform(-1,0,0,1,c,0);case 3:return a.transform(-1,0,0,-1,c,d);case 4:return a.transform(1,0,0,-1,0,d);case 5:return a.transform(0,1,1,0,0,0);case 6:return a.transform(0,1,-1,0,d,0);case 7:return a.transform(0,-1,-1,0,d,c);case 8:return a.transform(0,-1,1,0,0,c)}}function d(a){for(var b=\"\",c=new Uint8Array(a),d=c.byteLength,e=0;d>e;e++)b+=String.fromCharCode(c[e]);return window.btoa(b)}var e=a;return e.isExifSupported=function(){return window.FileReader&&(new FileReader).readAsArrayBuffer&&e.isResizeSupported()},e.readOrientation=function(a){var c=b.defer(),d=new FileReader,e=a.slice?a.slice(0,65536):a;return d.readAsArrayBuffer(e),d.onerror=function(a){return c.reject(a)},d.onload=function(a){var b={orientation:1},d=new DataView(this.result);if(65496!==d.getUint16(0,!1))return c.resolve(b);for(var e=d.byteLength,f=2;e>f;){var g=d.getUint16(f,!1);if(f+=2,65505===g){if(1165519206!==d.getUint32(f+=2,!1))return c.resolve(b);var h=18761===d.getUint16(f+=6,!1);f+=d.getUint32(f+4,h);var i=d.getUint16(f,h);f+=2;for(var j=0;i>j;j++)if(274===d.getUint16(f+12*j,h)){var k=d.getUint16(f+12*j+8,h);return k>=2&&8>=k&&(d.setUint16(f+12*j+8,1,h),b.fixedArrayBuffer=a.target.result),b.orientation=k,c.resolve(b)}}else{if(65280!==(65280&g))break;f+=d.getUint16(f,!1)}}return c.resolve(b)},c.promise},e.applyExifRotation=function(a){if(0!==a.type.indexOf(\"image/jpeg\"))return e.emptyPromise(a);var f=b.defer();return e.readOrientation(a).then(function(b){return b.orientation<2||b.orientation>8?f.resolve(a):void e.dataUrl(a,!0).then(function(g){var h=document.createElement(\"canvas\"),i=document.createElement(\"img\");i.onload=function(){try{h.width=b.orientation>4?i.height:i.width,h.height=b.orientation>4?i.width:i.height;var g=h.getContext(\"2d\");c(g,b.orientation,i.width,i.height),g.drawImage(i,0,0);var j=h.toDataURL(a.type||\"image/WebP\",.934);j=e.restoreExif(d(b.fixedArrayBuffer),j);var k=e.dataUrltoBlob(j,a.name);f.resolve(k)}catch(l){return f.reject(l)}},i.onerror=function(){f.reject()},i.src=g},function(a){f.reject(a)})},function(a){f.reject(a)}),f.promise},e.restoreExif=function(a,b){var c={};return c.KEY_STR=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",c.encode64=function(a){var b,c,d,e,f,g=\"\",h=\"\",i=\"\",j=0;do b=a[j++],c=a[j++],h=a[j++],d=b>>2,e=(3&b)<<4|c>>4,f=(15&c)<<2|h>>6,i=63&h,isNaN(c)?f=i=64:isNaN(h)&&(i=64),g=g+this.KEY_STR.charAt(d)+this.KEY_STR.charAt(e)+this.KEY_STR.charAt(f)+this.KEY_STR.charAt(i),b=c=h=\"\",d=e=f=i=\"\";while(j<a.length);return g},c.restore=function(a,b){a.match(\"data:image/jpeg;base64,\")&&(a=a.replace(\"data:image/jpeg;base64,\",\"\"));var c=this.decode64(a),d=this.slice2Segments(c),e=this.exifManipulation(b,d);return\"data:image/jpeg;base64,\"+this.encode64(e)},c.exifManipulation=function(a,b){var c=this.getExifArray(b),d=this.insertExif(a,c);return new Uint8Array(d)},c.getExifArray=function(a){for(var b,c=0;c<a.length;c++)if(b=a[c],255===b[0]&225===b[1])return b;return[]},c.insertExif=function(a,b){var c=a.replace(\"data:image/jpeg;base64,\",\"\"),d=this.decode64(c),e=d.indexOf(255,3),f=d.slice(0,e),g=d.slice(e),h=f;return h=h.concat(b),h=h.concat(g)},c.slice2Segments=function(a){for(var b=0,c=[];;){if(255===a[b]&218===a[b+1])break;if(255===a[b]&216===a[b+1])b+=2;else{var d=256*a[b+2]+a[b+3],e=b+d+2,f=a.slice(b,e);c.push(f),b=e}if(b>a.length)break}return c},c.decode64=function(a){var b,c,d,e,f,g=\"\",h=\"\",i=0,j=[],k=/[^A-Za-z0-9\\+\\/\\=]/g;k.exec(a)&&console.log(\"There were invalid base64 characters in the input text.\\nValid base64 characters are A-Z, a-z, 0-9, NaNExpect errors in decoding.\"),a=a.replace(/[^A-Za-z0-9\\+\\/\\=]/g,\"\");do d=this.KEY_STR.indexOf(a.charAt(i++)),e=this.KEY_STR.indexOf(a.charAt(i++)),f=this.KEY_STR.indexOf(a.charAt(i++)),h=this.KEY_STR.indexOf(a.charAt(i++)),b=d<<2|e>>4,c=(15&e)<<4|f>>2,g=(3&f)<<6|h,j.push(b),64!==f&&j.push(c),64!==h&&j.push(g),b=c=g=\"\",d=e=f=h=\"\";while(i<a.length);return j},c.restore(a,b)},e}]);","/**\r\n * _29010 - Cadastro de Workflow\r\n */\r\n'use strict';\r\n\r\nangular\r\n\t.module('app', [\r\n\t\t'vs-repeat', \r\n\t\t'gc-ajax',\r\n\t\t'gc-transform',\r\n\t\t'gc-form',\r\n\t\t'gc-find',\r\n\t\t'ngFileUpload'\r\n\t])\r\n;","\t\t\r\nangular\r\n\t.module('app')\r\n\t.service('WorkflowIndexService', WorkflowIndexService)\r\n\t.controller('WorkflowIndexController', WorkflowIndexController)\r\n\t.component('workflowIndex29010', {\r\n\t\ttemplateUrl: '/_29010/viewWorkflowIndex',\r\n\t\tcontroller: 'WorkflowIndexController'\r\n\t})\r\n;","\t\r\n\tWorkflowIndexService.$inject = ['$ajax', '$filter'];\r\n\r\n    function WorkflowIndexService($ajax, $filter) {\r\n\r\n    \t// MÉTODOS (REFERÊNCIAS)\r\n    \tthis.consultarWorkflow = consultarWorkflow;\r\n\r\n    \t// MÉTODOS\r\n    \t\r\n    \t/**\r\n    \t * Consultar workflow.\r\n    \t */\r\n\t    function consultarWorkflow(param) {\r\n\r\n\t\t\treturn $ajax.post('/_29010/consultarWorkflow', JSON.stringify(param), {contentType: 'application/json'});\r\n\t\t}\r\n\t}","\r\n\tWorkflowIndexController.$inject = ['WorkflowIndexService', 'TarefaService'];\r\n\r\n\tfunction WorkflowIndexController(WorkflowIndexService, TarefaService) {\r\n\r\n\t\tvar ctrl = this;\r\n\r\n\t\t// MÉTODOS (REFERÊNCIAS).\r\n\t\tctrl.consultarWorkflow \t= consultarWorkflow;\r\n\t\tctrl.exibirWorkflow \t= exibirWorkflow;\r\n\t\tctrl.ativarIncluir \t\t= ativarIncluir;\r\n\t\tctrl.limparCampo \t\t= limparCampo;\r\n\r\n\t\t// VARIÁVEIS\r\n\t\tctrl.tipoTela \t\t= 'incluir';\r\n\t\tctrl.filtro \t\t= {};\r\n\t\tctrl.workflow \t\t= [];\r\n\r\n\t\t// MÉTODOS\r\n\r\n\t\t/**\r\n\t\t * Consultar workflow.\r\n\t\t */\r\n\t\tfunction consultarWorkflow() {\r\n\r\n\t\t\tvar param = {\r\n\t\t\t\tSTATUS  : ctrl.filtro.status ? ctrl.filtro.status : null\r\n\t\t\t};\r\n\r\n\t\t\tWorkflowIndexService\r\n\t\t\t\t.consultarWorkflow(param)\r\n\t\t\t\t.then(function(response) {\r\n\t\t\t\t\tctrl.workflow = response;\r\n\t\t\t\t})\r\n\t\t\t;\r\n\r\n\t\t}\r\n\r\n\t\tfunction exibirWorkflow(workflow, gravarFechar) {\r\n\r\n\t\t\tvar tarefa = [];\r\n\r\n\t\t\tgravarFechar = (typeof gravarFechar == 'undefined') ? true : gravarFechar;\r\n\r\n\t\t\tif (gravarFechar)\r\n\t\t\t\tctrl.tipoTela = 'exibir';\r\n\r\n\t\t\tconsultarTarefa(workflow);\r\n\r\n\t\t\tfunction consultarTarefa(workflow) {\r\n\r\n\t\t\t\tvar param = {\r\n\t\t\t\t\t\tWORKFLOW_ID: workflow.ID\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\tTarefaService\r\n\t\t\t\t\t.consultarTarefa(param)\r\n\t\t\t\t\t.then(function(response) {\r\n\r\n\t\t\t\t\t\ttarefa = response;\r\n\t\t\t\t\t\tcarregarInfoGeral();\r\n\t\t\t\t\t\tcarregarTarefa();\r\n\r\n\t\t\t\t\t\tif (gravarFechar)\r\n\t\t\t\t\t\t\texibirModal();\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction carregarInfoGeral() {\r\n\r\n\t\t\t\tangular.copy(workflow, ctrl.infoGeral.infoGeral);\r\n\t\t\t}\r\n\r\n\t\t\tfunction carregarTarefa() {\r\n\r\n\t\t\t\tvar trf = {},\r\n\t\t\t\t\ttempoPrevistoDuration = null;\r\n\r\n\t\t\t\tfor (var i in tarefa.TAREFA) {\r\n\r\n\t\t\t\t\ttrf = tarefa.TAREFA[i];\r\n\r\n\t\t\t\t\ttempoPrevistoDuration \t\t= moment.duration(parseFloat(trf.TEMPO_PREVISTO), 'minutes');\r\n\r\n\t\t\t\t\ttrf.TEMPO_PREVISTO_HORA \t= moment.duration(tempoPrevistoDuration.days(), 'days').asHours();\t// dias em horas\r\n\t\t\t\t\ttrf.TEMPO_PREVISTO_HORA \t= moment\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.duration(trf.TEMPO_PREVISTO_HORA, 'hours')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.add(tempoPrevistoDuration.hours(), 'h')\t// add horas do tempo previsto\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.asHours();\r\n\r\n\t\t\t\t\ttrf.TEMPO_PREVISTO_MINUTO \t= tempoPrevistoDuration.minutes();\r\n\r\n\t\t\t\t\tverificarPontoRetorno(trf);\r\n\t\t\t\t\tcarregarTarefaDestinatario(trf);\r\n\t\t\t\t\tcarregarTarefaCampo(trf);\r\n\r\n\t\t\t\t\t// Caso não tenha nenhum arquivo, adiciona um vazio.\r\n\t\t\t\t\tif (trf.ARQUIVO.length == 0)\r\n\t\t\t\t\t\tctrl.tarefa.addArquivo(trf, false);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tctrl.tarefa.tarefa = tarefa.TAREFA;\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Verificar se a tarefa é um ponto de retorno de alguma outra tarefa que possa ser reprovada.\r\n\t\t\t\t */\r\n\t\t\t\tfunction verificarPontoRetorno(trf) {\r\n\r\n\t\t\t\t\tvar t = {};\r\n\r\n\t\t\t\t\tfor (var i in tarefa.TAREFA) {\r\n\r\n\t\t\t\t\t\tt = tarefa.TAREFA[i];\r\n\r\n\t\t\t\t\t\ttrf.EH_PONTO_RETORNO = 0;\r\n\r\n\t\t\t\t\t\tif (parseInt(t.PONTO_REPROVACAO) == parseInt(t.ORDEM)) {\r\n\r\n\t\t\t\t\t\t\ttrf.EH_PONTO_RETORNO = 1;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction carregarTarefaDestinatario(trf) {\r\n\r\n\t\t\t\t\tvar destin = {};\r\n\t\t\t\t\ttrf.DESTINATARIO = [];\r\n\r\n\t\t\t\t\tfor (var j in tarefa.DESTINATARIO) {\r\n\r\n\t\t\t\t\t\tdestin = tarefa.DESTINATARIO[j];\r\n\r\n\t\t\t\t\t\tif (trf.ID == destin.WORKFLOW_TAREFA_ID) {\r\n\t\t\t\t\t\t\ttrf.DESTINATARIO.push(destin);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction carregarTarefaCampo(trf) {\r\n\r\n\t\t\t\t\tvar campo = {};\r\n\t\t\t\t\ttrf.CAMPO = [];\r\n\r\n\t\t\t\t\tfor (var j in tarefa.CAMPO) {\r\n\r\n\t\t\t\t\t\tcampo = tarefa.CAMPO[j];\r\n\r\n\t\t\t\t\t\tif (trf.ID == campo.WORKFLOW_TAREFA_ID) {\r\n\t\t\t\t\t\t\ttrf.CAMPO.push(campo);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Caso não tenha nenhum campo, adiciona um vazio.\r\n\t\t\t\t\tif (trf.CAMPO.length == 0)\r\n\t\t\t\t\t\tctrl.tarefa.addCampo(trf, false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction exibirModal() {\r\n\r\n\t\t\t\t$('#modal-create').modal('show');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Ativar comportamento padrão da tela de Incluir.\r\n\t\t */\r\n\t\tfunction ativarIncluir() {\r\n\r\n\t\t\tctrl.tipoTela = 'incluir';\r\n\t\t\t$('#modal-create').modal('show');\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Limpar campos do modal.\r\n\t\t */\r\n\t\tfunction limparCampo() {\r\n\r\n\t\t\tctrl.infoGeral.infoGeral = {};\r\n\t\t\tctrl.infoGeral.STATUS \t = '1';\r\n\r\n\t\t\tctrl.tarefa.tarefa = [];\r\n\t\t\tctrl.tarefa.addTarefa();\r\n\t\t}\r\n\r\n\t}","\t\t\r\nangular\r\n\t.module('app')\r\n\t.service('WorkflowCreateService', WorkflowCreateService)\r\n\t.controller('WorkflowCreateController', WorkflowCreateController)\r\n\t.component('workflowCreate29010', {\r\n\t\ttemplateUrl: '/_29010/viewWorkflowCreate',\r\n\t\trequire: {\r\n\t\t\t'workflowIndex29010': '^workflowIndex29010'\r\n\t\t},\r\n\t\tbindings: {\r\n\t\t\tpermissaoMenu: '=',\r\n\t\t\ttipoTela: '='\r\n\t\t},\r\n\t\tcontroller: 'WorkflowCreateController'\r\n\t})\r\n;","\t\r\n\tWorkflowCreateService.$inject = ['$ajax', 'Upload'];\r\n\r\n    function WorkflowCreateService($ajax, Upload) {\r\n\r\n    \t// MÉTODOS (REFERÊNCIAS)\r\n        this.store   = store;\r\n        this.excluir = excluir;\r\n\r\n\r\n        // MÉTODOS\r\n\r\n        /**\r\n         * Gravar.\r\n         */\r\n        function store(param) {\r\n\r\n            $('.carregando-pagina').fadeIn(200);\r\n\r\n            var upload = Upload\r\n                            .upload({\r\n                                url : '/_29010/store', \r\n                                data: param\r\n                            });\r\n\r\n            upload\r\n                .finally(\r\n                    function(e) {\r\n                    \r\n                        $('.carregando-pagina').fadeOut(200);\r\n\r\n                        setTimeout(function() {\r\n                            $('.carregando-pagina .progress .progress-bar')\r\n                                .attr({'aria-valuenow': 0,'aria-valuemax': 0})\r\n                                .css('width', 0);\r\n                        }, 300);\r\n                    }\r\n                );\r\n\r\n            return upload;\r\n        }\r\n\r\n        /**\r\n         * Excluir.\r\n         */\r\n        function excluir(dados) {\r\n\r\n            return $ajax\r\n                    .post(\r\n                        '/_29010/excluir', \r\n                        JSON.stringify(dados), \r\n                        {contentType: 'application/json'}\r\n                    );\r\n        }\r\n\t}","\r\n\tWorkflowCreateController.$inject = ['WorkflowCreateService', '$scope'];\r\n\r\n\tfunction WorkflowCreateController(WorkflowCreateService, $scope) {\r\n\r\n\t\tvar ctrl = this;\r\n\r\n\t\t// MÉTODOS (REFERÊNCIAS).\r\n\t\tctrl.store\t \t  = store;\r\n\t\tctrl.excluir \t  = excluir;\r\n\t\tctrl.limparCampo  = limparCampo;\r\n\t\tctrl.fecharModal  = fecharModal;\r\n\r\n\t\t// VARIÁVEIS\r\n\t\tctrl.gravarFechar = false;\r\n\r\n\t\t// MÉTODOS\r\n\r\n\t\t/**\r\n\t\t * Gravar.\r\n\t\t */\r\n\t\tfunction store() {\r\n\r\n\t\t\tctrl.tarefa.tarefa = ctrl.tarefa.tarefa.sort(function(a, b) { return a.SEQUENCIA - b.SEQUENCIA || a.ID - b.ID });\r\n\r\n\t\t\tverificarCampoVazio();\r\n\t\t\tformataCampo();\r\n\r\n\t\t\tvar dados = {\r\n\t\t\t\t\tWORKFLOW: ctrl.infoGeral.infoGeral,\r\n\t\t\t\t\tTAREFA \t: ctrl.tarefa.tarefa\r\n\t\t\t\t};\r\n\r\n\t        WorkflowCreateService\r\n\t        \t.store(dados)\r\n\t\t        .then(\r\n\t\t        \tfunction(resp) {\r\n\t\t            \r\n\t\t\t            showSuccess('Gravado com sucesso.');\r\n\r\n\t\t\t            if (ctrl.gravarFechar == true) {\r\n\r\n\t\t\t            \tctrl.workflowIndex29010.consultarWorkflow();\r\n\t\t\t            \tctrl.fecharModal(false);\r\n\t\t\t            }\r\n\t\t\t            else {\r\n\t\t\t            \tctrl.workflowIndex29010.exibirWorkflow(resp.data, ctrl.gravarFechar);\r\n\t\t\t            }\r\n\t\t\t        }, \r\n\t\t\t        function(resp) {\r\n\r\n\t\t\t            showErro('Erro ao gravar ('+ resp.status +')'); \r\n\t\t\t        },\r\n                    function(e) {\r\n\r\n                        progressPagina(e);                  \r\n                    }\r\n                );\r\n\t\t\r\n\r\n\t\t    function verificarCampoVazio() {\r\n\r\n\t\t    \tvar msg  \t = '',\r\n\t\t    \t\terro \t = false,\r\n\t    \t\t\ttrf \t = {},\r\n\t    \t\t\ttrfIndex = '';\r\n\r\n\t    \t\tfor (var i in ctrl.tarefa.tarefa) {\r\n\r\n\t    \t\t\ttrf = ctrl.tarefa.tarefa[i];\r\n\r\n\t    \t\t\tif (trf.STATUS_EXCLUSAO == '1')\r\n\t\t    \t\t\tcontinue;\r\n\r\n\t    \t\t\ttrfIndex = (parseInt(i)+1).toString().padStart(3,'0');\r\n\r\n\t    \t\t\tif (typeof trf.TITULO == 'undefined' || trf.TITULO === '') {\r\n\r\n\t    \t\t\t\tmsg  = 'Digite um título para a tarefa '+ trfIndex +'.';\r\n\t    \t\t\t\terro = true;\r\n\t    \t\t\t}\r\n\t    \t\t\telse if (typeof trf.DESCRICAO == 'undefined' || trf.DESCRICAO === '') {\r\n\r\n\t    \t\t\t\tmsg  = 'Digite uma descrição para a tarefa '+ trfIndex +'.';\r\n\t    \t\t\t\terro = true;\r\n\t    \t\t\t}\r\n\t    \t\t\telse if (typeof trf.SEQUENCIA == 'undefined' || trf.SEQUENCIA === '') {\r\n\r\n\t    \t\t\t\tmsg  = 'Digite uma sequência para a tarefa '+ trfIndex +'.';\r\n\t    \t\t\t\terro = true;\r\n\t    \t\t\t}\r\n\t    \t\t\telse if (\r\n\t    \t\t\t\ttypeof trf.TEMPO_PREVISTO_HORA \t\t== 'undefined' || trf.TEMPO_PREVISTO_HORA \t\t=== '' &&\r\n\t    \t\t\t\ttypeof trf.TEMPO_PREVISTO_MINUTO \t== 'undefined' || trf.TEMPO_PREVISTO_MINUTO \t=== ''\r\n\t    \t\t\t) {\r\n\r\n\t    \t\t\t\tmsg  = 'Digite o tempo previsto para a tarefa '+ trfIndex +'.';\r\n\t    \t\t\t\terro = true;\r\n\t    \t\t\t}\r\n\r\n\r\n\t\t\t    \tif (erro) {\r\n\r\n\t\t\t    \t\t$('#tab-tarefa li:nth-of-type('+ (parseInt(i)+1) +') a').tab('show');\r\n\t\t\t    \t\tbreak;\r\n\t\t\t    \t}\r\n\t\t\t    }\r\n\r\n\t\t    \tif (erro) {\r\n\r\n\t\t\t    \tshowAlert(msg);\r\n\t\t\t    \tthrow msg;\r\n\t\t\t    }\r\n\t\t    }\r\n\r\n\t\t    function formataCampo() {\r\n\r\n\t\t    \tvar trf = {};\r\n\r\n\t    \t\tfor (var i in ctrl.tarefa.tarefa) {\r\n\r\n\t    \t\t\ttrf = ctrl.tarefa.tarefa[i];\r\n\r\n\t    \t\t\ttrf.TEMPO_PREVISTO_HORA \t= trf.TEMPO_PREVISTO_HORA \t\t? trf.TEMPO_PREVISTO_HORA \t\t: 0;\r\n\t    \t\t\ttrf.TEMPO_PREVISTO_MINUTO \t= trf.TEMPO_PREVISTO_MINUTO \t? trf.TEMPO_PREVISTO_MINUTO \t: 0;\r\n\t    \t\t\ttrf.TEMPO_PREVISTO_SEGUNDO \t= trf.TEMPO_PREVISTO_SEGUNDO \t? trf.TEMPO_PREVISTO_SEGUNDO \t: 0;\r\n\r\n\t    \t\t\t// 'Montar' campo tempo previsto\r\n\t    \t\t\ttrf.TEMPO_PREVISTO = trf.TEMPO_PREVISTO_HORA +':'+ trf.TEMPO_PREVISTO_MINUTO +':'+ trf.TEMPO_PREVISTO_SEGUNDO;\r\n\t    \t\t\ttrf.TEMPO_PREVISTO = moment.duration(trf.TEMPO_PREVISTO).asMinutes().toFixed(4);\r\n\t    \t\t}\r\n\t    \t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Excluir.\r\n\t\t */\r\n\t\tfunction excluir() {\r\n\r\n\t\t\tconfirmar();\r\n\r\n\t\t\tfunction confirmar() {\r\n\r\n\t\t\t\taddConfirme(\r\n\t\t\t\t\t'<h4>Confirmação</h4>',\r\n\t\t        \t'Confirma a exclusão?',\r\n\t\t        \t[obtn_sim, obtn_nao],\r\n\t\t        \t[\r\n\t\t            \t{\r\n\t\t            \t\tret: 1,\r\n\t\t            \t\tfunc: function() {\r\n\r\n\t\t            \t\t\tefetivar();\r\n\t\t            \t\t}\r\n\t\t            \t},\r\n\t\t            \t{\r\n\t\t            \t\tret: 2,\r\n\t\t            \t\tfunc: function() {}\r\n\t\t            \t}\r\n\t\t        \t]\r\n\t\t        );\r\n\t\t\t}\r\n\r\n\t\t\tfunction efetivar() {\r\n\t\t\t\r\n\t\t\t\tvar param = {\r\n\t\t\t\t\t\tWORKFLOW_ID\t: ctrl.infoGeral.infoGeral.ID,\r\n\t\t\t\t\t\tTAREFA \t\t: ctrl.tarefa.tarefa\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\tWorkflowCreateService\r\n\t\t\t\t\t.excluir(param)\r\n\t\t\t\t\t.then(function(response) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tshowSuccess('Excluído com sucesso.');\r\n\t\t\t\t\t\tctrl.workflowIndex29010.consultarWorkflow();\r\n\t\t\t\t\t\tctrl.fecharModal();\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Limpar campos.\r\n\t\t */\r\n\t\tfunction limparCampo() {\r\n\r\n\t\t\tsetTimeout(function() {\t\t// para aplicar scope.apply\r\n\r\n\t\t\t\tctrl.infoGeral.infoGeral \t\t= {};\r\n\t\t\t\tctrl.infoGeral.infoGeral.STATUS = '1';\r\n\r\n\t\t\t\tctrl.tarefa.tarefa = [];\r\n\t\t\t\tctrl.tarefa.addTarefa();\r\n\r\n\t\t\t\tctrl.tarefa.excluirArquivoTmpPorUsuario();\r\n\r\n\t\t\t\t$scope.$apply();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Fechar modal.\r\n\t\t */\r\n\t\tfunction fecharModal(confirmar) {\r\n\r\n\t\t\tif (typeof confirmar == 'undefined')\t\t\t\t\t\r\n\t\t\t\tconfirmar = (ctrl.tipoTela == 'exibir') ? false : true;\r\n\r\n\t\t\tif (confirmar && verificarCampoAlterado()) {\r\n\r\n\t\t\t\taddConfirme(\r\n\t\t\t\t\t'<h4>Confirmação</h4>',\r\n\t\t        \t'Os dados serão perdidos. Deseja continuar?',\r\n\t\t        \t[obtn_sim, obtn_nao],\r\n\t\t        \t[\r\n\t\t            \t{\r\n\t\t            \t\tret: 1,\r\n\t\t            \t\tfunc: function() {\r\n\r\n\t            \t\t\t\tfechar();\r\n\t            \t\t\t\tctrl.limparCampo();\r\n\t\t            \t\t}\r\n\t\t            \t},\r\n\t\t            \t{\r\n\t\t            \t\tret: 2,\r\n\t\t            \t\tfunc: function() {}\r\n\t\t            \t}\r\n\t\t        \t]\r\n\t\t        );\r\n\t\t\t}\r\n\t\t\telse {\r\n\r\n\t\t\t\tfechar();\r\n\t\t\t\tctrl.limparCampo();\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Verificar se algum campo foi alterado.\r\n\t\t\t */\r\n\t\t\tfunction verificarCampoAlterado() {\r\n\r\n\t\t\t\tvar ret \t\t= false,\r\n\t\t\t\t\tinfoGeral \t= ctrl.infoGeral.infoGeral,\r\n\t\t\t\t\ttarefa \t\t= ctrl.tarefa.tarefa;\r\n\r\n\t\t\t\tif ( (infoGeral.TITULO !== undefined && infoGeral.TITULO !== '')\r\n\t\t\t\t \t|| (infoGeral.DESCRICAO !== undefined && infoGeral.DESCRICAO !== '') ) {\r\n\t\t\t\t\tret = true;\r\n\t\t\t\t}\r\n\t\t\t\telse if (tarefa.length > 0) {\r\n\r\n\t\t\t\t\tvar trf = {};\r\n\r\n\t\t\t\t\tfor (var i in tarefa) {\r\n\r\n\t\t\t\t\t\ttrf = tarefa[i];\r\n\r\n\t\t\t\t\t\tif ( (trf.TITULO !== undefined && trf.TITULO !== '') \r\n\t\t\t\t\t\t\t|| (trf.DESCRICAO !== undefined && trf.DESCRICAO !== '') \r\n\t\t\t\t\t\t\t|| (trf.DESTINATARIO.length > 0) )\r\n\t\t\t\t\t\t\tret = true;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn ret;\r\n\t\t\t}\r\n\r\n\t\t\tfunction fechar() {\r\n\t\t\t\r\n\t\t\t\t$('#modal-create')\r\n\t\t\t\t\t.modal('hide')\r\n\t\t\t\t\t.find('.modal-body')\r\n\t\t\t\t\t.animate({ scrollTop: 0 }, 'fast')\r\n\t\t\t\t;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}","\t\t\r\nangular\r\n\t.module('app')\r\n\t//.service('InfoGeralService', InfoGeralService)\r\n\t.controller('InfoGeralController', InfoGeralController)\r\n\t.component('infoGeral29010', {\r\n\t\ttemplateUrl: '/_29010/viewInfoGeral',\r\n\t\trequire: {\r\n\t\t\tworkflowIndex29010: '^workflowIndex29010',\r\n\t\t\tworkflowCreate29010: '^workflowCreate29010'\r\n\t\t},\r\n\t\tbindings: {\r\n\t\t\ttipoTela: '='\r\n\t\t},\r\n\t\tcontroller: 'InfoGeralController'\r\n\t})\r\n;","\r\n\tInfoGeralController.$inject = ['Historico', '$scope'];\r\n\r\n\tfunction InfoGeralController(Historico, $scope) {\r\n\r\n\t\tvar ctrl = this;\r\n\r\n\t\t// Métodos iniciados ao carregar página.\r\n\t\tctrl.$onInit = function() {\r\n\r\n\t\t\tctrl.workflowIndex29010.infoGeral  = this;\r\n\t\t\tctrl.workflowCreate29010.infoGeral = this;\r\n\t\t};\r\n\r\n\t\t// VARIÁVEIS\r\n\t\tctrl.infoGeral \t\t\t= {};\r\n\t\tctrl.infoGeral.STATUS \t= '1';\r\n\t\tctrl.Historico \t\t\t= new Historico('$ctrl.Historico', $scope);\r\n\t}","\t\t\r\nangular\r\n\t.module('app')\r\n\t.service('TarefaService', TarefaService)\r\n\t.controller('TarefaController', TarefaController)\r\n\t.component('tarefa29010', {\r\n\t\ttemplateUrl: '/_29010/viewTarefa',\r\n\t\trequire: {\r\n\t\t\tworkflowIndex29010: '^workflowIndex29010',\r\n\t\t\tworkflowCreate29010: '^workflowCreate29010'\r\n\t\t},\r\n\t\tbindings: {\r\n\t\t\ttipoTela: '='\r\n\t\t},\r\n\t\tcontroller: 'TarefaController'\r\n\t})\r\n;","\r\n\tTarefaService.$inject = ['$ajax', '$filter'];\r\n\r\n    function TarefaService($ajax, $filter) {\r\n\r\n    \t// MÉTODOS (REFERÊNCIAS)\r\n        this.consultarUsuario            = consultarUsuario;\r\n    \tthis.consultarTarefa             = consultarTarefa;\r\n        this.excluirArquivoTmpPorUsuario = excluirArquivoTmpPorUsuario;\r\n        this.gravarEmailUsuario          = gravarEmailUsuario;\r\n\r\n    \t// MÉTODOS\r\n    \t\r\n    \t/**\r\n    \t * Consultar usuário.\r\n    \t */\r\n\t    function consultarUsuario() {\r\n\r\n\t    \treturn $ajax.post('/_11010/listarTodos', null, {contentType: 'application/json'});\r\n\t\t}\r\n\r\n        /**\r\n         * Consultar tarefa.\r\n         */\r\n        function consultarTarefa(param) {\r\n\r\n            return $ajax.post('/_29010/consultarTarefa', JSON.stringify(param), {contentType: 'application/json'});\r\n        }\r\n\r\n        /**\r\n         * Excluir arquivos da pasta temporária (por usuário).\r\n         */\r\n        function excluirArquivoTmpPorUsuario(param) {\r\n\r\n            return $ajax.post('/excluirArquivoTmpPorUsuario', JSON.stringify(param), {contentType: 'application/json'});\r\n        }\r\n\r\n        /**\r\n         * Gravar email do usuário.\r\n         */\r\n        function gravarEmailUsuario(param) {\r\n\r\n            return $ajax.post('/_29010/gravarEmailUsuario', JSON.stringify(param), {contentType: 'application/json'});\r\n        }\r\n\t}","\t\r\n\tTarefaController.$inject = ['TarefaService', '$scope'];\r\n\r\n\tfunction TarefaController(TarefaService, $scope) {\r\n\r\n\t\tvar ctrl = this;\r\n\r\n\t\t// MÉTODOS (REFERÊNCIAS)\r\n\r\n\t\tctrl.addTarefa \t\t\t\t\t\t\t= addTarefa;\r\n\t\tctrl.replicarTarefa \t\t\t\t\t= replicarTarefa;\r\n\t\tctrl.excluirTarefa \t\t\t\t\t\t= excluirTarefa;\r\n\t\tctrl.verificarPontoRetorno \t\t\t\t= verificarPontoRetorno;\r\n\t\tctrl.exibirModalOrdenar\t\t\t\t\t= exibirModalOrdenar;\r\n\t\tctrl.focoInputOrdenar\t\t\t\t\t= focoInputOrdenar;\r\n\t\tctrl.fecharModalOrdenar\t\t\t\t\t= fecharModalOrdenar;\r\n\t\tctrl.eventoInputOrdenar \t\t\t\t= eventoInputOrdenar;\r\n\t\tctrl.reordenarSequencia \t\t\t\t= reordenarSequencia;\r\n\t\tctrl.confirmarOrdenacao \t\t\t\t= confirmarOrdenacao;\r\n\t\tctrl.addArquivo \t\t\t\t\t\t= addArquivo;\r\n\t\tctrl.processarArquivo \t\t\t\t\t= processarArquivo;\r\n\t\tctrl.excluirArquivo \t\t \t\t\t= excluirArquivo;\r\n\t\tctrl.excluirArquivoTmpPorUsuario\t\t= excluirArquivoTmpPorUsuario;\r\n\t\tctrl.addCampo \t\t\t\t\t\t\t= addCampo;\r\n\t\tctrl.excluirCampo \t\t\t\t\t\t= excluirCampo;\r\n\t\tctrl.listarUsuario \t\t\t\t\t\t= listarUsuario;\r\n\t\tctrl.incluirDestinatario \t\t\t\t= incluirDestinatario;\r\n\t\tctrl.selecionarUsuario \t\t\t\t\t= selecionarUsuario;\r\n\t\tctrl.verificarDestinatarioExiste \t\t= verificarDestinatarioExiste;\r\n\t\tctrl.selecionarDestinatarioEscolhido\t= selecionarDestinatarioEscolhido;\r\n\t\tctrl.excluirDestinatarioEscolhido \t\t= excluirDestinatarioEscolhido;\r\n\t\tctrl.fecharModalPesqUsuario \t\t\t= fecharModalPesqUsuario;\r\n\t\tctrl.alterarEmailUsuario \t\t\t\t= alterarEmailUsuario;\r\n\t\tctrl.gravarEmailUsuario \t\t\t\t= gravarEmailUsuario;\r\n\t\tctrl.cancelarAlterarEmailUsuario \t\t= cancelarAlterarEmailUsuario;\r\n\t\tctrl.fecharModalAlterarEmailUsuario \t= fecharModalAlterarEmailUsuario;\r\n\r\n\t\t\r\n\t\t// VARIÁVEIS\r\n\r\n\t\tctrl.tarefa \t\t= [];\r\n\t\tctrl.tarefaAtual \t= {};\r\n\r\n\t\tctrl.tarefaPadrao \t= {\r\n\r\n\t\t\tSEQUENCIA\t\t: 1,\r\n\t\t\tSTATUS \t\t\t: 1,\r\n\t\t\tDESCRICAO \t\t: '',\r\n\t\t\tTEMPO_TIPO_ID \t: 1,\r\n\t\t\tPONTO_REPROVACAO: '',\r\n\r\n\t\t\tDESTINATARIO \t\t: [],\r\n\t\t\tDESTINATARIO_SELEC \t: [], \t// para manipulação na view\r\n\r\n\t\t\tCAMPO: [{\r\n\t\t\t\tROTULO\t: null,\r\n\t\t\t\tTIPO\t: '1'\r\n\t\t\t}],\r\n\r\n\t\t\tARQUIVO: [{\r\n\t\t\t\tNOME \t: null,\r\n\t\t\t\tTABELA \t: null,\r\n\t\t\t\tTIPO \t: null,\r\n\t\t\t\tTAMANHO\t: null,\r\n\t\t\t\tBINARIO\t: null,\r\n\t\t\t\tCONTEUDO: null\r\n\t\t\t}],\r\n\r\n\t\t\tARQUIVO_EXCLUIR: []\r\n\t\t};\r\n\r\n\t\tctrl.campoPadrao = {\r\n\t\t\tROTULO\t: null,\r\n\t\t\tTIPO\t: '1'\r\n\t\t};\r\n\r\n\t\tctrl.arquivoPadrao = {\r\n\t\t\tNOME \t: null,\r\n\t\t\tTABELA \t: null,\r\n\t\t\tTIPO \t: null,\r\n\t\t\tTAMANHO\t: null,\r\n\t\t\tBINARIO\t: null,\r\n\t\t\tCONTEUDO: null\r\n\t\t};\r\n\r\n\t\tctrl.listaUsuario = [];\r\n\r\n\t\tctrl.emailUsuario = {\r\n\t\t\tNOME : null,\r\n\t\t\tEMAIL: null\r\n\t\t};\r\n\r\n\t\tctrl.emailUsuarioBKP = {};\r\n\r\n\t\tvar ordenar = true;\r\n\r\n\r\n\t\t// Métodos iniciados ao carregar página.\r\n\t\tctrl.$onInit = function() {\r\n\r\n\t\t\tctrl.workflowIndex29010.tarefa  = this;\r\n\t\t\tctrl.workflowCreate29010.tarefa = this;\r\n\t\t\tctrl.addTarefa();\r\n\t\t};\r\n\r\n\t\t\r\n\t\t// MÉTODOS\r\n\r\n\t\tfunction addTarefa() {\r\n\r\n\t\t\tvar tarefaNova = {},\r\n\t\t\t\ttarefaOrd  = [];\r\n\r\n\t\t\tangular.copy(ctrl.tarefaPadrao, tarefaNova);\r\n\r\n\t\t\ttarefaOrd = ctrl.tarefa.sort(function(a, b) { return a.SEQUENCIA - b.SEQUENCIA || a.ID - b.ID });\r\n\t\t\t\r\n\t\t\ttarefaNova.SEQUENCIA = (ctrl.tarefa.length == 0) ? 1 : tarefaOrd[tarefaOrd.length-1].SEQUENCIA+1;\r\n\t\t\ttarefaNova.ORDEM \t = ctrl.tarefa.length+1;\r\n\r\n\t\t\tctrl.tarefa.push(tarefaNova);\r\n\r\n\t\t\t// Foco na última tarefa.\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\t$('#tab-tarefa').scrollLeft( $('#tab-tarefa')[0].scrollWidth );\r\n\t\t\t\t$('#tab-tarefa a:last').tab('show');\r\n\t\t\t}, 100);\r\n\t\t}\r\n\r\n\t\tfunction replicarTarefa(tarefa) {\r\n\r\n\t\t\tvar tarefaNova  \t= {},\r\n\t\t\t\tdestin \t\t\t= {},\r\n\t\t\t\tcampo \t\t\t= {},\r\n\t\t\t\tarquivoNovo \t= {},\r\n\t\t\t\texistiaArquivo \t= false;\r\n\t\t\t\r\n\t\t\tangular.copy(tarefa, tarefaNova);\r\n\r\n\t\t\t// Tratamento na tarefa replicada.\r\n\t\t\tdelete tarefaNova.ID;\r\n\t\t\tdelete tarefaNova.WORKFLOW_ID;\r\n\t\t\tdelete tarefaNova.STATUSEXCLUSAO;\t\t\t\r\n\t\t\ttarefaNova.SEQUENCIA = ctrl.tarefa[ctrl.tarefa.length-1].SEQUENCIA+1;\r\n\t\t\ttarefaNova.ORDEM \t = ctrl.tarefa.length+1;\r\n\r\n\t\t\t// Tratamento nos destinatários.\r\n\t\t\tfor (var i in tarefaNova.DESTINATARIO) {\r\n\r\n\t\t\t\tdestin = tarefaNova.DESTINATARIO[i];\r\n\t\t\t\tdelete destin.ID;\r\n\t\t\t\tdelete destin.WORKFLOW_ID;\r\n\t\t\t\tdelete destin.WORKFLOW_TAREFA_ID;\r\n\t\t\t\tdelete destin.STATUSEXCLUSAO;\r\n\t\t\t}\r\n\r\n\t\t\t// Tratamento nos campos.\r\n\t\t\tfor (var i in tarefaNova.CAMPO) {\r\n\r\n\t\t\t\tcampo = tarefaNova.CAMPO[i];\r\n\t\t\t\tdelete campo.ID;\r\n\t\t\t\tdelete campo.WORKFLOW_ID;\r\n\t\t\t\tdelete campo.WORKFLOW_TAREFA_ID;\r\n\t\t\t\tdelete campo.STATUSEXCLUSAO;\r\n\t\t\t}\r\n\r\n\t\t\t// Tratamento nos arquivos.\r\n\t\t\texistiaArquivo = (tarefaNova.ARQUIVO[0].BINARIO == null) ? false : true;\r\n\r\n\t\t\tangular.copy(ctrl.arquivoPadrao, arquivoNovo);\r\n\r\n\t\t\ttarefaNova.ARQUIVO = [];\r\n\t\t\ttarefaNova.ARQUIVO.push(arquivoNovo);\r\n\r\n\t\t\t// Insere tarefa replicada.\r\n\t\t\tctrl.tarefa.push(tarefaNova);\r\n\r\n\t\t\t// Foco na última tarefa.\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\t$('#tab-tarefa').scrollLeft( $('#tab-tarefa')[0].scrollWidth );\r\n\t\t\t\t$('#tab-tarefa a:last').tab('show');\r\n\t\t\t}, 100);\r\n\r\n\t\t\tif (existiaArquivo)\r\n\t\t\t\tshowAlert('Por favor, insira novamente os arquivos, pois eles não podem ser replicados para a nova tarefa.');\r\n\t\t}\r\n\r\n\t\tfunction excluirTarefa(tarefa) {\r\n\r\n\t\t\tif (ctrl.tarefa.length > 1) {\r\n\r\n\t\t\t\t// Excluir destinatários da tarefa.\r\n\t\t\t\tfor (var i in tarefa.DESTINATARIO) {\r\n\r\n\t\t\t\t\t// Só adiciona para excluir do banco de dados se o destinatário tiver ID, ou seja, já está gravado no banco.\r\n\t\t\t\t\tif (tarefa.DESTINATARIO[i].ID > 0)\r\n\t\t\t\t\t\ttarefa.DESTINATARIO[i].STATUSEXCLUSAO = '1';\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Excluir arquivos da tarefa.\r\n\t\t\t\tfor (var i in tarefa.ARQUIVO) {\r\n\r\n\t\t\t\t\t// Só adiciona para excluir do banco de dados se o arquivo tiver ID, ou seja, já está gravado no banco.\r\n\t\t\t\t\tif (tarefa.ARQUIVO[i].ID > 0) {\r\n\r\n\t\t\t\t\t\ttarefa.ARQUIVO_EXCLUIR = (typeof tarefa.ARQUIVO_EXCLUIR != 'undefined') ? tarefa.ARQUIVO_EXCLUIR : [];\r\n\t\t\t\t\t\ttarefa.ARQUIVO_EXCLUIR.push(tarefa.ARQUIVO[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\t// Excluir tarefa.\r\n\t\t\t\tif (tarefa.ID > 0)\r\n\t\t\t\t\ttarefa.STATUSEXCLUSAO = '1';\r\n\t\t\t\telse\r\n\t\t\t\t\tctrl.tarefa.splice(ctrl.tarefa.indexOf(tarefa), 1);\r\n\r\n\t\t\t\tctrl.verificarPontoRetorno();\r\n\r\n\t\t\t\t// Foco na última tarefa.\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t$('#tab-tarefa').scrollLeft( $('#tab-tarefa')[0].scrollWidth );\r\n\t\t\t\t\t$('#tab-tarefa a:last').tab('show');\r\n\t\t\t\t}, 100);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Verificar se a tarefa é um ponto de retorno de alguma outra tarefa que possa ser reprovada.\r\n\t\t */\r\n\t\tfunction verificarPontoRetorno() {\r\n\r\n\t\t\tvar trf = {},\r\n\t\t\t\tt \t= {};\r\n\r\n\t\t\tfor (var i in ctrl.tarefa) {\r\n\r\n\t\t\t\ttrf = ctrl.tarefa[i];\r\n\r\n\t\t\t\tif (trf.STATUSEXCLUSAO != '1') {\r\n\r\n\t\t\t\t\tfor (var j in ctrl.tarefa) {\r\n\r\n\t\t\t\t\t\tt = ctrl.tarefa[j];\r\n\t\t\t\t\t\ttrf.EH_PONTO_RETORNO = 0;\r\n\r\n\t\t\t\t\t\tif ( (t.STATUSEXCLUSAO != '1') && (parseInt(t.PONTO_REPROVACAO) == parseInt(t.ORDEM)) ) {\r\n\r\n\t\t\t\t\t\t\ttrf.EH_PONTO_RETORNO = 1;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction exibirModalOrdenar(tarefa) {\r\n\r\n\t\t\tvar trf = null;\r\n\r\n\t\t\tfor (var i in ctrl.tarefa) {\r\n\r\n\t\t\t\ttrf = ctrl.tarefa[i];\r\n\r\n\t\t\t\ttrf.SEQUENCIA_TMP = trf.SEQUENCIA;\r\n\t\t\t}\r\n\r\n\t\t\t$('#modal-ordenar').modal('show');\r\n\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tctrl.focoInputOrdenar(tarefa);\r\n\t\t\t}, 500);\r\n\t\t}\r\n\r\n\t\tfunction focoInputOrdenar(tarefa) {\r\n\r\n\t\t\t$('#modal-ordenar .list-group .list-group-item.list-tarefa-'+tarefa.ID)\r\n\t\t\t\t.find('.input-reordenar-sequencia')\r\n\t\t\t\t.focus();\r\n\t\t}\r\n\r\n\t\tfunction fecharModalOrdenar() {\r\n\r\n\t\t\tctrl.confirmarOrdenacao();\r\n\r\n\t\t\t$('#modal-ordenar')\r\n\t\t\t\t.modal('hide')\r\n\t\t\t\t.find('.modal-body')\r\n\t\t\t\t.animate({ scrollTop: 0 }, 'fast');\r\n\t\t}\r\n\r\n\t\tfunction eventoInputOrdenar(event, tarefa) {\r\n\r\n\t\t\t// enter, up, down\r\n\t\t\tif (event.keyCode !== 13 && event.keyCode !== 38 && event.keyCode !== 40)\t\t\t\r\n\t\t\t\tordenar = false;\r\n\t\t\telse {\r\n\t\t\t\tordenar = true;\r\n\r\n\t\t\t\t// enter\r\n\t\t\t\tif (event.keyCode === 13) {\r\n\r\n\t\t\t\t\tctrl.confirmarOrdenacao();\r\n\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tctrl.focoInputOrdenar(tarefa);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Reordenar sequência das tarefas após alterar uma delas.\r\n\t\t */\r\n\t\tfunction reordenarSequencia(tarefa, oldSequencia) {\r\n\r\n\t\t\tif (ordenar == false)\r\n\t\t\t\treturn false;\r\n\r\n\t\t\tvar trf = {};\r\n\r\n\t\t\ttarefa.SEQUENCIA_TMP = parseInt(tarefa.SEQUENCIA_TMP);\r\n\t\t\toldSequencia \t \t = parseInt(oldSequencia);\r\n\r\n\t\t\tfor (var i in ctrl.tarefa) {\r\n\r\n\t\t\t\ttrf = ctrl.tarefa[i];\r\n\r\n\t\t\t\tif ((trf.STATUSEXCLUSAO != '1') && (trf.ID != tarefa.ID)) {\r\n\r\n\t\t\t\t\tif (tarefa.SEQUENCIA_TMP < oldSequencia) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// Ajuste para as tarefas seguintes à posição inicial da tarefa alterada\r\n\t\t\t\t\t\t// para que não pule uma sequência, deixando vazia.\r\n\t\t\t\t\t\tif (trf.SEQUENCIA_TMP >= (oldSequencia+1))\r\n\t\t\t\t\t\t\ttrf.SEQUENCIA_TMP = (trf.SEQUENCIA_TMP === 1) ? trf.SEQUENCIA_TMP : trf.SEQUENCIA_TMP-1;\r\n\r\n\t\t\t\t\t\tif (trf.SEQUENCIA_TMP >= tarefa.SEQUENCIA_TMP)\r\n\t\t\t\t\t\t\ttrf.SEQUENCIA_TMP++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\r\n\t\t\t\t\t\t// Ajuste para as tarefas anteriores à posição inicial da tarefa alterada\r\n\t\t\t\t\t\t// para que não pule uma sequência, deixando vazia.\r\n\t\t\t\t\t\tif (trf.SEQUENCIA_TMP <= (oldSequencia-1))\r\n\t\t\t\t\t\t\ttrf.SEQUENCIA_TMP++;\r\n\r\n\t\t\t\t\t\tif (trf.SEQUENCIA_TMP <= tarefa.SEQUENCIA_TMP)\r\n\t\t\t\t\t\t\ttrf.SEQUENCIA_TMP = (trf.SEQUENCIA_TMP === 1) ? trf.SEQUENCIA_TMP : trf.SEQUENCIA_TMP-1;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tctrl.confirmarOrdenacao();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// foco no input de sequência\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tctrl.focoInputOrdenar(tarefa);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction confirmarOrdenacao() {\r\n\r\n\t\t\tsetTimeout(function() {\r\n\r\n\t\t\t\tvar trf = null;\r\n\r\n\t\t\t\tfor (var i in ctrl.tarefa) {\r\n\r\n\t\t\t\t\ttrf = ctrl.tarefa[i];\r\n\r\n\t\t\t\t\t// passa nova ordenação para a tarefa (abas).\r\n\t\t\t\t\ttrf.SEQUENCIA = trf.SEQUENCIA_TMP;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$scope.$apply();\r\n\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction addArquivo(tarefa, focar) {\r\n\r\n\t\t\tfocar = (typeof focar == 'undefined') ? true : focar;\r\n\r\n\t\t\tvar arquivoNovo = {};\r\n\t\t\tangular.copy(ctrl.arquivoPadrao, arquivoNovo);\r\n\t\t\ttarefa.ARQUIVO.push(arquivoNovo);\r\n\r\n\t\t\tif (focar) {\r\n\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t$('.arquivo-container .scroll .form-group:last-of-type input').focus();\r\n\t\t\t\t}, 100);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction processarArquivo(event, arquivo) {\r\n\r\n\t\t\tarquivo.NOME \t = event.target.files[0].name;\r\n\t\t\tarquivo.TABELA \t = 'TBWORKFLOW_TAREFA';\r\n\t\t\tarquivo.TIPO \t = event.target.files[0].type;\r\n\t\t\tarquivo.TAMANHO\t = event.target.files[0].size;\r\n\t\t}\r\n\r\n\t\tfunction excluirArquivo(tarefa, arquivo) {\r\n\r\n\t\t\tvar indexArq = tarefa.ARQUIVO.indexOf(arquivo);\r\n\r\n\t\t\t// Só adiciona para excluir do banco de dados se o arquivo tiver ID, ou seja, já está gravado no banco.\r\n\t\t\tif (arquivo.ID > 0) {\r\n\r\n\t\t\t\ttarefa.ARQUIVO_EXCLUIR = (typeof tarefa.ARQUIVO_EXCLUIR != 'undefined') ? tarefa.ARQUIVO_EXCLUIR : [];\r\n\t\t\t\ttarefa.ARQUIVO_EXCLUIR.push(arquivo);\r\n\t\t\t}\r\n\r\n\t\t\ttarefa.ARQUIVO.splice(indexArq, 1);\r\n\r\n\t\t\t// Adiciona um arquivo vazio se não tiver mais nenhum outro.\r\n\t\t\tif (tarefa.ARQUIVO.length == 0)\r\n\t\t\t\tctrl.addArquivo(tarefa);\r\n\t\t}\r\n\r\n\t\tfunction excluirArquivoTmpPorUsuario() {\r\n\r\n\t\t\tvar param = {\r\n\t\t\t\tDIRETORIO: 'workflowTarefa'\r\n\t\t\t};\r\n\r\n\t\t\tTarefaService.excluirArquivoTmpPorUsuario(param);\r\n\t\t}\r\n\r\n\t\tfunction addCampo(tarefa, focar) {\r\n\r\n\t\t\tfocar = (typeof focar == 'undefined') ? true : focar;\r\n\r\n\t\t\tvar campoNovo = {};\r\n\t\t\tangular.copy(ctrl.campoPadrao, campoNovo);\r\n\t\t\ttarefa.CAMPO.push(campoNovo);\r\n\r\n\t\t\tif (focar) {\r\n\t\t\t\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t$('.campo-container .scroll > div:last-of-type .form-group:first-child input').focus();\r\n\t\t\t\t}, 100);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction excluirCampo(tarefa, campo) {\r\n\r\n\t\t\t// Só exclui do banco de dados se o campo tiver ID, ou seja, já está gravado no banco.\r\n\t\t\tif (campo.ID > 0) {\r\n\r\n\t\t\t\tcampo.STATUSEXCLUSAO = '1';\r\n\t\t\t\ttarefa.existeCampoParaExcluir = true;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\ttarefa.CAMPO.splice(tarefa.CAMPO.indexOf(campo), 1);\r\n\r\n\t\t\t// Adiciona um campo vazio se não tiver mais nenhum outro.\r\n\t\t\tif (tarefa.CAMPO.length == 0) {\r\n\t\t\t\tctrl.addCampo(tarefa);\r\n\t\t\t}\r\n\t\t\telse {\r\n\r\n\t\t\t\tvar possuiCampo = false;\r\n\r\n\t\t\t\tfor(var i in tarefa.CAMPO)\r\n\t\t\t\t\tif (tarefa.CAMPO[i].STATUSEXCLUSAO == 0)\r\n\t\t\t\t\t\tpossuiCampo = true;\r\n\r\n\t\t\t\tif (possuiCampo == false)\r\n\t\t\t\t\tctrl.addCampo(tarefa);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction listarUsuario() {\r\n\r\n\t\t\tTarefaService\r\n\t\t\t\t.consultarUsuario()\r\n\t\t\t\t.then(function(response) {\r\n\r\n\t\t\t\t\tctrl.listaUsuario = response;\r\n\t\t\t\t})\r\n\t\t\t;\r\n\t\t}\r\n\r\n\t\tfunction incluirDestinatario(tarefa) {\r\n\r\n\t\t\tif (ctrl.listaUsuario.length == 0)\r\n\t\t\t\tctrl.listarUsuario();\r\n\r\n\t\t\tctrl.tarefaAtual = tarefa;\r\n\r\n\t\t\tsetTimeout(function() {\r\n\r\n\t\t\t\t// Fix para vs-repeat.\r\n\t\t\t\t$('.table-container-usuario')\r\n\t\t\t\t\t.trigger('resize')\r\n\t\t\t\t\t.scrollTop(0);\r\n\r\n\t\t\t\t// Foco no input de filtrar.\r\n\t\t\t\t$('#input-filtrar-usuario').select();\r\n\r\n\t\t\t}, 500);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Selecionar usuário (modal).\r\n\t\t */\r\n\t\tfunction selecionarUsuario(usuario, $event) {\r\n\r\n\t\t\tvar usuarioJaSelec = (ctrl.verificarDestinatarioExiste(usuario) > -1) ? true : false;\r\n\r\n\t\t\t// Não desmarcar caso o checkbox seja clicado e o usuário já esteja selecionado.\r\n\t\t\tif ( $($event.target).hasClass('chk-selec-usuario') && usuarioJaSelec ) {\r\n\r\n\t\t\t\t$event.preventDefault();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t// Não desmarcar caso o usuário já esteja selecionado.\r\n\t\t\telse if (usuarioJaSelec) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tvar indexDestin  = ctrl.tarefaAtual.DESTINATARIO.indexOf(usuario),\r\n\t\t\t\tdestinatario = {};\r\n\r\n\t\t\tif (indexDestin > -1) {\r\n\t\t\t\tctrl.tarefaAtual.DESTINATARIO.splice(indexDestin, 1);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tdestinatario.USUARIO_ID = usuario.ID;\r\n\t\t\t\tdestinatario.USUARIO \t= usuario.USUARIO;\r\n\t\t\t\tdestinatario.NOME \t\t= usuario.NOME;\r\n\t\t\t\tdestinatario.SETOR \t\t= usuario.SETOR;\r\n\t\t\t\tdestinatario.EMAIL \t\t= usuario.EMAIL;\r\n\r\n\t\t\t\tctrl.tarefaAtual.DESTINATARIO.push(destinatario);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t     * Verificar se o destinatário já foi selecionado.\r\n\t     */\r\n\t    function verificarDestinatarioExiste(usuario) { \r\n\r\n\t    \tvar ret = ctrl.tarefaAtual.DESTINATARIO\r\n\t\t\t    \t\t.map(function(item) { return (item.STATUSEXCLUSAO == '1') ? null : parseInt(item.USUARIO_ID); })\r\n\t\t\t    \t\t.indexOf(parseInt(usuario.ID));\r\n\r\n\t    \treturn ret;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Selecionar destinatários escolhidos.\r\n\t\t */\r\n\t\tfunction selecionarDestinatarioEscolhido(tarefa, destinatario) {\r\n\r\n\t\t\tif (typeof tarefa.DESTINATARIO_SELEC == 'undefined')\r\n\t\t\t\ttarefa.DESTINATARIO_SELEC = [];\r\n\r\n\t\t\tvar indexDestin = tarefa.DESTINATARIO_SELEC.indexOf(destinatario);\r\n\r\n\t\t\tif (indexDestin > -1) {\r\n\t\t\t\ttarefa.DESTINATARIO_SELEC.splice(indexDestin, 1);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\ttarefa.DESTINATARIO_SELEC.push(destinatario);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction excluirDestinatarioEscolhido(tarefa) {\r\n\r\n\t\t\tvar indexDestin\t = -1,\r\n\t\t\t\tdestin \t\t = '',\r\n\t\t\t\tdestinLength = tarefa.DESTINATARIO_SELEC.length;\r\n\r\n\t\t\tfor (var i = destinLength-1; i >= 0; i--) {\r\n\r\n\t\t\t\tdestin \t\t = tarefa.DESTINATARIO_SELEC[i];\r\n\t\t\t\tindexDestin  = tarefa.DESTINATARIO.indexOf(destin);\r\n\r\n\t\t\t\tif (indexDestin > -1)\r\n\t\t\t\t\ttarefa.DESTINATARIO[indexDestin].STATUSEXCLUSAO = '1';\r\n\t\t\t}\r\n\r\n\t\t\ttarefa.DESTINATARIO_SELEC = [];\r\n\t\t}\r\n\r\n\t\tfunction fecharModalPesqUsuario() {\r\n\r\n\t\t\t$('#modal-pesq-usuario')\r\n\t\t\t\t.modal('hide')\r\n\t\t\t\t.find('.modal-body')\r\n\t\t\t\t.animate({ scrollTop: 0 }, 'fast')\r\n\t\t\t;\r\n\t\t}\r\n\r\n\t\tfunction alterarEmailUsuario(usuario) {\r\n\r\n\t\t\tangular.copy(usuario, ctrl.emailUsuarioBKP);\r\n\t\t\tctrl.emailUsuario = usuario;\r\n\r\n\t\t\t$('#modal-alterar-email-usuario').modal('show');\r\n\t\t}\r\n\r\n\t\tfunction gravarEmailUsuario() {\r\n\r\n\t\t\tTarefaService\r\n\t\t\t\t.gravarEmailUsuario(ctrl.emailUsuario)\r\n\t\t\t\t.then(function() {\r\n\r\n\t\t\t\t\tshowSuccess('E-mail alterado com sucesso.');\r\n\r\n\t\t\t\t\tfor (var i in ctrl.listaUsuario) {\r\n\r\n\t\t\t\t\t\tif (ctrl.listaUsuario[i].ID == ctrl.emailUsuario.USUARIO_ID) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tctrl.listaUsuario[i].EMAIL = ctrl.emailUsuario.EMAIL;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tctrl.fecharModalAlterarEmailUsuario();\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction cancelarAlterarEmailUsuario() {\r\n\r\n\t\t\tangular.copy(ctrl.emailUsuarioBKP, ctrl.emailUsuario);\r\n\t\t\tctrl.fecharModalAlterarEmailUsuario();\r\n\t\t}\r\n\r\n\t\tfunction fecharModalAlterarEmailUsuario() {\r\n\r\n\t\t\t$('#modal-alterar-email-usuario').modal('hide');\r\n\t\t}\r\n\t}"]}