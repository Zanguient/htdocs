{"version":3,"sources":["_16010.app.js","_16010.factory.filtro.js","_16010.factory.imobilizado.js","_16010.factory.imobilizado-item.js","_16010.factory.imobilizado-ccusto.js","_16010.factory.demonstrativo-depreciacao-anual.js","_16010.controller.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACthBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChhBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5UA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"_16010.js","sourcesContent":["'use strict';\n\nangular\n\t.module('app', [\n\t\t'vs-repeat', \n        'gc-find',\n\t\t'gc-ajax',\n\t\t'gc-transform',\n\t\t'gc-form',\n\t\t'gc-utils'\n\t])\n;\n     ","angular\n    .module('app')\n    .factory('Filtro', Filtro);\n    \n\n\tFiltro.$inject = [\n        '$ajax',\n        '$q',\n        '$httpParamSerializer',\n        '$rootScope',\n        '$timeout',\n        'gcCollection',\n        'gScope'\n    ];\n\nfunction Filtro($ajax, $q, $httpParamSerializer, $rootScope, $timeout, gcCollection, gScope) {\n\n    /**\n     * Constructor, with class name\n     */\n    function Filtro(data) {\n        if (data) {\n            this.setData(data);\n        }\n\n\t\tgScope.Filtro = this; \n        \n        this.FAMILIA_ID = 3;\n        this.PRODUTO_ID = '> 0';\n        this.STATUS     = '2';\n        this.TURNO      = '';\n//        this.DATA_1     = moment('2017.11.30').toDate();//new Date(Clock.DATETIME_SERVER);\n//        this.DATA_2     = moment('2017.11.30').toDate();//new Date(Clock.DATETIME_SERVER);\n        this.DATA_TODOS = false;\n    }\n    \n    Filtro.prototype.consultar = function() {\n        \n        var that = this;\n\n        var dados = {};\n\n        angular.copy(that, dados);\n\n        if ( !that.DATA_TODOS ) {\n            var data = \"BETWEEN '\" + moment(dados.DATA_1).format('DD.MM.YYYY') + \"' AND '\" + moment(dados.DATA_2).format('DD.MM.YYYY') + \"'\";\n       \n            switch (dados.STATUS) {\n                case '2':\n                    dados.DATA_PRODUCAO = data;\n                    break;\n                case '3':\n                    dados.DATA_LIBERACAO = data;\n                    break;\n\n                default:\n                    dados.DATA_REMESSA = data;\n\n                    break;\n            }\n        }          \n        delete dados.DATA_1;\n        delete dados.DATA_2;\n        \n        if ( dados.STATUS.trim() != '' ) {\n            dados.STATUS = '= ' + dados.STATUS;\n        } else {\n            delete dados.STATUS;\n        }\n        \n        if ( dados.TURNO.trim() != '' ) {\n            dados.TURNO = \"= '\" + dados.TURNO + \"'\";\n        } else {\n            delete dados.TURNO;\n        }\n        \n\n        gScope.Talao.consultar(dados).then(function(response){\n\n            gcCollection.merge(gScope.Talao.DADOS, response, 'TALAO_ID');\n        });\n    };\n   \n    \n\n    /**\n     * Return the constructor function\n     */\n    return Filtro;\n};","(function(window, angular) {\n    'use strict';\n\n    angular\n        .module('app')\n        .factory('Imobilizado', Imobilizado);\n\n\tImobilizado.$inject = [\n        '$ajax',\n        '$q',\n        '$rootScope',\n        '$compile',\n        '$timeout',\n        '$consulta',\n        'gScope',\n        'gcCollection',\n        'gcObject'\n    ];\n\n\tfunction Imobilizado($ajax, $q, $rootScope, $compile,$timeout, $consulta,gScope, gcCollection, gcObject) {\n\n        // Private variables.\n        var obj = null;\n        \n        \n\t    /**\n\t     * Constructor, with class name\n\t     */\n\t    function Imobilizado() {\n            \n            obj = this; \n\n            // Public methods         \n            this.merge = merge;\n            this.consultarTodos = consultarTodos; \n            this.consultar      = consultar; \n            this.consultarParcelas = consultarParcelas;\n            this.visualizar     = visualizar; \n            this.alterar        = alterar; \n            this.incluir        = incluir; \n            this.confirmar      = confirmar; \n            this.cancelar       = cancelar; \n            this.excluir        = excluir; \n            this.depreciar      = depreciar; \n            this.selectedReset  = selectedReset;\n            this.Modal          = Modal;\n            this.copiar         = copiar;\n\n            this.Flag  = 0;    \n            this.RESPONSE = [];\n            \n            \n            this.ARR_STATUS_ANO_MES_TIPO_NF = [];\n            this.ARR_STATUS_ANO_MES_TIPO = [];\n            this.ARR_STATUS_ANO_MES = [];\n            this.ARR_STATUS_ANO = [];\n            this.ARR_STATUS = [];\n            \n            \n            this.DADOS = [];\n            this.SELECTED = {};\n            this.SELECTED_BACKUP = {};\n            this.TIPOS = [];\n            this.INCLUINDO = false;\n            this.ALTERANDO = false;\n            \n            obj.selectedReset();\n\t    }\n        \n        function merge(response) {\n            \n            \n            sanitizeJson(response);\n                        \n            gcCollection.merge(obj.RESPONSE, response, ['NFE_ID','ID']);\n            \n            obj.VALOR_GERAL = 0;\n            obj.SALDO_MES_GERAL = 0;\n            obj.SALDO_GERAL = 0;\n\n            // AGRUPAMENTO NF\n            \n            var arr_status_ano_mes_tipo_nf = gcCollection.groupBy(obj.RESPONSE,[\n                'STATUS',\n                'STATUS_DESCRICAO',\n                'ANO',\n                'MES',\n                'MES_DESCRICAO',\n                'TIPO_ID',\n                'TIPO_DESCRICAO',\n                'TAXA',\n                'NFE_ID',\n                'NFE',\n                'SERIE',\n                'DOC_FISCAL',\n                'EMPRESA_RAZAOSOCIAL',\n                'NFE_DATA_ENTRADA',\n                'NFE_DATA_ENTRADA_TEXT'\n            ],'IMOBILIZADOS',function(group,item){\n                \n                if ( group.VALOR      == undefined ) { group.VALOR      = 0; }\n                if ( group.SALDO_MES  == undefined ) { group.SALDO_MES  = 0; }\n                if ( group.SALDO      == undefined ) { group.SALDO      = 0; }\n                \n                group.VALOR     += item.VALOR;\n                group.SALDO_MES += item.SALDO_MES;\n                group.SALDO     += item.SALDO;\n                \n                obj.VALOR_GERAL     += item.VALOR    ;\n                obj.SALDO_MES_GERAL += item.SALDO_MES;\n                obj.SALDO_GERAL     += item.SALDO    ;\n            });\n\n            gcCollection.merge(obj.ARR_STATUS_ANO_MES_TIPO_NF, arr_status_ano_mes_tipo_nf, [\n                'STATUS',\n                'ANO',\n                'MES',\n                'TIPO_ID',\n                'NFE_ID'\n            ]);\n            \n            //\n\n            // AGRUPAMENTO TIPO\n            \n            var arr_status_ano_mes_tipo = gcCollection.groupBy(obj.ARR_STATUS_ANO_MES_TIPO_NF,[\n                'STATUS',\n                'STATUS_DESCRICAO',\n                'ANO',\n                'MES',\n                'MES_DESCRICAO',\n                'TIPO_ID',\n                'TIPO_DESCRICAO',\n                'TAXA'\n            ],'NFS',function(group,item){\n                if ( group.VALOR      == undefined ) { group.VALOR      = 0; }\n                if ( group.SALDO_MES  == undefined ) { group.SALDO_MES  = 0; }\n                if ( group.SALDO      == undefined ) { group.SALDO      = 0; }\n                \n                group.VALOR     += item.VALOR;\n                group.SALDO_MES += item.SALDO_MES;\n                group.SALDO     += item.SALDO;\n            });\n\n            gcCollection.merge(obj.ARR_STATUS_ANO_MES_TIPO, arr_status_ano_mes_tipo, [\n                'STATUS',\n                'ANO',\n                'MES',\n                'TIPO_ID'\n            ]);\n            \n            //\n\n            // AGRUPAMENTO MES\n            \n            var arr_status_ano_mes = gcCollection.groupBy(obj.ARR_STATUS_ANO_MES_TIPO,[\n                'STATUS',\n                'STATUS_DESCRICAO',\n                'ANO',\n                'MES',\n                'MES_DESCRICAO'\n            ],'TIPOS',function(group,item){\n                if ( group.VALOR      == undefined ) { group.VALOR      = 0; }\n                if ( group.SALDO_MES  == undefined ) { group.SALDO_MES  = 0; }\n                if ( group.SALDO      == undefined ) { group.SALDO      = 0; }\n                \n                group.VALOR     += item.VALOR;\n                group.SALDO_MES += item.SALDO_MES;\n                group.SALDO     += item.SALDO;\n            });\n\n            gcCollection.merge(obj.ARR_STATUS_ANO_MES, arr_status_ano_mes, [\n                'STATUS',\n                'ANO',\n                'MES'\n            ]);\n            \n            //\n\n            // AGRUPAMENTO ANO\n            \n            var arr_status_ano = gcCollection.groupBy(obj.ARR_STATUS_ANO_MES,[\n                'STATUS',\n                'STATUS_DESCRICAO',\n                'ANO'\n            ],'MESES',function(group,item){\n                if ( group.VALOR      == undefined ) { group.VALOR      = 0; }\n                if ( group.SALDO_MES  == undefined ) { group.SALDO_MES  = 0; }\n                if ( group.SALDO      == undefined ) { group.SALDO      = 0; }\n                \n                group.VALOR     += item.VALOR;\n                group.SALDO_MES += item.SALDO_MES;\n                group.SALDO     += item.SALDO;\n            });\n\n            gcCollection.merge(obj.ARR_STATUS_ANO, arr_status_ano, [\n                'STATUS',\n                'ANO'\n            ]);\n            \n            //\n\n            // AGRUPAMENTO STATUS\n            \n            var arr_status = gcCollection.groupBy(obj.ARR_STATUS_ANO,[\n                'STATUS',\n                'STATUS_DESCRICAO'\n            ],'ANOS',function(group,item){\n                if ( group.VALOR      == undefined ) { group.VALOR      = 0; }\n                if ( group.SALDO_MES  == undefined ) { group.SALDO_MES  = 0; }\n                if ( group.SALDO      == undefined ) { group.SALDO      = 0; }\n                \n                group.VALOR     += item.VALOR;\n                group.SALDO_MES += item.SALDO_MES;\n                group.SALDO     += item.SALDO;\n            });\n\n            gcCollection.merge(obj.ARR_STATUS, arr_status, [\n                'STATUS'\n            ]);\n            \n            //\n            \n            \n            console.log(obj.ARR_STATUS);\n            \n            \n        }\n\n        function consultarTodos() {\n            \n            $ajax.post('/_16010/api/imobilizados',{progress : false}).then(function(response){\n\n                obj.merge(response);\n//                gcCollection.merge(obj.DADOS, response,'ID');\n\n                var itens = $('.tabela-itens-imobilizado').find('.itens-imobilizado');\n\n                if(itens.length > 0){\n                    var iten = itens[0];\n                    $(iten).trigger('click');   \n                }\n                \n            });\n        }        \n\n        function consultar(id) {\n            \n            var id = id != undefined ? id : obj.SELECTED.ID;\n                \n            return $q(function(resolve,reject){\n                \n                $ajax.post('/_16010/api/imobilizado',{ID:id}).then(function(response){\n\n                    sanitizeJson(response.ITENS);\n                    sanitizeJson(response.FRETES);\n                    sanitizeJson(response.IMOBILIZADO);\n                    \n                    response.DATA_DEPRECIACAO =  moment(response.DATA_DEPRECIACAO).toDate();\n\n                    angular.extend(obj.SELECTED,response.IMOBILIZADO);\n                    gcObject.bind(obj.SELECTED,response.ITENS,'ID|IMOBILIZADO_ID','ITENS');\n                    gcObject.bind(obj.SELECTED,response.FRETES,'ID|IMOBILIZADO_ID','FRETES');\n\n                    obj.SELECTED.DATA_DEPRECIACAO =  moment(obj.SELECTED.DATA_DEPRECIACAO).toDate();\n\n                    resolve(response);\n                },function(e){\n                    reject(e);\n                });\n            });\n        }        \n        \n        function visualizar(id) {\n            \n            var prepare = function() {\n                gScope.Ctrl.ConsultaImobilizadoTipo.Input.value = obj.SELECTED.TIPO_ID + ' - ' + obj.SELECTED.TIPO_DESCRICAO;\n                gScope.Ctrl.ConsultaImobilizadoTipo.disable(true);   \n                gScope.Ctrl.ConsultaImobilizadoTipo.item.selected = true;\n\n                gScope.Ctrl.IConsultaCcusto.Input.value = obj.SELECTED.CCUSTO + ' - ' + obj.SELECTED.CCUSTO_DESCRICAO;\n                gScope.Ctrl.IConsultaCcusto.disable(true);\n                gScope.Ctrl.IConsultaCcusto.item.selected = true;\n\n                gScope.Ctrl.ConsultaImobilizadoTipo.ID               = obj.SELECTED.TIPO_ID \n                gScope.Ctrl.ConsultaImobilizadoTipo.DESCRICAO        = obj.SELECTED.TIPO_DESCRICAO;\n                gScope.Ctrl.ConsultaImobilizadoTipo.TAXA_DEPRECIACAO = obj.SELECTED.TAXA;\n                gScope.Ctrl.ConsultaImobilizadoTipo.VIDA_UTIL        = obj.SELECTED.VIDA_UTIL + 0;\n                gScope.Ctrl.IConsultaCcusto.ID                       = obj.SELECTED.CCUSTO;\n                gScope.Ctrl.IConsultaCcusto.DESCRICAO                = obj.SELECTED.CCUSTO_DESCRICAO;\n\n                obj.SELECTED.REPLICAR = 1;\n                obj.REPLICAR_READONLY = true;\n                obj.SELECTED.TOTAL_ITENS = 0;\n\n                obj.consultar(id).then(function(){\n                    obj.Modal.show();                \n                });   \n            };\n            \n            if ( id > 0 ) {\n                obj.consultar(id).then(function(){\n                    prepare();\n                });\n            } else {\n                prepare();\n            }\n              \n        \n        }\n        \n        /**\n         * Retorna a view da factory\n         */\n        function incluir() {\n            obj.INCLUINDO = true;\n            obj.ALTERANDO = true;\n            obj.Modal.show();\n\n            obj.selectedReset();\n        }\n        \n        function confirmar() {\n            \n            if ( !(obj.SELECTED.ITENS.length > 0) ) {\n                showErro('Não há componentes para esse imobilizado.');\n                return false;\n            }\n            \n            obj.SELECTED.TIPO_ID          = gScope.Ctrl.ConsultaImobilizadoTipo.ID;\n            obj.SELECTED.TIPO_DESCRICAO   = gScope.Ctrl.ConsultaImobilizadoTipo.DESCRICAO;\n            obj.SELECTED.TIPO_TAXA        = gScope.Ctrl.ConsultaImobilizadoTipo.TAXA_DEPRECIACAO;\n            obj.SELECTED.TIPO_VIDA_UTIL   = gScope.Ctrl.ConsultaImobilizadoTipo.VIDA_UTIL;\n            obj.SELECTED.CCUSTO           = gScope.Ctrl.IConsultaCcusto.ID;\n            obj.SELECTED.CCUSTO_DESCRICAO = gScope.Ctrl.IConsultaCcusto.DESCRICAO;\n            \n            var dados = {\n                DADOS : obj.SELECTED,\n                FLAG  : gScope.Ctrl.Imobilizado.Flag\n            };\n          \n            $ajax.post('/_16010/api/imobilizado/gravar',dados).then(function(response){\n\n                obj.ALTERANDO = false;\n\n                if ( obj.INCLUINDO ) {\n                    obj.consultarTodos();\n                    obj.INCLUINDO = false;\n                    obj.selectedReset();\n                    obj.Modal.hide();\n                }\n\n                if(gScope.Ctrl.Imobilizado.Flag == 2){\n                    gScope.Ctrl.ImobilizadoItem.consultar();\n                }\n                \n            });\n\n        }\n\n        function alterar() {\n            \n            gScope.Ctrl.ImobilizadoItem.SELECTEDS = [];\n            \n            gScope.Ctrl.ConsultaImobilizadoTipo.setDataRequest({});\n            gScope.Ctrl.IConsultaCcusto.setDataRequest({});\n            \n            this.ALTERANDO = true;\n            angular.copy(this.SELECTED, this.SELECTED_BACKUP);\n        };        \n        \n        function cancelar() {\n            addConfirme('<h4>Confirmação</h4>',\n                'Deseja realmente cancelar esta operação?',\n                [obtn_sim,obtn_nao],\n                [{ret:1,func:function(){\n                    $rootScope.$apply(function(){\n\n                        obj.ALTERANDO = false;\n                        angular.extend(obj.SELECTED, obj.SELECTED_BACKUP);       \n                        \n                        if ( obj.INCLUINDO ) {\n                            obj.INCLUINDO = false;\n                            obj.selectedReset();\n                            obj.Modal.hide();\n                        }\n                    });\n                }}]     \n            );\n        }\n        \n        function excluir() {\n            addConfirme('<h4>Confirmação</h4>',\n                'Deseja realmente excluir este item?',\n                [obtn_sim,obtn_nao],\n                [{ret:1,func:function(){\n                    $rootScope.$apply(function(){\n                        \n                        $ajax.post('/_16010/api/imobilizado/excluir',{DADOS: obj.SELECTED}).then(function(response){\n\n                            obj.consultarTodos();\n                            obj.selectedReset();\n                            obj.Modal.hide();\n\n                        });\n                    });\n                }}]     \n            );\n        }\n        \n        function depreciar() {\n\n            $ajax.post('/_16010/api/imobilizado/depreciar',{DADOS: obj.SELECTED}).then(function(response){\n                gScope.Ctrl.ImobilizadoItem.consultar();\n            });\n        }\n        \n        function copiar(){\n            var copia = angular.copy(this.SELECTED);\n\n            copia.ID = undefined;\n            copia.ITENS = [];\n\n            this.SELECTED = copia;\n\n            obj.INCLUINDO = true;\n            obj.ALTERANDO = true;\n\n            showSuccess('Copiado.');   \n        }      \n        \n\n        function consultarParcelas(item) {\n            \n            return $q(function(resolve, reject){\n                $ajax.post('/_16010/api/imobilizado/parcelas',{IMOBILIZADO_ID:obj.SELECTED.ID}).then(function(response){\n\n                    obj.PARCELAS = response;\n                    \n                    \n                    $('#modal-imobilizado-parcela')\n                        .modal('show')\n                        .one('shown.bs.modal', function(){\n                            $(this).find('.table-ec').scrollTop(0);\n                        })\n                    ;                      \n                    \n                    resolve(response);\n                },function(e){\n                    reject(e);\n                });\n            });\n        }        \n        \n        function selectedReset() {\n\n            obj.SELECTED = {\n                DATA_DEPRECIACAO : moment().toDate(),\n                TIPO_ID: null,\n                TIPO_TAXA: null,\n                TIPO_VIDA_UTIL: null,\n                CCUSTO: '',\n                DESCRICAO : '',\n                OBSERVACAO : '',\n                ITENS : [],\n                REPLICAR : 1,\n                REPLICAR_READONLY: false\n            };\n\n            gScope.Ctrl.ImobilizadoItem.SELECTEDS = [];\n            \n            gScope.Ctrl.ConsultaImobilizadoTipo.setDataRequest({});\n            gScope.Ctrl.ConsultaImobilizadoTipo.apagar();\n            gScope.Ctrl.IConsultaCcusto.setDataRequest({});\n            gScope.Ctrl.IConsultaCcusto.apagar();\n        }  \n        \n        var Modal = {\n            \n            _modal : function(){\n                return $('#modal-imobilizado');\n            },\n            show : function(shown,hidden) {\n\n                this._modal()\n                    .modal('show')\n                ;                         \n\n\n                this._modal()\n                    .one('shown.bs.modal', function(){\n\n                        $(this).find('input:focusable').first().focus();\n\n                        if ( shown ) {\n                            $rootScope.$apply(function(){\n                                shown(); \n                            });\n                        }\n                    })\n                ;    \n\n                    this._modal()\n                        .one('hidden.bs.modal', function(){\n                            \n                            if ( hidden ) {\n                                hidden();      \n                            }\n                        })\n                    ;        \n            },\n            hide : function(hidden) {\n\n                this._modal()\n                    .modal('hide')\n                ;\n\n                if ( hidden ) {\n                    this._modal()\n                        .one('hidden.bs.modal', function(){\n                            hidden ? hidden() : '';\n                        })\n                    ;                      \n                }\n            }\n        };     \n\n            \n\t    /**\n\t     * Return the constructor function\n\t     */\n\t    return Imobilizado;\n\t};\n   \n})(window, window.angular);","(function(window, angular) {\n    'use strict';\n\n    angular\n        .module('app')\n        .factory('ImobilizadoItem', ImobilizadoItem);\n\n\tImobilizadoItem.$inject = [\n        '$ajax',\n        '$q',\n        '$rootScope',\n        '$compile',\n        '$timeout',\n        '$consulta',\n        'gScope',\n        'gcCollection',\n        'gcObject'\n    ];\n\n\tfunction ImobilizadoItem($ajax, $q, $rootScope, $compile,$timeout, $consulta, gScope, gcCollection, gcObject) {\n\n        // Private variables.\n        var obj = null;\n        var selected = null;\n        \n        \n\t    /**\n\t     * Constructor, with class name\n\t     */\n\t    function ImobilizadoItem() {\n            \n            obj = this; \n\n            // Public methods         \n            this.consultar                      = consultar;\n            this.consultarParcelas              = consultarParcelas;\n            this.importarDocumentoFiscal        = importarDocumentoFiscal; \n            this.importarDocumentoFiscalSaida   = importarDocumentoFiscalSaida; \n            this.incluir                        = incluir; \n            this.alterar                        = alterar; \n            this.confirmar                      = confirmar; \n            this.cancelar                       = cancelar; \n            this.remover                        = remover; \n            this.keypress                       = keypress; \n            this.pick                           = pick; \n            this.unpick                         = unpick; \n            this.pickToggle                     = pickToggle; \n            this.picked                         = picked; \n            this.pickReverse                    = pickReverse; \n            this.pickAll                        = pickAll; \n            this.unpickAll                      = unpickAll; \n            this.dblClick                       = dblClick;\n            this.encerrar                       = encerrar; \n            this.encerrarPickToggle             = encerrarPickToggle; \n            this.encerrarPicked                 = encerrarPicked; \n            this.Modal                          = Modal; \n            \n                      \n            this.SELECTEDS = [];\n            this.SELECTED_OF_LIST = {};\n            this.SELECTED = {};\n            this.SELECTED_COPY = {};\n            this.PARCELAS = [];\n            this.TIPOS = [];\n            this.NFE = '';\n            this.PRODUTO_READONLY = false;\n                        \n\t    }\n\n        function consultar() {\n            \n            return $q(function(resolve, reject){\n                $ajax.post('/_16010/api/imobilizado/item',{IMOBILIZADO_ID:gScope.Ctrl.Imobilizado.SELECTED.ID}).then(function(response){\n\n                    sanitizeJson(response);\n                    gcObject.bind(gScope.Ctrl.Imobilizado.SELECTED,response,'ID|IMOBILIZADO_ID','ITENS');\n                    resolve(response);\n                },function(e){\n                    reject(e);\n                });\n            });\n        }                \n\n        function consultarParcelas(item) {\n            \n            return $q(function(resolve, reject){\n                $ajax.post('/_16010/api/imobilizado/item/parcelas',{IMOBILIZADO_ITEM_ID:item.ID}).then(function(response){\n\n                    gcObject.bind(item,response,'ID|IMOBILIZADO_ITEM_ID','PARCELAMENTOS');\n                    obj.PARCELAS = response;\n                    \n                    $('#modal-imobilizado-item-parcela').modal('show');\n                    $('#modal-imobilizado-item-parcela .table-ec').scrollTop(0);\n                    resolve(response);\n                },function(e){\n                    reject(e);\n                });\n            });\n        } \n\n                       \n        \n        /**\n         * Retorna a view da factory\n         */\n        function importarDocumentoFiscal() {\n            \n            selected = gScope.Ctrl.Imobilizado.SELECTED;\n            gScope.Ctrl.Empresas = [];\n            \n            $ajax.post('/_16010/api/nf/item',{NFE: obj.NFE}).then(function(response){\n                \n                sanitizeJson(response);\n\n\n                var empresas = [];\n                var old_string = '';\n                angular.forEach(response, function(item, key) {\n                    if(old_string != item.FLAG){\n                        old_string = item.FLAG;\n\n                        empresas.push({\n                            FLAG: item.FLAG,\n                            EMPRESA: item.EMPRESA,\n                            NOTA: item.NFE,\n                            SERIE: item.SERIE,\n                            DESC_DATA_ENTRADA: item.DESC_DATA_ENTRADA,\n                            DATA_ENTRADA:  item.DATA_ENTRADA});\n                    }\n                });\n\n                angular.forEach(empresas, function(item, key) {\n                    gcObject.bind(item,response,'FLAG','ITENS');\n                });\n\n                angular.forEach(empresas, function(item, key) {\n                    gcObject.bind(item,response,'FLAG','ITENS');\n                });\n\n                obj.NFE = '';\n\n                if(empresas.length == 1){\n                    gcCollection.merge(selected.ITENS,empresas[0].ITENS, ['PRODUTO_ID','NFE'], true);\n                    showSuccess('Documento fiscal importado com sucesso.');\n\n                    addConfirme('<h4>Confirmação</h4>',\n                        'Deseja utilizar a data de entrada da nota ('+empresas[0].DESC_DATA_ENTRADA+') como data de início da depreciação?',\n                        [obtn_sim,obtn_nao],\n                        [{ret:1,func:function(){\n                            $rootScope.$apply(function(){\n                               gScope.Ctrl.Imobilizado.SELECTED.DATA_DEPRECIACAO =  moment(empresas[0].DATA_ENTRADA).toDate();\n                            });\n                        }}]     \n                    );\n\n                }else{\n                    if(empresas.length > 0){\n                        gScope.Ctrl.Empresas = empresas;\n\n                        gScope.Ctrl.AddItensEmpresa = function(itens){\n                            gcCollection.merge(selected.ITENS, itens, ['PRODUTO_ID','NFE'], true);\n                            gScope.Ctrl.Empresas = [];\n                            showSuccess('Documento fiscal importado com sucesso.');\n\n                            addConfirme('<h4>Confirmação</h4>',\n                                'Deseja utilizar a data de entrada da nota ('+itens[0].DESC_DATA_ENTRADA+') como data de início da depreciação?',\n                                [obtn_sim,obtn_nao],\n                                [{ret:1,func:function(){\n                                    $rootScope.$apply(function(){\n                                       gScope.Ctrl.Imobilizado.SELECTED.DATA_DEPRECIACAO =  moment(itens[0].DATA_ENTRADA).toDate();\n                                    });\n                                }}]     \n                            );\n                        }\n\n                    }else{\n                        showErro('Documento fiscal não encontrado ou todos os itens já importados.');    \n                    }\n                }\n\n            });\n        }\n        \n        \n        /**\n         * Retorna a view da factory\n         */\n        function importarDocumentoFiscalSaida() {\n                        \n            $ajax.post('/_16010/api/nfs',{NFS: obj.NFS}).then(function(response){\n                \n                sanitizeJson(response);\n\n                gScope.Ctrl.NFSS = response;\n                \n                if ( gScope.Ctrl.NFSS.length == 1 ) {\n                    gScope.Ctrl.NFS_SELECTED = gScope.Ctrl.NFSS[0];\n                    gScope.Ctrl.ImobilizadoItem.NFS = ''; \n                    gScope.Ctrl.NFSS = [];\n                }\n\n            });\n        }\n        \n\n        \n        /**\n         * Retorna a view da factory\n         */\n        function incluir() {\n            obj.PRODUTO_READONLY = false;\n            gScope.Ctrl.IIConsultaProduto.option.required = true;\n            obj.SELECTED = {\n                DATA_ENTRADA : moment().toDate(),\n                FRETE_UNITARIO : 0\n            };\n            \n//            $ajax.get('/_16010/api/imobilizado/tipo').then(function(response){\n//                obj.TIPOS = response;\n                obj.Modal.show();\n//\n//                obj.SELECTED = {\n//                    TIPO: null,\n//                    DESCRICAO : '',\n//                    OBSERVACAO : '',\n//                    ITENS : []\n//                };\n//            });\n        }\n        \n        /**\n         * Retorna a view da factory\n         */\n        function alterar() {\n            obj.PRODUTO_READONLY = true;\n            \n            gScope.Ctrl.IIConsultaProduto.option.required = false;\n            \n            obj.SELECTED = obj.SELECTEDS[0];\n\n            angular.copy(obj.SELECTED,obj.SELECTED_COPY);\n            obj.SELECTED.DATA_ENTRADA = moment(obj.SELECTED.DATA_ENTRADA).toDate();\n            \n            \n//            $ajax.get('/_16010/api/imobilizado/tipo').then(function(response){\n//                obj.TIPOS = response;\n                obj.Modal.show();\n//\n//                obj.SELECTED = {\n//                    TIPO: null,\n//                    DESCRICAO : '',\n//                    OBSERVACAO : '',\n//                    ITENS : []\n//                };\n//            });\n        }\n        \n        function confirmar() {\n\n            if ( !obj.PRODUTO_READONLY ) {\n                obj.SELECTED.PRODUTO_ID        = gScope.Ctrl.IIConsultaProduto.PRODUTO_ID;\n                obj.SELECTED.PRODUTO_DESCRICAO = gScope.Ctrl.IIConsultaProduto.PRODUTO_DESCRICAO;\n                \n                gScope.Ctrl.Imobilizado.SELECTED.ITENS.push(obj.SELECTED);\n                \n                gScope.Ctrl.IIConsultaProduto.apagar();\n            }\n            obj.Modal.hide();\n        }\n        \n        function cancelar() {\n            addConfirme('<h4>Confirmação</h4>',\n                'Deseja realmente cancelar esta operação?',\n                [obtn_sim,obtn_nao],\n                [{ret:1,func:function(){\n                    $rootScope.$apply(function(){\n                        angular.extend(obj.SELECTED,obj.SELECTED_COPY);\n                        gScope.Ctrl.IIConsultaProduto.apagar();\n                        obj.Modal.hide();\n                    });\n                }}]     \n            );\n        }\n        \n\n        function remover(item,$event ){\n\n            addConfirme('<h4>Confirmação</h4>',\n                'Deseja realmente excluir os itens selecionados?',\n                [obtn_sim,obtn_nao],\n                [{ret:1,func:function(){\n                    $rootScope.$apply(function(){\n                        \n\n                        var itens = gScope.Ctrl.Imobilizado.SELECTED.ITENS;\n                        var selecteds = obj.SELECTEDS;\n                        \n                        for ( var i  in selecteds ) {\n                            var selected = selecteds[i];\n                            \n                            if ( selected.ID != undefined ) {\n                                selected.EXCLUIDO = 1;\n                            } else {\n\n                                var idx = itens.indexOf(selected);\n\n                                itens.splice(idx,1);\n                            }\n                        }\n                        \n                        obj.SELECTEDS = [];\n                        \n                        showSuccess('Itens removidos.');\n                    });\n                }}]     \n            );\n        };            \n        \n\n\n        function keypress(item,$event) {\n\n            if ( $event.key == ' ' ) {\n\n                $event.preventDefault();\n\n                obj.pickToggle(item);\n            }\n//            else        \n//            if ( $event.key == 'Enter' ) {\n//\n//            }\n        };            \n        \n        \n        /**\n         * Retorna a view da factory\n         */\n        function pick(item) {\n            \n            if ( !obj.picked(item) ) {\n                obj.SELECTEDS.push(item);\n            }\n        }\n        \n        /**\n         * Retorna a view da factory\n         */\n        function unpick(item) {\n            \n            if ( obj.picked(item) ) {\n                obj.SELECTEDS.splice(obj.SELECTEDS.indexOf(item),1);\n            }\n        }\n        \n        /**\n         * Retorna a view da factory\n         */\n        function pickToggle(item) {\n            \n            if ( !obj.picked(item) ) {\n                obj.SELECTEDS.push(item);\n            } else {\n                obj.SELECTEDS.splice(obj.SELECTEDS.indexOf(item),1);\n            }\n        }\n        \n        /**\n         * Retorna a view da factory\n         */\n        function pickReverse() {\n            var itens = gScope.Ctrl.Imobilizado.SELECTED.ITENS;\n            \n            for ( var i in itens ) {\n                obj.pickToggle(itens[i]);\n            }\n        }\n        \n        function picked(item) {\n            \n            var ret = true;\n            \n            if ( obj.SELECTEDS.indexOf(item) == -1 ) {\n                ret = false;\n            }\n            \n            return ret;\n        }\n        \n        /**\n         * Retorna a view da factory\n         */\n        function pickAll() {\n            var itens = gScope.Ctrl.Imobilizado.SELECTED.ITENS;\n            \n            for ( var i in itens ) {\n                obj.pick(itens[i]);\n            }\n        }\n        \n        /**\n         * Retorna a view da factory\n         */\n        function unpickAll() {\n            var itens = gScope.Ctrl.Imobilizado.SELECTED.ITENS;\n            \n            for ( var i in itens ) {\n                obj.unpick(itens[i]);\n            }\n        }\n        \n        function picked(item) {\n            \n            var ret = true;\n            \n            if ( obj.SELECTEDS.indexOf(item) == -1 ) {\n                ret = false;\n            }\n            \n            return ret;\n        }\n        \n        \n        function dblClick(item) {\n            obj.unpickAll();\n            obj.pick(item);\n            obj.alterar();\n        }\n        \n\n        function encerrar() {\n            \n            var dados = {\n                NFS_ID : gScope.Ctrl.NFS_SELECTED.NFS_ID,\n                TIPO : obj.ENCERRAR_TIPO,\n                IMOBILIZADO_ID : gScope.Ctrl.Imobilizado.SELECTED.ID,\n                ITENS : obj.ENCERRAR_SELECTEDS\n            };\n\n            $ajax.post('/_16010/api/imobilizado/item/encerrar',dados).then(function(response){\n                gScope.Ctrl.ImobilizadoItem.consultar();\n                \n                $('#modal-imobilizado-encerrar').modal('hide');\n            });\n        }        \n        \n        function encerrarPickToggle(item) {\n            \n            if ( obj.ENCERRAR_SELECTEDS == undefined ) {\n                obj.ENCERRAR_SELECTEDS = [];\n            }\n            \n            if ( !obj.encerrarPicked(item) ) {\n                obj.ENCERRAR_SELECTEDS.push(item);\n            } else {\n                obj.ENCERRAR_SELECTEDS.splice(obj.ENCERRAR_SELECTEDS.indexOf(item),1);\n            }\n        }        \n        \n\n        function encerrarPicked(item) {\n            \n            var ret = true;\n            \n            if ( obj.ENCERRAR_SELECTEDS == undefined || obj.ENCERRAR_SELECTEDS.indexOf(item) == -1 ) {\n                ret = false;\n            }\n            \n            return ret;\n        }        \n        \n                \n        \n        var Modal = {\n            \n            _modal : function(){\n                return $('#modal-imobilizado-item');\n            },\n            show : function(shown,hidden) {\n\n                this._modal()\n                    .modal('show')\n                ;                         \n\n\n                this._modal()\n                    .one('shown.bs.modal', function(){\n\n                        $(this).find('input:focusable').first().focus();\n\n                        if ( shown ) {\n                            shown(); \n                        }\n                    })\n                ;    \n\n                    this._modal()\n                        .one('hidden.bs.modal', function(){\n                            \n                            if ( hidden ) {\n                                hidden();      \n                            }\n                        })\n                    ;        \n            },\n            hide : function(hidden) {\n\n                this._modal()\n                    .modal('hide')\n                ;\n\n                if ( hidden ) {\n                    this._modal()\n                        .one('hidden.bs.modal', function(){\n                            hidden ? hidden() : '';\n                        })\n                    ;                      \n                }\n            }\n        };     \n\n            \n\t    /**\n\t     * Return the constructor function\n\t     */\n\t    return ImobilizadoItem;\n\t};\n   \n})(window, window.angular);","angular\n    .module('app')\n    .factory('ImobilizadoCcusto', ImobilizadoCcusto);\n    \n\n\tImobilizadoCcusto.$inject = [\n        '$ajax',\n        '$q',\n        '$rootScope',\n        '$timeout',\n        'gcCollection',\n        'gcObject',\n        'gScope'\n    ];\n\nfunction ImobilizadoCcusto($ajax, $q, $rootScope, $timeout, gcCollection, gcObject, gScope) {\n\n    /**\n     * Constructor, with class name\n     */\n    function ImobilizadoCcusto(data) {\n        if (data) {\n            this.setData(data);\n        }\n\n\t\tgScope.ImobilizadoCcusto = this; \n        \n        \n        this.CONSULTA_FILTRO = '';\n        this.DADOS = [];\n        this.FILTERED = [];\n        this.SELECTED = {};\n        this.TALOES_LIBERAR = [];\n        this.TALOES_LIBERAR_LISTA = [];\n        this.BARRAS = '';\n    }\n    \n    var data = {};\n    \n    \n    ImobilizadoCcusto.prototype.consultar = function(data) {\n\n        var that = this;\n        \n        return $q(function(resolve,reject){\n        \n            $ajax.post('/_22200/api/talao',data).then(function(response){\n\n                resolve(response);\n            },function(erro){\n                reject(erro);\n            });\n        });\n    };    \n    \n    ImobilizadoCcusto.prototype.consultarBarras = function() {\n        \n        var that = this;\n                \n        return $q(function(resolve,reject){\n            that.consultar({\n                REMESSA_ID       : that.BARRAS.substring(0,6),\n                REMESSA_TALAO_ID : that.BARRAS.substring(6,10)\n            }).then(function(response){\n                \n                if ( response.length == 1 ) {\n                    \n                    gcCollection.merge(that.TALOES_LIBERAR, response, 'TALAO_ID',true);                     \n                    if ( response[0].STATUS == 2 ) {\n                        gcCollection.merge(that.TALOES_LIBERAR_LISTA, response, 'TALAO_ID',true);                     \n                    }\n                    \n                } else {\n                    showErro('Talão inválido.');\n                }\n                \n                that.BARRAS = '';\n                resolve(response);\n            },function(erro){\n                that.BARRAS = '';\n                reject(erro);\n            });\n        });\n    };\n    \n    ImobilizadoCcusto.prototype.liberar = function() {\n        \n        var that = this;\n        \n        gScope.Operador.open(function(){\n            gScope.Gp.open(function(){\n\n                var data = {};\n\n                data.OPERADOR_ID    = gScope.Operador.SELECTED.OPERADOR_ID;\n                data.GP_ID          = gScope.Gp.SELECTED.GP_ID;\n                data.TALOES_LIBERAR = that.TALOES_LIBERAR_LISTA;\n\n                $ajax.post('/_22200/api/talao/liberar',data).then(function(){\n                    that.TALOES_LIBERAR = [];\n                    that.TALOES_LIBERAR_LISTA = [];\n                });\n                \n                gScope.Operador.logoff();\n                gScope.Gp.logoff();\n            });  \n        });\n        \n    };\n    \n    ImobilizadoCcusto.prototype.liberarLimpar = function() {\n        this.TALOES_LIBERAR = [];\n        this.TALOES_LIBERAR_LISTA = [];\n    };\n   \n    \n    ImobilizadoCcusto.prototype.mergeComposicao = function(response) {\n         \n  \n        sanitizeJson(response.TALAO);\n        \n        var taloes = [];\n\n        if ( response.CONSUMOS != undefined ) {\n            sanitizeJson(response.DETALHES);\n            sanitizeJson(response.CONSUMOS);\n            sanitizeJson(response.HISTORICOS);   \n            sanitizeJson(response.ALOCADOS);\n            sanitizeJson(response.COMPONENTES);\n\n            gcCollection.bind(response.CONSUMOS, response.ALOCADOS, 'CONSUMO_ID', 'ALOCACOES');   \n            gcObject.bind(response.TALAO, response.DETALHES, ['REMESSA_ID','REMESSA_TALAO_ID'], 'DETALHES');\n            gcObject.bind(response.TALAO, response.CONSUMOS, 'TALAO_ID', 'CONSUMOS');\n            gcObject.bind(response.TALAO, response.COMPONENTES, 'TALAO_ID', 'COMPONENTES');\n            gcObject.bind(response.TALAO, response.HISTORICOS, 'PROGRAMACAO_ID', 'HISTORICOS');     \n\n            for ( var i in taloes ) {\n\n                var talao = taloes[i];\n\n                talao.CONSUMO_STATUS = '1';\n                talao.ESTOQUE_STATUS = '1';\n\n\n                for ( var y in talao.CONSUMOS ) {\n\n                    var consumo = talao.CONSUMOS[y];\n\n\n                    if ( talao.ESTOQUE_STATUS == '1' && consumo.ESTOQUE_STATUS == 0 ) {\n                        talao.ESTOQUE_STATUS = '0';\n                    }  \n\n                    talao.ULTIMO_TALAO = true;\n                    var i = 0;\n                    for ( var y in talao.DETALHES ) {\n\n\n                        var detalhe = talao.DETALHES[y];\n\n                        if ( detalhe.TALAO_DETALHE_STATUS < 2 ) {\n                            i++;    \n                        }\n\n                        if ( i > 1 ) {\n                            talao.ULTIMO_TALAO = false;\n                            break;\n                        }\n                    }                \n                }\n            }        \n        }\n        \n        \n        if ( gScope.Filtro.TAB_ACTIVE == 'PRODUZIDO' ) {\n            taloes = gScope.ImobilizadoCcustoProduzido.DADOS;\n        } else\n        if ( gScope.Filtro.TAB_ACTIVE == 'PRODUZIR' ) {\n            taloes = gScope.ImobilizadoCcustoProduzir.DADOS;\n        }         \n        \n        gcCollection.merge(taloes, [response.TALAO], 'TALAO_ID',true);  \n                \n        \n    };    \n\n\n    ImobilizadoCcusto.prototype.pick = function(item,action) {\n        \n        var that = this;\n\n        if ( item != undefined ) {\n\n            if ( item.TALAO_ID != this.SELECTED.TALAO_ID ) {\n                gScope.ImobilizadoCcustoDetalhe.SELECTED = {};\n                gScope.ImobilizadoCcustoDetalhe.SELECTEDS = [];\n                gScope.ImobilizadoCcustoDetalhe.SELECTEDS_PRODUZIR = [];\n            }\n            \n            this.SELECTED = item;\n            \n            gScope.Filtro.TALAO_ID = item.TALAO_ID;\n            gScope.Filtro.uriHistory();                        \n\n            if ( gScope.Filtro.TAB_ACTIVE == 'PRODUZIDO' ) {\n                that.consultarComposicao();\n            }\n\n            if ( action == 'modal-open' ) {\n\n                \n                that.show(null,function(){\n\n                    $('[data-talao-id=\"' + gScope.Filtro.TALAO_ID + '\"]:focusable').focus();\n\n                    delete gScope.Filtro.TALAO_ID;\n                    gScope.Filtro.uriHistory();      \n                });               \n                \n            }\n        }\n\n    };    \n\n\n \n    \n    ImobilizadoCcusto.prototype.confirm = function () {\n        var that = this;\n\n        var dados = {\n            FILTRO: gScope.ConsumoBaixarFiltro,\n            DADOS: {\n                ITENS : that.ITENS_BAIXAR,\n                PESO : that.PESO\n            }\n        };\n        \n        \n        that.enableButton(false);\n        \n        $ajax.post('/_22160/api/consumo-baixar/post',dados,{complete: function(){\n                \n            that.enableButton(true);\n            \n        }}).then(function(response){\n        \n            postprint(response.ETIQUETAS);        \n        \n            gScope.ConsumoBaixarFiltro.merge(response.DATA_RETURN);\n            that.close();\n            \n        });        \n    };  \n\n    ImobilizadoCcusto.prototype.irPara = function (direcao) {\n        \n        var that = this;\n        var taloes = [];\n        \n        switch (gScope.Filtro.TAB_ACTIVE) {\n            case 'PRODUZIR':\n                taloes = gScope.ImobilizadoCcustoProduzir.FILTERED;\n                break;\n            case 'PRODUZIDO':\n                taloes = gScope.ImobilizadoCcustoProduzido.FILTERED;\n                break;\n                \n        }\n        \n        switch (direcao) {\n            case '|<':\n                that.pick(taloes[0]);\n                break;\n                \n            case '<':\n                \n                var idx = taloes.indexOf(that.SELECTED);\n                if ( taloes[idx-1] != undefined ) {\n                    that.pick(taloes[idx-1]);\n                }\n                break;\n                \n            case '>':\n\n                var idx = taloes.indexOf(that.SELECTED);\n                if ( taloes[idx+1] != undefined ) {\n                    that.pick(taloes[idx+1]);\n                }\n                break;\n                \n            case '>|':\n                that.pick(taloes[taloes.length-1]);\n                break;\n        }\n    };  \n\n    var modal = $('#modal-talao');\n    \n    ImobilizadoCcusto.prototype.show = function(shown,hidden) {\n\n        modal\n            .modal('show')\n        ;                         \n        \n        if ( shown ) {\n            modal\n                .one('shown.bs.modal', function(){\n                    shown();\n                })\n            ;     \n        }\n        \n        if ( hidden ) {\n            modal\n                .one('hidden.bs.modal', function(){\n                    hidden();\n                })\n            ;              \n        }\n    };\n\n    ImobilizadoCcusto.prototype.close = function(hidden) {\n\n        modal\n            .modal('hide')\n        ;\n        \n        if ( hidden ) {\n            modal\n                .one('hidden.bs.modal', function(){\n                    hidden ? hidden() : '';\n                })\n            ;                      \n        }\n    };\n    \n    ImobilizadoCcusto.prototype.inputKeydown = function($event) {\n         \n        if ( this.PESO_AUTOMATICO ) {\n            if ( isNumber($event.key) || $event.key == 'Backspace' || $event.key == 'Delete' ) {\n                $event.preventDefault();\n            }\n        }\n    };\n    \n\n\n    /**\n     * Return the constructor function\n     */\n    return ImobilizadoCcusto;\n};","(function(window, angular) {\n    'use strict';\n\n    angular\n        .module('app')\n        .factory('DemonstrativoDepreciacaoAnual', DemonstrativoDepreciacaoAnual);\n\n\tDemonstrativoDepreciacaoAnual.$inject = [\n        '$ajax',\n        '$q',\n        '$rootScope',\n        '$compile',\n        '$timeout',\n        '$consulta',\n        'gScope',\n        'gcCollection',\n        'gcObject'\n    ];\n\n\tfunction DemonstrativoDepreciacaoAnual($ajax, $q, $rootScope, $compile,$timeout, $consulta, gScope, gcCollection, gcObject) {\n\n        // Private variables.\n        var obj = null;\n        var selected = null;\n        \n        \n\t    /**\n\t     * Constructor, with class name\n\t     */\n\t    function DemonstrativoDepreciacaoAnual() {\n            \n            obj = this; \n\n            // Public methods         \n            this.consultar     = consultar;\n            this.merge         = merge;\n          \n            this.Modal         = Modal; \n            \n                   \n            this.DADOS = [];\n            this.MESES = [];\n            \n            this.GERAL_MESES = [];\n            this.GERAL = [];\n            \n            this.TIPOS_CCUSTOS = [];\n            \n            \n            this.TIPOS_MESES = [];\n            this.TIPOS = [];\n            this.TIPOS_CCUSTOS = [];\n            this.TIPOS_CCUSTOS_MESES = [];\n            \n            this.CCUSTOS_MESES = [];\n            this.CCUSTOS_TIPOS_MESES = [];\n            this.CCUSTOS_TIPOS = [];\n            this.CCUSTOS = [];\n            \n            this.TOTAL_GERAL = 0;\n            this.SELECTEDS = [];\n            \n\t    }\n        \n        \n        \n\n        function consultar() {\n            \n            return $q(function(resolve, reject){\n                $ajax.post('/_16010/api/demonstratitvo-depreciacao',{\n                    MES_1: obj.MES_1,\n                    MES_2: obj.MES_2,\n                    ANO_1: obj.ANO_1,\n                    ANO_2: obj.ANO_2\n                }).then(function(response){\n                    \n                    obj.merge(response);\n                    \n                    resolve(response);\n                },function(e){\n                    reject(e);\n                });\n            });\n        }                \n        \n        /**\n         * Retorna a view da factory\n         */\n        function merge(response) {\n            \n            sanitizeJson(response);\n            \n            \n            gcCollection.merge(obj.DADOS, response, ['CCUSTO','IMOBILIZADO_ID','TIPO_ID','MES','ANO']);\n            \n            obj.TOTAL_GERAL = 0;\n            \n            var meses = gcCollection.groupBy(obj.DADOS,['MES','MES_DESCRICAO','ANO'],'IMOBILIZADOS',function(group,item){\n                \n                if ( group.VALOR == undefined ) {\n                    group.VALOR = 0;\n                }\n                \n                group.VALOR += item.VALOR;\n                \n                obj.TOTAL_GERAL += item.VALOR;\n            });\n\n            gcCollection.merge(obj.MESES, meses, ['MES','ANO']);\n            \n            \n            \n            \n            // VISÃO POR CENTRO DE CUSTO/TIPO\n            \n            var ccustos_tipos_meses = gcCollection.groupBy(obj.DADOS,['CCUSTO','CCUSTO_MASK','CCUSTO_DESCRICAO', 'TIPO_ID','TIPO_DESCRICAO','MES','MES_DESCRICAO','ANO'],'IMOBILIZADOS',function(group,item){\n                \n                if ( group.VALOR == undefined ) {\n                    group.VALOR = 0;\n                }\n                \n                group.VALOR += item.VALOR;\n                \n            });\n\n            gcCollection.merge(obj.CCUSTOS_TIPOS_MESES, ccustos_tipos_meses, ['CCUSTO','TIPO_ID','MES','ANO']);\n            \n            //\n            \n            var ccustos_meses = gcCollection.groupBy(obj.DADOS,['CCUSTO','MES_DESCRICAO','MES','ANO'],'IMOBILIZADOS',function(group,item){\n                \n                if ( group.VALOR == undefined ) {\n                    group.VALOR = 0;\n                }\n                \n                group.VALOR += item.VALOR;\n                \n            });\n\n            gcCollection.merge(obj.CCUSTOS_MESES, ccustos_meses, ['CCUSTO','MES','ANO']);\n            \n            //\n            \n            \n            var ccustos_tipos = gcCollection.groupBy(obj.CCUSTOS_TIPOS_MESES,['CCUSTO','CCUSTO_MASK','CCUSTO_DESCRICAO', 'TIPO_ID','TIPO_DESCRICAO'],'MESES',function(group,item){\n                \n                if ( group.VALOR == undefined ) {\n                    group.VALOR = 0;\n                }\n                \n                group.VALOR += item.VALOR;\n            });\n\n            gcCollection.merge(obj.CCUSTOS_TIPOS, ccustos_tipos, ['CCUSTO','TIPO_ID']);\n            \n            //\n            \n            var ccustos = gcCollection.groupBy(obj.CCUSTOS_TIPOS,['CCUSTO','CCUSTO_MASK','CCUSTO_DESCRICAO'],'TIPOS',function(group,item){\n                \n                if ( group.VALOR == undefined ) {\n                    group.VALOR = 0;\n                }\n                \n                group.VALOR += item.VALOR;\n            });\n\n            gcCollection.merge(obj.CCUSTOS, ccustos, 'CCUSTO');\n            \n            gcCollection.bind(obj.CCUSTOS, obj.CCUSTOS_MESES, 'CCUSTO','MESES');\n            \n            \n            \n            \n            \n            \n            \n            // VISÃO POR TIPO/CCUSTO\n            \n            var tipos_ccustos_meses = gcCollection.groupBy(obj.DADOS,['CCUSTO','CCUSTO_MASK','CCUSTO_DESCRICAO', 'TIPO_ID','TIPO_DESCRICAO','MES','MES_DESCRICAO','ANO'],'IMOBILIZADOS',function(group,item){\n                \n                if ( group.VALOR == undefined ) {\n                    group.VALOR = 0;\n                }\n                \n                group.VALOR += item.VALOR;\n                \n            });\n\n            gcCollection.merge(obj.TIPOS_CCUSTOS_MESES, tipos_ccustos_meses, ['CCUSTO','TIPO_ID','MES','ANO']);\n            \n            //\n            \n            var tipos_meses = gcCollection.groupBy(obj.DADOS,['TIPO_ID','TIPO_DESCRICAO','MES','ANO'],'IMOBILIZADOS',function(group,item){\n                \n                if ( group.VALOR == undefined ) {\n                    group.VALOR = 0;\n                }\n                \n                group.VALOR += item.VALOR;\n                \n            });\n\n            gcCollection.merge(obj.TIPOS_MESES, tipos_meses, ['TIPO_ID','MES','ANO']);\n            \n            //\n            \n            \n            var tipos_ccustos = gcCollection.groupBy(obj.CCUSTOS_TIPOS_MESES,['CCUSTO','CCUSTO_MASK','CCUSTO_DESCRICAO', 'TIPO_ID','TIPO_DESCRICAO'],'MESES',function(group,item){\n                \n                if ( group.VALOR == undefined ) {\n                    group.VALOR = 0;\n                }\n                \n                group.VALOR += item.VALOR;\n            });\n\n            gcCollection.merge(obj.TIPOS_CCUSTOS, tipos_ccustos, ['CCUSTO','TIPO_ID']);\n            \n            //\n            \n            var tipos = gcCollection.groupBy(obj.TIPOS_CCUSTOS,['TIPO_ID','TIPO_DESCRICAO'],'CCUSTOS',function(group,item){\n                \n                if ( group.VALOR == undefined ) {\n                    group.VALOR = 0;\n                }\n                \n                group.VALOR += item.VALOR;\n            });\n\n            gcCollection.merge(obj.TIPOS, tipos, ['TIPO_ID']);\n            \n            gcCollection.bind(obj.TIPOS, obj.TIPOS_MESES, 'TIPO_ID','MESES');\n            \n            \n            \n            \n            \n            \n            \n            // VISAÕ GERAL\n            \n            \n            var tipos_meses = gcCollection.groupBy(obj.DADOS,[ 'TIPO_ID','TIPO_DESCRICAO','MES','MES_DESCRICAO','ANO'],'IMOBILIZADOS',function(group,item){\n                \n                if ( group.VALOR == undefined ) {\n                    group.VALOR = 0;\n                }\n                \n                group.VALOR += item.VALOR;\n                \n            });\n\n            gcCollection.merge(obj.GERAL_MESES, tipos_meses, ['TIPO_ID','MES','ANO']);\n            \n            //\n            \n            \n            var tipos = gcCollection.groupBy(obj.GERAL_MESES,['TIPO_ID','TIPO_DESCRICAO'],'MESES',function(group,item){\n                \n                if ( group.VALOR == undefined ) {\n                    group.VALOR = 0;\n                }\n                \n                group.VALOR += item.VALOR;\n            });\n\n            gcCollection.merge(obj.GERAL, tipos, ['TIPO_ID']);\n            \n            //\n            \n            \n        }\n        \n\n                \n        \n        var Modal = {\n            \n            _modal : function(){\n                return $('#modal-demonstratitvo-depreciacao-anual');\n            },\n            show : function(shown,hidden) {\n\n                this._modal()\n                    .modal('show')\n                ;                         \n\n\n                this._modal()\n                    .one('shown.bs.modal', function(){\n\n                        $(this).find('input:focusable').first().focus();\n\n                        if ( shown ) {\n                            shown(); \n                        }\n                    })\n                ;    \n\n                    this._modal()\n                        .one('hidden.bs.modal', function(){\n                            \n                            if ( hidden ) {\n                                hidden();      \n                            }\n                        })\n                    ;        \n            },\n            hide : function(hidden) {\n\n                this._modal()\n                    .modal('hide')\n                ;\n\n                if ( hidden ) {\n                    this._modal()\n                        .one('hidden.bs.modal', function(){\n                            hidden ? hidden() : '';\n                        })\n                    ;                      \n                }\n            }\n        };     \n\n            \n\t    /**\n\t     * Return the constructor function\n\t     */\n\t    return DemonstrativoDepreciacaoAnual;\n\t};\n   \n})(window, window.angular);","angular\n    .module('app')\n    .value('gScope', {})\n    .controller('Ctrl', Ctrl);\n    \n    \n\tCtrl.$inject = [\n        '$scope',\n        '$timeout',\n        'gScope',\n        '$consulta',\n        'Historico',\n        'Filtro',\n        'Imobilizado',\n        'ImobilizadoItem',\n        'ImobilizadoCcusto',\n        'DemonstrativoDepreciacaoAnual'\n    ];\n\n\tfunction Ctrl( \n        $scope, \n        $timeout, \n        gScope, \n        $consulta,\n        Historico,\n        Filtro,\n        Imobilizado,\n        ImobilizadoItem,\n        ImobilizadoCcusto,\n        DemonstrativoDepreciacaoAnual\n    ) {\n\n\t\tvar vm     = this;\n        \n        gScope.Ctrl = this;\n        \n        \n        vm.Consulta   = new $consulta();\n        \n        vm.ConsultaImobilizadoTipo                             = vm.Consulta.getNew(true);\n        vm.ConsultaImobilizadoTipo.componente                  = '.consulta-imobilizado-tipo';\n        vm.ConsultaImobilizadoTipo.model                       = 'vm.ConsultaImobilizadoTipo';\n        vm.ConsultaImobilizadoTipo.option.label_descricao      = 'Tipo:';\n        vm.ConsultaImobilizadoTipo.option.obj_consulta         = '/_16010/api/imobilizado/tipo';\n        vm.ConsultaImobilizadoTipo.option.tamanho_input        = 'input-maior';\n        vm.ConsultaImobilizadoTipo.option.tamanho_tabela       = 450;\n        vm.ConsultaImobilizadoTipo.option.campos_tabela        = [['DESCRICAO', 'Descrição'],['TAXA_DEPRECIACAO_TEXTO','Taxa Deprecição'],['VIDA_UTIL_TEXTO','Vida Útil']];\n        vm.ConsultaImobilizadoTipo.option.obj_ret              = ['DESCRICAO'];\n        vm.ConsultaImobilizadoTipo.compile();\n\n        vm.ConsultaImobilizadoTipo.onSelect = function(){\n            vm.Imobilizado.SELECTED.TAXA  = Number(vm.ConsultaImobilizadoTipo.item.dados.TAXA_DEPRECIACAO);\n            vm.Imobilizado.TIPO_TAXA      = Number(vm.ConsultaImobilizadoTipo.item.dados.TAXA_DEPRECIACAO);\n            vm.Imobilizado.TIPO_VIDA_UTIL = Number(vm.ConsultaImobilizadoTipo.item.dados.VIDA_UTIL); \n        };\n        \n\n        vm.IConsultaCcusto                        = vm.Consulta.getNew(true);\n        vm.IConsultaCcusto.componente             = '.i-consulta-ccusto';\n        vm.IConsultaCcusto.model                  = 'vm.IConsultaCcusto';\n        vm.IConsultaCcusto.option.label_descricao = 'Centro de Custo:';\n        vm.IConsultaCcusto.option.obj_consulta    = '/_20030/api/ccusto';\n        vm.IConsultaCcusto.option.tamanho_input   = 'input-maior';\n        vm.IConsultaCcusto.option.campos_tabela   = [['MASK', 'C. Custo'],['DESCRICAO','Descrição']];\n        vm.IConsultaCcusto.option.obj_ret         = ['MASK', 'DESCRICAO'];\n        vm.IConsultaCcusto.compile();\n\n        vm.IIConsultaProduto                             = vm.Consulta.getNew(true);\n        vm.IIConsultaProduto.componente                  = '.ii-consulta-produto';\n        vm.IIConsultaProduto.model                       = 'vm.IIConsultaProduto';\n        vm.IIConsultaProduto.option.label_descricao      = 'Produto:';\n        vm.IIConsultaProduto.option.obj_consulta         = '/_27050/api/produto';\n        vm.IIConsultaProduto.option.tamanho_input        = 'input-maior';\n        vm.IIConsultaProduto.option.tamanho_tabela       = 427;\n        vm.IIConsultaProduto.option.campos_tabela        = [['PRODUTO_ID', 'ID'],['PRODUTO_DESCRICAO','PRODUTO']];\n        vm.IIConsultaProduto.option.obj_ret              = ['PRODUTO_ID', 'PRODUTO_DESCRICAO'];\n        vm.IIConsultaProduto.setDataRequest({STATUS: 1});\n        vm.IIConsultaProduto.compile();\n        \n\t\tvm.Filtro                        = new Filtro();\n        vm.ImobilizadoItem               = new ImobilizadoItem();\n\t\tvm.Imobilizado                   = new Imobilizado();\n\t\tvm.ImobilizadoCcusto             = new ImobilizadoCcusto();        \n\t\tvm.DemonstrativoDepreciacaoAnual = new DemonstrativoDepreciacaoAnual();        \n        vm.Historico                     = new Historico();\n\n        vm.Imobilizado.consultarTodos();\n        \n        \n            vm.IConsultaCcusto.disable(true);\n            vm.ConsultaImobilizadoTipo.disable(true);\n        \n        $scope.$watch('vm.Imobilizado.ALTERANDO', function (newValue, oldValue, scope) {\n            if ( newValue == false ) {\n                vm.IConsultaCcusto.disable(true);\n                vm.ConsultaImobilizadoTipo.disable(true);\n            } else\n            if ( newValue == true ) {\n                vm.IConsultaCcusto.disable(false);\n                vm.ConsultaImobilizadoTipo.disable(false);\n            } \n        }, true);\n\n\n        $scope.$watch('vm.Imobilizado.SELECTED.ITENS', function (newValue, oldValue, scope) {\n            if(newValue != oldValue){\n                \n                sanitizeJson(newValue);\n                    \n                vm.ImobilizadoItem.TOTAL_PARCELA    = 0;\n                vm.ImobilizadoItem.TOTAL_QUANTIDADE = 0;\n                vm.ImobilizadoItem.TOTAL_VALOR      = 0;\n                vm.ImobilizadoItem.TOTAL_VALOR_UNITARIO_SEM_DESC      = 0;\n                vm.ImobilizadoItem.TOTAL_VALOR_DESCONTO      = 0;\n                vm.ImobilizadoItem.TOTAL_VALOR_ACRESCIMO      = 0;\n                vm.ImobilizadoItem.TOTAL_SUB      = 0;\n                vm.ImobilizadoItem.TOTAL_FRETE      = 0;\n                vm.ImobilizadoItem.TOTAL_ICMS       = 0;\n                vm.ImobilizadoItem.TOTAL_GERAL      = 0;\n                vm.ImobilizadoItem.TOTAL_SALDO      = 0;\n                \n                \n                for ( var i in vm.Imobilizado.SELECTED.ITENS ) {\n                    var item = vm.Imobilizado.SELECTED.ITENS[i];\n                    \n                    if ( item.EXCLUIDO == 1 ) continue;\n                    \n                    item.VALOR_TOTAL = item.QUANTIDADE * (item.VALOR_UNITARIO + item.FRETE_UNITARIO);\n\n                    vm.ImobilizadoItem.TOTAL_PARCELA    += item.VALOR_PARCELA;\n                    vm.ImobilizadoItem.TOTAL_QUANTIDADE += item.QUANTIDADE;\n                    vm.ImobilizadoItem.TOTAL_VALOR      += item.VALOR_UNITARIO;\n                    vm.ImobilizadoItem.TOTAL_VALOR_UNITARIO_SEM_DESC      += item.VALOR_UNITARIO_SEM_DESC;\n                    vm.ImobilizadoItem.TOTAL_VALOR_DESCONTO      += item.VALOR_DESCONTO;\n                    vm.ImobilizadoItem.TOTAL_VALOR_ACRESCIMO      += item.VALOR_ACRESCIMO;\n                    vm.ImobilizadoItem.TOTAL_SUB        += (item.VALOR_UNITARIO_SEM_DESC * item.QUANTIDADE);\n                    vm.ImobilizadoItem.TOTAL_FRETE      += item.FRETE_UNITARIO;\n                    vm.ImobilizadoItem.TOTAL_ICMS       += item.ICMS_UNITARIO;\n                    vm.ImobilizadoItem.TOTAL_GERAL      += item.VALOR_TOTAL;\n                    vm.ImobilizadoItem.TOTAL_SALDO      += item.SALDO;\n                }\n            }\n        }, true);\n\n        \n        vm.checkVisible = function(el_master,field_array_filtered) {\n            \n            var ret = false;\n            var array = el_master[field_array_filtered];\n\n            var ret = true;\n\n            if ( array != undefined ) {\n                ret = false;\n\n                for ( var i in array ) {\n                    var item = array[i];\n\n                    if ( item.VISIBLE == true  ) {\n                        ret = true;\n                        break;\n                    }\n                }\n            }\n\n            el_master.VISIBLE = ret;\n\n            return ret;\n        };\n\n        vm.exportTableToCsv = function(tabela,nome){\n            exportTableToCsv(nome, tabela);\n        };\n\n        vm.exportTableToXls = function(tabela,nome){\n            exportTableToXls(nome, tabela);\n        };\n\n        vm.exportTableToPrint = function(div,descricao){\n            var user = $('#usuario-descricao').val();\n            var filtro = 'Período : ' + vm.DemonstrativoDepreciacaoAnual.MES_1+'/'+vm.DemonstrativoDepreciacaoAnual.ANO_1 + ' a ' + vm.DemonstrativoDepreciacaoAnual.MES_2+'/'+vm.DemonstrativoDepreciacaoAnual.ANO_2  + ' - Visão: ' + vm.DemonstrativoDepreciacaoAnual.VISAO;\n            printHtml(div, descricao, filtro, user, '1.0.0',1,'');\n        };\n\n\t}   \n  "]}