{"version":3,"sources":["consulta-tabs.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"consulta-tabs.js","sourcesContent":["\t{ \r\n        /** Consulta generica (Tabulado)\r\n         * @deprecated \r\n         * */\r\n\t\t\r\n        \r\n\t\tvar filtro;\r\n\t\tvar campo_consulta;\r\n\t\tvar btn_filtro_consulta;\r\n\t\tvar input_group;\r\n\t\tvar itens_consulta;\r\n\t\tvar _consulta_id;\r\n\t\tvar tempo_focus;\r\n\t\tvar consulta_selecionado = false;\r\n        var obj;\r\n        \r\n       var campos_imputs   = [];\r\n       var recebe_valor    = [];\r\n       var campos_sql      = [];\r\n       var filtro_sql      = [];\r\n       var campos_tabela   = [];\r\n       var campos_titulo   = [];\r\n       var tamanho_tabela  = [];\r\n       var campos_titulo   = [];\r\n       var tabs            = [];\r\n       var tabs_consulta   = [];\r\n       var campo_ret       = [];\r\n       var limitar         = 0; \r\n       var total_width     = 0;\r\n       var fechar = 0;\r\n       \r\n       function setSelectTab(tab){\r\n            var cont  = $(tabs).length;\r\n\r\n            for (i = 0; i < cont; i++) {\r\n                \r\n                if(tab != i){\r\n                   $('.tabe-gered-'+i).addClass('desabilitado-lista');\r\n                }else{\r\n                   $('.tabe-gered-'+i).removeClass('desabilitado-lista');\r\n                }\r\n \r\n            }\r\n                \r\n        }\r\n        \r\n       function getTab(e){\r\n          $('.tabs-consulta').removeClass('tab-selected'); \r\n          $(e).addClass('tab-selected');\r\n          \r\n          var tab = $(e).attr('tabcont');\r\n          setSelectTab(tab);\r\n       }\r\n       \r\n       /** Retorna as classes dos campos que irão receber os valores que foram passados como parametro\r\n        * \r\n        *@param {json} x imputs com as classes   \r\n        *@returns {array}\r\n        **/\r\n       function getRecebeValor(x){\r\n         var obj = $(recebe_valor)[x];\r\n         \r\n         var vclass = '.'+$(obj).attr('objClass');\r\n         var vcampo = ''+$(obj).attr('objCampo');\r\n         \r\n         var ret = $(vclass);\r\n         \r\n         $(ret).attr('objCampo',vcampo);\r\n         \r\n         return ret;\r\n       }\r\n       \r\n       /** Retorna os campos da consulta que foram passados como parametro\r\n        *  \r\n        *@returns {array}\r\n        **/\r\n       function getCampos(){\r\n            \r\n            var vetor = new Array ();\r\n            var cont = $(campos_sql).length;\r\n            \r\n            for (i = 0; i < cont; i++) {\r\n               var obj = $(campos_sql)[i];\r\n               var campo = $(obj).val();\r\n               vetor[i] = campo;           \r\n\r\n             }\r\n         \r\n            return vetor;\r\n       }\r\n       \r\n       /** Retorna os as condições que foram passados como parametro\r\n        *  \r\n        *@returns {array}\r\n        **/\r\n       function getCondicao(){\r\n            \r\n            var vetor = new Array ();\r\n            var cont = $(filtro_sql).length;\r\n            \r\n            for (i = 0; i < cont; i++) {\r\n               var obj = $(filtro_sql)[i];\r\n               var campo = $(obj).val();\r\n               vetor[i] = campo;           \r\n\r\n             }\r\n         \r\n            return vetor;\r\n       }\r\n       \r\n       /** Retorna os campos da tabela que sera montada com os parametros\r\n        *  \r\n        *@returns {array}\r\n        **/\r\n       function getTabela(){\r\n            \r\n            var vetor = new Array ();\r\n            var cont = $(campos_tabela).length;\r\n            \r\n            for (i = 0; i < cont; i++) {\r\n               var obj = $(campos_tabela)[i];\r\n               var campo = $(obj).val();\r\n               vetor[i] = campo;           \r\n\r\n             }\r\n         \r\n            return vetor;\r\n       }\r\n       \r\n       /** Retorna os tamanhos dos campos da tabela que sera montada com os parametros\r\n        *  \r\n        *@returns {array}\r\n        **/\r\n       function getTamanhos(){\r\n            \r\n            var vetor = new Array ();\r\n            var cont = $(tamanho_tabela).length;\r\n            total_width = 0;\r\n            \r\n            for (i = 0; i < cont; i++) {\r\n               var obj = $(tamanho_tabela)[i];\r\n               var campo = $(obj).attr('objTamanho');\r\n               vetor[i] = campo;\r\n               total_width = parseInt(total_width) + parseInt(campo);\r\n\r\n            }\r\n            return vetor;\r\n        }\r\n       \r\n       /** Retorna os titulos dos campos da tabela que sera montada com os parametros\r\n        *  \r\n        *@returns {array}\r\n        **/\r\n       function getTitulos(){\r\n            \r\n            var vetor = new Array ();\r\n            var cont = $(campos_titulo).length;\r\n            \r\n            for (i = 0; i < cont; i++) {\r\n               var obj = $(campos_titulo)[i];\r\n               var campo = $(obj).val();\r\n               vetor[i] = campo;           \r\n\r\n             }\r\n         \r\n            return vetor;\r\n       }\r\n       \r\n       /** Retorna as tabs\r\n        *  \r\n        *@returns {array}\r\n        **/\r\n       function getTabs(){\r\n            \r\n            var vetor = new Array ();\r\n            var cont = $(tabs).length;\r\n            \r\n            for (i = 0; i < cont; i++) {\r\n               var obj = $(tabs)[i];\r\n               var campo = $(obj).val();\r\n               vetor[i] = campo;           \r\n\r\n             }\r\n         \r\n            return vetor;\r\n       }\r\n       \r\n       /** Retorna as arquivos de consulta das tabs\r\n        *  \r\n        *@returns {array}\r\n        **/\r\n       function getTabsConsulta(){\r\n            \r\n            var vetor = new Array ();\r\n            var cont = $(tabs_consulta).length;\r\n            \r\n            for (i = 0; i < cont; i++) {\r\n               var obj = $(tabs_consulta)[i];\r\n               var campo = $(obj).val();\r\n               vetor[i] = campo;           \r\n\r\n             }\r\n         \r\n            return vetor;\r\n       }\r\n       \r\n       /** Seta os valores dos campos Ocultos, e Recebe valor como vazio\r\n        **/\r\n       function empytValores(){\r\n           $(campos_imputs).val('');\r\n           \r\n           var cont = $(recebe_valor).length;\r\n           \r\n           for (i = 0; i < cont; i++) {\r\n             var objrv = getRecebeValor(i);\r\n             \r\n             $(objrv).val('');\r\n             \r\n           }\r\n           \r\n       }\r\n       \r\n       /** adiciona os eventos dos items da lista que forão adicionados\r\n        * \r\n        *@param {json} e objeto jquey do form-group  \r\n        **/\r\n       function trataItens(e){\r\n            \r\n            itens_consulta = $(e).find('ul.consulta-lista li a');\r\n                        \r\n            selecItemListaConsulta( $(itens_consulta), campo_consulta );\r\n\r\n            $(itens_consulta)\r\n                .focusout(function() {\r\n\r\n                    if(tempo_focus) \r\n                        clearTimeout(tempo_focus);\r\n\r\n                    tempo_focus = setTimeout(function() {\r\n\r\n                        if( !$(e).find(itens_consulta).is(':focus') && \r\n                            !$(e).find(campo_consulta).is(':focus') && \r\n                            !$(e).find(btn_filtro_consulta).is(':focus') \r\n                        ) {\r\n                            $(campo_consulta).val('');\r\n                            fechaListaConsulta( input_group ,e);\r\n                        }\r\n\r\n                    }, 200);\r\n\r\n                });\r\n\r\n            $(campo_consulta)\r\n                .focusout(function() {\r\n\r\n                    if(tempo_focus) \r\n                        clearTimeout(tempo_focus);\r\n\r\n                    tempo_focus = setTimeout(function() {\r\n\r\n                        if( !$(itens_consulta).is(':focus') &&\r\n                            !$(_consulta_id).val() && \r\n                            !$(btn_filtro_consulta).is(':focus') \r\n                        ) {\r\n                            $(campo_consulta).val('');\r\n                            fechaListaConsulta( input_group ,e);\r\n                        }\r\n\r\n                    }, 200);\r\n\r\n                });\r\n        }\r\n        \r\n       \r\n\t\t/** Chama a consulta com os parametros passados como parametros\r\n        * \r\n        *@param {json} e objeto jquey que foi clicado  \r\n        **/\r\n\t\tfunction filtrarConsulta(e) {\r\n            \r\n            var base  = $(e).parent().parent().parent();\r\n            \r\n            var obj_parametros = $(base).find('._consulta_parametros');\r\n            var obj_imputs = $(base).find('._consulta_imputs');\r\n            \r\n            campos_imputs   = $(obj_imputs).find('._consulta_imputs');\r\n            \r\n            obj             = $(obj_parametros).find('._consulta_obj').val();\r\n            recebe_valor    = $(obj_parametros).find('._consulta_recebevalor');\r\n            campos_sql      = $(obj_parametros).find('._consulta_campos');\r\n            filtro_sql      = $(obj_parametros).find('._consulta_filtro');\r\n            campos_tabela   = $(obj_parametros).find('._consulta_tabela');\r\n            tamanho_tabela  = $(obj_parametros).find('._consulta_tabela');\r\n            campos_titulo   = $(obj_parametros).find('._consulta_titulo');\r\n            tabs            = $(obj_parametros).find('._consulta_tab');\r\n            tabs_consulta   = $(obj_parametros).find('._consulta_tab_consulta');\r\n            campo_ret       = $(obj_parametros).find('._consulta_ret');\r\n            limitar         = $(obj_parametros).find('._consulta_limitar').val(); \r\n\r\n\t\t\tcampo_consulta\t\t= $(base).find('#consulta-descricao');\t//campo\r\n\t\t\tbtn_filtro_consulta\t= $(base).find('.btn-filtro-consulta');\r\n\r\n\t\t\tinput_group\t\t\t= $(campo_consulta).parent('.input-group');\t//input-group\r\n\t\t\t_consulta_id\t\t= $(base).find('._valor_selecionado_consulta');\r\n\r\n\t\t\tfiltro = campo_consulta.val(); \r\n            \r\n\t\t\t//esvazia campo hidden caso algum item já tenha sido escolhido antes\r\n\t\t\tif(consulta_selecionado){ \r\n\t\t\t\t$(_consulta_id).val('');\r\n                empytValores();\r\n            }\r\n\r\n\t\t\tif( !filtro ) {\r\n\t\t\t\tfechaListaConsulta( input_group ,e);\r\n\t\t\t\t$(_consulta_id).val('');\r\n\t\t\t\tempytValores();\r\n            }\r\n            \r\n            var campos      = getCampos();\r\n            var condicao    = getCondicao();\r\n            var tabela      = getTabela();\r\n            var titulos     = getTitulos();\r\n            var tamanhos    = getTamanhos();\r\n            var tab         = getTabs();\r\n            var tab_con     = getTabsConsulta();\r\n            var limit       = limitar;\r\n            \r\n            var dadosEnvio = {'filtro': filtro, 'campos': campos, 'obj': obj, 'condicao': condicao, 'tabela':tabela, 'titulos':titulos, 'tamanhos':tamanhos, 'tabs':tab, 'tabs_consulta':tab_con, 'limit':limit};\r\n            \r\n            $(base).find('.lista-consulta-container').css('width',total_width);\r\n            \r\n            var url_action = \"/consultaAll\";\r\n            var dados = dadosEnvio;\r\n            var type = \"POST\";\r\n            \r\n            function success(data){\r\n              setSelectTab(0);  \r\n              abreListaConsulta( input_group );\r\n\t\t\t \t\t\r\n\t\t\t\t\t$(base).find('.lista-consulta')\r\n\t\t\t\t\t\t.html(data);\r\n\r\n\t\t\t\t\t//existem dados cadastrados\r\n\t\t\t\t\tif( data.indexOf('nao-cadastrado') === -1 ) {\r\n                        trataItens(base);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\t$(_consulta_id).val('');\r\n\r\n\t\t\t\t\t\t$(campo_consulta)\r\n\t\t\t\t\t\t\t.focusout(function() {\r\n\t\t\t\t\t\t\t\tif( $(base).find('.lista-consulta').children().children().hasClass('nao-cadastrado') ) {\r\n\t\t\t\t\t\t\t\t\t$(campo_consulta).val('');\r\n\t\t\t\t\t\t\t\t\tfechaListaConsulta( input_group ,base);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}  \r\n            }\r\n            \r\n\r\n            execAjax2(type,url_action,dados,success,false,btn_filtro_consulta,false);\r\n\t\t}\r\n        \r\n        \r\n        \r\n        /** Chama a consulta da procima pagina a ser caregada\r\n        * \r\n        *@param {json} e objeto jquey que foi clicado  \r\n        **/\r\n\t\tfunction getMais(e) {\r\n            \r\n            var obj = $(e).closest('.form-group');\r\n            \r\n            $(obj).find('._valida_fechar_lista').val(1);\r\n            \r\n            btn_filtro_consulta\t= $(obj).find('.btn-filtro-consulta');\r\n            \r\n            var tag = $(e).attr('tag');\r\n            var pag = $(e).attr('pag');\r\n            var tab = $('.tab-selected').attr('tabcont');\r\n            \r\n            var mais_all = $(e).parent().find('.btn-caregar-mais-all');\r\n            \r\n            var url_action = \"/consultaMais\";\r\n            var dados = {'tag':tag, 'pag':pag, 'tab':tab};\r\n            var type = \"POST\";\r\n            \r\n            function success(data){\r\n              $(e).parent().append(data);\r\n              $(e).remove();\r\n              $(mais_all).remove();\r\n              \r\n              trataItens(obj);\r\n              \r\n              $(obj).find('._valida_fechar_lista').val(0);\r\n            }\r\n\r\n            execAjax2(type,url_action,dados,success,false,btn_filtro_consulta,false);\r\n            \r\n            \r\n\t\t}\r\n        \r\n        /** Chama a consulta com todas as paginas que estão faltando serem caregadas\r\n        * \r\n        *@param {json} e objeto jquey que foi clicado  \r\n        **/\r\n\t\tfunction getAll(e) {\r\n            \r\n            var obj = $(e).closest('.form-group');\r\n            \r\n            $(obj).find('._valida_fechar_lista').val(1);\r\n              \r\n            btn_filtro_consulta\t= $(obj).find('.btn-filtro-consulta');\r\n            \r\n            var tag = $(e).attr('tag');\r\n            var pag = $(e).attr('pag');\r\n            var tab = $('.tab-selected').attr('tabcont');\r\n            \r\n            var mais = $(e).parent().find('.btn-caregar-mais');\r\n            \r\n            var url_action = \"/consultaMaisAll\";\r\n            var dados = {'tag':tag, 'pag':pag, 'tab':tab};\r\n            var type = \"POST\";\r\n            \r\n            function success(data){\r\n              $(e).parent().append(data);\r\n              $(e).remove();\r\n              $(mais).remove();\r\n              \r\n              trataItens(obj);\r\n              \r\n              $(obj).find('._valida_fechar_lista').val(0);\r\n            }\r\n\r\n            execAjax2(type,url_action,dados,success,false,btn_filtro_consulta,false);\r\n\t\t}\r\n\r\n\t\t/** Mostra lista com o resultado da consulta na tela\r\n        * \r\n        *@param {json} consulta objeto jquey que contem a lista  \r\n        **/\r\n\t\tfunction abreListaConsulta(consulta) {\r\n\t\t\t\r\n\t\t\t$(consulta)\r\n\t\t\t\t.next('.lista-consulta-container')\r\n\t\t\t\t.addClass('ativo');\r\n\t\t\r\n\t\t\t$(btn_filtro_consulta)\r\n\t\t\t\t.attr('tabindex', '-1');\r\n\t\t}\r\n\r\n\t\t/** Fecha lista com o resultado da consulta na tela\r\n        * \r\n        *@param {json} consulta objeto jquey que contem a lista \r\n        *@param {json} e objeto jquey do form-group  \r\n        **/\r\n\t\tfunction fechaListaConsulta(consulta,e) {\r\n         /*   \r\n            fechar = $(e).find('._valida_fechar_lista').val();\r\n            \r\n            if (fechar == 0){\r\n\t\t\t$(consulta)\r\n\t\t\t\t.next('.lista-consulta-container')\r\n\t\t\t\t.removeClass('ativo')\r\n\t\t\t\t.children('.lista-consulta')\r\n\t\t\t\t.empty();\r\n\t\t\r\n\t\t\t$(btn_filtro_consulta)\r\n\t\t\t\t.removeAttr('tabindex');\r\n            }else{\r\n              $(itens_consulta).focus();  \r\n            }   \r\n           \r\n           //*/\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Preencher campos de acordo com o item selecionado.\r\n\t\t * \r\n\t\t * @param {json} itens Item que foi clicado\r\n\t\t * @param {json} campo Campos que recebe valor\r\n\t\t */\r\n\t\tfunction selecItemListaConsulta(itens, campo) {\r\n            \r\n                $(itens).click(function(e) {\r\n\r\n                    var obj = $(campos_imputs).closest('.form-group');\r\n\r\n                    e.preventDefault();\r\n\r\n                    var cont  = $(recebe_valor).length;\r\n                    var cont2 = $(campo_ret).length;\r\n                    var cont3 = $(campos_imputs).length;\r\n\r\n                        for (i = 0; i < cont; i++) {\r\n                          var objrv = getRecebeValor(i);\r\n\t\t\t\t\t\t  \r\n\t\t\t\t\t\t  if ($(objrv).attr('objcampo') == 'clear') {\r\n\t\t\t\t\t\t\tvar objValor = ''; \r\n\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t  else {\r\n\t\t\t\t\t\t\tvar clas = '._consulta_'+$(objrv).attr('objcampo');\r\n\t\t\t\t\t\t\tvar objValor = $(this).find(clas).val();\r\n\t\t\t\t\t\t}\r\n\r\n                          $(objrv).val(objValor);\r\n\r\n                        }\r\n\r\n                        for (i = 0; i < cont3; i++) {\r\n                          var objrv = $(campos_imputs)[i];\r\n                          var clas = '._consulta_'+$(objrv).attr('objcampo');\r\n                          var objValor = $(this).find(clas).val();\r\n\r\n                          $(objrv).val(objValor);\r\n\r\n                        }\r\n\r\n                        var ret ='';\r\n                        for (i = 0; i < cont2; i++) {\r\n                            var objrv = $(campo_ret)[i];\r\n                            var clas = '._consulta_'+$(objrv).attr('objcampo');\r\n                            var objValor = $(this).find(clas).val();\r\n\r\n                            if (i == 0){\r\n                                ret = objValor;\r\n                            }else{\r\n                                ret = ret + ' - ' + objValor;\r\n                            } \r\n\r\n                        }\r\n\r\n                    $(campo)\r\n                        .val(ret)\r\n                        .focus();\r\n\r\n                    selecionadoConsulta(obj);\r\n\r\n                    $(_consulta_id)\r\n                        .val(1)\r\n                        .trigger('change');\r\n\r\n                    $(obj).find(\".consulta-descricao\").trigger( \"change\" );\r\n\r\n                    fechaListaConsulta( input_group, obj);\r\n                    consulta_selecionado = true;\r\n                });\r\n\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Se um item foi selecionado modifica os campos.\r\n\t\t * \r\n\t\t * @param {json} e Objeto jquey do form-group\r\n\t\t */\r\n\t\tfunction selecionadoConsulta(e) {\r\n            \r\n            var obj = e;\r\n            \r\n\t\t\t$(obj).find('#consulta-descricao')\r\n\t\t\t\t.attr('readonly', true);\r\n\r\n\t\t\t$(obj).find('.btn-filtro-consulta')\r\n\t\t\t\t.hide();\r\n            \r\n\t\t\t$(obj).find('.btn-apagar-filtro-consulta')\r\n\t\t\t\t.show()\r\n\t\t\t\t.click(function() {\r\n                \r\n                    var obj_parametros = $(this).parent().parent().parent().find('._consulta_parametros');\r\n                    var obj_imputs = $(this).parent().parent().parent().find('._consulta_imputs');\r\n\r\n                    campos_imputs   = $(obj_imputs).find('._consulta_imputs');\r\n                    recebe_valor    = $(obj_parametros).find('._consulta_recebevalor');\r\n                    \r\n\t\t\t\t\t$(this)\r\n\t\t\t\t\t\t.siblings('input')\r\n\t\t\t\t\t\t.removeAttr('readonly');\r\n\r\n\t\t\t\t\t$(this)\r\n\t\t\t\t\t\t.hide()\r\n\t\t\t\t\t\t.prev('button')\r\n\t\t\t\t\t\t.show();\r\n                \r\n                    empytValores();    \r\n\r\n\t\t\t\t\t$(obj).find('#consulta-descricao')\r\n\t\t\t\t\t\t.val('')\r\n\t\t\t\t\t\t.focus();\r\n\r\n\t\t\t\t\t$(obj).find('._valor_selecionado_consulta')\r\n\t\t\t\t\t\t.val('');\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Inicializa os eventos que irão disparaar as chamadas dos metodos de consulta\r\n\t\t */\r\n\t\tfunction iniciarFiltroConsulta() {\r\n\r\n            $(document).on('click','.btn-caregar-mais', function(e) {\r\n                getMais(this);\r\n            });\r\n            \r\n            \r\n            $(document).on('click','.tabs-consulta', function(e) {\r\n                getTab(this);\r\n            });\r\n            \r\n            $(document).on('click','.btn-caregar-mais-all', function(e) {\r\n                getAll(this);\r\n            });\r\n\t\t\t\r\n            $('._valor_selecionado_consulta').each(function() {\r\n                \r\n                //Se o item já estiver selecionado (tela de update), efetua as devidas ações.\r\n                if ( $(this).val() !== '' ){\r\n                    var obj = $(this).closest('.form-group');\r\n                    selecionadoConsulta(obj);\r\n                }\r\n                \r\n            });\r\n            \r\n\r\n\t\t\t//Botão de filtrar\r\n\t\t\t$('.btn-filtro-consulta').on({\r\n\r\n\t\t\t\tclick: function() {\r\n                    var obj = $(this).closest('.form-group');\r\n                    _consulta_id = $(obj).find('._valor_selecionado_consulta');\r\n                    \r\n\t\t\t\t\tif ( !$(_consulta_id).val() )\r\n\t\t\t\t\t\tfiltrarConsulta(this);\r\n\t\t\t\t},\r\n\r\n\t\t\t\tfocusout: function() {\r\n                    \r\n                    var obj = $(this).closest('.form-group');\r\n                    \r\n\t\t\t\t\tif(tempo_focus) clearTimeout(tempo_focus);\r\n\r\n\t\t\t\t\ttempo_focus = setTimeout(function() {\r\n\r\n\t\t\t\t\t\tif ( !$(obj).find('input[name=\"_consulta_id\"]').val() && \r\n\t\t\t\t\t\t\t $(obj).find('.lista-consulta').is(':empty') \r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t   $(obj).find('#consulta-descricao').val('');\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ( !$(obj).find('input[name=\"_consulta_id\"]').val() && \r\n\t\t\t\t\t\t\t !$(obj).find('.lista-consulta ul li a').is(':focus') && \r\n\t\t\t\t\t\t\t  $(obj).find('#consulta-descricao').val() \r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t$(obj).find('#consulta-descricao').val('');\r\n\t\t\t\t\t\t\tfechaListaConsulta(input_group,obj);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif ( !$(obj).find('input[name=\"_consulta_id\"]').val() && \r\n\t\t\t\t\t\t\t !$(obj).find('.lista-consulta ul li a').is(':focus') && \r\n\t\t\t\t\t\t\t !$(obj).find('#consulta-descricao').val() \r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tfechaListaConsulta(input_group,obj);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}, 200);\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t\t//Campo de filtro\r\n\t\t\t$('.consulta-descricao').on({\r\n\r\n\t\t\t\tkeydown: function(e) {\r\n                    var obj = $(this).closest('.form-group');\r\n                    \r\n\t\t\t\t\t//Eventos ap?s a escolha de um item\r\n\t\t\t\t\tif ( $(this).is('[readonly]') ) {\r\n\r\n\t\t\t\t\t\t//Deletar teclando 'Backspace' ou 'Delete'\r\n\t\t\t\t\t\tif ( (e.keyCode === 8) || (e.keyCode === 46) ) {\r\n\t\t\t\t\t\t\t$(obj).find('.btn-apagar-filtro-consulta').click();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\r\n\t\t\t\t\t\t//Pesquisar com 'Enter'\r\n\t\t\t\t\t\tif (e.keyCode === 13) {\r\n\t\t\t\t\t\t\tvar obj = $(this).closest('.form-group');\r\n\t\t\t\t\t\t\t_consulta_id = $(obj).find('._valor_selecionado_consulta');\r\n\r\n\t\t\t\t\t\t\tif ( !$(_consulta_id).val() )\r\n\t\t\t\t\t\t\t\tfiltrarConsulta(this);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\tfocusout: function() {\r\n                    var obj = $(this).closest('.form-group');\r\n                    \r\n\t\t\t\t\t//verificar quando o campo deve ser zerado\r\n\t\t\t\t\t//*\r\n                    if(tempo_focus)\r\n\t\t\t\t\t\tclearTimeout(tempo_focus);\r\n\r\n\t\t\t\t\ttempo_focus = setTimeout(function() {\r\n                        \r\n\t\t\t\t\t\tif ( !$(obj).find('._valor_selecionado_consulta').val() && \r\n\t\t\t\t\t\t\t $(obj).find('.lista-consulta').is(':empty') &&\r\n\t\t\t\t\t\t\t !$(obj).find('.btn-filtro-consulta').is(':focus') \r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t$(obj).find('#consulta-descricao').val('');\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}, 200);\r\n                    //*/\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\t\t\r\n\t\t}\r\n\t\t\r\n\t\tiniciarFiltroConsulta();\r\n\t}\r\n    "]}